//===========================================================================
// 
// Undead07
// 
//   Warcraft III map script
//   Generated by the Warcraft III World Editor
//   Date: Sat Jun 01 16:24:37 2002
//   Map Author: Blizzard Entertainment
// 
//===========================================================================

//***************************************************************************
//*
//*  Global Variables
//*
//***************************************************************************

globals
    // User-defined
    group               udg_Shield01Group          = null
    unit                udg_Archmage01             = null
    unit                udg_Arthas                 = null
    unit                udg_Antonidas              = null
    group               udg_OpeningGhoulGroup01    = null
    group               udg_OpeningGhoulGroup02    = null
    unit                udg_KelThuzad              = null
    fogmodifier         udg_Archmage01Visibility   = null
    boolean             udg_OpeningCancelled
    unit                udg_OpeningKnight01        = null
    unit                udg_OpeningKnight02        = null
    fogmodifier         udg_OpeningVisibility      = null
    unit                udg_Archmage02             = null
    group               udg_Shield02Group          = null
    fogmodifier         udg_Archmage02Visibility   = null
    group               udg_Shield03Group          = null
    unit                udg_Archmage03             = null
    fogmodifier         udg_Archmage03Visibility   = null
    sound               udg_MeatWagon              = null
    unit                udg_PurpleArchmage         = null
    unit                udg_YellowArchmage         = null
    unit                udg_OrangeArchmage         = null
    questitem           udg_QuestReqArchmage01     = null
    questitem           udg_QuestReqArchmage02     = null
    questitem           udg_QuestReqArchmage03     = null
    quest               udg_QuestThreeArchmages    = null
    boolean             udg_Shield02Switch
    boolean             udg_Shield03Switch
    group               udg_GyroForce              = null
    group               udg_Shield02FrostWyrmGroup = null
    group               udg_Shield03FrostWyrmGroup = null
    unit                udg_FlyingSheep01          = null
    unit                udg_FlyingSheep02          = null
    unit                udg_Golem01                = null
    unit                udg_Golem02                = null
    leaderboard         udg_LeaderboardArchmage    = null
    player              udg_Player                 = null
    integer             udg_Archmages
    integer             udg_ArchmageCount
    boolean             udg_EndingCancelled
    unit                udg_ArchmageYellow         = null
    unit                udg_ArchmageHermit         = null
    group               udg_EndingRemove           = null
    boolean             udg_Shield01Switch
    boolean             udg_GAMEOVER
    group               udg_CinematicGroup         = null

    // Generated
    rect                gg_rct_Abom01              = null
    rect                gg_rct_Abom02              = null
    rect                gg_rct_AntonidasAttackArea = null
    rect                gg_rct_AntonidasContainmentArea = null
    rect                gg_rct_AntonidasTeleportOpening = null
    rect                gg_rct_Archmage01LeashArea = null
    rect                gg_rct_Archmage01Revealer  = null
    rect                gg_rct_Archmage02LeashArea = null
    rect                gg_rct_Archmage02Revealer  = null
    rect                gg_rct_Archmage03LeashArea = null
    rect                gg_rct_Archmage03Revealer  = null
    rect                gg_rct_Arthas_Confronts_Antonidas = null
    rect                gg_rct_Arthas_Kill_Antonidas = null
    rect                gg_rct_ArthasStart         = null
    rect                gg_rct_BlizzardArea        = null
    rect                gg_rct_BookFogArea         = null
    rect                gg_rct_Cage01              = null
    rect                gg_rct_Cage02              = null
    rect                gg_rct_Cage03              = null
    rect                gg_rct_Cage04              = null
    rect                gg_rct_Cage05              = null
    rect                gg_rct_CatapultMoveFinal   = null
    rect                gg_rct_CratesDeadTown      = null
    rect                gg_rct_DoodadDeathArea01   = null
    rect                gg_rct_DoodadDeathArea02   = null
    rect                gg_rct_DoodadDeathArea03   = null
    rect                gg_rct_EndingArthasDest    = null
    rect                gg_rct_EndingArthasStart   = null
    rect                gg_rct_EndingKelThuzadEnd  = null
    rect                gg_rct_EndingKelThuzadStart = null
    rect                gg_rct_ExoticBeastiary     = null
    rect                gg_rct_GyroForce           = null
    rect                gg_rct_HarvestGold         = null
    rect                gg_rct_HarvestTrees        = null
    rect                gg_rct_KelThuzad           = null
    rect                gg_rct_KelThuzadStart      = null
    rect                gg_rct_Knight01Post        = null
    rect                gg_rct_Knight02Post        = null
    rect                gg_rct_MeatWagonDest01     = null
    rect                gg_rct_MeatWagonDest02     = null
    rect                gg_rct_OpeningAntonidasTeleportEnd = null
    rect                gg_rct_OpeningArthasDest   = null
    rect                gg_rct_OpeningCancelledArea = null
    rect                gg_rct_OpeningCatapultMove = null
    rect                gg_rct_OpeningGhoulAttack01 = null
    rect                gg_rct_OpeningGhoulAttack02 = null
    rect                gg_rct_OpeningKelThuzadDest = null
    rect                gg_rct_OpeningRevealer     = null
    rect                gg_rct_Shield_01_DOODAD_KILL = null
    rect                gg_rct_Shield_02_DOODAD_KILL = null
    rect                gg_rct_Shield_03_DOODAD_KILL = null
    rect                gg_rct_Shield01            = null
    rect                gg_rct_Shield02            = null
    rect                gg_rct_Shield02Activate    = null
    rect                gg_rct_Shield03            = null
    rect                gg_rct_Shield03Activate    = null
    rect                gg_rct_StreamLoop01        = null
    rect                gg_rct_StreamLoop02        = null
    rect                gg_rct_Vault01             = null
    rect                gg_rct_VaultOfEnchantmentsArea = null
    rect                gg_rct_EndingPlayerGroupArea = null
    camerasetup         gg_cam_Camera_End_Alternate = null
    camerasetup         gg_cam_Camera_End_Alternate2 = null
    camerasetup         gg_cam_Ending01            = null
    camerasetup         gg_cam_Ending02            = null
    camerasetup         gg_cam_Ending02a           = null
    camerasetup         gg_cam_MeatWagon01         = null
    camerasetup         gg_cam_MeatWagon02         = null
    camerasetup         gg_cam_MeatWagon03         = null
    camerasetup         gg_cam_Opening_3a          = null
    camerasetup         gg_cam_Opening01           = null
    camerasetup         gg_cam_Opening02           = null
    camerasetup         gg_cam_Opening03           = null
    camerasetup         gg_cam_Opening04           = null
    sound               gg_snd_UndeadGlueScreenLoop1 = null
    sound               gg_snd_MassTeleportTarget  = null
    sound               gg_snd_U07Antonidas02      = null
    sound               gg_snd_U07Antonidas04      = null
    sound               gg_snd_U07Antonidas06      = null
    sound               gg_snd_U07Antonidas13      = null
    sound               gg_snd_U07Arthas01         = null
    sound               gg_snd_U07Arthas03         = null
    sound               gg_snd_U07Arthas05         = null
    sound               gg_snd_U07Arthas14         = null
    sound               gg_snd_U07Arthas15         = null
    sound               gg_snd_U07KelThuzad07      = null
    sound               gg_snd_U07KelThuzad08      = null
    sound               gg_snd_U07KelThuzad09      = null
    sound               gg_snd_U07KelThuzad11      = null
    sound               gg_snd_U07KelThuzad12      = null
    sound               gg_snd_U07KelThuzad16      = null
    sound               gg_snd_MeatWagonWhat101    = null
    sound               gg_snd_MeatWagonWhat2      = null
    sound               gg_snd_MetalMediumSliceFlesh1 = null
    sound               gg_snd_MeatWagonYes3       = null
    sound               gg_snd_SlaughterHouseWhat1 = null
    sound               gg_snd_MeatWagonYesAttack2 = null
    sound               gg_snd_HorseLoop1          = null
    sound               gg_snd_HorseLoop2          = null
    sound               gg_snd_HorseLoop3          = null
    sound               gg_snd_RejuvenationTarget1 = null
    sound               gg_snd_FaerieFireLaunch1   = null
    sound               gg_snd_MassTeleportTarget01 = null
    sound               gg_snd_Hint                = null
    sound               gg_snd_InvisibilityTarget  = null
    sound               gg_snd_ResurrectTarget     = null
    sound               gg_snd_Reincarnation       = null
    sound               gg_snd_LightningShieldTarget = null
    sound               gg_snd_HeroArchMageDeath   = null
    sound               gg_snd_HorseLoop101        = null
    sound               gg_snd_HorseLoop201        = null
    sound               gg_snd_HorseLoop301        = null
    sound               gg_snd_QuestActivateWhat1  = null
    sound               gg_snd_HeroArchMageDeath01 = null
    sound               gg_snd_WaterStreamLoop1    = null
    sound               gg_snd_DivineShield        = null
    trigger             gg_trg_Melee_Initialization = null
    trigger             gg_trg_Difficulty_Easy     = null
    trigger             gg_trg_Difficulty_Normal   = null
    trigger             gg_trg_Difficulty_Hard     = null
    trigger             gg_trg_SetupComputerPlayers = null
    trigger             gg_trg_StartCampaignAI     = null
    trigger             gg_trg_SetupComputerAlliances = null
    trigger             gg_trg_SetupPlayerAlliances = null
    trigger             gg_trg_SetupPlayerResources = null
    trigger             gg_trg_SetupArthas         = null
    trigger             gg_trg_SetupKelThuzad      = null
    trigger             gg_trg_SetupArchmage01     = null
    trigger             gg_trg_SetupArchmage02     = null
    trigger             gg_trg_SetupArchmage03     = null
    trigger             gg_trg_SetupArchmageExtra  = null
    trigger             gg_trg_SetupArchmageHermit = null
    trigger             gg_trg_SetupArchmageYellow = null
    trigger             gg_trg_SetupAntonidas      = null
    trigger             gg_trg_SetupOpeningKnights = null
    trigger             gg_trg_SetupGhoulGroup     = null
    trigger             gg_trg_SetupGyroForce      = null
    trigger             gg_trg_SetupQuests         = null
    trigger             gg_trg_SetupShields        = null
    trigger             gg_trg_SetupBookOfSummoning = null
    trigger             gg_trg_SetupArchmageCount  = null
    trigger             gg_trg_SetupScoreScreen    = null
    trigger             gg_trg_Leaderboard_Create  = null
    trigger             gg_trg_Leaderboard_Update  = null
    trigger             gg_trg_PurpleGold          = null
    trigger             gg_trg_YellowGold          = null
    trigger             gg_trg_OrangeGold          = null
    trigger             gg_trg_PurpleLumber        = null
    trigger             gg_trg_YellowLumber        = null
    trigger             gg_trg_OrangeLumber        = null
    trigger             gg_trg_ArthasLevelUp       = null
    trigger             gg_trg_KelThuzadLevelUp    = null
    trigger             gg_trg_Archmage01Leash     = null
    trigger             gg_trg_Archmage02Leash     = null
    trigger             gg_trg_Archmage03Leash     = null
    trigger             gg_trg_Load_Heroes         = null
    trigger             gg_trg_Load_Arthas         = null
    trigger             gg_trg_Load_KelThuzad      = null
    trigger             gg_trg_Next_Level_Prep     = null
    trigger             gg_trg_Next_Level_Run      = null
    trigger             gg_trg_Victory_Cheat       = null
    trigger             gg_trg_DefeatCheat         = null
    trigger             gg_trg_StartAIYellow       = null
    trigger             gg_trg_StartAIOrange       = null
    trigger             gg_trg_OpeningSetup        = null
    trigger             gg_trg_OpeningCatapultMove = null
    trigger             gg_trg_OpeningCancelled    = null
    trigger             gg_trg_Opening01           = null
    trigger             gg_trg_Opening02           = null
    trigger             gg_trg_Opening03           = null
    trigger             gg_trg_EndingCancelled     = null
    trigger             gg_trg_Ending01            = null
    trigger             gg_trg_Ending02            = null
    trigger             gg_trg_EndingAlly          = null
    trigger             gg_trg_Arthas_Kill_Antonidas = null
    trigger             gg_trg_ExoticBeastiaryQ    = null
    trigger             gg_trg_ExoticBeastiary     = null
    trigger             gg_trg_Cage01              = null
    trigger             gg_trg_Cage02              = null
    trigger             gg_trg_Cage03              = null
    trigger             gg_trg_Cage04              = null
    trigger             gg_trg_Cage05              = null
    trigger             gg_trg_GateDown            = null
    trigger             gg_trg_GyroShield02        = null
    trigger             gg_trg_GyroShield02WyrmGroupAdd = null
    trigger             gg_trg_GyroShield02WyrmGroupSubtract = null
    trigger             gg_trg_GyroShield02WyrmGroupSubtractDies = null
    trigger             gg_trg_GyroShield02Done    = null
    trigger             gg_trg_IZZZZZZZI           = null
    trigger             gg_trg_GyroShield03        = null
    trigger             gg_trg_GyroShield03WyrmGroupAdd = null
    trigger             gg_trg_GyroShield03WyrmGroupSubtract = null
    trigger             gg_trg_GyroShield03WyrmGroupSubtractDies = null
    trigger             gg_trg_GyroShield03Done    = null
    trigger             gg_trg_VaultOfEnchantments = null
    trigger             gg_trg_Vault01             = null
    trigger             gg_trg_Archmage01          = null
    trigger             gg_trg_Archmage01Dead      = null
    trigger             gg_trg_Archmage02          = null
    trigger             gg_trg_Archmage02Dead      = null
    trigger             gg_trg_Archmage03          = null
    trigger             gg_trg_Archmage03Dead      = null
    trigger             gg_trg_ContainmentArea     = null
    trigger             gg_trg_CratesDeadTown      = null
    trigger             gg_trg_Shield01Enter_AnimateDead = null
    trigger             gg_trg_Shield01Enter       = null
    trigger             gg_trg_Shield01Exit        = null
    trigger             gg_trg_Shield01Down        = null
    trigger             gg_trg_Shield01Damage      = null
    trigger             gg_trg_Shield02Enter_AnimateDead = null
    trigger             gg_trg_Shield02Activate    = null
    trigger             gg_trg_Shield02Enter       = null
    trigger             gg_trg_Shield02Exit        = null
    trigger             gg_trg_Shield02Down        = null
    trigger             gg_trg_Shield02Damage      = null
    trigger             gg_trg_Shield03Enter_AnimateDead = null
    trigger             gg_trg_Shield03Activate    = null
    trigger             gg_trg_Shield03Enter       = null
    trigger             gg_trg_Shield03Exit        = null
    trigger             gg_trg_Shield03Down        = null
    trigger             gg_trg_Shield03Damage      = null
    trigger             gg_trg_Victory             = null
    trigger             gg_trg_Defeat              = null
    unit                gg_unit_nbsm_0251          = null
    unit                gg_unit_hrif_0199          = null
    unit                gg_unit_hrif_0198          = null
    unit                gg_unit_hmtm_0214          = null
    unit                gg_unit_hfoo_0115          = null
    unit                gg_unit_Hamg_0019          = null
    unit                gg_unit_uabo_0138          = null
    unit                gg_unit_uslh_0045          = null
    unit                gg_unit_umtw_0256          = null
    unit                gg_unit_Hamg_0122          = null
    unit                gg_unit_hhou_0033          = null
    unit                gg_unit_hwtw_0048          = null
    unit                gg_unit_umtw_0079          = null
    unit                gg_unit_Hamg_0070          = null
    unit                gg_unit_hfoo_0221          = null
    unit                gg_unit_hsor_0178          = null
    unit                gg_unit_hctw_0151          = null
    unit                gg_unit_hkni_0058          = null
    unit                gg_unit_hkni_0059          = null
    unit                gg_unit_Hant_0123          = null
    unit                gg_unit_ugol_0201          = null
    unit                gg_unit_hmpr_0176          = null
    unit                gg_unit_uabo_0041          = null
    unit                gg_unit_hrif_0196          = null
    unit                gg_unit_hsor_0222          = null
    unit                gg_unit_Hamg_0010          = null
    unit                gg_unit_umtw_0042          = null
    unit                gg_unit_Hant_0172          = null
    unit                gg_unit_nwc1_0209          = null
    unit                gg_unit_hsor_0218          = null
    unit                gg_unit_hsor_0188          = null
    unit                gg_unit_Hamg_0014          = null
    unit                gg_unit_nmgv_0157          = null
    unit                gg_unit_nwc1_0165          = null
    unit                gg_unit_nwc1_0168          = null
    unit                gg_unit_nwc1_0183          = null
    unit                gg_unit_nwc1_0203          = null
    destructable        gg_dest_LTcr_0767          = null
    destructable        gg_dest_LTg1_0013          = null
    destructable        gg_dest_LTlt_0892          = null
endglobals

function InitGlobals takes nothing returns nothing
    set udg_Shield01Group                          = CreateGroup()
    set udg_OpeningGhoulGroup01                    = CreateGroup()
    set udg_OpeningGhoulGroup02                    = CreateGroup()
    set udg_OpeningCancelled                       = false
    set udg_Shield02Group                          = CreateGroup()
    set udg_Shield03Group                          = CreateGroup()
    set udg_Shield02Switch                         = true
    set udg_Shield03Switch                         = true
    set udg_GyroForce                              = CreateGroup()
    set udg_Shield02FrostWyrmGroup                 = CreateGroup()
    set udg_Shield03FrostWyrmGroup                 = CreateGroup()
    set udg_Archmages                              = 0
    set udg_ArchmageCount                          = 0
    set udg_EndingCancelled                        = false
    set udg_EndingRemove                           = CreateGroup()
    set udg_Shield01Switch                         = true
    set udg_GAMEOVER                               = false
    set udg_CinematicGroup                         = CreateGroup()
endfunction

//***************************************************************************
//*
//*  Sounds
//*
//***************************************************************************

function InitSounds takes nothing returns nothing
    set gg_snd_UndeadGlueScreenLoop1 = CreateSound( "Sound\\Ambient\\UndeadGlueScreenLoop1.wav", false, false, false, 10, 10, "DefaultEAXON" )
    call SetSoundParamsFromLabel( gg_snd_UndeadGlueScreenLoop1, "UndeadGlueScreenLoop" )
    call SetSoundDuration( gg_snd_UndeadGlueScreenLoop1, 7291 )
    set gg_snd_MassTeleportTarget = CreateSound( "Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTarget.wav", false, true, true, 10, 10, "SpellsEAX" )
    call SetSoundParamsFromLabel( gg_snd_MassTeleportTarget, "MassTeleport" )
    call SetSoundDuration( gg_snd_MassTeleportTarget, 4899 )
    set gg_snd_U07Antonidas02 = CreateSound( "Sound\\Dialogue\\UndeadCampaign\\Undead07\\U07Antonidas02.mp3", false, false, false, 10, 10, "" )
    call SetSoundParamsFromLabel( gg_snd_U07Antonidas02, "U07Antonidas02" )
    call SetSoundDuration( gg_snd_U07Antonidas02, 5277 )
    set gg_snd_U07Antonidas04 = CreateSound( "Sound\\Dialogue\\UndeadCampaign\\Undead07\\U07Antonidas04.mp3", false, false, false, 10, 10, "" )
    call SetSoundParamsFromLabel( gg_snd_U07Antonidas04, "U07Antonidas04" )
    call SetSoundDuration( gg_snd_U07Antonidas04, 9639 )
    set gg_snd_U07Antonidas06 = CreateSound( "Sound\\Dialogue\\UndeadCampaign\\Undead07\\U07Antonidas06.mp3", false, false, false, 10, 10, "" )
    call SetSoundParamsFromLabel( gg_snd_U07Antonidas06, "U07Antonidas06" )
    call SetSoundDuration( gg_snd_U07Antonidas06, 8856 )
    set gg_snd_U07Antonidas13 = CreateSound( "Sound\\Dialogue\\UndeadCampaign\\Undead07\\U07Antonidas13.mp3", false, false, false, 10, 10, "" )
    call SetSoundParamsFromLabel( gg_snd_U07Antonidas13, "U07Antonidas13" )
    call SetSoundDuration( gg_snd_U07Antonidas13, 3213 )
    set gg_snd_U07Arthas01 = CreateSound( "Sound\\Dialogue\\UndeadCampaign\\Undead07\\U07Arthas01.mp3", false, false, false, 10, 10, "" )
    call SetSoundParamsFromLabel( gg_snd_U07Arthas01, "U07Arthas01" )
    call SetSoundDuration( gg_snd_U07Arthas01, 11311 )
    set gg_snd_U07Arthas03 = CreateSound( "Sound\\Dialogue\\UndeadCampaign\\Undead07\\U07Arthas03.mp3", false, false, false, 10, 10, "" )
    call SetSoundParamsFromLabel( gg_snd_U07Arthas03, "U07Arthas03" )
    call SetSoundDuration( gg_snd_U07Arthas03, 4127 )
    set gg_snd_U07Arthas05 = CreateSound( "Sound\\Dialogue\\UndeadCampaign\\Undead07\\U07Arthas05.mp3", false, false, false, 10, 10, "" )
    call SetSoundParamsFromLabel( gg_snd_U07Arthas05, "U07Arthas05" )
    call SetSoundDuration( gg_snd_U07Arthas05, 3500 )
    set gg_snd_U07Arthas14 = CreateSound( "Sound\\Dialogue\\UndeadCampaign\\Undead07\\U07Arthas14.mp3", false, false, false, 10, 10, "" )
    call SetSoundParamsFromLabel( gg_snd_U07Arthas14, "U07Arthas14" )
    call SetSoundDuration( gg_snd_U07Arthas14, 5669 )
    set gg_snd_U07Arthas15 = CreateSound( "Sound\\Dialogue\\UndeadCampaign\\Undead07\\U07Arthas15.mp3", false, false, false, 10, 10, "" )
    call SetSoundParamsFromLabel( gg_snd_U07Arthas15, "U07Arthas15" )
    call SetSoundDuration( gg_snd_U07Arthas15, 5590 )
    set gg_snd_U07KelThuzad07 = CreateSound( "Sound\\Dialogue\\UndeadCampaign\\Undead07\\U07KelThuzad07.mp3", false, false, false, 10, 10, "" )
    call SetSoundParamsFromLabel( gg_snd_U07KelThuzad07, "U07KelThuzad07" )
    call SetSoundDuration( gg_snd_U07KelThuzad07, 9300 )
    set gg_snd_U07KelThuzad08 = CreateSound( "Sound\\Dialogue\\UndeadCampaign\\Undead07\\U07KelThuzad08.mp3", false, false, false, 10, 10, "" )
    call SetSoundParamsFromLabel( gg_snd_U07KelThuzad08, "U07KelThuzad08" )
    call SetSoundDuration( gg_snd_U07KelThuzad08, 4415 )
    set gg_snd_U07KelThuzad09 = CreateSound( "Sound\\Dialogue\\UndeadCampaign\\Undead07\\U07KelThuzad09.mp3", false, false, false, 10, 10, "" )
    call SetSoundParamsFromLabel( gg_snd_U07KelThuzad09, "U07KelThuzad09" )
    call SetSoundDuration( gg_snd_U07KelThuzad09, 9770 )
    set gg_snd_U07KelThuzad11 = CreateSound( "Sound\\Dialogue\\UndeadCampaign\\Undead07\\U07KelThuzad11.mp3", false, false, false, 10, 10, "" )
    call SetSoundParamsFromLabel( gg_snd_U07KelThuzad11, "U07KelThuzad11" )
    call SetSoundDuration( gg_snd_U07KelThuzad11, 4937 )
    set gg_snd_U07KelThuzad12 = CreateSound( "Sound\\Dialogue\\UndeadCampaign\\Undead07\\U07KelThuzad12.mp3", false, false, false, 10, 10, "" )
    call SetSoundParamsFromLabel( gg_snd_U07KelThuzad12, "U07KelThuzad12" )
    call SetSoundDuration( gg_snd_U07KelThuzad12, 9143 )
    set gg_snd_U07KelThuzad16 = CreateSound( "Sound\\Dialogue\\UndeadCampaign\\Undead07\\U07KelThuzad16.mp3", false, false, false, 10, 10, "" )
    call SetSoundParamsFromLabel( gg_snd_U07KelThuzad16, "U07KelThuzad16" )
    call SetSoundDuration( gg_snd_U07KelThuzad16, 5381 )
    set gg_snd_MeatWagonWhat101 = CreateSound( "Units\\Undead\\Meatwagon\\MeatWagonWhat1.wav", false, true, true, 10, 10, "DefaultEAXON" )
    call SetSoundParamsFromLabel( gg_snd_MeatWagonWhat101, "MeatwagonWhat" )
    call SetSoundDuration( gg_snd_MeatWagonWhat101, 3352 )
    set gg_snd_MeatWagonWhat2 = CreateSound( "Units\\Undead\\Meatwagon\\MeatWagonWhat2.wav", false, true, true, 10, 10, "DefaultEAXON" )
    call SetSoundParamsFromLabel( gg_snd_MeatWagonWhat2, "MeatwagonWhat" )
    call SetSoundDuration( gg_snd_MeatWagonWhat2, 3136 )
    set gg_snd_MetalMediumSliceFlesh1 = CreateSound( "Sound\\Units\\Combat\\MetalMediumSliceFlesh1.wav", false, false, true, 10, 10, "CombatSoundsEAX" )
    call SetSoundParamsFromLabel( gg_snd_MetalMediumSliceFlesh1, "MetalMediumSliceFlesh" )
    call SetSoundDuration( gg_snd_MetalMediumSliceFlesh1, 659 )
    set gg_snd_MeatWagonYes3 = CreateSound( "Units\\Undead\\Meatwagon\\MeatWagonYes3.wav", false, true, true, 10, 10, "DefaultEAXON" )
    call SetSoundParamsFromLabel( gg_snd_MeatWagonYes3, "MeatwagonYes" )
    call SetSoundDuration( gg_snd_MeatWagonYes3, 3138 )
    set gg_snd_SlaughterHouseWhat1 = CreateSound( "Buildings\\Undead\\SlaughterHouse\\SlaughterHouseWhat1.wav", false, true, true, 10, 10, "DefaultEAXON" )
    call SetSoundParamsFromLabel( gg_snd_SlaughterHouseWhat1, "SlaughterHouseWhat" )
    call SetSoundDuration( gg_snd_SlaughterHouseWhat1, 3508 )
    set gg_snd_MeatWagonYesAttack2 = CreateSound( "Units\\Undead\\Meatwagon\\MeatWagonYesAttack2.wav", false, true, true, 10, 10, "DefaultEAXON" )
    call SetSoundParamsFromLabel( gg_snd_MeatWagonYesAttack2, "MeatwagonYesAttack" )
    call SetSoundDuration( gg_snd_MeatWagonYesAttack2, 3455 )
    set gg_snd_HorseLoop1 = CreateSound( "Units\\Human\\Knight\\HorseLoop1.wav", false, true, true, 10, 10, "DefaultEAXON" )
    call SetSoundParamsFromLabel( gg_snd_HorseLoop1, "HumanKnightMovement" )
    call SetSoundDuration( gg_snd_HorseLoop1, 2101 )
    set gg_snd_HorseLoop2 = CreateSound( "Units\\Human\\Knight\\HorseLoop2.wav", false, true, true, 10, 10, "DefaultEAXON" )
    call SetSoundParamsFromLabel( gg_snd_HorseLoop2, "HumanKnightMovement" )
    call SetSoundDuration( gg_snd_HorseLoop2, 3228 )
    set gg_snd_HorseLoop3 = CreateSound( "Units\\Human\\Knight\\HorseLoop3.wav", false, true, true, 10, 10, "DefaultEAXON" )
    call SetSoundParamsFromLabel( gg_snd_HorseLoop3, "HumanKnightMovement" )
    call SetSoundDuration( gg_snd_HorseLoop3, 5317 )
    set gg_snd_RejuvenationTarget1 = CreateSound( "Abilities\\Spells\\NightElf\\Rejuvenation\\RejuvenationTarget1.wav", false, true, true, 10, 10, "SpellsEAX" )
    call SetSoundParamsFromLabel( gg_snd_RejuvenationTarget1, "Rejuvenation" )
    call SetSoundDuration( gg_snd_RejuvenationTarget1, 1817 )
    set gg_snd_FaerieFireLaunch1 = CreateSound( "Abilities\\Spells\\NightElf\\FaerieFire\\FaerieFireLaunch1.wav", false, true, true, 10, 10, "SpellsEAX" )
    call SetSoundParamsFromLabel( gg_snd_FaerieFireLaunch1, "FaerieFire" )
    call SetSoundDuration( gg_snd_FaerieFireLaunch1, 2067 )
    set gg_snd_MassTeleportTarget01 = CreateSound( "Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTarget.wav", false, true, true, 10, 10, "SpellsEAX" )
    call SetSoundParamsFromLabel( gg_snd_MassTeleportTarget01, "MassTeleport" )
    call SetSoundDuration( gg_snd_MassTeleportTarget01, 4899 )
    set gg_snd_Hint = CreateSound( "Sound\\Interface\\Hint.wav", false, false, false, 10, 10, "" )
    call SetSoundParamsFromLabel( gg_snd_Hint, "Hint" )
    call SetSoundDuration( gg_snd_Hint, 2006 )
    set gg_snd_InvisibilityTarget = CreateSound( "Abilities\\Spells\\Human\\Invisibility\\InvisibilityTarget.wav", false, true, true, 10, 10, "SpellsEAX" )
    call SetSoundParamsFromLabel( gg_snd_InvisibilityTarget, "Invisibility" )
    call SetSoundDuration( gg_snd_InvisibilityTarget, 2043 )
    set gg_snd_ResurrectTarget = CreateSound( "Abilities\\Spells\\Human\\Resurrect\\ResurrectTarget.wav", false, true, true, 10, 10, "SpellsEAX" )
    call SetSoundParamsFromLabel( gg_snd_ResurrectTarget, "Resurrect" )
    call SetSoundDuration( gg_snd_ResurrectTarget, 3506 )
    set gg_snd_Reincarnation = CreateSound( "Abilities\\Spells\\Orc\\Reincarnation\\Reincarnation.wav", false, true, true, 10, 10, "SpellsEAX" )
    call SetSoundParamsFromLabel( gg_snd_Reincarnation, "Reincarnation" )
    call SetSoundDuration( gg_snd_Reincarnation, 2728 )
    set gg_snd_LightningShieldTarget = CreateSound( "Abilities\\Spells\\Orc\\LightningShield\\LightningShieldTarget.wav", false, true, true, 10, 10, "SpellsEAX" )
    call SetSoundParamsFromLabel( gg_snd_LightningShieldTarget, "LightningShield" )
    call SetSoundDuration( gg_snd_LightningShieldTarget, 3878 )
    set gg_snd_HeroArchMageDeath = CreateSound( "Units\\Human\\HeroArchMage\\HeroArchMageDeath.wav", false, true, true, 10, 10, "HeroAcksEAX" )
    call SetSoundParamsFromLabel( gg_snd_HeroArchMageDeath, "HeroArchMageDeath" )
    call SetSoundDuration( gg_snd_HeroArchMageDeath, 2902 )
    set gg_snd_HorseLoop101 = CreateSound( "Units\\Human\\Knight\\HorseLoop1.wav", false, true, true, 10, 10, "DefaultEAXON" )
    call SetSoundParamsFromLabel( gg_snd_HorseLoop101, "HumanKnightMovement" )
    call SetSoundDuration( gg_snd_HorseLoop101, 2101 )
    set gg_snd_HorseLoop201 = CreateSound( "Units\\Human\\Knight\\HorseLoop2.wav", false, true, true, 10, 10, "DefaultEAXON" )
    call SetSoundParamsFromLabel( gg_snd_HorseLoop201, "HumanKnightMovement" )
    call SetSoundDuration( gg_snd_HorseLoop201, 3228 )
    set gg_snd_HorseLoop301 = CreateSound( "Units\\Human\\Knight\\HorseLoop3.wav", false, true, true, 10, 10, "DefaultEAXON" )
    call SetSoundParamsFromLabel( gg_snd_HorseLoop301, "HumanKnightMovement" )
    call SetSoundDuration( gg_snd_HorseLoop301, 5317 )
    set gg_snd_QuestActivateWhat1 = CreateSound( "Sound\\Interface\\QuestActivateWhat1.wav", false, false, false, 10, 10, "" )
    call SetSoundParamsFromLabel( gg_snd_QuestActivateWhat1, "QuestLogModified" )
    call SetSoundDuration( gg_snd_QuestActivateWhat1, 539 )
    set gg_snd_HeroArchMageDeath01 = CreateSound( "Units\\Human\\HeroArchMage\\HeroArchMageDeath.wav", false, true, true, 10, 10, "HeroAcksEAX" )
    call SetSoundParamsFromLabel( gg_snd_HeroArchMageDeath01, "HeroArchMageDeath" )
    call SetSoundDuration( gg_snd_HeroArchMageDeath01, 2902 )
    set gg_snd_WaterStreamLoop1 = CreateSound( "Sound\\Ambient\\DoodadEffects\\WaterStreamLoop1.wav", true, true, true, 10, 10, "DoodadsEAX" )
    call SetSoundParamsFromLabel( gg_snd_WaterStreamLoop1, "StreamLoop" )
    call SetSoundDuration( gg_snd_WaterStreamLoop1, 2009 )
    set gg_snd_DivineShield = CreateSound( "Abilities\\Spells\\Human\\DivineShield\\DivineShield.wav", false, true, true, 10, 10, "SpellsEAX" )
    call SetSoundParamsFromLabel( gg_snd_DivineShield, "DivineShield" )
    call SetSoundDuration( gg_snd_DivineShield, 1955 )
endfunction

//***************************************************************************
//*
//*  Destructable Objects
//*
//***************************************************************************

function CreateAllDestructables takes nothing returns nothing
    local real life
    set gg_dest_LTcr_0767 = CreateDestructable( 'LTcr', -3456.0, -10240.0, 164.000, 1.008, 1 )
    set gg_dest_LTg1_0013 = CreateDestructable( 'LTg1', 832.0, -5440.0, 270.000, 0.900, 0 )
    set gg_dest_LTlt_0892 = CreateDestructable( 'LTlt', 1024.0, -10560.0, 270.000, 1.135, 5 )
endfunction

//***************************************************************************
//*
//*  Items
//*
//***************************************************************************

function CreateAllItems takes nothing returns nothing
    local integer itemID

    call CreateItem( 'belv', -3440.8, 2609.1 )
endfunction

//***************************************************************************
//*
//*  Dropped Unit Items
//*
//***************************************************************************

function Unit000070_DropItems takes nothing returns nothing
    local unit trigUnit
    local integer itemID

    set trigUnit = GetTriggerUnit()
    if (not IsUnitHidden(trigUnit)) then
        // Item set 0
        call RandomDistReset(  )
        call RandomDistAddItem( 'rin1', 100 )
        set itemID = RandomDistChoose(  )
        call UnitDropItem( trigUnit, itemID )

    endif

    call DestroyTrigger(GetTriggeringTrigger())
endfunction

function Unit000228_DropItems takes nothing returns nothing
    local unit trigUnit
    local integer itemID

    set trigUnit = GetTriggerUnit()
    if (not IsUnitHidden(trigUnit)) then
        // Item set 0
        call RandomDistReset(  )
        call RandomDistAddItem( 'hlst', 100 )
        set itemID = RandomDistChoose(  )
        call UnitDropItem( trigUnit, itemID )

    endif

    call DestroyTrigger(GetTriggeringTrigger())
endfunction

function Unit000229_DropItems takes nothing returns nothing
    local unit trigUnit
    local integer itemID

    set trigUnit = GetTriggerUnit()
    if (not IsUnitHidden(trigUnit)) then
        // Item set 0
        call RandomDistReset(  )
        call RandomDistAddItem( 'pams', 100 )
        set itemID = RandomDistChoose(  )
        call UnitDropItem( trigUnit, itemID )

    endif

    call DestroyTrigger(GetTriggeringTrigger())
endfunction


//***************************************************************************
//*
//*  Unit Creation
//*
//***************************************************************************

//===========================================================================
function CreateBuildingsForPlayer1 takes nothing returns nothing
    local player p = Player(1)
    local unit u
    local integer unitID
    local trigger t
    local real life

    set gg_unit_hhou_0033 = CreateUnit( p, 'hhou', -2816.0, -9664.0, 270.000 )
    set life = GetUnitState( gg_unit_hhou_0033, UNIT_STATE_LIFE )
    call SetUnitState( gg_unit_hhou_0033, UNIT_STATE_LIFE, 0.10 * life )
    set u = CreateUnit( p, 'htow', -3264.0, -9664.0, 270.000 )
    set life = GetUnitState( u, UNIT_STATE_LIFE )
    call SetUnitState( u, UNIT_STATE_LIFE, 0.06 * life )
    set u = CreateUnit( p, 'hhou', -2880.0, -9984.0, 270.000 )
    set life = GetUnitState( u, UNIT_STATE_LIFE )
    call SetUnitState( u, UNIT_STATE_LIFE, 0.05 * life )
    set gg_unit_hwtw_0048 = CreateUnit( p, 'hwtw', -2944.0, -9472.0, 270.000 )
    set life = GetUnitState( gg_unit_hwtw_0048, UNIT_STATE_LIFE )
    call SetUnitState( gg_unit_hwtw_0048, UNIT_STATE_LIFE, 0.05 * life )
    set u = CreateUnit( p, 'ndgt', -3840.0, -4992.0, 270.000 )
    set u = CreateUnit( p, 'ndgt', 0.0, 6976.0, 270.000 )
    set u = CreateUnit( p, 'ndgt', 0.0, 6144.0, 270.000 )
    set u = CreateUnit( p, 'ndgt', 1024.0, 6976.0, 270.000 )
    set u = CreateUnit( p, 'harm', 2944.0, -1536.0, 270.000 )
    set u = CreateUnit( p, 'ndgt', 1024.0, 6144.0, 270.000 )
    set u = CreateUnit( p, 'ndgt', 64.0, -7232.0, 270.000 )
    set u = CreateUnit( p, 'ndgt', 1600.0, -7232.0, 270.000 )
    set u = CreateUnit( p, 'ndgt', 3328.0, -4992.0, 270.000 )
    set u = CreateUnit( p, 'ndgt', -2816.0, -4992.0, 270.000 )
    set u = CreateUnit( p, 'ndgt', -1792.0, -4992.0, 270.000 )
    set u = CreateUnit( p, 'ndgt', -3904.0, -320.0, 270.000 )
    set u = CreateUnit( p, 'ndgt', -3008.0, -320.0, 270.000 )
    set u = CreateUnit( p, 'harm', -4480.0, 8448.0, 270.000 )
    set gg_unit_nbsm_0251 = CreateUnit( p, 'nbsm', 512.0, 8384.0, 270.000 )
endfunction

//===========================================================================
function CreateUnitsForPlayer1 takes nothing returns nothing
    local player p = Player(1)
    local unit u
    local integer unitID
    local trigger t
    local real life

    set gg_unit_Hamg_0014 = CreateUnit( p, 'Hamg', -4324.7, -8428.6, 264.230 )
    set t = CreateTrigger(  )
    call TriggerRegisterUnitEvent( t, gg_unit_Hamg_0014, EVENT_UNIT_DEATH )
    call TriggerAddAction( t, function Unit000228_DropItems )
    set gg_unit_Hamg_0019 = CreateUnit( p, 'Hamg', -3521.4, 1248.5, 270.051 )
    set u = CreateUnit( p, 'hgyr', 24.5, 6112.6, 200.221 )
    set u = CreateUnit( p, 'hrif', -1597.2, -5070.3, 248.233 )
    set u = CreateUnit( p, 'hrif', -2011.8, -5077.4, 313.680 )
    set u = CreateUnit( p, 'hrif', -4412.3, -5086.6, 230.489 )
    set u = CreateUnit( p, 'hrif', -3908.0, -5215.2, 182.488 )
    set gg_unit_hkni_0058 = CreateUnit( p, 'hkni', 996.1, -5744.9, 291.525 )
    set gg_unit_hkni_0059 = CreateUnit( p, 'hkni', 666.5, -5734.8, 261.595 )
    set u = CreateUnit( p, 'hsor', 3041.7, -2547.6, 13.206 )
    set u = CreateUnit( p, 'hsor', 3144.3, -2628.0, 182.752 )
    set u = CreateUnit( p, 'hgyr', 1062.4, 6107.7, 16.897 )
    set u = CreateUnit( p, 'hgyr', 1051.6, 7028.7, 309.758 )
    set u = CreateUnit( p, 'hgyr', -81.3, 7091.1, 145.628 )
    set u = CreateUnit( p, 'hmpr', 2895.9, -3011.1, 47.034 )
    set u = CreateUnit( p, 'hwat', 3194.9, -2819.0, 155.285 )
    set gg_unit_Hamg_0070 = CreateUnit( p, 'Hamg', 2941.9, -2791.7, 216.100 )
    set t = CreateTrigger(  )
    call TriggerRegisterUnitEvent( t, gg_unit_Hamg_0070, EVENT_UNIT_DEATH )
    call TriggerAddAction( t, function Unit000070_DropItems )
    set u = CreateUnit( p, 'hmpr', 717.6, 1964.8, 89.981 )
    set u = CreateUnit( p, 'hrif', 1059.8, 1630.3, 232.719 )
    set u = CreateUnit( p, 'hmpr', 3159.9, -3000.8, 280.336 )
    set u = CreateUnit( p, 'hrif', 3463.0, -4846.8, 78.313 )
    set u = CreateUnit( p, 'hrif', 679.3, 1570.6, 156.615 )
    set u = CreateUnit( p, 'hrif', 3249.1, -4838.1, 104.165 )
    set u = CreateUnit( p, 'hrif', 767.0, -1408.0, 180.071 )
    set u = CreateUnit( p, 'hsor', 855.3, 1878.2, 76.203 )
    set u = CreateUnit( p, 'hmpr', 572.2, -1559.5, 221.821 )
    set u = CreateUnit( p, 'hfoo', 2833.3, -2531.9, 67.392 )
    set u = CreateUnit( p, 'hfoo', 2842.4, -2318.6, 122.556 )
    set u = CreateUnit( p, 'hrif', 2739.6, -1734.1, 19.732 )
    set u = CreateUnit( p, 'hrif', 2701.4, -1602.7, 282.709 )
    set u = CreateUnit( p, 'hmtm', 3237.4, -1543.5, 197.859 )
    set u = CreateUnit( p, 'hmtm', 3201.2, -1413.0, 293.168 )
    set u = CreateUnit( p, 'hrif', 3013.7, -1795.6, 356.737 )
    set gg_unit_hfoo_0115 = CreateUnit( p, 'hfoo', -3602.1, 2324.4, 78.785 )
    set gg_unit_Hamg_0122 = CreateUnit( p, 'Hamg', 830.3, -3792.0, 90.123 )
    set gg_unit_Hant_0123 = CreateUnit( p, 'Hant', 829.7, -5864.8, 266.536 )
    set u = CreateUnit( p, 'hmpr', 719.4, 1743.4, 256.000 )
    set u = CreateUnit( p, 'hsor', -1078.6, -1856.6, 154.143 )
    set u = CreateUnit( p, 'hsor', -1234.3, -1991.6, 256.868 )
    set u = CreateUnit( p, 'hmpr', 690.5, 7072.3, 252.605 )
    set u = CreateUnit( p, 'hmpr', 287.8, 7107.7, 278.031 )
    set u = CreateUnit( p, 'hsor', 787.8, -4276.3, 251.990 )
    set gg_unit_hmpr_0176 = CreateUnit( p, 'hmpr', 1193.2, -4244.7, 285.039 )
    set gg_unit_hsor_0178 = CreateUnit( p, 'hsor', 613.7, -4264.6, 251.990 )
    set u = CreateUnit( p, 'hsor', -43.0, 6539.3, 148.628 )
    set u = CreateUnit( p, 'hrif', 1146.5, -4348.3, 248.837 )
    set u = CreateUnit( p, 'hmpr', 1046.9, -4169.1, 285.039 )
    set gg_unit_hsor_0188 = CreateUnit( p, 'hsor', 989.9, 6767.5, 261.981 )
    set u = CreateUnit( p, 'hrif', 884.7, -4306.1, 311.990 )
    set u = CreateUnit( p, 'hwt2', -890.7, 1206.2, 28.873 )
    set u = CreateUnit( p, 'hwt2', -1915.6, 2249.0, 26.148 )
    set u = CreateUnit( p, 'hwt2', -1817.7, 541.0, 353.847 )
    set gg_unit_hrif_0196 = CreateUnit( p, 'hrif', 1042.3, -4320.0, 263.394 )
    set u = CreateUnit( p, 'hrif', 648.7, -4347.1, 311.990 )
    set gg_unit_hrif_0198 = CreateUnit( p, 'hrif', 752.0, -4358.6, 311.990 )
    set gg_unit_hrif_0199 = CreateUnit( p, 'hrif', 550.7, -4364.5, 284.548 )
    set u = CreateUnit( p, 'hfoo', -3278.3, 2456.6, 276.820 )
    set u = CreateUnit( p, 'hrif', 1341.2, 5312.2, 336.181 )
    set u = CreateUnit( p, 'hrif', 1376.5, 5189.8, 272.854 )
    set u = CreateUnit( p, 'hrif', 1432.3, 5027.3, 21.820 )
    set u = CreateUnit( p, 'hrif', 1406.5, 4614.3, 137.355 )
    set u = CreateUnit( p, 'hmtm', 1184.0, 5158.1, 209.549 )
    set gg_unit_hmtm_0214 = CreateUnit( p, 'hmtm', 1209.9, 4620.5, 156.648 )
    set u = CreateUnit( p, 'hsor', 1182.4, 5048.8, 241.014 )
    set gg_unit_hsor_0218 = CreateUnit( p, 'hsor', 1209.0, 4439.4, 57.746 )
    set u = CreateUnit( p, 'hmpr', 993.3, 5101.4, 79.203 )
    set gg_unit_hfoo_0221 = CreateUnit( p, 'hfoo', -3660.4, 2492.1, 317.646 )
    set gg_unit_hsor_0222 = CreateUnit( p, 'hsor', -3808.5, 2607.6, 32.553 )
    set u = CreateUnit( p, 'hmpr', -3018.0, 2694.3, 277.611 )
    set u = CreateUnit( p, 'hfoo', -1084.6, -2016.1, 355.397 )
    set u = CreateUnit( p, 'hfoo', -1218.0, -2124.4, 354.177 )
    set u = CreateUnit( p, 'hgyr', -3060.8, 8425.9, 3.098 )
    set u = CreateUnit( p, 'hgyr', -3327.0, 8193.4, 124.688 )
    set u = CreateUnit( p, 'hgyr', -3598.9, 7993.6, 121.556 )
    set u = CreateUnit( p, 'hgyr', -3893.1, 8193.6, 42.914 )
    set u = CreateUnit( p, 'hgyr', -4180.3, 8467.5, 248.716 )
    set u = CreateUnit( p, 'hkni', 3602.7, 5032.5, 123.292 )
    set u = CreateUnit( p, 'hsor', 3840.4, 4950.0, 146.727 )
    set u = CreateUnit( p, 'hkni', 3517.7, 5367.2, 307.429 )
    set u = CreateUnit( p, 'hsor', 3742.9, 5268.2, 75.918 )
    set u = CreateUnit( p, 'hfoo', -3633.8, 13.0, 50.341 )
    set u = CreateUnit( p, 'hfoo', -3757.8, -49.2, 170.898 )
    set u = CreateUnit( p, 'hsor', -3784.6, 74.6, 226.622 )
    set u = CreateUnit( p, 'hmpr', -3916.8, 38.1, 249.375 )
endfunction

//===========================================================================
function CreateBuildingsForPlayer3 takes nothing returns nothing
    local player p = Player(3)
    local unit u
    local integer unitID
    local trigger t
    local real life

    set u = CreateUnit( p, 'hkee', -3456.0, -3456.0, 270.000 )
    set u = CreateUnit( p, 'hbar', -3200.0, -3968.0, 270.000 )
    set u = CreateUnit( p, 'halt', -3680.0, -3936.0, 270.000 )
    set u = CreateUnit( p, 'hlum', -3872.0, -2528.0, 270.000 )
    set u = CreateUnit( p, 'hhou', -3584.0, -4288.0, 270.000 )
    set u = CreateUnit( p, 'hhou', -3968.0, -4288.0, 270.000 )
    set u = CreateUnit( p, 'hars', -2688.0, -4096.0, 270.000 )
    set u = CreateUnit( p, 'hgtw', -2432.0, -3456.0, 270.000 )
    set u = CreateUnit( p, 'hgtw', -2432.0, -2944.0, 270.000 )
    set u = CreateUnit( p, 'hhou', -4160.0, -4288.0, 270.000 )
    set u = CreateUnit( p, 'hhou', -3776.0, -4288.0, 270.000 )
    set u = CreateUnit( p, 'hhou', -4224.0, -2368.0, 270.000 )
    set u = CreateUnit( p, 'hhou', -3392.0, -4288.0, 270.000 )
    set u = CreateUnit( p, 'hgtw', -4096.0, -4032.0, 270.000 )
    set u = CreateUnit( p, 'hwtw', -4224.0, -3776.0, 270.000 )
    set u = CreateUnit( p, 'hbla', -4224.0, -2944.0, 270.000 )
    set u = CreateUnit( p, 'harm', -3520.0, -2880.0, 270.000 )
    set u = CreateUnit( p, 'hbar', -2944.0, -2688.0, 270.000 )
    set u = CreateUnit( p, 'hhou', -4224.0, -2560.0, 270.000 )
endfunction

//===========================================================================
function CreateUnitsForPlayer3 takes nothing returns nothing
    local player p = Player(3)
    local unit u
    local integer unitID
    local trigger t
    local real life

    set u = CreateUnit( p, 'hfoo', -3131.2, -3430.8, 56.340 )
    set u = CreateUnit( p, 'hmpr', -3178.6, -3496.9, 164.910 )
    set u = CreateUnit( p, 'hpea', -3861.7, -3422.8, 180.258 )
    set u = CreateUnit( p, 'hpea', -3928.8, -3541.9, 280.940 )
    set u = CreateUnit( p, 'hpea', -4015.0, -3667.7, 212.636 )
    set u = CreateUnit( p, 'hpea', -3850.9, -3609.1, 328.369 )
    set u = CreateUnit( p, 'hmpr', -4040.3, -3138.9, 261.208 )
    set u = CreateUnit( p, 'hfoo', -3916.2, -3080.0, 64.547 )
endfunction

//===========================================================================
function CreateBuildingsForPlayer4 takes nothing returns nothing
    local player p = Player(4)
    local unit u
    local integer unitID
    local trigger t
    local real life

    set u = CreateUnit( p, 'hhou', 3712.0, 128.0, 270.000 )
    set u = CreateUnit( p, 'hlum', 3808.0, 1312.0, 270.000 )
    set u = CreateUnit( p, 'hhou', 3520.0, 128.0, 270.000 )
    set u = CreateUnit( p, 'hhou', 3200.0, -64.0, 270.000 )
    set u = CreateUnit( p, 'hhou', 3008.0, -64.0, 270.000 )
    set u = CreateUnit( p, 'hbar', 2944.0, 1984.0, 270.000 )
    set u = CreateUnit( p, 'halt', 3424.0, 1376.0, 270.000 )
    set u = CreateUnit( p, 'hhou', 3712.0, 384.0, 270.000 )
    set u = CreateUnit( p, 'hctw', 1600.0, 1216.0, 270.000 )
    set u = CreateUnit( p, 'hbar', 2496.0, 1920.0, 270.000 )
    set u = CreateUnit( p, 'hbla', 2432.0, 0.0, 270.000 )
    set gg_unit_hctw_0151 = CreateUnit( p, 'hctw', 2368.0, 384.0, 270.000 )
    set u = CreateUnit( p, 'hctw', 1600.0, 320.0, 270.000 )
    set u = CreateUnit( p, 'harm', 3008.0, 1216.0, 270.000 )
    set u = CreateUnit( p, 'hcas', 3008.0, 512.0, 270.000 )
    set u = CreateUnit( p, 'hhou', 3520.0, 384.0, 270.000 )
    set u = CreateUnit( p, 'hhou', 3776.0, 1728.0, 270.000 )
    set u = CreateUnit( p, 'hars', 3712.0, 2240.0, 270.000 )
    set u = CreateUnit( p, 'hwtw', 2752.0, -128.0, 270.000 )
endfunction

//===========================================================================
function CreateUnitsForPlayer4 takes nothing returns nothing
    local player p = Player(4)
    local unit u
    local integer unitID
    local trigger t
    local real life

    set gg_unit_Hamg_0010 = CreateUnit( p, 'Hamg', 3526.5, 1688.9, 161.924 )
    set u = CreateUnit( p, 'hsor', 3760.6, 628.3, 47.188 )
    set u = CreateUnit( p, 'hpea', 3376.0, 851.7, 357.209 )
    set u = CreateUnit( p, 'hpea', 3344.0, 1026.3, 284.730 )
    set u = CreateUnit( p, 'hpea', 3256.4, 920.6, 196.617 )
    set u = CreateUnit( p, 'hpea', 3152.8, 1037.7, 17.128 )
    set u = CreateUnit( p, 'hpea', 3164.2, 833.8, 99.693 )
    set u = CreateUnit( p, 'hsor', 3690.3, 1965.8, 76.764 )
    set u = CreateUnit( p, 'hkni', 1808.6, 654.9, 260.109 )
    set u = CreateUnit( p, 'hsor', 1881.5, 544.8, 245.585 )
endfunction

//===========================================================================
function CreateBuildingsForPlayer5 takes nothing returns nothing
    local player p = Player(5)
    local unit u
    local integer unitID
    local trigger t
    local real life

    set u = CreateUnit( p, 'hhou', -4480.0, 4864.0, 270.000 )
    set u = CreateUnit( p, 'hgtw', -4544.0, 4608.0, 270.000 )
    set u = CreateUnit( p, 'hhou', -4288.0, 4864.0, 270.000 )
    set u = CreateUnit( p, 'hhou', -3008.0, 5760.0, 270.000 )
    set u = CreateUnit( p, 'hbla', -4032.0, 4544.0, 270.000 )
    set u = CreateUnit( p, 'hbar', -1984.0, 5568.0, 270.000 )
    set u = CreateUnit( p, 'hhou', -2816.0, 4352.0, 270.000 )
    set u = CreateUnit( p, 'hhou', -2560.0, 4352.0, 270.000 )
    set u = CreateUnit( p, 'hgra', -4032.0, 5952.0, 270.000 )
    set u = CreateUnit( p, 'hgtw', -4480.0, 5248.0, 270.000 )
    set u = CreateUnit( p, 'hgtw', -3648.0, 6016.0, 270.000 )
    set u = CreateUnit( p, 'hbar', -2368.0, 5568.0, 270.000 )
    set u = CreateUnit( p, 'hgra', -4160.0, 5632.0, 270.000 )
    set u = CreateUnit( p, 'hgra', -4480.0, 6016.0, 270.000 )
    set u = CreateUnit( p, 'halt', -3936.0, 5088.0, 270.000 )
    set u = CreateUnit( p, 'hars', -3264.0, 4352.0, 270.000 )
    set u = CreateUnit( p, 'hhou', -3200.0, 5760.0, 270.000 )
    set u = CreateUnit( p, 'hhou', -3392.0, 5760.0, 270.000 )
    set u = CreateUnit( p, 'hgtw', -3008.0, 5248.0, 270.000 )
    set u = CreateUnit( p, 'hcas', -3392.0, 4928.0, 270.000 )
    set u = CreateUnit( p, 'hwtw', -3840.0, 4224.0, 270.000 )
    set u = CreateUnit( p, 'harm', -2176.0, 4416.0, 270.000 )
    set u = CreateUnit( p, 'hlum', -3296.0, 6112.0, 270.000 )
endfunction

//===========================================================================
function CreateUnitsForPlayer5 takes nothing returns nothing
    local player p = Player(5)
    local unit u
    local integer unitID
    local trigger t
    local real life

    set u = CreateUnit( p, 'hpea', -2993.2, 4695.1, 298.903 )
    set u = CreateUnit( p, 'hpea', -3131.0, 4814.6, 260.812 )
    set u = CreateUnit( p, 'hpea', -3027.5, 4960.6, 325.392 )
    set u = CreateUnit( p, 'hpea', -2896.0, 4852.2, 155.626 )
    set u = CreateUnit( p, 'hgry', -4440.8, 5456.7, 173.282 )
    set gg_unit_Hant_0172 = CreateUnit( p, 'Hant', 521.6, 6764.4, 268.905 )
endfunction

//===========================================================================
function CreateBuildingsForPlayer6 takes nothing returns nothing
    local player p = Player(6)
    local unit u
    local integer unitID
    local trigger t
    local real life

    set u = CreateUnit( p, 'unp1', -320.0, -9856.0, 270.000 )
    set u = CreateUnit( p, 'uzig', 1632.0, -9248.0, 270.000 )
    set gg_unit_uslh_0045 = CreateUnit( p, 'uslh', -1280.0, -10048.0, 270.000 )
    set u = CreateUnit( p, 'ugrv', 1024.0, -10112.0, 270.000 )
    set u = CreateUnit( p, 'uzg1', 1376.0, -8992.0, 270.000 )
    set u = CreateUnit( p, 'uaod', 288.0, -9888.0, 270.000 )
    set u = CreateUnit( p, 'uzig', 160.0, -9248.0, 270.000 )
    set u = CreateUnit( p, 'uzg1', -1760.0, -10080.0, 270.000 )
    set u = CreateUnit( p, 'usep', 832.0, -9472.0, 270.000 )
    set u = CreateUnit( p, 'uzig', 416.0, -9056.0, 270.000 )
    set gg_unit_ugol_0201 = CreateBlightedGoldmine( p, -128.0, -10624.0, 270.000 )
    call SetResourceAmount( gg_unit_ugol_0201, 18000 )
endfunction

//===========================================================================
function CreateUnitsForPlayer6 takes nothing returns nothing
    local player p = Player(6)
    local unit u
    local integer unitID
    local trigger t
    local real life

    set u = CreateUnit( p, 'ucry', 1500.4, -8354.6, 112.315 )
    set u = CreateUnit( p, 'ugho', 309.3, -8076.3, 11.250 )
    set u = CreateUnit( p, 'ugho', 380.1, -8109.5, 42.420 )
    set u = CreateUnit( p, 'ugho', 516.8, -8150.6, 81.674 )
    set u = CreateUnit( p, 'ugho', 1394.6, -8165.2, 131.159 )
    set u = CreateUnit( p, 'ugho', 1504.2, -8133.5, 119.148 )
    set u = CreateUnit( p, 'ugho', 1571.8, -8036.6, 124.637 )
    set u = CreateUnit( p, 'uaco', -132.3, -10048.3, 189.080 )
    set gg_unit_uabo_0041 = CreateUnit( p, 'uabo', 535.6, -9429.2, 41.413 )
    set gg_unit_umtw_0042 = CreateUnit( p, 'umtw', -1304.4, -9643.6, 11.702 )
    set u = CreateUnit( p, 'ucry', 1684.7, -8284.3, 130.849 )
    set gg_unit_umtw_0079 = CreateUnit( p, 'umtw', -2287.3, -9740.8, 165.998 )
    set u = CreateUnit( p, 'uaco', -302.7, -10084.0, 189.080 )
    set u = CreateUnit( p, 'ugho', 768.5, -10414.9, 131.159 )
    set u = CreateUnit( p, 'ugho', 708.0, -10551.9, 131.159 )
    set u = CreateUnit( p, 'uaco', -393.3, -10223.7, 189.080 )
    set gg_unit_uabo_0138 = CreateUnit( p, 'uabo', 1141.2, -9578.8, 76.531 )
    set u = CreateUnit( p, 'uaco', 507.5, -10292.9, 247.442 )
    set u = CreateUnit( p, 'uaco', -91.2, -10221.9, 282.819 )
    set u = CreateUnit( p, 'uaco', -231.9, -10212.0, 120.974 )
    set u = CreateUnit( p, 'uaco', 349.0, -10289.9, 149.331 )
    set gg_unit_umtw_0256 = CreateUnit( p, 'umtw', -1075.6, -9771.3, 59.752 )
endfunction

//===========================================================================
function CreateNeutralPassiveBuildings takes nothing returns nothing
    local player p = Player(PLAYER_NEUTRAL_PASSIVE)
    local unit u
    local integer unitID
    local trigger t
    local real life

    set u = CreateUnit( p, 'ngol', -4224.0, -3392.0, 270.000 )
    call SetResourceAmount( u, 25000 )
    set u = CreateUnit( p, 'ngme', 3520.0, -9152.0, 270.000 )
    set u = CreateUnit( p, 'nten', -4448.0, -8224.0, 270.000 )
    set t = CreateTrigger(  )
    call TriggerRegisterUnitEvent( t, u, EVENT_UNIT_DEATH )
    call TriggerAddAction( t, function Unit000229_DropItems )
    set u = CreateUnit( p, 'nfoh', -1536.0, 1088.0, 270.000 )
    set u = CreateUnit( p, 'nfoh', 512.0, 4992.0, 270.000 )
    set gg_unit_nmgv_0157 = CreateUnit( p, 'nmgv', 832.0, 2304.0, 270.000 )
    set u = CreateUnit( p, 'ngol', 3712.0, 896.0, 270.000 )
    call SetResourceAmount( u, 35000 )
    set gg_unit_nwc1_0165 = CreateUnit( p, 'nwc1', -1280.0, -1600.0, 270.000 )
    set gg_unit_nwc1_0168 = CreateUnit( p, 'nwc1', -1472.0, -1920.0, 270.000 )
    set gg_unit_nwc1_0183 = CreateUnit( p, 'nwc1', 3968.0, 5120.0, 270.000 )
    set u = CreateUnit( p, 'ngol', -2560.0, 4928.0, 270.000 )
    call SetResourceAmount( u, 35000 )
    set gg_unit_nwc1_0203 = CreateUnit( p, 'nwc1', 3968.0, 5568.0, 270.000 )
    set gg_unit_nwc1_0209 = CreateUnit( p, 'nwc1', -3648.0, 3008.0, 270.000 )
endfunction

//===========================================================================
function CreateNeutralPassive takes nothing returns nothing
    local player p = Player(PLAYER_NEUTRAL_PASSIVE)
    local unit u
    local integer unitID
    local trigger t
    local real life

    set u = CreateUnit( p, 'nshe', -4146.3, -8739.1, 99.330 )
    set u = CreateUnit( p, 'nshe', -4109.1, -8589.9, 104.110 )
    set u = CreateUnit( p, 'nshe', -4394.9, -8501.5, 141.091 )
    set u = CreateUnit( p, 'nshe', -4412.0, -8733.8, 30.894 )
    set u = CreateUnit( p, 'nshe', -4227.6, -8649.1, 34.729 )
endfunction

//===========================================================================
function CreatePlayerBuildings takes nothing returns nothing
    call CreateBuildingsForPlayer1(  )
    call CreateBuildingsForPlayer3(  )
    call CreateBuildingsForPlayer4(  )
    call CreateBuildingsForPlayer5(  )
    call CreateBuildingsForPlayer6(  )
endfunction

//===========================================================================
function CreatePlayerUnits takes nothing returns nothing
    call CreateUnitsForPlayer1(  )
    call CreateUnitsForPlayer3(  )
    call CreateUnitsForPlayer4(  )
    call CreateUnitsForPlayer5(  )
    call CreateUnitsForPlayer6(  )
endfunction

//===========================================================================
function CreateAllUnits takes nothing returns nothing
    call CreateNeutralPassiveBuildings(  )
    call CreatePlayerBuildings(  )
    call CreateNeutralPassive(  )
    call CreatePlayerUnits(  )
endfunction

//***************************************************************************
//*
//*  Regions
//*
//***************************************************************************

function CreateRegions takes nothing returns nothing
    local weathereffect we

    set gg_rct_Abom01 = Rect( 512.0, -8608.0, 672.0, -8416.0 )
    set gg_rct_Abom02 = Rect( 1024.0, -8608.0, 1184.0, -8416.0 )
    set gg_rct_AntonidasAttackArea = Rect( 128.0, 7008.0, 896.0, 7968.0 )
    set gg_rct_AntonidasContainmentArea = Rect( 32.0, 7936.0, 960.0, 8672.0 )
    set gg_rct_AntonidasTeleportOpening = Rect( 512.0, -7584.0, 1152.0, -7104.0 )
    set gg_rct_Archmage01LeashArea = Rect( 640.0, -4000.0, 1024.0, -3616.0 )
    set gg_rct_Archmage01Revealer = Rect( 672.0, -4160.0, 1056.0, -3840.0 )
    set gg_rct_Archmage02LeashArea = Rect( -3712.0, 1056.0, -3328.0, 1408.0 )
    set gg_rct_Archmage02Revealer = Rect( -3712.0, 896.0, -3328.0, 1344.0 )
    set gg_rct_Archmage03LeashArea = Rect( 320.0, 6560.0, 704.0, 6944.0 )
    set gg_rct_Archmage03Revealer = Rect( 256.0, 6304.0, 768.0, 6816.0 )
    set gg_rct_Arthas_Confronts_Antonidas = Rect( 160.0, 6400.0, 480.0, 6688.0 )
    set gg_rct_Arthas_Kill_Antonidas = Rect( 352.0, 6624.0, 512.0, 6816.0 )
    set gg_rct_ArthasStart = Rect( 736.0, -8192.0, 928.0, -8000.0 )
    set gg_rct_BlizzardArea = Rect( 320.0, 7296.0, 736.0, 7616.0 )
    set gg_rct_BookFogArea = Rect( -192.0, 7776.0, 1152.0, 8928.0 )
    set gg_rct_Cage01 = Rect( -1376.0, -1760.0, -1152.0, -1504.0 )
    set gg_rct_Cage02 = Rect( -1600.0, -2016.0, -1376.0, -1792.0 )
    set gg_rct_Cage03 = Rect( -3744.0, 2912.0, -3520.0, 3136.0 )
    set gg_rct_Cage04 = Rect( 3584.0, 5280.0, 4224.0, 5888.0 )
    set gg_rct_Cage05 = Rect( 3808.0, 4992.0, 4224.0, 5408.0 )
    set gg_rct_CatapultMoveFinal = Rect( -1408.0, -9824.0, -1184.0, -9600.0 )
    set gg_rct_CratesDeadTown = Rect( -3552.0, -10304.0, -3360.0, -10176.0 )
    set gg_rct_DoodadDeathArea01 = Rect( 448.0, -4128.0, 1280.0, -3392.0 )
    set gg_rct_DoodadDeathArea02 = Rect( -3808.0, 800.0, -3232.0, 1408.0 )
    set gg_rct_DoodadDeathArea03 = Rect( 128.0, 6240.0, 896.0, 6912.0 )
    set gg_rct_EndingArthasDest = Rect( 320.0, 8128.0, 480.0, 8288.0 )
    set gg_rct_EndingArthasStart = Rect( 288.0, 7680.0, 448.0, 7840.0 )
    set gg_rct_EndingKelThuzadEnd = Rect( 512.0, 8224.0, 672.0, 8448.0 )
    set gg_rct_EndingKelThuzadStart = Rect( 640.0, 7648.0, 832.0, 7872.0 )
    set gg_rct_ExoticBeastiary = Rect( -1952.0, -2432.0, -800.0, -1152.0 )
    set gg_rct_GyroForce = Rect( -4736.0, 7872.0, -2720.0, 8832.0 )
    set gg_rct_HarvestGold = Rect( -512.0, -10336.0, 0.0, -9984.0 )
    set gg_rct_HarvestTrees = Rect( 608.0, -10656.0, 864.0, -10336.0 )
    set gg_rct_KelThuzad = Rect( 736.0, 6432.0, 960.0, 6624.0 )
    set gg_rct_KelThuzadStart = Rect( 960.0, -8288.0, 1152.0, -8096.0 )
    set gg_rct_Knight01Post = Rect( 576.0, -7200.0, 736.0, -7040.0 )
    set gg_rct_Knight02Post = Rect( 864.0, -7168.0, 1056.0, -7008.0 )
    set gg_rct_MeatWagonDest01 = Rect( 96.0, -8384.0, 320.0, -8192.0 )
    set gg_rct_MeatWagonDest02 = Rect( 224.0, -8512.0, 512.0, -8288.0 )
    set gg_rct_OpeningAntonidasTeleportEnd = Rect( 160.0, 8064.0, 832.0, 8608.0 )
    set gg_rct_OpeningArthasDest = Rect( 736.0, -7840.0, 928.0, -7616.0 )
    set gg_rct_OpeningCancelledArea = Rect( 800.0, -8416.0, 992.0, -8192.0 )
    set gg_rct_OpeningCatapultMove = Rect( -2944.0, -10400.0, -2816.0, -10272.0 )
    set gg_rct_OpeningGhoulAttack01 = Rect( 160.0, -8224.0, 448.0, -7936.0 )
    set gg_rct_OpeningGhoulAttack02 = Rect( 1408.0, -8192.0, 1632.0, -7840.0 )
    set gg_rct_OpeningKelThuzadDest = Rect( 896.0, -7840.0, 1088.0, -7616.0 )
    set gg_rct_OpeningRevealer = Rect( 608.0, -5888.0, 1664.0, -4672.0 )
    set gg_rct_Shield_01_DOODAD_KILL = Rect( -5952.0, -7424.0, 5216.0, -768.0 )
    set gg_rct_Shield_02_DOODAD_KILL = Rect( -6400.0, -768.0, 5760.0, 3840.0 )
    set gg_rct_Shield_03_DOODAD_KILL = Rect( -6144.0, 3872.0, 5760.0, 10624.0 )
    set gg_rct_Shield01 = Rect( -4864.0, -7424.0, 5216.0, 10368.0 )
    set gg_rct_Shield02 = Rect( -5728.0, -768.0, 5760.0, 10368.0 )
    set gg_rct_Shield02Activate = Rect( -5952.0, -2272.0, 5568.0, -768.0 )
    set gg_rct_Shield03 = Rect( -6400.0, 3840.0, 4352.0, 9440.0 )
    set gg_rct_Shield03Activate = Rect( -6272.0, 2464.0, 5856.0, 3872.0 )
    set gg_rct_StreamLoop01 = Rect( 352.0, -6368.0, 1472.0, -5888.0 )
    call SetSoundPosition( gg_snd_WaterStreamLoop1, 912.0, -6128.0, -112.0 )
    call RegisterStackedSound( gg_snd_WaterStreamLoop1, true, 1120.0, 480.0 )
    set gg_rct_StreamLoop02 = Rect( 352.0, -6912.0, 1472.0, -6368.0 )
    call SetSoundPosition( gg_snd_WaterStreamLoop1, 912.0, -6640.0, -128.0 )
    call RegisterStackedSound( gg_snd_WaterStreamLoop1, true, 1120.0, 544.0 )
    set gg_rct_Vault01 = Rect( 704.0, 2144.0, 960.0, 2464.0 )
    set gg_rct_VaultOfEnchantmentsArea = Rect( 288.0, 1600.0, 1344.0, 2656.0 )
    set gg_rct_EndingPlayerGroupArea = Rect( 224.0, 6304.0, 800.0, 6944.0 )
endfunction

//***************************************************************************
//*
//*  Cameras
//*
//***************************************************************************

function CreateCameras takes nothing returns nothing

    set gg_cam_Camera_End_Alternate = CreateCameraSetup(  )
    call CameraSetupSetField( gg_cam_Camera_End_Alternate, CAMERA_FIELD_ZOFFSET, 0.0, 0.0 )
    call CameraSetupSetField( gg_cam_Camera_End_Alternate, CAMERA_FIELD_ROTATION, 246.1, 0.0 )
    call CameraSetupSetField( gg_cam_Camera_End_Alternate, CAMERA_FIELD_ANGLE_OF_ATTACK, 337.1, 0.0 )
    call CameraSetupSetField( gg_cam_Camera_End_Alternate, CAMERA_FIELD_TARGET_DISTANCE, 2329.0, 0.0 )
    call CameraSetupSetField( gg_cam_Camera_End_Alternate, CAMERA_FIELD_ROLL, 0.0, 0.0 )
    call CameraSetupSetField( gg_cam_Camera_End_Alternate, CAMERA_FIELD_FIELD_OF_VIEW, 70.0, 0.0 )
    call CameraSetupSetField( gg_cam_Camera_End_Alternate, CAMERA_FIELD_FARZ, 5000.0, 0.0 )
    call CameraSetupSetDestPosition( gg_cam_Camera_End_Alternate, 522.4, 6067.6, 0.0 )

    set gg_cam_Camera_End_Alternate2 = CreateCameraSetup(  )
    call CameraSetupSetField( gg_cam_Camera_End_Alternate2, CAMERA_FIELD_ZOFFSET, 0.0, 0.0 )
    call CameraSetupSetField( gg_cam_Camera_End_Alternate2, CAMERA_FIELD_ROTATION, 300.9, 0.0 )
    call CameraSetupSetField( gg_cam_Camera_End_Alternate2, CAMERA_FIELD_ANGLE_OF_ATTACK, 333.9, 0.0 )
    call CameraSetupSetField( gg_cam_Camera_End_Alternate2, CAMERA_FIELD_TARGET_DISTANCE, 962.6, 0.0 )
    call CameraSetupSetField( gg_cam_Camera_End_Alternate2, CAMERA_FIELD_ROLL, 0.0, 0.0 )
    call CameraSetupSetField( gg_cam_Camera_End_Alternate2, CAMERA_FIELD_FIELD_OF_VIEW, 70.0, 0.0 )
    call CameraSetupSetField( gg_cam_Camera_End_Alternate2, CAMERA_FIELD_FARZ, 5000.0, 0.0 )
    call CameraSetupSetDestPosition( gg_cam_Camera_End_Alternate2, 855.6, -7788.0, 0.0 )

    set gg_cam_Ending01 = CreateCameraSetup(  )
    call CameraSetupSetField( gg_cam_Ending01, CAMERA_FIELD_ZOFFSET, 0.0, 0.0 )
    call CameraSetupSetField( gg_cam_Ending01, CAMERA_FIELD_ROTATION, 116.6, 0.0 )
    call CameraSetupSetField( gg_cam_Ending01, CAMERA_FIELD_ANGLE_OF_ATTACK, 330.2, 0.0 )
    call CameraSetupSetField( gg_cam_Ending01, CAMERA_FIELD_TARGET_DISTANCE, 1195.2, 0.0 )
    call CameraSetupSetField( gg_cam_Ending01, CAMERA_FIELD_ROLL, 0.0, 0.0 )
    call CameraSetupSetField( gg_cam_Ending01, CAMERA_FIELD_FIELD_OF_VIEW, 70.0, 0.0 )
    call CameraSetupSetField( gg_cam_Ending01, CAMERA_FIELD_FARZ, 5000.0, 0.0 )
    call CameraSetupSetDestPosition( gg_cam_Ending01, 521.9, 6841.4, 0.0 )

    set gg_cam_Ending02 = CreateCameraSetup(  )
    call CameraSetupSetField( gg_cam_Ending02, CAMERA_FIELD_ZOFFSET, 0.0, 0.0 )
    call CameraSetupSetField( gg_cam_Ending02, CAMERA_FIELD_ROTATION, 90.4, 0.0 )
    call CameraSetupSetField( gg_cam_Ending02, CAMERA_FIELD_ANGLE_OF_ATTACK, 325.8, 0.0 )
    call CameraSetupSetField( gg_cam_Ending02, CAMERA_FIELD_TARGET_DISTANCE, 1252.5, 0.0 )
    call CameraSetupSetField( gg_cam_Ending02, CAMERA_FIELD_ROLL, 0.0, 0.0 )
    call CameraSetupSetField( gg_cam_Ending02, CAMERA_FIELD_FIELD_OF_VIEW, 70.0, 0.0 )
    call CameraSetupSetField( gg_cam_Ending02, CAMERA_FIELD_FARZ, 5000.0, 0.0 )
    call CameraSetupSetDestPosition( gg_cam_Ending02, 546.4, 8297.5, 0.0 )

    set gg_cam_Ending02a = CreateCameraSetup(  )
    call CameraSetupSetField( gg_cam_Ending02a, CAMERA_FIELD_ZOFFSET, 0.0, 0.0 )
    call CameraSetupSetField( gg_cam_Ending02a, CAMERA_FIELD_ROTATION, 203.7, 0.0 )
    call CameraSetupSetField( gg_cam_Ending02a, CAMERA_FIELD_ANGLE_OF_ATTACK, 329.4, 0.0 )
    call CameraSetupSetField( gg_cam_Ending02a, CAMERA_FIELD_TARGET_DISTANCE, 1377.8, 0.0 )
    call CameraSetupSetField( gg_cam_Ending02a, CAMERA_FIELD_ROLL, 0.0, 0.0 )
    call CameraSetupSetField( gg_cam_Ending02a, CAMERA_FIELD_FIELD_OF_VIEW, 70.0, 0.0 )
    call CameraSetupSetField( gg_cam_Ending02a, CAMERA_FIELD_FARZ, 10000.0, 0.0 )
    call CameraSetupSetDestPosition( gg_cam_Ending02a, 584.0, 8300.4, 0.0 )

    set gg_cam_MeatWagon01 = CreateCameraSetup(  )
    call CameraSetupSetField( gg_cam_MeatWagon01, CAMERA_FIELD_ZOFFSET, 0.0, 0.0 )
    call CameraSetupSetField( gg_cam_MeatWagon01, CAMERA_FIELD_ROTATION, 179.1, 0.0 )
    call CameraSetupSetField( gg_cam_MeatWagon01, CAMERA_FIELD_ANGLE_OF_ATTACK, 325.5, 0.0 )
    call CameraSetupSetField( gg_cam_MeatWagon01, CAMERA_FIELD_TARGET_DISTANCE, 1242.8, 0.0 )
    call CameraSetupSetField( gg_cam_MeatWagon01, CAMERA_FIELD_ROLL, 0.0, 0.0 )
    call CameraSetupSetField( gg_cam_MeatWagon01, CAMERA_FIELD_FIELD_OF_VIEW, 70.0, 0.0 )
    call CameraSetupSetField( gg_cam_MeatWagon01, CAMERA_FIELD_FARZ, 10000.0, 0.0 )
    call CameraSetupSetDestPosition( gg_cam_MeatWagon01, -1363.7, -9735.1, 0.0 )

    set gg_cam_MeatWagon02 = CreateCameraSetup(  )
    call CameraSetupSetField( gg_cam_MeatWagon02, CAMERA_FIELD_ZOFFSET, 0.0, 0.0 )
    call CameraSetupSetField( gg_cam_MeatWagon02, CAMERA_FIELD_ROTATION, 197.5, 0.0 )
    call CameraSetupSetField( gg_cam_MeatWagon02, CAMERA_FIELD_ANGLE_OF_ATTACK, 330.4, 0.0 )
    call CameraSetupSetField( gg_cam_MeatWagon02, CAMERA_FIELD_TARGET_DISTANCE, 1262.4, 0.0 )
    call CameraSetupSetField( gg_cam_MeatWagon02, CAMERA_FIELD_ROLL, 0.0, 0.0 )
    call CameraSetupSetField( gg_cam_MeatWagon02, CAMERA_FIELD_FIELD_OF_VIEW, 70.0, 0.0 )
    call CameraSetupSetField( gg_cam_MeatWagon02, CAMERA_FIELD_FARZ, 10000.0, 0.0 )
    call CameraSetupSetDestPosition( gg_cam_MeatWagon02, -1471.8, -9755.5, 0.0 )

    set gg_cam_MeatWagon03 = CreateCameraSetup(  )
    call CameraSetupSetField( gg_cam_MeatWagon03, CAMERA_FIELD_ZOFFSET, 200.0, 0.0 )
    call CameraSetupSetField( gg_cam_MeatWagon03, CAMERA_FIELD_ROTATION, 222.1, 0.0 )
    call CameraSetupSetField( gg_cam_MeatWagon03, CAMERA_FIELD_ANGLE_OF_ATTACK, 325.9, 0.0 )
    call CameraSetupSetField( gg_cam_MeatWagon03, CAMERA_FIELD_TARGET_DISTANCE, 1025.7, 0.0 )
    call CameraSetupSetField( gg_cam_MeatWagon03, CAMERA_FIELD_ROLL, 0.0, 0.0 )
    call CameraSetupSetField( gg_cam_MeatWagon03, CAMERA_FIELD_FIELD_OF_VIEW, 70.0, 0.0 )
    call CameraSetupSetField( gg_cam_MeatWagon03, CAMERA_FIELD_FARZ, 3000.0, 0.0 )
    call CameraSetupSetDestPosition( gg_cam_MeatWagon03, -541.5, -9085.5, 0.0 )

    set gg_cam_Opening_3a = CreateCameraSetup(  )
    call CameraSetupSetField( gg_cam_Opening_3a, CAMERA_FIELD_ZOFFSET, 0.0, 0.0 )
    call CameraSetupSetField( gg_cam_Opening_3a, CAMERA_FIELD_ROTATION, 326.7, 0.0 )
    call CameraSetupSetField( gg_cam_Opening_3a, CAMERA_FIELD_ANGLE_OF_ATTACK, 324.7, 0.0 )
    call CameraSetupSetField( gg_cam_Opening_3a, CAMERA_FIELD_TARGET_DISTANCE, 1570.3, 0.0 )
    call CameraSetupSetField( gg_cam_Opening_3a, CAMERA_FIELD_ROLL, 0.0, 0.0 )
    call CameraSetupSetField( gg_cam_Opening_3a, CAMERA_FIELD_FIELD_OF_VIEW, 70.0, 0.0 )
    call CameraSetupSetField( gg_cam_Opening_3a, CAMERA_FIELD_FARZ, 6402.3, 0.0 )
    call CameraSetupSetDestPosition( gg_cam_Opening_3a, 805.0, -7287.3, 0.0 )

    set gg_cam_Opening01 = CreateCameraSetup(  )
    call CameraSetupSetField( gg_cam_Opening01, CAMERA_FIELD_ZOFFSET, 0.0, 0.0 )
    call CameraSetupSetField( gg_cam_Opening01, CAMERA_FIELD_ROTATION, 71.0, 0.0 )
    call CameraSetupSetField( gg_cam_Opening01, CAMERA_FIELD_ANGLE_OF_ATTACK, 316.9, 0.0 )
    call CameraSetupSetField( gg_cam_Opening01, CAMERA_FIELD_TARGET_DISTANCE, 1912.1, 0.0 )
    call CameraSetupSetField( gg_cam_Opening01, CAMERA_FIELD_ROLL, 0.0, 0.0 )
    call CameraSetupSetField( gg_cam_Opening01, CAMERA_FIELD_FIELD_OF_VIEW, 70.0, 0.0 )
    call CameraSetupSetField( gg_cam_Opening01, CAMERA_FIELD_FARZ, 5500.3, 0.0 )
    call CameraSetupSetDestPosition( gg_cam_Opening01, 587.1, -8495.9, 0.0 )

    set gg_cam_Opening02 = CreateCameraSetup(  )
    call CameraSetupSetField( gg_cam_Opening02, CAMERA_FIELD_ZOFFSET, 100.0, 0.0 )
    call CameraSetupSetField( gg_cam_Opening02, CAMERA_FIELD_ROTATION, 88.7, 0.0 )
    call CameraSetupSetField( gg_cam_Opening02, CAMERA_FIELD_ANGLE_OF_ATTACK, 334.3, 0.0 )
    call CameraSetupSetField( gg_cam_Opening02, CAMERA_FIELD_TARGET_DISTANCE, 2267.1, 0.0 )
    call CameraSetupSetField( gg_cam_Opening02, CAMERA_FIELD_ROLL, 0.0, 0.0 )
    call CameraSetupSetField( gg_cam_Opening02, CAMERA_FIELD_FIELD_OF_VIEW, 45.0, 0.0 )
    call CameraSetupSetField( gg_cam_Opening02, CAMERA_FIELD_FARZ, 5000.0, 0.0 )
    call CameraSetupSetDestPosition( gg_cam_Opening02, 818.8, -7097.5, 0.0 )

    set gg_cam_Opening03 = CreateCameraSetup(  )
    call CameraSetupSetField( gg_cam_Opening03, CAMERA_FIELD_ZOFFSET, 100.0, 0.0 )
    call CameraSetupSetField( gg_cam_Opening03, CAMERA_FIELD_ROTATION, 89.4, 0.0 )
    call CameraSetupSetField( gg_cam_Opening03, CAMERA_FIELD_ANGLE_OF_ATTACK, 325.9, 0.0 )
    call CameraSetupSetField( gg_cam_Opening03, CAMERA_FIELD_TARGET_DISTANCE, 1570.3, 0.0 )
    call CameraSetupSetField( gg_cam_Opening03, CAMERA_FIELD_ROLL, 0.0, 0.0 )
    call CameraSetupSetField( gg_cam_Opening03, CAMERA_FIELD_FIELD_OF_VIEW, 70.0, 0.0 )
    call CameraSetupSetField( gg_cam_Opening03, CAMERA_FIELD_FARZ, 5000.0, 0.0 )
    call CameraSetupSetDestPosition( gg_cam_Opening03, 805.0, -7287.3, 0.0 )

    set gg_cam_Opening04 = CreateCameraSetup(  )
    call CameraSetupSetField( gg_cam_Opening04, CAMERA_FIELD_ZOFFSET, 0.0, 0.0 )
    call CameraSetupSetField( gg_cam_Opening04, CAMERA_FIELD_ROTATION, 301.3, 0.0 )
    call CameraSetupSetField( gg_cam_Opening04, CAMERA_FIELD_ANGLE_OF_ATTACK, 330.2, 0.0 )
    call CameraSetupSetField( gg_cam_Opening04, CAMERA_FIELD_TARGET_DISTANCE, 962.6, 0.0 )
    call CameraSetupSetField( gg_cam_Opening04, CAMERA_FIELD_ROLL, 0.0, 0.0 )
    call CameraSetupSetField( gg_cam_Opening04, CAMERA_FIELD_FIELD_OF_VIEW, 70.0, 0.0 )
    call CameraSetupSetField( gg_cam_Opening04, CAMERA_FIELD_FARZ, 5500.3, 0.0 )
    call CameraSetupSetDestPosition( gg_cam_Opening04, 855.6, -7788.0, 0.0 )

endfunction

//***************************************************************************
//*
//*  Triggers
//*
//***************************************************************************

//===========================================================================
// Trigger: Melee Initialization
//===========================================================================
function Trig_Melee_Initialization_Actions takes nothing returns nothing
    call SetCampaignMenuRaceBJ( bj_CAMPAIGN_INDEX_U )
    call CommentString( "***********************" )
    call SetTimeOfDay( 6.01 )
    call SetSkyModel( "Environment\\Sky\\DalaranSky\\DalaranSky.mdl" )
    call SetDoodadAnimationRectBJ( "Death", 'YZef', gg_rct_Shield01 )
    call SetDoodadAnimationRectBJ( "Death", 'YZef', gg_rct_Shield02 )
    call SetDoodadAnimationRectBJ( "Death", 'YZef', gg_rct_Shield03 )
    call CommentString( "***********************" )
    call ConditionalTriggerExecute( gg_trg_Load_Heroes )
    call ConditionalTriggerExecute( gg_trg_SetupComputerPlayers )
    call ConditionalTriggerExecute( gg_trg_SetupComputerAlliances )
    call ConditionalTriggerExecute( gg_trg_SetupPlayerAlliances )
    call ConditionalTriggerExecute( gg_trg_SetupPlayerResources )
    call ConditionalTriggerExecute( gg_trg_SetupArchmage01 )
    call ConditionalTriggerExecute( gg_trg_SetupArchmage02 )
    call ConditionalTriggerExecute( gg_trg_SetupArchmage03 )
    call ConditionalTriggerExecute( gg_trg_SetupArchmageYellow )
    call ConditionalTriggerExecute( gg_trg_SetupArchmageHermit )
    call ConditionalTriggerExecute( gg_trg_SetupAntonidas )
    call ConditionalTriggerExecute( gg_trg_SetupOpeningKnights )
    call ConditionalTriggerExecute( gg_trg_SetupGhoulGroup )
    call ConditionalTriggerExecute( gg_trg_SetupQuests )
    call ConditionalTriggerExecute( gg_trg_SetupShields )
    call ConditionalTriggerExecute( gg_trg_SetupGyroForce )
    call ConditionalTriggerExecute( gg_trg_SetupArthas )
    call ConditionalTriggerExecute( gg_trg_SetupKelThuzad )
    call ConditionalTriggerExecute( gg_trg_SetupBookOfSummoning )
    call ConditionalTriggerExecute( gg_trg_SetupArchmageCount )
    call ConditionalTriggerExecute( gg_trg_SetupScoreScreen )
    call ConditionalTriggerExecute( gg_trg_SetupArchmageExtra )
    call CommentString( "Start Initial Cinematic" )
    call ConditionalTriggerExecute( gg_trg_OpeningSetup )
    call ConditionalTriggerExecute( gg_trg_Opening01 )
    call CommentString( "Difficulty" )
    call ConditionalTriggerExecute( gg_trg_Difficulty_Easy )
    call ConditionalTriggerExecute( gg_trg_Difficulty_Normal )
    call ConditionalTriggerExecute( gg_trg_Difficulty_Hard )
    call CommentString( "Set Experience Rate" )
    set udg_Player = Player(6)
    call SetPlayerHandicapXPBJ( udg_Player, 25.00 )
endfunction

//===========================================================================
function InitTrig_Melee_Initialization takes nothing returns nothing
    set gg_trg_Melee_Initialization = CreateTrigger(  )
    call TriggerAddAction( gg_trg_Melee_Initialization, function Trig_Melee_Initialization_Actions )
endfunction

//===========================================================================
// Trigger: Difficulty Easy
//===========================================================================
function Trig_Difficulty_Easy_Conditions takes nothing returns boolean
    if ( not ( GetGameDifficulty() == MAP_DIFFICULTY_EASY ) ) then
        return false
    endif
    return true
endfunction

function Trig_Difficulty_Easy_Actions takes nothing returns nothing
    call CommentString( "Handicap" )
    call SetPlayerHandicapBJ( Player(1), bj_HANDICAP_EASY )
    call SetPlayerHandicapBJ( Player(3), bj_HANDICAP_EASY )
    call SetPlayerHandicapBJ( Player(4), bj_HANDICAP_EASY )
    call SetPlayerHandicapBJ( Player(5), bj_HANDICAP_EASY )
    call CommentString( "Main Gate Area" )
    call RemoveUnit( gg_unit_hsor_0178 )
    call RemoveUnit( gg_unit_hmpr_0176 )
    call RemoveUnit( gg_unit_hrif_0199 )
    call RemoveUnit( gg_unit_hrif_0196 )
    call RemoveUnit( gg_unit_hrif_0198 )
    call CommentString( "Second Archmage Area" )
    call RemoveUnit( gg_unit_hfoo_0221 )
    call RemoveUnit( gg_unit_hfoo_0115 )
    call RemoveUnit( gg_unit_hsor_0222 )
    call RemoveUnit( gg_unit_hctw_0151 )
    call CommentString( "Third Archmage Area" )
    call RemoveUnit( gg_unit_hmtm_0214 )
    call RemoveUnit( gg_unit_hsor_0218 )
endfunction

//===========================================================================
function InitTrig_Difficulty_Easy takes nothing returns nothing
    set gg_trg_Difficulty_Easy = CreateTrigger(  )
    call TriggerAddCondition( gg_trg_Difficulty_Easy, Condition( function Trig_Difficulty_Easy_Conditions ) )
    call TriggerAddAction( gg_trg_Difficulty_Easy, function Trig_Difficulty_Easy_Actions )
endfunction

//===========================================================================
// Trigger: Difficulty Normal
//===========================================================================
function Trig_Difficulty_Normal_Conditions takes nothing returns boolean
    if ( not ( GetGameDifficulty() == MAP_DIFFICULTY_NORMAL ) ) then
        return false
    endif
    return true
endfunction

function Trig_Difficulty_Normal_Actions takes nothing returns nothing
    call CommentString( "Main Gate Area" )
    call RemoveUnit( gg_unit_hsor_0178 )
    call RemoveUnit( gg_unit_hmpr_0176 )
    call RemoveUnit( gg_unit_hrif_0199 )
    call RemoveUnit( gg_unit_hrif_0196 )
    call RemoveUnit( gg_unit_hrif_0198 )
    call CommentString( "Second Archmage Area" )
    call RemoveUnit( gg_unit_hfoo_0221 )
    call RemoveUnit( gg_unit_hfoo_0115 )
    call RemoveUnit( gg_unit_hsor_0222 )
    call RemoveUnit( gg_unit_hctw_0151 )
    call CommentString( "Third Archmage Area" )
    call RemoveUnit( gg_unit_hmtm_0214 )
    call RemoveUnit( gg_unit_hsor_0218 )
endfunction

//===========================================================================
function InitTrig_Difficulty_Normal takes nothing returns nothing
    set gg_trg_Difficulty_Normal = CreateTrigger(  )
    call TriggerAddCondition( gg_trg_Difficulty_Normal, Condition( function Trig_Difficulty_Normal_Conditions ) )
    call TriggerAddAction( gg_trg_Difficulty_Normal, function Trig_Difficulty_Normal_Actions )
endfunction

//===========================================================================
// Trigger: Difficulty Hard
//===========================================================================
function Trig_Difficulty_Hard_Conditions takes nothing returns boolean
    if ( not ( GetGameDifficulty() == MAP_DIFFICULTY_HARD ) ) then
        return false
    endif
    return true
endfunction

function Trig_Difficulty_Hard_Actions takes nothing returns nothing
    call CommentString( "Archmage Summoning Level" )
    call TriggerSleepAction( 0.10 )
    call SuspendHeroXPBJ( true, udg_Archmage01 )
    call SuspendHeroXPBJ( true, udg_Archmage02 )
    call SuspendHeroXPBJ( true, udg_Archmage03 )
    call SetHeroLevel( udg_Archmage01, 5, false )
    call SelectHeroSkill( udg_Archmage01, 'AHab' )
    call SelectHeroSkill( udg_Archmage01, 'AHwe' )
    call SelectHeroSkill( udg_Archmage01, 'AHab' )
    call SetHeroLevel( udg_Archmage02, 6, false )
    call SelectHeroSkill( udg_Archmage02, 'AHbz' )
    call SelectHeroSkill( udg_Archmage02, 'AHab' )
    call SelectHeroSkill( udg_Archmage02, 'AHab' )
    call SetHeroLevel( udg_Archmage03, 10, false )
    call SelectHeroSkill( udg_Archmage03, 'AHab' )
    call SelectHeroSkill( udg_Archmage03, 'AHab' )
    call SuspendHeroXPBJ( false, udg_Archmage01 )
    call SuspendHeroXPBJ( false, udg_Archmage02 )
    call SuspendHeroXPBJ( false, udg_Archmage03 )
    call CommentString( "Archmage Yellow Level" )
    call SuspendHeroXPBJ( true, udg_ArchmageYellow )
    call SetHeroLevel( udg_ArchmageYellow, 8, false )
    call SelectHeroSkill( udg_ArchmageYellow, 'AHbz' )
    call SelectHeroSkill( udg_ArchmageYellow, 'AHab' )
    call SelectHeroSkill( udg_ArchmageYellow, 'AHwe' )
    call SuspendHeroXPBJ( false, udg_ArchmageYellow )
endfunction

//===========================================================================
function InitTrig_Difficulty_Hard takes nothing returns nothing
    set gg_trg_Difficulty_Hard = CreateTrigger(  )
    call TriggerAddCondition( gg_trg_Difficulty_Hard, Condition( function Trig_Difficulty_Hard_Conditions ) )
    call TriggerAddAction( gg_trg_Difficulty_Hard, function Trig_Difficulty_Hard_Actions )
endfunction

//===========================================================================
// Trigger: SetupComputerPlayers
//===========================================================================
function Trig_SetupComputerPlayers_Actions takes nothing returns nothing
    call CommentString( "Purple" )
    call SetPlayerStateBJ( Player(3), PLAYER_STATE_RESOURCE_GOLD, 2000 )
    call SetPlayerStateBJ( Player(3), PLAYER_STATE_RESOURCE_LUMBER, 2000 )
    call SetPlayerColorBJ( Player(3), PLAYER_COLOR_LIGHT_BLUE, true )
    call CommentString( "Yellow" )
    call SetPlayerStateBJ( Player(4), PLAYER_STATE_RESOURCE_GOLD, 2000 )
    call SetPlayerStateBJ( Player(4), PLAYER_STATE_RESOURCE_LUMBER, 2000 )
    call SetPlayerColorBJ( Player(4), PLAYER_COLOR_BLUE, true )
    call CommentString( "Orange" )
    call SetPlayerStateBJ( Player(5), PLAYER_STATE_RESOURCE_GOLD, 2000 )
    call SetPlayerStateBJ( Player(5), PLAYER_STATE_RESOURCE_LUMBER, 2000 )
    call SetPlayerColorBJ( Player(5), PLAYER_COLOR_LIGHT_GRAY, true )
    call CommentString( "***********************" )
    call CommentString( "Blue (Pre-placed non-town player)" )
    call SetPlayerColorBJ( Player(1), PLAYER_COLOR_LIGHT_GRAY, true )
    call CommentString( "***********************" )
    call SetUnitColor( gg_unit_Hant_0172, PLAYER_COLOR_LIGHT_GRAY )
    call CommentString( "***********************" )
    call SetUnitColor( gg_unit_Hamg_0122, PLAYER_COLOR_LIGHT_BLUE )
    call CommentString( "***********************" )
    call SetUnitColor( gg_unit_Hamg_0019, PLAYER_COLOR_BLUE )
endfunction

//===========================================================================
function InitTrig_SetupComputerPlayers takes nothing returns nothing
    set gg_trg_SetupComputerPlayers = CreateTrigger(  )
    call TriggerAddAction( gg_trg_SetupComputerPlayers, function Trig_SetupComputerPlayers_Actions )
endfunction

//===========================================================================
// Trigger: StartCampaignAI
//
// Run from 'Opening04' and 'OpeningCancelled'
//===========================================================================
function Trig_StartCampaignAI_Actions takes nothing returns nothing
    call StartCampaignAI( Player(3), "u07_purple.ai" )
    call StartCampaignAI( Player(4), "u07_yellow.ai" )
    call StartCampaignAI( Player(5), "u07_orange.ai" )
    call CommandAI( Player(3), 0, 0 )
endfunction

//===========================================================================
function InitTrig_StartCampaignAI takes nothing returns nothing
    set gg_trg_StartCampaignAI = CreateTrigger(  )
    call TriggerAddAction( gg_trg_StartCampaignAI, function Trig_StartCampaignAI_Actions )
endfunction

//===========================================================================
// Trigger: SetupComputerAlliances
//
// All computer players shall be allied with each other
//===========================================================================
function Trig_SetupComputerAlliances_Actions takes nothing returns nothing
    call CommentString( "Red" )
    call SetPlayerAllianceStateBJ( Player(0), Player(1), bj_ALLIANCE_ALLIED_VISION )
    call SetPlayerAllianceStateBJ( Player(0), Player(3), bj_ALLIANCE_ALLIED_VISION )
    call SetPlayerAllianceStateBJ( Player(0), Player(4), bj_ALLIANCE_ALLIED_VISION )
    call SetPlayerAllianceStateBJ( Player(0), Player(5), bj_ALLIANCE_ALLIED_VISION )
    call CommentString( "Blue" )
    call SetPlayerAllianceStateBJ( Player(1), Player(0), bj_ALLIANCE_ALLIED_VISION )
    call SetPlayerAllianceStateBJ( Player(1), Player(3), bj_ALLIANCE_ALLIED_VISION )
    call SetPlayerAllianceStateBJ( Player(1), Player(4), bj_ALLIANCE_ALLIED_VISION )
    call SetPlayerAllianceStateBJ( Player(1), Player(5), bj_ALLIANCE_ALLIED_VISION )
    call CommentString( "Purple" )
    call SetPlayerAllianceStateBJ( Player(3), Player(0), bj_ALLIANCE_ALLIED_VISION )
    call SetPlayerAllianceStateBJ( Player(3), Player(1), bj_ALLIANCE_ALLIED_VISION )
    call SetPlayerAllianceStateBJ( Player(3), Player(4), bj_ALLIANCE_ALLIED_VISION )
    call SetPlayerAllianceStateBJ( Player(3), Player(5), bj_ALLIANCE_ALLIED_VISION )
    call CommentString( "Yellow" )
    call SetPlayerAllianceStateBJ( Player(4), Player(0), bj_ALLIANCE_ALLIED_VISION )
    call SetPlayerAllianceStateBJ( Player(4), Player(1), bj_ALLIANCE_ALLIED_VISION )
    call SetPlayerAllianceStateBJ( Player(4), Player(3), bj_ALLIANCE_ALLIED_VISION )
    call SetPlayerAllianceStateBJ( Player(4), Player(5), bj_ALLIANCE_ALLIED_VISION )
    call CommentString( "Orange" )
    call SetPlayerAllianceStateBJ( Player(5), Player(0), bj_ALLIANCE_ALLIED_VISION )
    call SetPlayerAllianceStateBJ( Player(5), Player(1), bj_ALLIANCE_ALLIED_VISION )
    call SetPlayerAllianceStateBJ( Player(5), Player(3), bj_ALLIANCE_ALLIED_VISION )
    call SetPlayerAllianceStateBJ( Player(5), Player(4), bj_ALLIANCE_ALLIED_VISION )
endfunction

//===========================================================================
function InitTrig_SetupComputerAlliances takes nothing returns nothing
    set gg_trg_SetupComputerAlliances = CreateTrigger(  )
    call TriggerAddAction( gg_trg_SetupComputerAlliances, function Trig_SetupComputerAlliances_Actions )
endfunction

//===========================================================================
// Trigger: SetupPlayerAlliances
//===========================================================================
function Trig_SetupPlayerAlliances_Actions takes nothing returns nothing
    call SetPlayerAllianceStateBJ( Player(6), Player(7), bj_ALLIANCE_ALLIED_VISION )
    call SetPlayerAllianceStateBJ( Player(7), Player(6), bj_ALLIANCE_ALLIED_VISION )
    call SetPlayerColorBJ( Player(7), PLAYER_COLOR_BROWN, true )
endfunction

//===========================================================================
function InitTrig_SetupPlayerAlliances takes nothing returns nothing
    set gg_trg_SetupPlayerAlliances = CreateTrigger(  )
    call TriggerAddAction( gg_trg_SetupPlayerAlliances, function Trig_SetupPlayerAlliances_Actions )
endfunction

//===========================================================================
// Trigger: SetupPlayerResources
//===========================================================================
function Trig_SetupPlayerResources_Actions takes nothing returns nothing
    call SetPlayerStateBJ( Player(6), PLAYER_STATE_RESOURCE_LUMBER, 550 )
    call SetPlayerStateBJ( Player(6), PLAYER_STATE_RESOURCE_GOLD, 1500 )
    call SetPlayerColorBJ( Player(6), PLAYER_COLOR_PURPLE, true )
endfunction

//===========================================================================
function InitTrig_SetupPlayerResources takes nothing returns nothing
    set gg_trg_SetupPlayerResources = CreateTrigger(  )
    call TriggerAddAction( gg_trg_SetupPlayerResources, function Trig_SetupPlayerResources_Actions )
endfunction

//===========================================================================
// Trigger: SetupArthas
//===========================================================================
function Trig_SetupArthas_Actions takes nothing returns nothing
    call EnableTrigger( gg_trg_ArthasLevelUp )
endfunction

//===========================================================================
function InitTrig_SetupArthas takes nothing returns nothing
    set gg_trg_SetupArthas = CreateTrigger(  )
    call TriggerAddAction( gg_trg_SetupArthas, function Trig_SetupArthas_Actions )
endfunction

//===========================================================================
// Trigger: SetupKelThuzad
//===========================================================================
function Trig_SetupKelThuzad_Actions takes nothing returns nothing
    call EnableTrigger( gg_trg_KelThuzadLevelUp )
endfunction

//===========================================================================
function InitTrig_SetupKelThuzad takes nothing returns nothing
    set gg_trg_SetupKelThuzad = CreateTrigger(  )
    call TriggerAddAction( gg_trg_SetupKelThuzad, function Trig_SetupKelThuzad_Actions )
endfunction

//===========================================================================
// Trigger: SetupArchmage01
//===========================================================================
function Trig_SetupArchmage01_Actions takes nothing returns nothing
    set udg_Archmage01 = gg_unit_Hamg_0122
    call SetHeroLevel( udg_Archmage01, 2, false )
    call SelectHeroSkill( udg_Archmage01, 'AHwe' )
    call SelectHeroSkill( udg_Archmage01, 'AHab' )
    call SuspendHeroXPBJ( false, udg_Archmage01 )
endfunction

//===========================================================================
function InitTrig_SetupArchmage01 takes nothing returns nothing
    set gg_trg_SetupArchmage01 = CreateTrigger(  )
    call TriggerAddAction( gg_trg_SetupArchmage01, function Trig_SetupArchmage01_Actions )
endfunction

//===========================================================================
// Trigger: SetupArchmage02
//===========================================================================
function Trig_SetupArchmage02_Actions takes nothing returns nothing
    set udg_Archmage02 = gg_unit_Hamg_0019
    call SetHeroLevel( udg_Archmage02, 3, false )
    call SelectHeroSkill( udg_Archmage02, 'AHbz' )
    call SelectHeroSkill( udg_Archmage02, 'AHwe' )
    call SelectHeroSkill( udg_Archmage02, 'AHwe' )
    call SuspendHeroXPBJ( false, udg_Archmage02 )
endfunction

//===========================================================================
function InitTrig_SetupArchmage02 takes nothing returns nothing
    set gg_trg_SetupArchmage02 = CreateTrigger(  )
    call TriggerAddAction( gg_trg_SetupArchmage02, function Trig_SetupArchmage02_Actions )
endfunction

//===========================================================================
// Trigger: SetupArchmage03
//===========================================================================
function Trig_SetupArchmage03_Actions takes nothing returns nothing
    set udg_Archmage03 = gg_unit_Hant_0172
    call SetHeroLevel( udg_Archmage03, 7, false )
    call SelectHeroSkill( udg_Archmage03, 'AHwe' )
    call SelectHeroSkill( udg_Archmage03, 'AHwe' )
    call SelectHeroSkill( udg_Archmage03, 'AHwe' )
    call SelectHeroSkill( udg_Archmage03, 'AHbz' )
    call SelectHeroSkill( udg_Archmage03, 'AHbz' )
    call SelectHeroSkill( udg_Archmage03, 'AHbz' )
    call SelectHeroSkill( udg_Archmage03, 'AHab' )
    call SuspendHeroXPBJ( false, udg_Archmage03 )
endfunction

//===========================================================================
function InitTrig_SetupArchmage03 takes nothing returns nothing
    set gg_trg_SetupArchmage03 = CreateTrigger(  )
    call TriggerAddAction( gg_trg_SetupArchmage03, function Trig_SetupArchmage03_Actions )
endfunction

//===========================================================================
// Trigger: SetupArchmageExtra
//===========================================================================
function Trig_SetupArchmageExtra_Actions takes nothing returns nothing
    call SelectHeroSkill( gg_unit_Hamg_0070, 'AHwe' )
    call SuspendHeroXPBJ( false, gg_unit_Hamg_0070 )
endfunction

//===========================================================================
function InitTrig_SetupArchmageExtra takes nothing returns nothing
    set gg_trg_SetupArchmageExtra = CreateTrigger(  )
    call TriggerAddAction( gg_trg_SetupArchmageExtra, function Trig_SetupArchmageExtra_Actions )
endfunction

//===========================================================================
// Trigger: SetupArchmageHermit
//===========================================================================
function Trig_SetupArchmageHermit_Actions takes nothing returns nothing
    set udg_ArchmageHermit = gg_unit_Hamg_0014
    call SetHeroLevel( udg_ArchmageHermit, 6, false )
    call SelectHeroSkill( udg_ArchmageHermit, 'AHwe' )
    call SelectHeroSkill( udg_ArchmageHermit, 'AHwe' )
    call SelectHeroSkill( udg_ArchmageHermit, 'AHwe' )
    call SelectHeroSkill( udg_ArchmageHermit, 'AHab' )
    call SelectHeroSkill( udg_ArchmageHermit, 'AHab' )
    call SelectHeroSkill( udg_ArchmageHermit, 'AHmt' )
    call SuspendHeroXPBJ( false, udg_ArchmageHermit )
endfunction

//===========================================================================
function InitTrig_SetupArchmageHermit takes nothing returns nothing
    set gg_trg_SetupArchmageHermit = CreateTrigger(  )
    call TriggerAddAction( gg_trg_SetupArchmageHermit, function Trig_SetupArchmageHermit_Actions )
endfunction

//===========================================================================
// Trigger: SetupArchmageYellow
//===========================================================================
function Trig_SetupArchmageYellow_Actions takes nothing returns nothing
    set udg_ArchmageYellow = gg_unit_Hamg_0010
    call SetHeroLevel( udg_ArchmageYellow, 5, false )
    call SelectHeroSkill( udg_ArchmageYellow, 'AHbz' )
    call SelectHeroSkill( udg_ArchmageYellow, 'AHbz' )
    call SelectHeroSkill( udg_ArchmageYellow, 'AHab' )
    call SelectHeroSkill( udg_ArchmageYellow, 'AHab' )
    call SelectHeroSkill( udg_ArchmageYellow, 'AHwe' )
    call SuspendHeroXPBJ( false, udg_ArchmageYellow )
endfunction

//===========================================================================
function InitTrig_SetupArchmageYellow takes nothing returns nothing
    set gg_trg_SetupArchmageYellow = CreateTrigger(  )
    call TriggerAddAction( gg_trg_SetupArchmageYellow, function Trig_SetupArchmageYellow_Actions )
endfunction

//===========================================================================
// Trigger: SetupAntonidas
//===========================================================================
function Trig_SetupAntonidas_Actions takes nothing returns nothing
    set udg_Antonidas = gg_unit_Hant_0123
    call SetHeroLevel( udg_Antonidas, 7, false )
    call SetUnitManaPercentBJ( udg_Antonidas, 100.00 )
    call SelectHeroSkill( udg_Antonidas, 'AHmt' )
    call SelectHeroSkill( udg_Antonidas, 'AHbz' )
    call SelectHeroSkill( udg_Antonidas, 'AHbz' )
    call SelectHeroSkill( udg_Antonidas, 'AHab' )
    call SelectHeroSkill( udg_Antonidas, 'AHab' )
endfunction

//===========================================================================
function InitTrig_SetupAntonidas takes nothing returns nothing
    set gg_trg_SetupAntonidas = CreateTrigger(  )
    call TriggerAddAction( gg_trg_SetupAntonidas, function Trig_SetupAntonidas_Actions )
endfunction

//===========================================================================
// Trigger: SetupOpeningKnights
//===========================================================================
function Trig_SetupOpeningKnights_Actions takes nothing returns nothing
    set udg_OpeningKnight01 = gg_unit_hkni_0058
    set udg_OpeningKnight02 = gg_unit_hkni_0059
endfunction

//===========================================================================
function InitTrig_SetupOpeningKnights takes nothing returns nothing
    set gg_trg_SetupOpeningKnights = CreateTrigger(  )
    call TriggerAddAction( gg_trg_SetupOpeningKnights, function Trig_SetupOpeningKnights_Actions )
endfunction

//===========================================================================
// Trigger: SetupGhoulGroup
//===========================================================================
function Trig_SetupGhoulGroup_Actions takes nothing returns nothing
    set udg_OpeningGhoulGroup01 = GetUnitsInRectAll(gg_rct_OpeningGhoulAttack01)
    set udg_OpeningGhoulGroup02 = GetUnitsInRectAll(gg_rct_OpeningGhoulAttack02)
endfunction

//===========================================================================
function InitTrig_SetupGhoulGroup takes nothing returns nothing
    set gg_trg_SetupGhoulGroup = CreateTrigger(  )
    call TriggerAddAction( gg_trg_SetupGhoulGroup, function Trig_SetupGhoulGroup_Actions )
endfunction

//===========================================================================
// Trigger: SetupGyroForce
//===========================================================================
function Trig_SetupGyroForce_Actions takes nothing returns nothing
    set udg_GyroForce = GetUnitsInRectAll(gg_rct_GyroForce)
endfunction

//===========================================================================
function InitTrig_SetupGyroForce takes nothing returns nothing
    set gg_trg_SetupGyroForce = CreateTrigger(  )
    call TriggerAddAction( gg_trg_SetupGyroForce, function Trig_SetupGyroForce_Actions )
endfunction

//===========================================================================
// Trigger: SetupQuests
//===========================================================================
function Trig_SetupQuests_Actions takes nothing returns nothing
    call CommentString( "***********************" )
    call CreateQuestBJ( bj_QUESTTYPE_REQ_UNDISCOVERED, "TRIGSTR_027", "TRIGSTR_028", "ReplaceableTextures\\CommandButtons\\BTNHeroArchMage.tga" )
    set udg_QuestThreeArchmages = GetLastCreatedQuestBJ()
    call CommentString( "***********************" )
    call CreateQuestItemBJ( udg_QuestThreeArchmages, "TRIGSTR_051" )
    set udg_QuestReqArchmage01 = GetLastCreatedQuestItemBJ()
    call CommentString( "***********************" )
    call CreateQuestItemBJ( udg_QuestThreeArchmages, "TRIGSTR_060" )
    set udg_QuestReqArchmage02 = GetLastCreatedQuestItemBJ()
    call CommentString( "***********************" )
    call CreateQuestItemBJ( udg_QuestThreeArchmages, "TRIGSTR_059" )
    set udg_QuestReqArchmage03 = GetLastCreatedQuestItemBJ()
    call CommentString( "***********************" )
endfunction

//===========================================================================
function InitTrig_SetupQuests takes nothing returns nothing
    set gg_trg_SetupQuests = CreateTrigger(  )
    call TriggerAddAction( gg_trg_SetupQuests, function Trig_SetupQuests_Actions )
endfunction

//===========================================================================
// Trigger: SetupShields
//===========================================================================
function Trig_SetupShields_Actions takes nothing returns nothing
    call SetDoodadAnimationRectBJ( "Death", 'YZef', gg_rct_Shield01 )
    call SetDoodadAnimationRectBJ( "Death", 'YZef', gg_rct_Shield02 )
    call SetDoodadAnimationRectBJ( "Death", 'YZef', gg_rct_Shield03 )
endfunction

//===========================================================================
function InitTrig_SetupShields takes nothing returns nothing
    set gg_trg_SetupShields = CreateTrigger(  )
    call TriggerAddAction( gg_trg_SetupShields, function Trig_SetupShields_Actions )
endfunction

//===========================================================================
// Trigger: SetupBookOfSummoning
//===========================================================================
function Trig_SetupBookOfSummoning_Actions takes nothing returns nothing
    call SetUnitInvulnerable( gg_unit_nbsm_0251, true )
endfunction

//===========================================================================
function InitTrig_SetupBookOfSummoning takes nothing returns nothing
    set gg_trg_SetupBookOfSummoning = CreateTrigger(  )
    call TriggerAddAction( gg_trg_SetupBookOfSummoning, function Trig_SetupBookOfSummoning_Actions )
endfunction

//===========================================================================
// Trigger: SetupArchmageCount
//===========================================================================
function Trig_SetupArchmageCount_Actions takes nothing returns nothing
    set udg_ArchmageCount = 3
endfunction

//===========================================================================
function InitTrig_SetupArchmageCount takes nothing returns nothing
    set gg_trg_SetupArchmageCount = CreateTrigger(  )
    call TriggerAddAction( gg_trg_SetupArchmageCount, function Trig_SetupArchmageCount_Actions )
endfunction

//===========================================================================
// Trigger: SetupScoreScreen
//===========================================================================
function Trig_SetupScoreScreen_Actions takes nothing returns nothing
    call SetPlayerOnScoreScreenBJ( false, Player(0) )
    call SetPlayerOnScoreScreenBJ( false, Player(1) )
    call SetPlayerOnScoreScreenBJ( false, Player(7) )
endfunction

//===========================================================================
function InitTrig_SetupScoreScreen takes nothing returns nothing
    set gg_trg_SetupScoreScreen = CreateTrigger(  )
    call TriggerAddAction( gg_trg_SetupScoreScreen, function Trig_SetupScoreScreen_Actions )
endfunction

//===========================================================================
// Trigger: Leaderboard Create
//===========================================================================
function Trig_Leaderboard_Create_Actions takes nothing returns nothing
    call CreateLeaderboardBJ( bj_FORCE_PLAYER[6], "TRIGSTR_022" )
    set udg_LeaderboardArchmage = GetLastCreatedLeaderboard()
    call LeaderboardAddItemBJ( Player(0), udg_LeaderboardArchmage, "TRIGSTR_024", 3 )
    call LeaderboardSetPlayerItemLabelColorBJ( Player(0), udg_LeaderboardArchmage, 100, 100.00, 100.00, 0 )
    call LeaderboardSetPlayerItemValueColorBJ( Player(0), udg_LeaderboardArchmage, 100, 100.00, 100.00, 0 )
endfunction

//===========================================================================
function InitTrig_Leaderboard_Create takes nothing returns nothing
    set gg_trg_Leaderboard_Create = CreateTrigger(  )
    call TriggerAddAction( gg_trg_Leaderboard_Create, function Trig_Leaderboard_Create_Actions )
endfunction

//===========================================================================
// Trigger: Leaderboard Update
//===========================================================================
function Trig_Leaderboard_Update_Actions takes nothing returns nothing
    set udg_ArchmageCount = ( udg_ArchmageCount - 1 )
    call LeaderboardSetPlayerItemValueBJ( Player(0), udg_LeaderboardArchmage, udg_ArchmageCount )
endfunction

//===========================================================================
function InitTrig_Leaderboard_Update takes nothing returns nothing
    set gg_trg_Leaderboard_Update = CreateTrigger(  )
    call TriggerAddAction( gg_trg_Leaderboard_Update, function Trig_Leaderboard_Update_Actions )
endfunction

//===========================================================================
// Trigger: PurpleGold
//===========================================================================
function Trig_PurpleGold_Actions takes nothing returns nothing
    call AdjustPlayerStateBJ( 1000, Player(3), PLAYER_STATE_RESOURCE_GOLD )
endfunction

//===========================================================================
function InitTrig_PurpleGold takes nothing returns nothing
    set gg_trg_PurpleGold = CreateTrigger(  )
    call TriggerRegisterPlayerStateEvent( gg_trg_PurpleGold, Player(3), PLAYER_STATE_RESOURCE_GOLD, LESS_THAN_OR_EQUAL, 1000.00 )
    call TriggerAddAction( gg_trg_PurpleGold, function Trig_PurpleGold_Actions )
endfunction

//===========================================================================
// Trigger: YellowGold
//===========================================================================
function Trig_YellowGold_Actions takes nothing returns nothing
    call AdjustPlayerStateBJ( 1000, Player(4), PLAYER_STATE_RESOURCE_GOLD )
endfunction

//===========================================================================
function InitTrig_YellowGold takes nothing returns nothing
    set gg_trg_YellowGold = CreateTrigger(  )
    call TriggerRegisterPlayerStateEvent( gg_trg_YellowGold, Player(4), PLAYER_STATE_RESOURCE_GOLD, LESS_THAN_OR_EQUAL, 1000.00 )
    call TriggerAddAction( gg_trg_YellowGold, function Trig_YellowGold_Actions )
endfunction

//===========================================================================
// Trigger: OrangeGold
//===========================================================================
function Trig_OrangeGold_Actions takes nothing returns nothing
    call AdjustPlayerStateBJ( 1000, Player(5), PLAYER_STATE_RESOURCE_GOLD )
endfunction

//===========================================================================
function InitTrig_OrangeGold takes nothing returns nothing
    set gg_trg_OrangeGold = CreateTrigger(  )
    call TriggerRegisterPlayerStateEvent( gg_trg_OrangeGold, Player(5), PLAYER_STATE_RESOURCE_GOLD, LESS_THAN_OR_EQUAL, 1000.00 )
    call TriggerAddAction( gg_trg_OrangeGold, function Trig_OrangeGold_Actions )
endfunction

//===========================================================================
// Trigger: PurpleLumber
//===========================================================================
function Trig_PurpleLumber_Actions takes nothing returns nothing
    call AdjustPlayerStateBJ( 1000, Player(3), PLAYER_STATE_RESOURCE_LUMBER )
endfunction

//===========================================================================
function InitTrig_PurpleLumber takes nothing returns nothing
    set gg_trg_PurpleLumber = CreateTrigger(  )
    call TriggerRegisterPlayerStateEvent( gg_trg_PurpleLumber, Player(3), PLAYER_STATE_RESOURCE_LUMBER, LESS_THAN_OR_EQUAL, 1000.00 )
    call TriggerAddAction( gg_trg_PurpleLumber, function Trig_PurpleLumber_Actions )
endfunction

//===========================================================================
// Trigger: YellowLumber
//===========================================================================
function Trig_YellowLumber_Actions takes nothing returns nothing
    call AdjustPlayerStateBJ( 1000, Player(4), PLAYER_STATE_RESOURCE_LUMBER )
endfunction

//===========================================================================
function InitTrig_YellowLumber takes nothing returns nothing
    set gg_trg_YellowLumber = CreateTrigger(  )
    call TriggerRegisterPlayerStateEvent( gg_trg_YellowLumber, Player(4), PLAYER_STATE_RESOURCE_LUMBER, LESS_THAN_OR_EQUAL, 1000.00 )
    call TriggerAddAction( gg_trg_YellowLumber, function Trig_YellowLumber_Actions )
endfunction

//===========================================================================
// Trigger: OrangeLumber
//===========================================================================
function Trig_OrangeLumber_Actions takes nothing returns nothing
    call AdjustPlayerStateBJ( 1000, Player(5), PLAYER_STATE_RESOURCE_LUMBER )
endfunction

//===========================================================================
function InitTrig_OrangeLumber takes nothing returns nothing
    set gg_trg_OrangeLumber = CreateTrigger(  )
    call TriggerRegisterPlayerStateEvent( gg_trg_OrangeLumber, Player(5), PLAYER_STATE_RESOURCE_LUMBER, LESS_THAN_OR_EQUAL, 1000.00 )
    call TriggerAddAction( gg_trg_OrangeLumber, function Trig_OrangeLumber_Actions )
endfunction

//===========================================================================
// Trigger: ArthasLevelUp
//===========================================================================
function Trig_ArthasLevelUp_Conditions takes nothing returns boolean
    if ( not ( GetLevelingUnit() == udg_Arthas ) ) then
        return false
    endif
    if ( not ( GetHeroLevel(udg_Arthas) >= 8 ) ) then
        return false
    endif
    return true
endfunction

function Trig_ArthasLevelUp_Actions takes nothing returns nothing
    call SuspendHeroXPBJ( false, udg_Arthas )
endfunction

//===========================================================================
function InitTrig_ArthasLevelUp takes nothing returns nothing
    set gg_trg_ArthasLevelUp = CreateTrigger(  )
    call TriggerRegisterPlayerUnitEventSimple( gg_trg_ArthasLevelUp, Player(6), EVENT_PLAYER_HERO_LEVEL )
    call TriggerAddCondition( gg_trg_ArthasLevelUp, Condition( function Trig_ArthasLevelUp_Conditions ) )
    call TriggerAddAction( gg_trg_ArthasLevelUp, function Trig_ArthasLevelUp_Actions )
endfunction

//===========================================================================
// Trigger: KelThuzadLevelUp
//===========================================================================
function Trig_KelThuzadLevelUp_Conditions takes nothing returns boolean
    if ( not ( GetLevelingUnit() == udg_KelThuzad ) ) then
        return false
    endif
    if ( not ( GetHeroLevel(udg_KelThuzad) >= 8 ) ) then
        return false
    endif
    return true
endfunction

function Trig_KelThuzadLevelUp_Actions takes nothing returns nothing
    call SuspendHeroXPBJ( false, udg_KelThuzad )
endfunction

//===========================================================================
function InitTrig_KelThuzadLevelUp takes nothing returns nothing
    set gg_trg_KelThuzadLevelUp = CreateTrigger(  )
    call TriggerRegisterPlayerUnitEventSimple( gg_trg_KelThuzadLevelUp, Player(6), EVENT_PLAYER_HERO_LEVEL )
    call TriggerAddCondition( gg_trg_KelThuzadLevelUp, Condition( function Trig_KelThuzadLevelUp_Conditions ) )
    call TriggerAddAction( gg_trg_KelThuzadLevelUp, function Trig_KelThuzadLevelUp_Actions )
endfunction

//===========================================================================
// Trigger: Archmage01Leash
//===========================================================================
function Trig_Archmage01Leash_Conditions takes nothing returns boolean
    if ( not ( DistanceBetweenPoints(GetUnitLoc(udg_Archmage01), GetRectCenter(gg_rct_Archmage01LeashArea)) >= 300.00 ) ) then
        return false
    endif
    return true
endfunction

function Trig_Archmage01Leash_Actions takes nothing returns nothing
    call IssuePointOrderLocBJ( udg_Archmage01, "move", GetRectCenter(gg_rct_Archmage01LeashArea) )
endfunction

//===========================================================================
function InitTrig_Archmage01Leash takes nothing returns nothing
    set gg_trg_Archmage01Leash = CreateTrigger(  )
    call TriggerRegisterTimerEventPeriodic( gg_trg_Archmage01Leash, 0.50 )
    call TriggerAddCondition( gg_trg_Archmage01Leash, Condition( function Trig_Archmage01Leash_Conditions ) )
    call TriggerAddAction( gg_trg_Archmage01Leash, function Trig_Archmage01Leash_Actions )
endfunction

//===========================================================================
// Trigger: Archmage02Leash
//===========================================================================
function Trig_Archmage02Leash_Conditions takes nothing returns boolean
    if ( not ( DistanceBetweenPoints(GetUnitLoc(udg_Archmage02), GetRectCenter(gg_rct_Archmage02LeashArea)) >= 300.00 ) ) then
        return false
    endif
    return true
endfunction

function Trig_Archmage02Leash_Actions takes nothing returns nothing
    call IssuePointOrderLocBJ( udg_Archmage02, "move", GetRectCenter(gg_rct_Archmage02LeashArea) )
endfunction

//===========================================================================
function InitTrig_Archmage02Leash takes nothing returns nothing
    set gg_trg_Archmage02Leash = CreateTrigger(  )
    call TriggerRegisterTimerEventPeriodic( gg_trg_Archmage02Leash, 0.50 )
    call TriggerAddCondition( gg_trg_Archmage02Leash, Condition( function Trig_Archmage02Leash_Conditions ) )
    call TriggerAddAction( gg_trg_Archmage02Leash, function Trig_Archmage02Leash_Actions )
endfunction

//===========================================================================
// Trigger: Archmage03Leash
//===========================================================================
function Trig_Archmage03Leash_Conditions takes nothing returns boolean
    if ( not ( DistanceBetweenPoints(GetUnitLoc(udg_Archmage03), GetRectCenter(gg_rct_Archmage03LeashArea)) >= 300.00 ) ) then
        return false
    endif
    return true
endfunction

function Trig_Archmage03Leash_Actions takes nothing returns nothing
    call IssuePointOrderLocBJ( udg_Archmage03, "move", GetRectCenter(gg_rct_Archmage03LeashArea) )
endfunction

//===========================================================================
function InitTrig_Archmage03Leash takes nothing returns nothing
    set gg_trg_Archmage03Leash = CreateTrigger(  )
    call TriggerRegisterTimerEventPeriodic( gg_trg_Archmage03Leash, 0.50 )
    call TriggerAddCondition( gg_trg_Archmage03Leash, Condition( function Trig_Archmage03Leash_Conditions ) )
    call TriggerAddAction( gg_trg_Archmage03Leash, function Trig_Archmage03Leash_Actions )
endfunction

//===========================================================================
// Trigger: Load Heroes
//
// Run from Map Init
//===========================================================================
function Trig_Load_Heroes_Actions takes nothing returns nothing
    call InitGameCacheBJ( "Campaigns.w3v" )
    call TriggerExecute( gg_trg_Load_Arthas )
    call TriggerExecute( gg_trg_Load_KelThuzad )
endfunction

//===========================================================================
function InitTrig_Load_Heroes takes nothing returns nothing
    set gg_trg_Load_Heroes = CreateTrigger(  )
    call TriggerAddAction( gg_trg_Load_Heroes, function Trig_Load_Heroes_Actions )
endfunction

//===========================================================================
// Trigger: Load Arthas
//===========================================================================
function Trig_Load_Arthas_Func004001 takes nothing returns boolean
    return ( udg_Arthas != null )
endfunction

function Trig_Load_Arthas_Actions takes nothing returns nothing
    call CommentString( "Load the hero data Arthas" )
    call RestoreUnitLocFacingAngleBJ( "Arthas", "Undead07", GetLastCreatedGameCacheBJ(), Player(6), GetRectCenter(gg_rct_ArthasStart), 90.00 )
    set udg_Arthas = GetLastRestoredUnitBJ()
    if ( Trig_Load_Arthas_Func004001() ) then
        return
    else
        call DoNothing(  )
    endif
    call CommentString( "If the hero data wasn't found, create a default hero" )
    call CreateNUnitsAtLoc( 1, 'Uear', Player(6), GetRectCenter(gg_rct_ArthasStart), 90.00 )
    set udg_Arthas = GetLastCreatedUnit()
    call SetHeroLevel( udg_Arthas, 7, false )
    call SelectHeroSkill( udg_Arthas, 'AUdc' )
    call SelectHeroSkill( udg_Arthas, 'AUdc' )
    call SelectHeroSkill( udg_Arthas, 'AUdc' )
    call SelectHeroSkill( udg_Arthas, 'AUau' )
    call SelectHeroSkill( udg_Arthas, 'AUau' )
    call SelectHeroSkill( udg_Arthas, 'AUdp' )
    call SelectHeroSkill( udg_Arthas, 'AUan' )
endfunction

//===========================================================================
function InitTrig_Load_Arthas takes nothing returns nothing
    set gg_trg_Load_Arthas = CreateTrigger(  )
    call TriggerAddAction( gg_trg_Load_Arthas, function Trig_Load_Arthas_Actions )
endfunction

//===========================================================================
// Trigger: Load KelThuzad
//===========================================================================
function Trig_Load_KelThuzad_Func004001 takes nothing returns boolean
    return ( udg_KelThuzad != null )
endfunction

function Trig_Load_KelThuzad_Actions takes nothing returns nothing
    call CommentString( "Load the hero data Kel'Thuzad" )
    call RestoreUnitLocFacingAngleBJ( "KelThuzad", "Undead07", GetLastCreatedGameCacheBJ(), Player(6), GetRectCenter(gg_rct_KelThuzadStart), 90.00 )
    set udg_KelThuzad = GetLastRestoredUnitBJ()
    if ( Trig_Load_KelThuzad_Func004001() ) then
        return
    else
        call DoNothing(  )
    endif
    call CommentString( "If the hero data wasn't found, create a default hero" )
    call CreateNUnitsAtLoc( 1, 'Uktl', Player(6), GetRectCenter(gg_rct_KelThuzadStart), 90.00 )
    set udg_KelThuzad = GetLastCreatedUnit()
    call SetHeroLevel( udg_KelThuzad, 6, false )
    call SelectHeroSkill( udg_KelThuzad, 'AUfn' )
    call SelectHeroSkill( udg_KelThuzad, 'AUfn' )
    call SelectHeroSkill( udg_KelThuzad, 'AUfa' )
    call SelectHeroSkill( udg_KelThuzad, 'AUfa' )
    call SelectHeroSkill( udg_KelThuzad, 'AUdr' )
    call SelectHeroSkill( udg_KelThuzad, 'AUdd' )
endfunction

//===========================================================================
function InitTrig_Load_KelThuzad takes nothing returns nothing
    set gg_trg_Load_KelThuzad = CreateTrigger(  )
    call TriggerAddAction( gg_trg_Load_KelThuzad, function Trig_Load_KelThuzad_Actions )
endfunction

//===========================================================================
// Trigger: Next Level Prep
//===========================================================================
function Trig_Next_Level_Prep_Actions takes nothing returns nothing
    call CommentString( "Store hero data for the next level(s)" )
    call StoreUnitBJ( udg_Arthas, "Arthas", "Undead08", GetLastCreatedGameCacheBJ() )
    call StoreUnitBJ( udg_KelThuzad, "KelThuzad", "Undead08", GetLastCreatedGameCacheBJ() )
    call SaveGameCacheBJ( GetLastCreatedGameCacheBJ() )
    call CommentString( "Enable the next level in the glue screens" )
    call SetMissionAvailableBJ( true, bj_MISSION_INDEX_U11 )
endfunction

//===========================================================================
function InitTrig_Next_Level_Prep takes nothing returns nothing
    set gg_trg_Next_Level_Prep = CreateTrigger(  )
    call TriggerAddAction( gg_trg_Next_Level_Prep, function Trig_Next_Level_Prep_Actions )
endfunction

//===========================================================================
// Trigger: Next Level Run
//===========================================================================
function Trig_Next_Level_Run_Actions takes nothing returns nothing
    call CommentString( "Run the next level" )
    call SetNextLevelBJ( "Maps\\Campaign\\Undead08.w3m" )
    call CustomVictoryBJ( Player(6), true, true )
endfunction

//===========================================================================
function InitTrig_Next_Level_Run takes nothing returns nothing
    set gg_trg_Next_Level_Run = CreateTrigger(  )
    call TriggerAddAction( gg_trg_Next_Level_Run, function Trig_Next_Level_Run_Actions )
endfunction

//===========================================================================
// Trigger: Victory Cheat
//===========================================================================
function Trig_Victory_Cheat_Actions takes nothing returns nothing
    call ConditionalTriggerExecute( gg_trg_Next_Level_Prep )
    call ConditionalTriggerExecute( gg_trg_Next_Level_Run )
endfunction

//===========================================================================
function InitTrig_Victory_Cheat takes nothing returns nothing
    set gg_trg_Victory_Cheat = CreateTrigger(  )
    call TriggerRegisterPlayerEventVictory( gg_trg_Victory_Cheat, Player(6) )
    call TriggerAddAction( gg_trg_Victory_Cheat, function Trig_Victory_Cheat_Actions )
endfunction

//===========================================================================
// Trigger: DefeatCheat
//===========================================================================
function Trig_DefeatCheat_Actions takes nothing returns nothing
    call CustomDefeatBJ( Player(6), "TRIGSTR_133" )
endfunction

//===========================================================================
function InitTrig_DefeatCheat takes nothing returns nothing
    set gg_trg_DefeatCheat = CreateTrigger(  )
    call TriggerRegisterPlayerEventDefeat( gg_trg_DefeatCheat, Player(6) )
    call TriggerAddAction( gg_trg_DefeatCheat, function Trig_DefeatCheat_Actions )
endfunction

//===========================================================================
// Trigger: StartAIYellow
//===========================================================================
function Trig_StartAIYellow_Actions takes nothing returns nothing
    call DisableTrigger( GetTriggeringTrigger() )
    call CommandAI( Player(4), 0, 0 )
endfunction

//===========================================================================
function InitTrig_StartAIYellow takes nothing returns nothing
    set gg_trg_StartAIYellow = CreateTrigger(  )
    call TriggerRegisterUnitEvent( gg_trg_StartAIYellow, gg_unit_Hamg_0122, EVENT_UNIT_DEATH )
    call TriggerAddAction( gg_trg_StartAIYellow, function Trig_StartAIYellow_Actions )
endfunction

//===========================================================================
// Trigger: StartAIOrange
//===========================================================================
function Trig_StartAIOrange_Actions takes nothing returns nothing
    call DisableTrigger( GetTriggeringTrigger() )
    call CommandAI( Player(5), 0, 0 )
endfunction

//===========================================================================
function InitTrig_StartAIOrange takes nothing returns nothing
    set gg_trg_StartAIOrange = CreateTrigger(  )
    call TriggerRegisterUnitEvent( gg_trg_StartAIOrange, gg_unit_Hamg_0019, EVENT_UNIT_DEATH )
    call TriggerAddAction( gg_trg_StartAIOrange, function Trig_StartAIOrange_Actions )
endfunction

//===========================================================================
// Trigger: OpeningSetup
//===========================================================================
function Trig_OpeningSetup_Actions takes nothing returns nothing
    call SetPlayerAllianceStateBJ( Player(1), Player(6), bj_ALLIANCE_NEUTRAL )
    call SetPlayerAllianceStateBJ( Player(3), Player(6), bj_ALLIANCE_NEUTRAL )
    call SetPlayerAllianceStateBJ( Player(6), Player(1), bj_ALLIANCE_NEUTRAL )
    call SetPlayerAllianceStateBJ( Player(6), Player(3), bj_ALLIANCE_NEUTRAL )
endfunction

//===========================================================================
function InitTrig_OpeningSetup takes nothing returns nothing
    set gg_trg_OpeningSetup = CreateTrigger(  )
    call TriggerAddAction( gg_trg_OpeningSetup, function Trig_OpeningSetup_Actions )
endfunction

//===========================================================================
// Trigger: OpeningCatapultMove
//===========================================================================
function Trig_OpeningCatapultMove_Actions takes nothing returns nothing
    call IssuePointOrderLocBJ( gg_unit_umtw_0079, "move", GetRectCenter(gg_rct_CatapultMoveFinal) )
endfunction

//===========================================================================
function InitTrig_OpeningCatapultMove takes nothing returns nothing
    set gg_trg_OpeningCatapultMove = CreateTrigger(  )
    call TriggerRegisterUnitEvent( gg_trg_OpeningCatapultMove, gg_unit_hwtw_0048, EVENT_UNIT_DEATH )
    call TriggerAddAction( gg_trg_OpeningCatapultMove, function Trig_OpeningCatapultMove_Actions )
endfunction

//===========================================================================
// Trigger: OpeningCancelled
//===========================================================================
function Trig_OpeningCancelled_Func028002 takes nothing returns nothing
    call GroupTargetOrderBJ( GetUnitsInRectAll(gg_rct_HarvestGold), "harvest", gg_unit_ugol_0201 )
endfunction

function Trig_OpeningCancelled_Func029002 takes nothing returns nothing
    call GroupTargetDestructableOrder( GetUnitsInRectAll(gg_rct_HarvestTrees), "harvest", gg_dest_LTlt_0892 )
endfunction

function Trig_OpeningCancelled_Actions takes nothing returns nothing
    call DisableTrigger( GetTriggeringTrigger() )
    set udg_OpeningCancelled = true
    call CinematicModeBJ( false, GetPlayersAll() )
    call SelectUnitSingle( udg_Arthas )
    call SetSkyModel( null )
    call CreateFogModifierRadiusLocBJ( true, Player(6), FOG_OF_WAR_VISIBLE, GetRectCenter(gg_rct_Archmage01Revealer), 450.00 )
    set udg_Archmage01Visibility = GetLastCreatedFogModifier()
    call SetUnitAnimation( gg_unit_uslh_0045, "stand" )
    call SetDoodadAnimationRectBJ( "Stand", 'YZef', gg_rct_Shield01 )
    call SetUnitPositionLoc( gg_unit_umtw_0256, GetRectCenter(gg_rct_MeatWagonDest02) )
    call SetUnitPositionLoc( gg_unit_umtw_0042, GetRectCenter(gg_rct_MeatWagonDest01) )
    call SetPlayerAllianceStateBJ( Player(6), Player(1), bj_ALLIANCE_UNALLIED )
    call SetPlayerAllianceStateBJ( Player(1), Player(6), bj_ALLIANCE_UNALLIED )
    call SetPlayerAllianceStateBJ( Player(3), Player(6), bj_ALLIANCE_UNALLIED )
    call SetPlayerAllianceStateBJ( Player(6), Player(3), bj_ALLIANCE_UNALLIED )
    call RemoveUnit( udg_Antonidas )
    set udg_Antonidas = gg_unit_Hant_0172
    call RemoveUnit( udg_OpeningKnight01 )
    call RemoveUnit( udg_OpeningKnight02 )
    call SetUnitPositionLoc( udg_KelThuzad, GetRectCenter(gg_rct_OpeningKelThuzadDest) )
    call SetUnitPositionLoc( udg_Arthas, GetRectCenter(gg_rct_OpeningArthasDest) )
    call SetUnitPositionLoc( gg_unit_uabo_0041, GetRectCenter(gg_rct_Abom01) )
    call SetUnitPositionLoc( gg_unit_uabo_0138, GetRectCenter(gg_rct_Abom02) )
    call SetUnitPositionLoc( gg_unit_umtw_0079, GetRectCenter(gg_rct_CatapultMoveFinal) )
    call IssueImmediateOrderBJ( gg_unit_umtw_0079, "stop" )
    call KillUnit( gg_unit_hwtw_0048 )
    call KillUnit( gg_unit_hhou_0033 )
    call ForGroup( GetUnitsInRectAll(gg_rct_HarvestGold), function Trig_OpeningCancelled_Func028002 )
    call ForGroup( GetUnitsInRectAll(gg_rct_HarvestTrees), function Trig_OpeningCancelled_Func029002 )
    call ResetToGameCameraForPlayer( Player(6), 0.00 )
    call PanCameraToTimedLocForPlayer( Player(6), GetUnitLoc(udg_Arthas), 0 )
    call ConditionalTriggerExecute( gg_trg_Leaderboard_Create )
    call ConditionalTriggerExecute( gg_trg_StartCampaignAI )
    call ResetTerrainFogBJ(  )
    call TriggerSleepAction( 1.00 )
    call QuestMessageBJ( GetPlayersAll(), bj_QUESTMESSAGE_DISCOVERED, "TRIGSTR_061" )
    call QuestSetDiscoveredBJ( udg_QuestThreeArchmages, true )
    call TriggerSleepAction( 15.00 )
    call QuestMessageBJ( GetPlayersAll(), bj_QUESTMESSAGE_HINT, "TRIGSTR_232" )
    call TriggerSleepAction( 15.00 )
    call QuestMessageBJ( GetPlayersAll(), bj_QUESTMESSAGE_HINT, "TRIGSTR_234" )
endfunction

//===========================================================================
function InitTrig_OpeningCancelled takes nothing returns nothing
    set gg_trg_OpeningCancelled = CreateTrigger(  )
    call DisableTrigger( gg_trg_OpeningCancelled )
    call TriggerRegisterPlayerEventEndCinematic( gg_trg_OpeningCancelled, Player(6) )
    call TriggerAddAction( gg_trg_OpeningCancelled, function Trig_OpeningCancelled_Actions )
endfunction

//===========================================================================
// Trigger: Opening01
//===========================================================================
function Trig_Opening01_Func017001 takes nothing returns boolean
    return ( udg_OpeningCancelled == true )
endfunction

function Trig_Opening01_Func022001 takes nothing returns boolean
    return ( udg_OpeningCancelled == true )
endfunction

function Trig_Opening01_Func025001 takes nothing returns boolean
    return ( udg_OpeningCancelled == true )
endfunction

function Trig_Opening01_Func032001 takes nothing returns boolean
    return ( udg_OpeningCancelled == true )
endfunction

function Trig_Opening01_Func038001 takes nothing returns boolean
    return ( udg_OpeningCancelled == true )
endfunction

function Trig_Opening01_Func043001 takes nothing returns boolean
    return ( udg_OpeningCancelled == true )
endfunction

function Trig_Opening01_Func049001 takes nothing returns boolean
    return ( udg_OpeningCancelled == true )
endfunction

function Trig_Opening01_Actions takes nothing returns nothing
    call CinematicModeBJ( true, GetPlayersAll() )
    call CinematicFadeBJ( bj_CINEFADETYPE_FADEIN, 1.00, "ReplaceableTextures\\CameraMasks\\White_mask.tga", 0, 0, 0, 0 )
    call SetTerrainFogExBJ( 0, 1000, 6000.00, 0, 60.00, 40.00, 30.00 )
    call CameraSetupApplyForPlayer( true, gg_cam_MeatWagon01, Player(6), 0.00 )
    call CameraSetupApplyForPlayer( true, gg_cam_MeatWagon02, Player(6), 6.00 )
    call TriggerSleepAction( 1.00 )
    call CommentString( "***********************" )
    call CommentString( "Music" )
    call ClearMapMusicBJ(  )
    call TriggerSleepAction( 0.01 )
    call PlayThematicMusicBJ( "Sound\\Music\\mp3Music\\DarkAgents.mp3" )
    call SetMapMusicIndexedBJ( "music", 0 )
    call CommentString( "***********************" )
    call CommentString( "NOW SKIPPABLE" )
    call EnableTrigger( gg_trg_OpeningCancelled )
    call TriggerSleepAction( 2.00 )
    if ( Trig_Opening01_Func017001() ) then
        return
    else
        call DoNothing(  )
    endif
    call SetUnitAnimation( gg_unit_uslh_0045, "stand work" )
    call AttachSoundToUnitBJ( gg_snd_SlaughterHouseWhat1, gg_unit_uslh_0045 )
    call PlaySoundBJ( gg_snd_SlaughterHouseWhat1 )
    call TriggerSleepAction( 2.00 )
    if ( Trig_Opening01_Func022001() ) then
        return
    else
        call DoNothing(  )
    endif
    call IssueTargetOrderBJ( gg_unit_umtw_0079, "attack", gg_unit_hhou_0033 )
    call TriggerSleepAction( 1.00 )
    if ( Trig_Opening01_Func025001() ) then
        return
    else
        call DoNothing(  )
    endif
    call CameraSetupApplyForPlayer( true, gg_cam_MeatWagon03, Player(6), 7.00 )
    call AttachSoundToUnitBJ( gg_snd_MeatWagonWhat101, gg_unit_umtw_0042 )
    call SetSoundVolumeBJ( gg_snd_MeatWagonWhat101, 80.00 )
    call PlaySoundBJ( gg_snd_MeatWagonWhat101 )
    call IssuePointOrderLocBJ( gg_unit_umtw_0256, "move", GetRectCenter(gg_rct_MeatWagonDest01) )
    call TriggerSleepAction( 2.00 )
    if ( Trig_Opening01_Func032001() ) then
        return
    else
        call DoNothing(  )
    endif
    call IssuePointOrderLocBJ( gg_unit_umtw_0042, "move", GetRectCenter(gg_rct_MeatWagonDest02) )
    call AttachSoundToUnitBJ( gg_snd_MeatWagonYesAttack2, gg_unit_umtw_0256 )
    call SetSoundVolumeBJ( gg_snd_MeatWagonYesAttack2, 70.00 )
    call PlaySoundBJ( gg_snd_MeatWagonYesAttack2 )
    call TriggerSleepAction( 2.00 )
    if ( Trig_Opening01_Func038001() ) then
        return
    else
        call DoNothing(  )
    endif
    call AttachSoundToUnitBJ( gg_snd_MeatWagonWhat101, gg_unit_umtw_0042 )
    call SetSoundVolumeBJ( gg_snd_MeatWagonWhat101, 80.00 )
    call PlaySoundBJ( gg_snd_MeatWagonWhat101 )
    call TriggerSleepAction( 1.00 )
    if ( Trig_Opening01_Func043001() ) then
        return
    else
        call DoNothing(  )
    endif
    call AttachSoundToUnitBJ( gg_snd_MeatWagonWhat2, gg_unit_umtw_0256 )
    call SetSoundVolumeBJ( gg_snd_MeatWagonWhat2, 80.00 )
    call PlaySoundBJ( gg_snd_MeatWagonWhat2 )
    call IssuePointOrderLocBJ( gg_unit_umtw_0079, "move", GetRectCenter(gg_rct_OpeningCatapultMove) )
    call TriggerSleepAction( 3.00 )
    if ( Trig_Opening01_Func049001() ) then
        return
    else
        call DoNothing(  )
    endif
    call AttachSoundToUnitBJ( gg_snd_MeatWagonYes3, gg_unit_umtw_0256 )
    call SetSoundVolumeBJ( gg_snd_MeatWagonYes3, 70.00 )
    call PlaySoundBJ( gg_snd_MeatWagonYes3 )
    call CommentString( "***********************" )
    call ConditionalTriggerExecute( gg_trg_Opening02 )
endfunction

//===========================================================================
function InitTrig_Opening01 takes nothing returns nothing
    set gg_trg_Opening01 = CreateTrigger(  )
    call TriggerAddAction( gg_trg_Opening01, function Trig_Opening01_Actions )
endfunction

//===========================================================================
// Trigger: Opening02
//===========================================================================
function Trig_Opening02_Conditions takes nothing returns boolean
    if ( not ( udg_OpeningCancelled == false ) ) then
        return false
    endif
    return true
endfunction

function Trig_Opening02_Func008001 takes nothing returns boolean
    return ( udg_OpeningCancelled == true )
endfunction

function Trig_Opening02_Func014001 takes nothing returns boolean
    return ( udg_OpeningCancelled == true )
endfunction

function Trig_Opening02_Func016001 takes nothing returns boolean
    return ( udg_OpeningCancelled == true )
endfunction

function Trig_Opening02_Func018001 takes nothing returns boolean
    return ( udg_OpeningCancelled == true )
endfunction

function Trig_Opening02_Func024001 takes nothing returns boolean
    return ( udg_OpeningCancelled == true )
endfunction

function Trig_Opening02_Func032001 takes nothing returns boolean
    return ( udg_OpeningCancelled == true )
endfunction

function Trig_Opening02_Func034001 takes nothing returns boolean
    return ( udg_OpeningCancelled == true )
endfunction

function Trig_Opening02_Func036001 takes nothing returns boolean
    return ( udg_OpeningCancelled == true )
endfunction

function Trig_Opening02_Func038001 takes nothing returns boolean
    return ( udg_OpeningCancelled == true )
endfunction

function Trig_Opening02_Func047001 takes nothing returns boolean
    return ( udg_OpeningCancelled == true )
endfunction

function Trig_Opening02_Func050001 takes nothing returns boolean
    return ( udg_OpeningCancelled == true )
endfunction

function Trig_Opening02_Func053001 takes nothing returns boolean
    return ( udg_OpeningCancelled == true )
endfunction

function Trig_Opening02_Actions takes nothing returns nothing
    call CommentString( "***********************" )
    call CameraSetupApplyForPlayer( true, gg_cam_Opening01, Player(6), 0.00 )
    call CameraSetupApplyForPlayer( true, gg_cam_Opening02, Player(6), 10.00 )
    call IssuePointOrderLocBJ( gg_unit_uabo_0041, "move", GetRectCenter(gg_rct_Abom01) )
    call IssuePointOrderLocBJ( gg_unit_uabo_0138, "move", GetRectCenter(gg_rct_Abom02) )
    call TriggerSleepAction( 6.00 )
    if ( Trig_Opening02_Func008001() ) then
        return
    else
        call DoNothing(  )
    endif
    call IssuePointOrderLocBJ( udg_Arthas, "move", GetRectCenter(gg_rct_OpeningArthasDest) )
    call AttachSoundToUnitBJ( gg_snd_HorseLoop1, udg_Arthas )
    call SetSoundVolumeBJ( gg_snd_HorseLoop1, 60.00 )
    call PlaySoundBJ( gg_snd_HorseLoop1 )
    call TriggerSleepAction( 3.00 )
    if ( Trig_Opening02_Func014001() ) then
        return
    else
        call DoNothing(  )
    endif
    call TransmissionFromUnitWithNameBJ( GetPlayersAll(), udg_Arthas, "TRIGSTR_034", gg_snd_U07Arthas01, "TRIGSTR_035", bj_TIMETYPE_ADD, 0, true )
    if ( Trig_Opening02_Func016001() ) then
        return
    else
        call DoNothing(  )
    endif
    call TriggerSleepAction( 1.00 )
    if ( Trig_Opening02_Func018001() ) then
        return
    else
        call DoNothing(  )
    endif
    call CameraSetupApplyForPlayer( true, gg_cam_Opening03, Player(6), 4.00 )
    call IssuePointOrderLocBJ( udg_Antonidas, "move", GetRectCenter(gg_rct_AntonidasTeleportOpening) )
    call AttachSoundToUnitBJ( gg_snd_HorseLoop3, udg_Antonidas )
    call PlaySoundBJ( gg_snd_HorseLoop3 )
    call TriggerSleepAction( 0.75 )
    if ( Trig_Opening02_Func024001() ) then
        return
    else
        call DoNothing(  )
    endif
    call IssuePointOrderLocBJ( gg_unit_hkni_0059, "move", GetRectCenter(gg_rct_Knight01Post) )
    call AttachSoundToUnitBJ( gg_snd_HorseLoop2, gg_unit_hkni_0059 )
    call PlaySoundBJ( gg_snd_HorseLoop2 )
    call IssuePointOrderLocBJ( gg_unit_hkni_0058, "move", GetRectCenter(gg_rct_Knight02Post) )
    call AttachSoundToUnitBJ( gg_snd_HorseLoop1, gg_unit_hkni_0058 )
    call PlaySoundBJ( gg_snd_HorseLoop1 )
    call TriggerSleepAction( 4.00 )
    if ( Trig_Opening02_Func032001() ) then
        return
    else
        call DoNothing(  )
    endif
    call TransmissionFromUnitWithNameBJ( GetPlayersAll(), udg_Antonidas, "TRIGSTR_036", gg_snd_U07Antonidas02, "TRIGSTR_037", bj_TIMETYPE_ADD, 0, true )
    if ( Trig_Opening02_Func034001() ) then
        return
    else
        call DoNothing(  )
    endif
    call TransmissionFromUnitWithNameBJ( GetPlayersAll(), udg_Arthas, "TRIGSTR_038", gg_snd_U07Arthas03, "TRIGSTR_039", bj_TIMETYPE_ADD, 0, true )
    if ( Trig_Opening02_Func036001() ) then
        return
    else
        call DoNothing(  )
    endif
    call TransmissionFromUnitWithNameBJ( GetPlayersAll(), udg_Antonidas, "TRIGSTR_044", gg_snd_U07Antonidas04, "TRIGSTR_045", bj_TIMETYPE_ADD, 0, true )
    if ( Trig_Opening02_Func038001() ) then
        return
    else
        call DoNothing(  )
    endif
    call SetUnitAnimation( udg_Antonidas, "spell" )
    call AttachSoundToUnitBJ( gg_snd_RejuvenationTarget1, udg_Antonidas )
    call SetSoundVolumeBJ( gg_snd_RejuvenationTarget1, 80.00 )
    call PlaySoundBJ( gg_snd_RejuvenationTarget1 )
    call AttachSoundToUnitBJ( gg_snd_DivineShield, udg_Antonidas )
    call SetSoundVolumeBJ( gg_snd_DivineShield, 80.00 )
    call PlaySoundBJ( gg_snd_DivineShield )
    call TriggerSleepAction( 1.00 )
    if ( Trig_Opening02_Func047001() ) then
        return
    else
        call DoNothing(  )
    endif
    call SetDoodadAnimationRectBJ( "Stand", 'YZef', gg_rct_Shield01 )
    call TriggerSleepAction( 1.25 )
    if ( Trig_Opening02_Func050001() ) then
        return
    else
        call DoNothing(  )
    endif
    call CameraSetupApplyForPlayer( true, gg_cam_Opening_3a, Player(6), 12.00 )
    call TransmissionFromUnitWithNameBJ( GetPlayersAll(), udg_Arthas, "TRIGSTR_046", gg_snd_U07Arthas05, "TRIGSTR_047", bj_TIMETYPE_ADD, 0, true )
    if ( Trig_Opening02_Func053001() ) then
        return
    else
        call DoNothing(  )
    endif
    call CommentString( "***********************" )
    call DestroyFogModifier( GetLastCreatedFogModifier() )
    call ConditionalTriggerExecute( gg_trg_Opening03 )
endfunction

//===========================================================================
function InitTrig_Opening02 takes nothing returns nothing
    set gg_trg_Opening02 = CreateTrigger(  )
    call TriggerAddCondition( gg_trg_Opening02, Condition( function Trig_Opening02_Conditions ) )
    call TriggerAddAction( gg_trg_Opening02, function Trig_Opening02_Actions )
endfunction

//===========================================================================
// Trigger: Opening03
//===========================================================================
function Trig_Opening03_Conditions takes nothing returns boolean
    if ( not ( udg_OpeningCancelled == false ) ) then
        return false
    endif
    return true
endfunction

function Trig_Opening03_Func003001 takes nothing returns boolean
    return ( udg_OpeningCancelled == true )
endfunction

function Trig_Opening03_Func009001 takes nothing returns boolean
    return ( udg_OpeningCancelled == true )
endfunction

function Trig_Opening03_Func012001 takes nothing returns boolean
    return ( udg_OpeningCancelled == true )
endfunction

function Trig_Opening03_Func015001 takes nothing returns boolean
    return ( udg_OpeningCancelled == true )
endfunction

function Trig_Opening03_Func017001 takes nothing returns boolean
    return ( udg_OpeningCancelled == true )
endfunction

function Trig_Opening03_Func030002 takes nothing returns nothing
    call GroupTargetOrderBJ( GetUnitsInRectAll(gg_rct_HarvestGold), "harvest", gg_unit_ugol_0201 )
endfunction

function Trig_Opening03_Func031002 takes nothing returns nothing
    call GroupTargetDestructableOrder( GetUnitsInRectAll(gg_rct_HarvestTrees), "harvest", gg_dest_LTlt_0892 )
endfunction

function Trig_Opening03_Actions takes nothing returns nothing
    call TransmissionFromUnitWithNameBJ( GetPlayersAll(), udg_Antonidas, "TRIGSTR_048", gg_snd_U07Antonidas06, "TRIGSTR_049", bj_TIMETYPE_ADD, 0, true )
    if ( Trig_Opening03_Func003001() ) then
        return
    else
        call DoNothing(  )
    endif
    call IssueTargetOrderBJ( udg_Antonidas, "massteleport", gg_unit_hsor_0188 )
    call AttachSoundToUnitBJ( gg_snd_MassTeleportTarget, udg_Antonidas )
    call SetSoundVolumeBJ( gg_snd_MassTeleportTarget, 80.00 )
    call PlaySoundBJ( gg_snd_MassTeleportTarget )
    call TriggerSleepAction( 3.00 )
    if ( Trig_Opening03_Func009001() ) then
        return
    else
        call DoNothing(  )
    endif
    call IssuePointOrderLocBJ( udg_KelThuzad, "move", GetRectCenter(gg_rct_OpeningKelThuzadDest) )
    call TriggerSleepAction( 2.00 )
    if ( Trig_Opening03_Func012001() ) then
        return
    else
        call DoNothing(  )
    endif
    call CameraSetupApplyForPlayer( true, gg_cam_Opening04, Player(6), 0 )
    call TriggerSleepAction( 0.50 )
    if ( Trig_Opening03_Func015001() ) then
        return
    else
        call DoNothing(  )
    endif
    call TransmissionFromUnitWithNameBJ( GetPlayersAll(), udg_KelThuzad, "TRIGSTR_052", gg_snd_U07KelThuzad07, "TRIGSTR_053", bj_TIMETYPE_ADD, 0, true )
    if ( Trig_Opening03_Func017001() ) then
        return
    else
        call DoNothing(  )
    endif
    call CommentString( "NO LONGER SKIPPABLE" )
    call DisableTrigger( gg_trg_OpeningCancelled )
    call RemoveUnit( udg_Antonidas )
    set udg_Antonidas = gg_unit_Hant_0172
    call RemoveUnit( udg_OpeningKnight01 )
    call RemoveUnit( udg_OpeningKnight02 )
    call CreateFogModifierRadiusLocBJ( true, Player(6), FOG_OF_WAR_VISIBLE, GetRectCenter(gg_rct_Archmage01Revealer), 450.00 )
    set udg_Archmage01Visibility = GetLastCreatedFogModifier()
    call SetPlayerAllianceStateBJ( Player(1), Player(6), bj_ALLIANCE_UNALLIED )
    call SetPlayerAllianceStateBJ( Player(3), Player(6), bj_ALLIANCE_UNALLIED )
    call SetPlayerAllianceStateBJ( Player(6), Player(1), bj_ALLIANCE_UNALLIED )
    call SetPlayerAllianceStateBJ( Player(6), Player(3), bj_ALLIANCE_UNALLIED )
    call ForGroup( GetUnitsInRectAll(gg_rct_HarvestGold), function Trig_Opening03_Func030002 )
    call ForGroup( GetUnitsInRectAll(gg_rct_HarvestTrees), function Trig_Opening03_Func031002 )
    call CommentString( "***********************" )
    call SetSkyModel( null )
    call CinematicFadeBJ( bj_CINEFADETYPE_FADEOUT, 0.50, "ReplaceableTextures\\CameraMasks\\White_mask.tga", 0, 0, 0, 0 )
    call TriggerSleepAction( 0.50 )
    call CinematicModeBJ( false, GetPlayersAll() )
    call SelectUnitSingle( udg_Arthas )
    call ResetToGameCameraForPlayer( Player(6), 0.00 )
    call PanCameraToTimedLocForPlayer( Player(6), GetUnitLoc(udg_Arthas), 0 )
    call CinematicFadeBJ( bj_CINEFADETYPE_FADEIN, 0.50, "ReplaceableTextures\\CameraMasks\\White_mask.tga", 0, 0, 0, 0 )
    call PingMinimapLocForForce( GetPlayersAll(), GetRectCenter(gg_rct_Archmage01Revealer), 5.00 )
    call ResetUnitAnimation( gg_unit_uslh_0045 )
    call ConditionalTriggerExecute( gg_trg_StartCampaignAI )
    call ConditionalTriggerExecute( gg_trg_Leaderboard_Create )
    call TriggerSleepAction( 1.00 )
    call QuestMessageBJ( GetPlayersAll(), bj_QUESTMESSAGE_DISCOVERED, "TRIGSTR_057" )
    call QuestSetDiscoveredBJ( udg_QuestThreeArchmages, true )
    call TriggerSleepAction( 15.00 )
    call QuestMessageBJ( GetPlayersAll(), bj_QUESTMESSAGE_HINT, "TRIGSTR_129" )
    call TriggerSleepAction( 15.00 )
    call QuestMessageBJ( GetPlayersAll(), bj_QUESTMESSAGE_HINT, "TRIGSTR_118" )
endfunction

//===========================================================================
function InitTrig_Opening03 takes nothing returns nothing
    set gg_trg_Opening03 = CreateTrigger(  )
    call TriggerAddCondition( gg_trg_Opening03, Condition( function Trig_Opening03_Conditions ) )
    call TriggerAddAction( gg_trg_Opening03, function Trig_Opening03_Actions )
endfunction

//===========================================================================
// Trigger: EndingCancelled
//===========================================================================
function Trig_EndingCancelled_Conditions takes nothing returns boolean
    if ( not ( udg_EndingCancelled == false ) ) then
        return false
    endif
    return true
endfunction

function Trig_EndingCancelled_Actions takes nothing returns nothing
    set udg_EndingCancelled = true
    call ShowUnitShow( gg_unit_nbsm_0251 )
    call SetUnitAnimation( gg_unit_nbsm_0251, "stand second" )
    call TriggerSleepAction( 1.00 )
    call CinematicFadeBJ( bj_CINEFADETYPE_FADEOUT, 2.00, "ReplaceableTextures\\CameraMasks\\White_mask.tga", 0, 0, 0, 0 )
    call TriggerSleepAction( 2.00 )
    call ConditionalTriggerExecute( gg_trg_Victory )
endfunction

//===========================================================================
function InitTrig_EndingCancelled takes nothing returns nothing
    set gg_trg_EndingCancelled = CreateTrigger(  )
    call DisableTrigger( gg_trg_EndingCancelled )
    call TriggerRegisterPlayerEventEndCinematic( gg_trg_EndingCancelled, Player(6) )
    call TriggerAddCondition( gg_trg_EndingCancelled, Condition( function Trig_EndingCancelled_Conditions ) )
    call TriggerAddAction( gg_trg_EndingCancelled, function Trig_EndingCancelled_Actions )
endfunction

//===========================================================================
// Trigger: Ending01
//===========================================================================
function Trig_Ending01_Conditions takes nothing returns boolean
    if ( not ( IsTriggerEnabled(gg_trg_Ending01) == true ) ) then
        return false
    endif
    return true
endfunction

function Trig_Ending01_Func015002 takes nothing returns nothing
    call UnitRemoveBuffsBJ( bj_REMOVEBUFFS_ALL, GetEnumUnit() )
endfunction

function Trig_Ending01_Func024002 takes nothing returns nothing
    call GroupAddUnitSimple( GetEnumUnit(), udg_CinematicGroup )
endfunction

function Trig_Ending01_Func025002 takes nothing returns nothing
    call ShowUnitHide( GetEnumUnit() )
endfunction

function Trig_Ending01_Func026002 takes nothing returns nothing
    call ShowUnitShow( GetEnumUnit() )
endfunction

function Trig_Ending01_Func027002 takes nothing returns nothing
    call ShowUnitHide( GetEnumUnit() )
endfunction

function Trig_Ending01_Func029001 takes nothing returns boolean
    return ( IsUnitDeadBJ(udg_Arthas) == true )
endfunction

function Trig_Ending01_Func030001 takes nothing returns boolean
    return ( IsUnitDeadBJ(udg_KelThuzad) == true )
endfunction

function Trig_Ending01_Func048001 takes nothing returns boolean
    return ( udg_EndingCancelled == true )
endfunction

function Trig_Ending01_Func050001 takes nothing returns boolean
    return ( udg_EndingCancelled == true )
endfunction

function Trig_Ending01_Func052001 takes nothing returns boolean
    return ( udg_EndingCancelled == true )
endfunction

function Trig_Ending01_Func054001 takes nothing returns boolean
    return ( udg_EndingCancelled == true )
endfunction

function Trig_Ending01_Func056001 takes nothing returns boolean
    return ( udg_EndingCancelled == true )
endfunction

function Trig_Ending01_Actions takes nothing returns nothing
    call DisableTrigger( GetTriggeringTrigger() )
    call ConditionalTriggerExecute( gg_trg_Next_Level_Prep )
    call CommentString( "Music" )
    call PlayThematicMusicBJ( "Sound\\Music\\mp3Music\\DarkAgents.mp3" )
    call CommentString( "***********************" )
    call CinematicFadeBJ( bj_CINEFADETYPE_FADEOUT, 0.50, "ReplaceableTextures\\CameraMasks\\White_mask.tga", 0, 0, 0, 0 )
    call DisableTrigger( gg_trg_Defeat )
    call DisableTrigger( gg_trg_Shield01Enter )
    call DisableTrigger( gg_trg_Shield02Enter )
    call DisableTrigger( gg_trg_Shield03Enter )
    call ConditionalTriggerExecute( gg_trg_Shield01Down )
    call ConditionalTriggerExecute( gg_trg_Shield02Down )
    call ConditionalTriggerExecute( gg_trg_Shield03Down )
    call ForGroup( GetUnitsInRectAll(GetPlayableMapRect()), function Trig_Ending01_Func015002 )
    call SetDoodadAnimationRectBJ( "death", 'XOmr', gg_rct_DoodadDeathArea03 )
    call SetDoodadAnimationRectBJ( "death", 'XOcs', gg_rct_DoodadDeathArea03 )
    call SetSoundPositionLocBJ( gg_snd_LightningShieldTarget, GetRectCenter(gg_rct_DoodadDeathArea03), 0 )
    call PlaySoundBJ( gg_snd_LightningShieldTarget )
    call SetSoundPositionLocBJ( gg_snd_RejuvenationTarget1, GetRectCenter(gg_rct_DoodadDeathArea03), 0 )
    call PlaySoundBJ( gg_snd_RejuvenationTarget1 )
    call DisableTrigger( gg_trg_Archmage03 )
    call CommentString( "Hide shuffle to leave player units in area around Antonidas area" )
    call ForGroup( GetUnitsOfPlayerAll(Player(6)), function Trig_Ending01_Func024002 )
    call ForGroup( GetUnitsInRectAll(GetPlayableMapRect()), function Trig_Ending01_Func025002 )
    call ForGroup( udg_CinematicGroup, function Trig_Ending01_Func026002 )
    call ForGroup( GetUnitsInRectAll(gg_rct_EndingPlayerGroupArea), function Trig_Ending01_Func027002 )
    call CommentString( "********" )
    if ( Trig_Ending01_Func029001() ) then
        call ReviveHeroLoc( udg_Arthas, GetRectCenter(gg_rct_Arthas_Confronts_Antonidas), false )
    else
        call SetUnitPositionLocFacingLocBJ( udg_Arthas, GetRectCenter(gg_rct_Arthas_Confronts_Antonidas), GetRectCenter(gg_rct_Archmage03LeashArea) )
    endif
    if ( Trig_Ending01_Func030001() ) then
        call ReviveHeroLoc( udg_KelThuzad, GetRectCenter(gg_rct_KelThuzad), false )
    else
        call SetUnitPositionLocFacingLocBJ( udg_KelThuzad, GetRectCenter(gg_rct_KelThuzad), GetRectCenter(gg_rct_Archmage03LeashArea) )
    endif
    call ShowUnitShow( udg_Arthas )
    call ShowUnitShow( udg_KelThuzad )
    call ShowUnitShow( gg_unit_nbsm_0251 )
    call PauseAllUnitsBJ( true )
    call ConditionalTriggerExecute( gg_trg_EndingAlly )
    call CinematicModeBJ( true, GetPlayersAll() )
    call TriggerSleepAction( 0.50 )
    call RemoveUnit( udg_Antonidas )
    call CreateNUnitsAtLocFacingLocBJ( 1, 'Hant', Player(5), GetRectCenter(gg_rct_Archmage03LeashArea), GetUnitLoc(udg_Arthas) )
    set udg_Antonidas = GetLastCreatedUnit()
    call PauseUnitBJ( true, udg_Antonidas )
    call SetUnitFacingToFaceUnitTimed( udg_Antonidas, udg_Arthas, 0 )
    call CameraSetupApplyForPlayer( true, gg_cam_Ending01, Player(6), 0.00 )
    call CommentString( "NOW SKIPPABLE" )
    call EnableTrigger( gg_trg_EndingCancelled )
    call TriggerSleepAction( 1.00 )
    call CinematicFadeBJ( bj_CINEFADETYPE_FADEIN, 2.00, "ReplaceableTextures\\CameraMasks\\White_mask.tga", 0, 0, 0, 0 )
    if ( Trig_Ending01_Func048001() ) then
        return
    else
        call DoNothing(  )
    endif
    call TransmissionFromUnitWithNameBJ( GetPlayersAll(), udg_Antonidas, "TRIGSTR_009", gg_snd_U07Antonidas13, "TRIGSTR_010", bj_TIMETYPE_ADD, 0, true )
    if ( Trig_Ending01_Func050001() ) then
        return
    else
        call DoNothing(  )
    endif
    call TriggerSleepAction( 1.00 )
    if ( Trig_Ending01_Func052001() ) then
        return
    else
        call DoNothing(  )
    endif
    call TransmissionFromUnitWithNameBJ( GetPlayersAll(), udg_Arthas, "TRIGSTR_016", gg_snd_U07Arthas14, "TRIGSTR_019", bj_TIMETYPE_ADD, 0, true )
    if ( Trig_Ending01_Func054001() ) then
        return
    else
        call DoNothing(  )
    endif
    call TriggerSleepAction( 1.00 )
    if ( Trig_Ending01_Func056001() ) then
        return
    else
        call DoNothing(  )
    endif
    call PauseUnitBJ( false, udg_Arthas )
    call IssuePointOrderLocBJ( udg_Arthas, "move", GetRectCenter(gg_rct_Arthas_Kill_Antonidas) )
    call EnableTrigger( gg_trg_Arthas_Kill_Antonidas )
endfunction

//===========================================================================
function InitTrig_Ending01 takes nothing returns nothing
    set gg_trg_Ending01 = CreateTrigger(  )
    call TriggerAddCondition( gg_trg_Ending01, Condition( function Trig_Ending01_Conditions ) )
    call TriggerAddAction( gg_trg_Ending01, function Trig_Ending01_Actions )
endfunction

//===========================================================================
// Trigger: Ending02
//===========================================================================
function Trig_Ending02_Func005001 takes nothing returns boolean
    return ( udg_EndingCancelled == true )
endfunction

function Trig_Ending02_Func019001 takes nothing returns boolean
    return ( udg_EndingCancelled == true )
endfunction

function Trig_Ending02_Func021001 takes nothing returns boolean
    return ( udg_EndingCancelled == true )
endfunction

function Trig_Ending02_Func024001 takes nothing returns boolean
    return ( udg_EndingCancelled == true )
endfunction

function Trig_Ending02_Func030001 takes nothing returns boolean
    return ( udg_EndingCancelled == true )
endfunction

function Trig_Ending02_Actions takes nothing returns nothing
    call SetUnitInvulnerable( udg_Arthas, true )
    call SetUnitInvulnerable( udg_KelThuzad, true )
    call CameraSetupApplyForPlayer( true, gg_cam_Ending02a, Player(6), 0 )
    call TriggerSleepAction( 0.25 )
    if ( Trig_Ending02_Func005001() ) then
        return
    else
        call DoNothing(  )
    endif
    call CameraSetupApplyForPlayer( true, gg_cam_Ending02, Player(6), 6.00 )
    call ReviveHeroLoc( udg_Arthas, GetRectCenter(gg_rct_ArthasStart), false )
    call ReviveHeroLoc( udg_KelThuzad, GetRectCenter(gg_rct_KelThuzadStart), false )
    call SetUnitPositionLoc( udg_Arthas, GetRectCenter(gg_rct_EndingArthasStart) )
    call IssuePointOrderLocBJ( udg_Arthas, "move", GetRectCenter(gg_rct_EndingArthasDest) )
    call AttachSoundToUnitBJ( gg_snd_HorseLoop1, udg_Arthas )
    call PlaySoundBJ( gg_snd_HorseLoop1 )
    call SetUnitPositionLoc( udg_KelThuzad, GetRectCenter(gg_rct_EndingKelThuzadStart) )
    call IssuePointOrderLocBJ( udg_KelThuzad, "move", GetRectCenter(gg_rct_EndingKelThuzadEnd) )
    call SetUnitVertexColorBJ( udg_Arthas, 100.00, 100.00, 100.00, 0.00 )
    call SetUnitVertexColorBJ( udg_KelThuzad, 100.00, 100.00, 100.00, 0.00 )
    call CinematicFadeBJ( bj_CINEFADETYPE_FADEIN, 1.00, "ReplaceableTextures\\CameraMasks\\White_mask.tga", 0, 0, 0, 0 )
    call TriggerSleepAction( 2.00 )
    if ( Trig_Ending02_Func019001() ) then
        return
    else
        call DoNothing(  )
    endif
    call TransmissionFromUnitWithNameBJ( GetPlayersAll(), udg_Arthas, "TRIGSTR_026", gg_snd_U07Arthas15, "TRIGSTR_029", bj_TIMETYPE_ADD, 0, true )
    if ( Trig_Ending02_Func021001() ) then
        return
    else
        call DoNothing(  )
    endif
    call TransmissionFromUnitWithNameBJ( GetPlayersAll(), udg_KelThuzad, "TRIGSTR_030", gg_snd_U07KelThuzad16, "TRIGSTR_031", bj_TIMETYPE_ADD, 0, false )
    call WaitForSoundBJ( gg_snd_U07KelThuzad16, 0.30 )
    if ( Trig_Ending02_Func024001() ) then
        return
    else
        call DoNothing(  )
    endif
    call SetUnitAnimation( gg_unit_nbsm_0251, "stand second" )
    call SetSoundPositionLocBJ( gg_snd_QuestActivateWhat1, GetRectCenter(gg_rct_EndingKelThuzadEnd), 0 )
    call SetSoundVolumeBJ( gg_snd_QuestActivateWhat1, 40.00 )
    call PlaySoundBJ( gg_snd_QuestActivateWhat1 )
    call TriggerSleepAction( 1.00 )
    if ( Trig_Ending02_Func030001() ) then
        return
    else
        call DoNothing(  )
    endif
    call CinematicFadeBJ( bj_CINEFADETYPE_FADEOUT, 2.00, "ReplaceableTextures\\CameraMasks\\White_mask.tga", 0, 0, 0, 0 )
    call TriggerSleepAction( 2.00 )
    call ConditionalTriggerExecute( gg_trg_Victory )
endfunction

//===========================================================================
function InitTrig_Ending02 takes nothing returns nothing
    set gg_trg_Ending02 = CreateTrigger(  )
    call TriggerAddAction( gg_trg_Ending02, function Trig_Ending02_Actions )
endfunction

//===========================================================================
// Trigger: EndingAlly
//===========================================================================
function Trig_EndingAlly_Actions takes nothing returns nothing
    call SetPlayerAllianceStateBJ( Player(3), Player(6), bj_ALLIANCE_NEUTRAL )
    call SetPlayerAllianceStateBJ( Player(4), Player(6), bj_ALLIANCE_NEUTRAL )
    call SetPlayerAllianceStateBJ( Player(5), Player(6), bj_ALLIANCE_NEUTRAL )
    call SetPlayerAllianceStateBJ( Player(6), Player(3), bj_ALLIANCE_NEUTRAL )
    call SetPlayerAllianceStateBJ( Player(6), Player(4), bj_ALLIANCE_NEUTRAL )
    call SetPlayerAllianceStateBJ( Player(6), Player(5), bj_ALLIANCE_NEUTRAL )
    call SetPlayerAllianceStateBJ( Player(8), Player(6), bj_ALLIANCE_NEUTRAL )
    call SetPlayerAllianceStateBJ( Player(6), Player(8), bj_ALLIANCE_NEUTRAL )
endfunction

//===========================================================================
function InitTrig_EndingAlly takes nothing returns nothing
    set gg_trg_EndingAlly = CreateTrigger(  )
    call TriggerAddAction( gg_trg_EndingAlly, function Trig_EndingAlly_Actions )
endfunction

//===========================================================================
// Trigger: Arthas Kill Antonidas
//===========================================================================
function Trig_Arthas_Kill_Antonidas_Func007001 takes nothing returns boolean
    return ( udg_EndingCancelled == true )
endfunction

function Trig_Arthas_Kill_Antonidas_Func010001 takes nothing returns boolean
    return ( udg_EndingCancelled == true )
endfunction

function Trig_Arthas_Kill_Antonidas_Func016001 takes nothing returns boolean
    return ( udg_EndingCancelled == true )
endfunction

function Trig_Arthas_Kill_Antonidas_Func020001 takes nothing returns boolean
    return ( udg_EndingCancelled == true )
endfunction

function Trig_Arthas_Kill_Antonidas_Actions takes nothing returns nothing
    call DisableTrigger( GetTriggeringTrigger() )
    call IssueImmediateOrderBJ( udg_Arthas, "stop" )
    call SetUnitFacingToFaceUnitTimed( udg_Arthas, udg_Antonidas, 0 )
    call SetUnitAnimation( udg_Arthas, "attack" )
    call TriggerSleepAction( 0.25 )
    if ( Trig_Arthas_Kill_Antonidas_Func007001() ) then
        return
    else
        call DoNothing(  )
    endif
    call PlaySoundBJ( gg_snd_MetalMediumSliceFlesh1 )
    call TriggerSleepAction( 0.25 )
    if ( Trig_Arthas_Kill_Antonidas_Func010001() ) then
        return
    else
        call DoNothing(  )
    endif
    call SetUnitAnimation( udg_Antonidas, "death" )
    call ResetUnitAnimation( udg_Arthas )
    call SetSoundPositionLocBJ( gg_snd_HeroArchMageDeath, GetRectCenter(gg_rct_Archmage03LeashArea), 0 )
    call PlaySoundBJ( gg_snd_HeroArchMageDeath )
    call TriggerSleepAction( 1.00 )
    if ( Trig_Arthas_Kill_Antonidas_Func016001() ) then
        return
    else
        call DoNothing(  )
    endif
    call CinematicFadeBJ( bj_CINEFADETYPE_FADEOUT, 2, "ReplaceableTextures\\CameraMasks\\White_mask.tga", 0, 0, 0, 0 )
    call TriggerSleepAction( 2.00 )
    call PauseAllUnitsBJ( false )
    if ( Trig_Arthas_Kill_Antonidas_Func020001() ) then
        return
    else
        call DoNothing(  )
    endif
    call ConditionalTriggerExecute( gg_trg_Ending02 )
endfunction

//===========================================================================
function InitTrig_Arthas_Kill_Antonidas takes nothing returns nothing
    set gg_trg_Arthas_Kill_Antonidas = CreateTrigger(  )
    call DisableTrigger( gg_trg_Arthas_Kill_Antonidas )
    call TriggerRegisterEnterRectSimple( gg_trg_Arthas_Kill_Antonidas, gg_rct_Arthas_Kill_Antonidas )
    call TriggerAddAction( gg_trg_Arthas_Kill_Antonidas, function Trig_Arthas_Kill_Antonidas_Actions )
endfunction

//===========================================================================
// Trigger: ExoticBeastiaryQ
//===========================================================================
function Trig_ExoticBeastiaryQ_Conditions takes nothing returns boolean
    if ( not ( GetEnteringUnit() == udg_KelThuzad ) ) then
        return false
    endif
    return true
endfunction

function Trig_ExoticBeastiaryQ_Actions takes nothing returns nothing
    call DisableTrigger( GetTriggeringTrigger() )
    call QueuedTriggerAddBJ( gg_trg_ExoticBeastiary, true )
endfunction

//===========================================================================
function InitTrig_ExoticBeastiaryQ takes nothing returns nothing
    set gg_trg_ExoticBeastiaryQ = CreateTrigger(  )
    call TriggerRegisterEnterRectSimple( gg_trg_ExoticBeastiaryQ, gg_rct_ExoticBeastiary )
    call TriggerAddCondition( gg_trg_ExoticBeastiaryQ, Condition( function Trig_ExoticBeastiaryQ_Conditions ) )
    call TriggerAddAction( gg_trg_ExoticBeastiaryQ, function Trig_ExoticBeastiaryQ_Actions )
endfunction

//===========================================================================
// Trigger: ExoticBeastiary
//===========================================================================
function Trig_ExoticBeastiary_Conditions takes nothing returns boolean
    if ( not ( udg_GAMEOVER == false ) ) then
        return false
    endif
    return true
endfunction

function Trig_ExoticBeastiary_Actions takes nothing returns nothing
    call DisableTrigger( GetTriggeringTrigger() )
    call SetSpeechVolumeGroupsBJ(  )
    call TransmissionFromUnitWithNameBJ( GetPlayersAll(), udg_KelThuzad, "TRIGSTR_120", gg_snd_U07KelThuzad09, "TRIGSTR_121", bj_TIMETYPE_ADD, 0, true )
    call VolumeGroupResetBJ(  )
    call TriggerSleepAction( bj_QUEUE_DELAY_QUEST )
    call QuestMessageBJ( GetPlayersAll(), bj_QUESTMESSAGE_HINT, "TRIGSTR_122" )
    call TriggerSleepAction( bj_QUEUE_DELAY_HINT )
    call QueuedTriggerRemoveBJ( GetTriggeringTrigger() )
endfunction

//===========================================================================
function InitTrig_ExoticBeastiary takes nothing returns nothing
    set gg_trg_ExoticBeastiary = CreateTrigger(  )
    call TriggerAddCondition( gg_trg_ExoticBeastiary, Condition( function Trig_ExoticBeastiary_Conditions ) )
    call TriggerAddAction( gg_trg_ExoticBeastiary, function Trig_ExoticBeastiary_Actions )
endfunction

//===========================================================================
// Trigger: Cage01
//===========================================================================
function Trig_Cage01_Actions takes nothing returns nothing
    call DisableTrigger( gg_trg_ExoticBeastiaryQ )
    call TriggerSleepAction( 0.10 )
    call CreateNUnitsAtLoc( 1, 'ngst', Player(6), GetRectCenter(gg_rct_Cage01), 80.00 )
    set udg_Golem01 = GetLastCreatedUnit()
endfunction

//===========================================================================
function InitTrig_Cage01 takes nothing returns nothing
    set gg_trg_Cage01 = CreateTrigger(  )
    call TriggerRegisterUnitEvent( gg_trg_Cage01, gg_unit_nwc1_0165, EVENT_UNIT_DEATH )
    call TriggerAddAction( gg_trg_Cage01, function Trig_Cage01_Actions )
endfunction

//===========================================================================
// Trigger: Cage02
//===========================================================================
function Trig_Cage02_Actions takes nothing returns nothing
    call DisableTrigger( gg_trg_ExoticBeastiaryQ )
    call TriggerSleepAction( 0.10 )
    call CreateNUnitsAtLoc( 1, 'ngst', Player(6), GetRectCenter(gg_rct_Cage02), 80.00 )
    set udg_Golem02 = GetLastCreatedUnit()
endfunction

//===========================================================================
function InitTrig_Cage02 takes nothing returns nothing
    set gg_trg_Cage02 = CreateTrigger(  )
    call TriggerRegisterUnitEvent( gg_trg_Cage02, gg_unit_nwc1_0168, EVENT_UNIT_DEATH )
    call TriggerAddAction( gg_trg_Cage02, function Trig_Cage02_Actions )
endfunction

//===========================================================================
// Trigger: Cage03
//===========================================================================
function Trig_Cage03_Actions takes nothing returns nothing
    call TriggerSleepAction( 0.10 )
    call CreateNUnitsAtLoc( 1, 'nomg', Player(6), GetRectCenter(gg_rct_Cage03), 150.00 )
endfunction

//===========================================================================
function InitTrig_Cage03 takes nothing returns nothing
    set gg_trg_Cage03 = CreateTrigger(  )
    call TriggerRegisterUnitEvent( gg_trg_Cage03, gg_unit_nwc1_0209, EVENT_UNIT_DEATH )
    call TriggerAddAction( gg_trg_Cage03, function Trig_Cage03_Actions )
endfunction

//===========================================================================
// Trigger: Cage04
//===========================================================================
function Trig_Cage04_Actions takes nothing returns nothing
    call TriggerSleepAction( 0.10 )
    call CreateNUnitsAtLoc( 1, 'nspb', Player(6), GetRectCenter(gg_rct_Cage04), 230.00 )
    call IssuePointOrderLocBJ( GetLastCreatedUnit(), "move", GetRandomLocInRect(gg_rct_Cage04) )
    call TriggerSleepAction( 0.10 )
    call CreateNUnitsAtLoc( 1, 'nspb', Player(6), GetRectCenter(gg_rct_Cage04), 150.00 )
    call IssuePointOrderLocBJ( GetLastCreatedUnit(), "move", GetRandomLocInRect(gg_rct_Cage04) )
    call TriggerSleepAction( 0.10 )
    call CreateNUnitsAtLoc( 1, 'nspb', Player(6), GetRectCenter(gg_rct_Cage04), 75.00 )
    call IssuePointOrderLocBJ( GetLastCreatedUnit(), "move", GetRandomLocInRect(gg_rct_Cage04) )
    call TriggerSleepAction( 0.10 )
    call CreateNUnitsAtLoc( 1, 'nspb', Player(6), GetRectCenter(gg_rct_Cage04), 300.00 )
    call IssuePointOrderLocBJ( GetLastCreatedUnit(), "move", GetRandomLocInRect(gg_rct_Cage04) )
    call TriggerSleepAction( 0.10 )
    call CreateNUnitsAtLoc( 1, 'nspb', Player(6), GetRectCenter(gg_rct_Cage04), 2.00 )
    call IssuePointOrderLocBJ( GetLastCreatedUnit(), "move", GetRandomLocInRect(gg_rct_Cage04) )
endfunction

//===========================================================================
function InitTrig_Cage04 takes nothing returns nothing
    set gg_trg_Cage04 = CreateTrigger(  )
    call TriggerRegisterUnitEvent( gg_trg_Cage04, gg_unit_nwc1_0203, EVENT_UNIT_DEATH )
    call TriggerAddAction( gg_trg_Cage04, function Trig_Cage04_Actions )
endfunction

//===========================================================================
// Trigger: Cage05
//===========================================================================
function Trig_Cage05_Actions takes nothing returns nothing
    call CreateNUnitsAtLoc( 1, 'nshf', Player(6), GetRectCenter(gg_rct_Cage05), 230.00 )
    set udg_FlyingSheep01 = GetLastCreatedUnit()
    call TriggerSleepAction( 0.10 )
    call CreateNUnitsAtLoc( 1, 'nshf', Player(6), GetRectCenter(gg_rct_Cage05), 300.00 )
    set udg_FlyingSheep02 = GetLastCreatedUnit()
    call TriggerSleepAction( 2.00 )
    call ReplaceUnitBJ( udg_FlyingSheep01, 'nadk', bj_UNIT_STATE_METHOD_DEFAULTS )
    call TriggerSleepAction( 0.50 )
    call ReplaceUnitBJ( udg_FlyingSheep02, 'nadk', bj_UNIT_STATE_METHOD_DEFAULTS )
endfunction

//===========================================================================
function InitTrig_Cage05 takes nothing returns nothing
    set gg_trg_Cage05 = CreateTrigger(  )
    call TriggerRegisterUnitEvent( gg_trg_Cage05, gg_unit_nwc1_0183, EVENT_UNIT_DEATH )
    call TriggerAddAction( gg_trg_Cage05, function Trig_Cage05_Actions )
endfunction

//===========================================================================
// Trigger: GateDown
//===========================================================================
function Trig_GateDown_Conditions takes nothing returns boolean
    if ( not ( GetUnitTypeId(GetTrainedUnit()) == 'hrif' ) ) then
        return false
    endif
    return true
endfunction

function Trig_GateDown_Actions takes nothing returns nothing
    call ModifyGateBJ( bj_GATEOPERATION_OPEN, gg_dest_LTg1_0013 )
endfunction

//===========================================================================
function InitTrig_GateDown takes nothing returns nothing
    set gg_trg_GateDown = CreateTrigger(  )
    call TriggerRegisterPlayerUnitEventSimple( gg_trg_GateDown, Player(3), EVENT_PLAYER_UNIT_TRAIN_FINISH )
    call TriggerAddCondition( gg_trg_GateDown, Condition( function Trig_GateDown_Conditions ) )
    call TriggerAddAction( gg_trg_GateDown, function Trig_GateDown_Actions )
endfunction

//===========================================================================
// Trigger: GyroShield02
//===========================================================================
function Trig_GyroShield02_Conditions takes nothing returns boolean
    if ( not ( GetUnitTypeId(GetEnteringUnit()) == 'ufro' ) ) then
        return false
    endif
    if ( not ( udg_Shield02Switch == true ) ) then
        return false
    endif
    return true
endfunction

function Trig_GyroShield02_Func001002 takes nothing returns nothing
    call IssueTargetOrderBJ( GetEnumUnit(), "attack", GetEnteringUnit() )
endfunction

function Trig_GyroShield02_Actions takes nothing returns nothing
    call ForGroup( udg_GyroForce, function Trig_GyroShield02_Func001002 )
endfunction

//===========================================================================
function InitTrig_GyroShield02 takes nothing returns nothing
    set gg_trg_GyroShield02 = CreateTrigger(  )
    call TriggerRegisterEnterRectSimple( gg_trg_GyroShield02, gg_rct_Shield02 )
    call TriggerAddCondition( gg_trg_GyroShield02, Condition( function Trig_GyroShield02_Conditions ) )
    call TriggerAddAction( gg_trg_GyroShield02, function Trig_GyroShield02_Actions )
endfunction

//===========================================================================
// Trigger: GyroShield02WyrmGroupAdd
//===========================================================================
function Trig_GyroShield02WyrmGroupAdd_Conditions takes nothing returns boolean
    if ( not ( GetUnitTypeId(GetEnteringUnit()) == 'ufro' ) ) then
        return false
    endif
    if ( not ( udg_Shield02Switch == true ) ) then
        return false
    endif
    return true
endfunction

function Trig_GyroShield02WyrmGroupAdd_Actions takes nothing returns nothing
    call GroupAddUnitSimple( GetEnteringUnit(), udg_Shield02FrostWyrmGroup )
endfunction

//===========================================================================
function InitTrig_GyroShield02WyrmGroupAdd takes nothing returns nothing
    set gg_trg_GyroShield02WyrmGroupAdd = CreateTrigger(  )
    call TriggerRegisterEnterRectSimple( gg_trg_GyroShield02WyrmGroupAdd, gg_rct_Shield02 )
    call TriggerAddCondition( gg_trg_GyroShield02WyrmGroupAdd, Condition( function Trig_GyroShield02WyrmGroupAdd_Conditions ) )
    call TriggerAddAction( gg_trg_GyroShield02WyrmGroupAdd, function Trig_GyroShield02WyrmGroupAdd_Actions )
endfunction

//===========================================================================
// Trigger: GyroShield02WyrmGroupSubtract
//===========================================================================
function Trig_GyroShield02WyrmGroupSubtract_Conditions takes nothing returns boolean
    if ( not ( GetUnitTypeId(GetLeavingUnit()) == 'ufro' ) ) then
        return false
    endif
    if ( not ( udg_Shield02Switch == true ) ) then
        return false
    endif
    return true
endfunction

function Trig_GyroShield02WyrmGroupSubtract_Actions takes nothing returns nothing
    call GroupRemoveUnitSimple( GetLeavingUnit(), udg_Shield02FrostWyrmGroup )
    call ConditionalTriggerExecute( gg_trg_GyroShield02Done )
endfunction

//===========================================================================
function InitTrig_GyroShield02WyrmGroupSubtract takes nothing returns nothing
    set gg_trg_GyroShield02WyrmGroupSubtract = CreateTrigger(  )
    call TriggerRegisterLeaveRectSimple( gg_trg_GyroShield02WyrmGroupSubtract, gg_rct_Shield02 )
    call TriggerAddCondition( gg_trg_GyroShield02WyrmGroupSubtract, Condition( function Trig_GyroShield02WyrmGroupSubtract_Conditions ) )
    call TriggerAddAction( gg_trg_GyroShield02WyrmGroupSubtract, function Trig_GyroShield02WyrmGroupSubtract_Actions )
endfunction

//===========================================================================
// Trigger: GyroShield02WyrmGroupSubtractDies
//===========================================================================
function Trig_GyroShield02WyrmGroupSubtractDies_Conditions takes nothing returns boolean
    if ( not ( GetUnitTypeId(GetDyingUnit()) == 'ufro' ) ) then
        return false
    endif
    if ( not ( udg_Shield02Switch == true ) ) then
        return false
    endif
    return true
endfunction

function Trig_GyroShield02WyrmGroupSubtractDies_Actions takes nothing returns nothing
    call GroupRemoveUnitSimple( GetDyingUnit(), udg_Shield02FrostWyrmGroup )
    call ConditionalTriggerExecute( gg_trg_GyroShield02Done )
endfunction

//===========================================================================
function InitTrig_GyroShield02WyrmGroupSubtractDies takes nothing returns nothing
    set gg_trg_GyroShield02WyrmGroupSubtractDies = CreateTrigger(  )
    call TriggerRegisterPlayerUnitEventSimple( gg_trg_GyroShield02WyrmGroupSubtractDies, Player(6), EVENT_PLAYER_UNIT_DEATH )
    call TriggerAddCondition( gg_trg_GyroShield02WyrmGroupSubtractDies, Condition( function Trig_GyroShield02WyrmGroupSubtractDies_Conditions ) )
    call TriggerAddAction( gg_trg_GyroShield02WyrmGroupSubtractDies, function Trig_GyroShield02WyrmGroupSubtractDies_Actions )
endfunction

//===========================================================================
// Trigger: GyroShield02Done
//===========================================================================
function Trig_GyroShield02Done_Func001001 takes nothing returns boolean
    return ( CountUnitsInGroup(udg_Shield02FrostWyrmGroup) <= 0 )
endfunction

function Trig_GyroShield02Done_Actions takes nothing returns nothing
    if ( Trig_GyroShield02Done_Func001001() ) then
        call GroupPointOrderLocBJ( udg_GyroForce, "move", GetRectCenter(gg_rct_GyroForce) )
    else
        call DoNothing(  )
    endif
endfunction

//===========================================================================
function InitTrig_GyroShield02Done takes nothing returns nothing
    set gg_trg_GyroShield02Done = CreateTrigger(  )
    call TriggerAddAction( gg_trg_GyroShield02Done, function Trig_GyroShield02Done_Actions )
endfunction

//===========================================================================
// Trigger: IZZZZZZZI
//===========================================================================
function Trig_IZZZZZZZI_Actions takes nothing returns nothing
endfunction

//===========================================================================
function InitTrig_IZZZZZZZI takes nothing returns nothing
    set gg_trg_IZZZZZZZI = CreateTrigger(  )
    call TriggerAddAction( gg_trg_IZZZZZZZI, function Trig_IZZZZZZZI_Actions )
endfunction

//===========================================================================
// Trigger: GyroShield03
//===========================================================================
function Trig_GyroShield03_Conditions takes nothing returns boolean
    if ( not ( GetUnitTypeId(GetEnteringUnit()) == 'ufro' ) ) then
        return false
    endif
    if ( not ( udg_Shield03Switch == true ) ) then
        return false
    endif
    return true
endfunction

function Trig_GyroShield03_Func001002 takes nothing returns nothing
    call IssueTargetOrderBJ( GetEnumUnit(), "attack", GetEnteringUnit() )
endfunction

function Trig_GyroShield03_Actions takes nothing returns nothing
    call ForGroup( udg_GyroForce, function Trig_GyroShield03_Func001002 )
endfunction

//===========================================================================
function InitTrig_GyroShield03 takes nothing returns nothing
    set gg_trg_GyroShield03 = CreateTrigger(  )
    call TriggerRegisterEnterRectSimple( gg_trg_GyroShield03, gg_rct_Shield03 )
    call TriggerAddCondition( gg_trg_GyroShield03, Condition( function Trig_GyroShield03_Conditions ) )
    call TriggerAddAction( gg_trg_GyroShield03, function Trig_GyroShield03_Actions )
endfunction

//===========================================================================
// Trigger: GyroShield03WyrmGroupAdd
//===========================================================================
function Trig_GyroShield03WyrmGroupAdd_Conditions takes nothing returns boolean
    if ( not ( GetUnitTypeId(GetEnteringUnit()) == 'ufro' ) ) then
        return false
    endif
    if ( not ( udg_Shield03Switch == true ) ) then
        return false
    endif
    return true
endfunction

function Trig_GyroShield03WyrmGroupAdd_Actions takes nothing returns nothing
    call GroupAddUnitSimple( GetEnteringUnit(), udg_Shield03FrostWyrmGroup )
endfunction

//===========================================================================
function InitTrig_GyroShield03WyrmGroupAdd takes nothing returns nothing
    set gg_trg_GyroShield03WyrmGroupAdd = CreateTrigger(  )
    call TriggerRegisterEnterRectSimple( gg_trg_GyroShield03WyrmGroupAdd, gg_rct_Shield03 )
    call TriggerAddCondition( gg_trg_GyroShield03WyrmGroupAdd, Condition( function Trig_GyroShield03WyrmGroupAdd_Conditions ) )
    call TriggerAddAction( gg_trg_GyroShield03WyrmGroupAdd, function Trig_GyroShield03WyrmGroupAdd_Actions )
endfunction

//===========================================================================
// Trigger: GyroShield03WyrmGroupSubtract
//===========================================================================
function Trig_GyroShield03WyrmGroupSubtract_Conditions takes nothing returns boolean
    if ( not ( GetUnitTypeId(GetLeavingUnit()) == 'ufro' ) ) then
        return false
    endif
    if ( not ( udg_Shield03Switch == true ) ) then
        return false
    endif
    return true
endfunction

function Trig_GyroShield03WyrmGroupSubtract_Actions takes nothing returns nothing
    call GroupRemoveUnitSimple( GetLeavingUnit(), udg_Shield03FrostWyrmGroup )
    call ConditionalTriggerExecute( gg_trg_GyroShield03Done )
endfunction

//===========================================================================
function InitTrig_GyroShield03WyrmGroupSubtract takes nothing returns nothing
    set gg_trg_GyroShield03WyrmGroupSubtract = CreateTrigger(  )
    call TriggerRegisterLeaveRectSimple( gg_trg_GyroShield03WyrmGroupSubtract, gg_rct_Shield03 )
    call TriggerAddCondition( gg_trg_GyroShield03WyrmGroupSubtract, Condition( function Trig_GyroShield03WyrmGroupSubtract_Conditions ) )
    call TriggerAddAction( gg_trg_GyroShield03WyrmGroupSubtract, function Trig_GyroShield03WyrmGroupSubtract_Actions )
endfunction

//===========================================================================
// Trigger: GyroShield03WyrmGroupSubtractDies
//===========================================================================
function Trig_GyroShield03WyrmGroupSubtractDies_Conditions takes nothing returns boolean
    if ( not ( GetUnitTypeId(GetDyingUnit()) == 'ufro' ) ) then
        return false
    endif
    if ( not ( udg_Shield03Switch == true ) ) then
        return false
    endif
    return true
endfunction

function Trig_GyroShield03WyrmGroupSubtractDies_Actions takes nothing returns nothing
    call GroupRemoveUnitSimple( GetDyingUnit(), udg_Shield03FrostWyrmGroup )
    call ConditionalTriggerExecute( gg_trg_GyroShield03Done )
endfunction

//===========================================================================
function InitTrig_GyroShield03WyrmGroupSubtractDies takes nothing returns nothing
    set gg_trg_GyroShield03WyrmGroupSubtractDies = CreateTrigger(  )
    call TriggerRegisterPlayerUnitEventSimple( gg_trg_GyroShield03WyrmGroupSubtractDies, Player(6), EVENT_PLAYER_UNIT_DEATH )
    call TriggerAddCondition( gg_trg_GyroShield03WyrmGroupSubtractDies, Condition( function Trig_GyroShield03WyrmGroupSubtractDies_Conditions ) )
    call TriggerAddAction( gg_trg_GyroShield03WyrmGroupSubtractDies, function Trig_GyroShield03WyrmGroupSubtractDies_Actions )
endfunction

//===========================================================================
// Trigger: GyroShield03Done
//===========================================================================
function Trig_GyroShield03Done_Func001001 takes nothing returns boolean
    return ( CountUnitsInGroup(udg_Shield03FrostWyrmGroup) <= 0 )
endfunction

function Trig_GyroShield03Done_Actions takes nothing returns nothing
    if ( Trig_GyroShield03Done_Func001001() ) then
        call GroupPointOrderLocBJ( udg_GyroForce, "move", GetRectCenter(gg_rct_GyroForce) )
    else
        call DoNothing(  )
    endif
endfunction

//===========================================================================
function InitTrig_GyroShield03Done takes nothing returns nothing
    set gg_trg_GyroShield03Done = CreateTrigger(  )
    call TriggerAddAction( gg_trg_GyroShield03Done, function Trig_GyroShield03Done_Actions )
endfunction

//===========================================================================
// Trigger: VaultOfEnchantments
//===========================================================================
function Trig_VaultOfEnchantments_Conditions takes nothing returns boolean
    if ( not ( GetEnteringUnit() == udg_KelThuzad ) ) then
        return false
    endif
    if ( not ( udg_GAMEOVER == false ) ) then
        return false
    endif
    return true
endfunction

function Trig_VaultOfEnchantments_Func005001 takes nothing returns boolean
    return ( IsUnitAliveBJ(udg_KelThuzad) == true )
endfunction

function Trig_VaultOfEnchantments_Actions takes nothing returns nothing
    call DisableTrigger( GetTriggeringTrigger() )
    call SetSpeechVolumeGroupsBJ(  )
    if ( Trig_VaultOfEnchantments_Func005001() ) then
        call TransmissionFromUnitWithNameBJ( GetPlayersAll(), udg_KelThuzad, "TRIGSTR_230", gg_snd_U07KelThuzad12, "TRIGSTR_231", bj_TIMETYPE_ADD, 0, true )
    else
        call DoNothing(  )
    endif
    call VolumeGroupResetBJ(  )
endfunction

//===========================================================================
function InitTrig_VaultOfEnchantments takes nothing returns nothing
    set gg_trg_VaultOfEnchantments = CreateTrigger(  )
    call TriggerRegisterEnterRectSimple( gg_trg_VaultOfEnchantments, gg_rct_VaultOfEnchantmentsArea )
    call TriggerAddCondition( gg_trg_VaultOfEnchantments, Condition( function Trig_VaultOfEnchantments_Conditions ) )
    call TriggerAddAction( gg_trg_VaultOfEnchantments, function Trig_VaultOfEnchantments_Actions )
endfunction

//===========================================================================
// Trigger: Vault01
//===========================================================================
function Trig_Vault01_Actions takes nothing returns nothing
    call DisableTrigger( gg_trg_VaultOfEnchantments )
    call TriggerSleepAction( 0.10 )
    call CreateItemLoc( 'kpin', GetRectCenter(gg_rct_Vault01) )
    call CreateItemLoc( 'tint', GetRectCenter(gg_rct_Vault01) )
    call CreateItemLoc( 'pmna', GetRectCenter(gg_rct_Vault01) )
endfunction

//===========================================================================
function InitTrig_Vault01 takes nothing returns nothing
    set gg_trg_Vault01 = CreateTrigger(  )
    call TriggerRegisterUnitEvent( gg_trg_Vault01, gg_unit_nmgv_0157, EVENT_UNIT_DEATH )
    call TriggerAddAction( gg_trg_Vault01, function Trig_Vault01_Actions )
endfunction

//===========================================================================
// Trigger: Archmage01
//===========================================================================
function Trig_Archmage01_Func002001 takes nothing returns boolean
    return ( IsUnitDeadBJ(udg_Archmage01) == true )
endfunction

function Trig_Archmage01_Actions takes nothing returns nothing
    if ( Trig_Archmage01_Func002001() ) then
        call QueuedTriggerAddBJ( gg_trg_Archmage01Dead, true )
    else
        call SetUnitAnimation( udg_Archmage01, "spell" )
    endif
endfunction

//===========================================================================
function InitTrig_Archmage01 takes nothing returns nothing
    set gg_trg_Archmage01 = CreateTrigger(  )
    call TriggerRegisterTimerEventPeriodic( gg_trg_Archmage01, 2.70 )
    call TriggerAddAction( gg_trg_Archmage01, function Trig_Archmage01_Actions )
endfunction

//===========================================================================
// Trigger: Archmage01Dead
//
// Run from 'Archmage01'
//===========================================================================
function Trig_Archmage01Dead_Conditions takes nothing returns boolean
    if ( not ( IsTriggerEnabled(gg_trg_Archmage01Dead) == true ) ) then
        return false
    endif
    if ( not ( udg_GAMEOVER == false ) ) then
        return false
    endif
    return true
endfunction

function Trig_Archmage01Dead_Func016001 takes nothing returns boolean
    return ( IsUnitAliveBJ(udg_KelThuzad) == true )
endfunction

function Trig_Archmage01Dead_Func020001001 takes nothing returns boolean
    return ( IsQuestItemCompleted(udg_QuestReqArchmage01) == true )
endfunction

function Trig_Archmage01Dead_Func020001002 takes nothing returns boolean
    return ( IsQuestItemCompleted(udg_QuestReqArchmage02) == true )
endfunction

function Trig_Archmage01Dead_Func020001 takes nothing returns boolean
    return GetBooleanAnd( Trig_Archmage01Dead_Func020001001(), Trig_Archmage01Dead_Func020001002() )
endfunction

function Trig_Archmage01Dead_Func021001001 takes nothing returns boolean
    return ( IsQuestItemCompleted(udg_QuestReqArchmage01) == true )
endfunction

function Trig_Archmage01Dead_Func021001002 takes nothing returns boolean
    return ( IsQuestItemCompleted(udg_QuestReqArchmage02) == false )
endfunction

function Trig_Archmage01Dead_Func021001 takes nothing returns boolean
    return GetBooleanAnd( Trig_Archmage01Dead_Func021001001(), Trig_Archmage01Dead_Func021001002() )
endfunction

function Trig_Archmage01Dead_Actions takes nothing returns nothing
    call DisableTrigger( GetTriggeringTrigger() )
    call SetDoodadAnimationRectBJ( "death", 'XOmr', gg_rct_DoodadDeathArea01 )
    call SetDoodadAnimationRectBJ( "death", 'XOcs', gg_rct_DoodadDeathArea01 )
    call SetSoundPositionLocBJ( gg_snd_LightningShieldTarget, GetRectCenter(gg_rct_DoodadDeathArea01), 0 )
    call PlaySoundBJ( gg_snd_LightningShieldTarget )
    call SetSoundPositionLocBJ( gg_snd_RejuvenationTarget1, GetRectCenter(gg_rct_DoodadDeathArea01), 0 )
    call PlaySoundBJ( gg_snd_RejuvenationTarget1 )
    call ConditionalTriggerExecute( gg_trg_Leaderboard_Update )
    call TriggerSleepAction( 2.00 )
    call DestroyFogModifier( udg_Archmage01Visibility )
    call CreateFogModifierRadiusLocBJ( true, Player(6), FOG_OF_WAR_VISIBLE, GetRectCenter(gg_rct_Archmage02Revealer), 512.00 )
    set udg_Archmage02Visibility = GetLastCreatedFogModifier()
    call SetSpeechVolumeGroupsBJ(  )
    if ( Trig_Archmage01Dead_Func016001() ) then
        call TransmissionFromUnitWithNameBJ( GetPlayersAll(), udg_KelThuzad, "TRIGSTR_160", gg_snd_U07KelThuzad08, "TRIGSTR_161", bj_TIMETYPE_ADD, 0, true )
    else
        call DoNothing(  )
    endif
    call VolumeGroupResetBJ(  )
    call TriggerSleepAction( 1.00 )
    call QuestItemSetCompletedBJ( udg_QuestReqArchmage01, true )
    if ( Trig_Archmage01Dead_Func020001() ) then
        call QuestMessageBJ( GetPlayersAll(), bj_QUESTMESSAGE_UPDATED, "TRIGSTR_166" )
    else
        call DoNothing(  )
    endif
    if ( Trig_Archmage01Dead_Func021001() ) then
        call QuestMessageBJ( GetPlayersAll(), bj_QUESTMESSAGE_UPDATED, "TRIGSTR_175" )
    else
        call DoNothing(  )
    endif
    call TriggerSleepAction( bj_QUEUE_DELAY_QUEST )
    call QueuedTriggerRemoveBJ( GetTriggeringTrigger() )
endfunction

//===========================================================================
function InitTrig_Archmage01Dead takes nothing returns nothing
    set gg_trg_Archmage01Dead = CreateTrigger(  )
    call TriggerAddCondition( gg_trg_Archmage01Dead, Condition( function Trig_Archmage01Dead_Conditions ) )
    call TriggerAddAction( gg_trg_Archmage01Dead, function Trig_Archmage01Dead_Actions )
endfunction

//===========================================================================
// Trigger: Archmage02
//===========================================================================
function Trig_Archmage02_Func002001 takes nothing returns boolean
    return ( IsUnitDeadBJ(udg_Archmage02) == true )
endfunction

function Trig_Archmage02_Actions takes nothing returns nothing
    if ( Trig_Archmage02_Func002001() ) then
        call QueuedTriggerAddBJ( gg_trg_Archmage02Dead, true )
    else
        call SetUnitAnimation( udg_Archmage02, "spell" )
    endif
endfunction

//===========================================================================
function InitTrig_Archmage02 takes nothing returns nothing
    set gg_trg_Archmage02 = CreateTrigger(  )
    call TriggerRegisterTimerEventPeriodic( gg_trg_Archmage02, 2.70 )
    call TriggerAddAction( gg_trg_Archmage02, function Trig_Archmage02_Actions )
endfunction

//===========================================================================
// Trigger: Archmage02Dead
//
// Run from 'Archmage02'
//===========================================================================
function Trig_Archmage02Dead_Conditions takes nothing returns boolean
    if ( not ( IsTriggerEnabled(gg_trg_Archmage02Dead) == true ) ) then
        return false
    endif
    if ( not ( udg_GAMEOVER == false ) ) then
        return false
    endif
    return true
endfunction

function Trig_Archmage02Dead_Func016001 takes nothing returns boolean
    return ( IsUnitAliveBJ(udg_KelThuzad) == true )
endfunction

function Trig_Archmage02Dead_Func020001001 takes nothing returns boolean
    return ( IsQuestItemCompleted(udg_QuestReqArchmage01) == false )
endfunction

function Trig_Archmage02Dead_Func020001002 takes nothing returns boolean
    return ( IsQuestItemCompleted(udg_QuestReqArchmage02) == true )
endfunction

function Trig_Archmage02Dead_Func020001 takes nothing returns boolean
    return GetBooleanAnd( Trig_Archmage02Dead_Func020001001(), Trig_Archmage02Dead_Func020001002() )
endfunction

function Trig_Archmage02Dead_Func021001001 takes nothing returns boolean
    return ( IsQuestItemCompleted(udg_QuestReqArchmage01) == true )
endfunction

function Trig_Archmage02Dead_Func021001002 takes nothing returns boolean
    return ( IsQuestItemCompleted(udg_QuestReqArchmage02) == true )
endfunction

function Trig_Archmage02Dead_Func021001 takes nothing returns boolean
    return GetBooleanAnd( Trig_Archmage02Dead_Func021001001(), Trig_Archmage02Dead_Func021001002() )
endfunction

function Trig_Archmage02Dead_Actions takes nothing returns nothing
    call DisableTrigger( GetTriggeringTrigger() )
    call ConditionalTriggerExecute( gg_trg_Leaderboard_Update )
    call SetDoodadAnimationRectBJ( "death", 'XOmr', gg_rct_DoodadDeathArea02 )
    call SetDoodadAnimationRectBJ( "death", 'XOcs', gg_rct_DoodadDeathArea02 )
    call SetSoundPositionLocBJ( gg_snd_LightningShieldTarget, GetRectCenter(gg_rct_DoodadDeathArea02), 0 )
    call PlaySoundBJ( gg_snd_LightningShieldTarget )
    call SetSoundPositionLocBJ( gg_snd_RejuvenationTarget1, GetRectCenter(gg_rct_DoodadDeathArea02), 0 )
    call PlaySoundBJ( gg_snd_RejuvenationTarget1 )
    call TriggerSleepAction( 2.00 )
    call DestroyFogModifier( udg_Archmage02Visibility )
    call CreateFogModifierRadiusLocBJ( true, Player(6), FOG_OF_WAR_VISIBLE, GetRectCenter(gg_rct_Archmage03Revealer), 512.00 )
    set udg_Archmage03Visibility = GetLastCreatedFogModifier()
    call SetSpeechVolumeGroupsBJ(  )
    if ( Trig_Archmage02Dead_Func016001() ) then
        call TransmissionFromUnitWithNameBJ( GetPlayersAll(), udg_KelThuzad, "TRIGSTR_206", gg_snd_U07KelThuzad11, "TRIGSTR_207", bj_TIMETYPE_ADD, 0, true )
    else
        call DoNothing(  )
    endif
    call VolumeGroupResetBJ(  )
    call TriggerSleepAction( 1.00 )
    call QuestItemSetCompletedBJ( udg_QuestReqArchmage02, true )
    if ( Trig_Archmage02Dead_Func020001() ) then
        call QuestMessageBJ( GetPlayersAll(), bj_QUESTMESSAGE_UPDATED, "TRIGSTR_186" )
    else
        call DoNothing(  )
    endif
    if ( Trig_Archmage02Dead_Func021001() ) then
        call QuestMessageBJ( GetPlayersAll(), bj_QUESTMESSAGE_UPDATED, "TRIGSTR_192" )
    else
        call DoNothing(  )
    endif
    call TriggerSleepAction( bj_QUEUE_DELAY_QUEST )
    call QueuedTriggerRemoveBJ( GetTriggeringTrigger() )
endfunction

//===========================================================================
function InitTrig_Archmage02Dead takes nothing returns nothing
    set gg_trg_Archmage02Dead = CreateTrigger(  )
    call TriggerAddCondition( gg_trg_Archmage02Dead, Condition( function Trig_Archmage02Dead_Conditions ) )
    call TriggerAddAction( gg_trg_Archmage02Dead, function Trig_Archmage02Dead_Actions )
endfunction

//===========================================================================
// Trigger: Archmage03
//===========================================================================
function Trig_Archmage03_Func002001 takes nothing returns boolean
    return ( IsUnitDeadBJ(udg_Archmage03) == true )
endfunction

function Trig_Archmage03_Actions takes nothing returns nothing
    if ( Trig_Archmage03_Func002001() ) then
        call DoNothing(  )
    else
        call SetUnitAnimation( udg_Archmage03, "spell" )
    endif
endfunction

//===========================================================================
function InitTrig_Archmage03 takes nothing returns nothing
    set gg_trg_Archmage03 = CreateTrigger(  )
    call TriggerRegisterTimerEventPeriodic( gg_trg_Archmage03, 2.70 )
    call TriggerAddAction( gg_trg_Archmage03, function Trig_Archmage03_Actions )
endfunction

//===========================================================================
// Trigger: Archmage03Dead
//===========================================================================
function Trig_Archmage03Dead_Conditions takes nothing returns boolean
    if ( not ( udg_GAMEOVER == false ) ) then
        return false
    endif
    return true
endfunction

function Trig_Archmage03Dead_Actions takes nothing returns nothing
    set udg_GAMEOVER = true
    call DisableTrigger( GetTriggeringTrigger() )
    call DisableTrigger( gg_trg_Archmage03 )
    call ReplaceUnitBJ( GetDyingUnit(), 'Hant', bj_UNIT_STATE_METHOD_DEFAULTS )
    set udg_Antonidas = GetLastReplacedUnitBJ()
    call SetUnitInvulnerable( udg_Antonidas, true )
    call SetUnitLifePercentBJ( udg_Antonidas, 1.00 )
    call IssueImmediateOrderBJ( udg_Antonidas, "holdposition" )
    call ConditionalTriggerExecute( gg_trg_Leaderboard_Update )
    call SetDoodadAnimationRectBJ( "death", 'XOmr', gg_rct_DoodadDeathArea03 )
    call SetDoodadAnimationRectBJ( "death", 'XOcs', gg_rct_DoodadDeathArea03 )
    call DestroyFogModifier( udg_Archmage03Visibility )
    call QuestItemSetCompletedBJ( udg_QuestReqArchmage01, true )
    call QuestMessageBJ( GetPlayersAll(), bj_QUESTMESSAGE_UPDATED, "TRIGSTR_136" )
    call TriggerSleepAction( bj_QUEUE_DELAY_QUEST )
    call DestroyLeaderboardBJ( udg_LeaderboardArchmage )
    call ConditionalTriggerExecute( gg_trg_Ending01 )
endfunction

//===========================================================================
function InitTrig_Archmage03Dead takes nothing returns nothing
    set gg_trg_Archmage03Dead = CreateTrigger(  )
    call TriggerRegisterUnitEvent( gg_trg_Archmage03Dead, gg_unit_Hant_0172, EVENT_UNIT_DEATH )
    call TriggerAddCondition( gg_trg_Archmage03Dead, Condition( function Trig_Archmage03Dead_Conditions ) )
    call TriggerAddAction( gg_trg_Archmage03Dead, function Trig_Archmage03Dead_Actions )
endfunction

//===========================================================================
// Trigger: ContainmentArea
//===========================================================================
function Trig_ContainmentArea_Conditions takes nothing returns boolean
    if ( not ( GetLeavingUnit() == udg_Antonidas ) ) then
        return false
    endif
    return true
endfunction

function Trig_ContainmentArea_Actions takes nothing returns nothing
    call IssuePointOrderLocBJ( udg_Antonidas, "move", GetRandomLocInRect(gg_rct_AntonidasContainmentArea) )
endfunction

//===========================================================================
function InitTrig_ContainmentArea takes nothing returns nothing
    set gg_trg_ContainmentArea = CreateTrigger(  )
    call TriggerRegisterLeaveRectSimple( gg_trg_ContainmentArea, gg_rct_AntonidasContainmentArea )
    call TriggerAddCondition( gg_trg_ContainmentArea, Condition( function Trig_ContainmentArea_Conditions ) )
    call TriggerAddAction( gg_trg_ContainmentArea, function Trig_ContainmentArea_Actions )
endfunction

//===========================================================================
// Trigger: CratesDeadTown
//===========================================================================
function Trig_CratesDeadTown_Actions takes nothing returns nothing
    call TriggerSleepAction( 0.10 )
    call CreateItemLoc( 'sman', GetRectCenter(gg_rct_CratesDeadTown) )
endfunction

//===========================================================================
function InitTrig_CratesDeadTown takes nothing returns nothing
    set gg_trg_CratesDeadTown = CreateTrigger(  )
    call TriggerRegisterDeathEvent( gg_trg_CratesDeadTown, gg_dest_LTcr_0767 )
    call TriggerAddAction( gg_trg_CratesDeadTown, function Trig_CratesDeadTown_Actions )
endfunction

//===========================================================================
// Trigger: Shield01Enter AnimateDead
//===========================================================================
function Trig_Shield01Enter_AnimateDead_Conditions takes nothing returns boolean
    if ( not ( RectContainsUnit(gg_rct_Shield01, GetSummonedUnit()) == true ) ) then
        return false
    endif
    if ( not ( IsUnitType(GetSummonedUnit(), UNIT_TYPE_UNDEAD) == true ) ) then
        return false
    endif
    if ( not ( IsUnitDeadBJ(udg_Archmage01) == false ) ) then
        return false
    endif
    return true
endfunction

function Trig_Shield01Enter_AnimateDead_Actions takes nothing returns nothing
    call GroupAddUnitSimple( GetSummonedUnit(), udg_Shield01Group )
endfunction

//===========================================================================
function InitTrig_Shield01Enter_AnimateDead takes nothing returns nothing
    set gg_trg_Shield01Enter_AnimateDead = CreateTrigger(  )
    call TriggerRegisterPlayerUnitEventSimple( gg_trg_Shield01Enter_AnimateDead, Player(6), EVENT_PLAYER_UNIT_SUMMON )
    call TriggerAddCondition( gg_trg_Shield01Enter_AnimateDead, Condition( function Trig_Shield01Enter_AnimateDead_Conditions ) )
    call TriggerAddAction( gg_trg_Shield01Enter_AnimateDead, function Trig_Shield01Enter_AnimateDead_Actions )
endfunction

//===========================================================================
// Trigger: Shield01Enter
//===========================================================================
function Trig_Shield01Enter_Func004001 takes nothing returns boolean
    return ( RACE_UNDEAD == GetUnitRace(GetEnteringUnit()) )
endfunction

function Trig_Shield01Enter_Func004002 takes nothing returns boolean
    return ( IsUnitType(GetEnteringUnit(), UNIT_TYPE_UNDEAD) == true )
endfunction

function Trig_Shield01Enter_Conditions takes nothing returns boolean
    if ( not ( GetOwningPlayer(GetEnteringUnit()) == Player(6) ) ) then
        return false
    endif
    if ( not ( IsUnitDeadBJ(udg_Archmage01) == false ) ) then
        return false
    endif
    if ( not GetBooleanOr( Trig_Shield01Enter_Func004001(), Trig_Shield01Enter_Func004002() ) ) then
        return false
    endif
    return true
endfunction

function Trig_Shield01Enter_Actions takes nothing returns nothing
    call GroupAddUnitSimple( GetEnteringUnit(), udg_Shield01Group )
endfunction

//===========================================================================
function InitTrig_Shield01Enter takes nothing returns nothing
    set gg_trg_Shield01Enter = CreateTrigger(  )
    call TriggerRegisterEnterRectSimple( gg_trg_Shield01Enter, gg_rct_Shield01 )
    call TriggerAddCondition( gg_trg_Shield01Enter, Condition( function Trig_Shield01Enter_Conditions ) )
    call TriggerAddAction( gg_trg_Shield01Enter, function Trig_Shield01Enter_Actions )
endfunction

//===========================================================================
// Trigger: Shield01Exit
//===========================================================================
function Trig_Shield01Exit_Conditions takes nothing returns boolean
    if ( not ( GetOwningPlayer(GetLeavingUnit()) == Player(6) ) ) then
        return false
    endif
    if ( not ( GetUnitRace(GetLeavingUnit()) == RACE_UNDEAD ) ) then
        return false
    endif
    return true
endfunction

function Trig_Shield01Exit_Func002001001 takes nothing returns boolean
    return ( IsUnitInGroup(GetLeavingUnit(), udg_Shield03Group) == true )
endfunction

function Trig_Shield01Exit_Func002001002001 takes nothing returns boolean
    return ( IsUnitInGroup(GetTriggerUnit(), udg_Shield02Group) == true )
endfunction

function Trig_Shield01Exit_Func002001002002 takes nothing returns boolean
    return ( IsUnitInGroup(GetLeavingUnit(), udg_Shield01Group) == true )
endfunction

function Trig_Shield01Exit_Func002001002 takes nothing returns boolean
    return GetBooleanOr( Trig_Shield01Exit_Func002001002001(), Trig_Shield01Exit_Func002001002002() )
endfunction

function Trig_Shield01Exit_Func002001 takes nothing returns boolean
    return GetBooleanOr( Trig_Shield01Exit_Func002001001(), Trig_Shield01Exit_Func002001002() )
endfunction

function Trig_Shield01Exit_Actions takes nothing returns nothing
    call GroupRemoveUnitSimple( GetLeavingUnit(), udg_Shield01Group )
    if ( Trig_Shield01Exit_Func002001() ) then
        call DoNothing(  )
    else
        call SetUnitVertexColorBJ( GetLeavingUnit(), 100.00, 100, 100, 0 )
    endif
endfunction

//===========================================================================
function InitTrig_Shield01Exit takes nothing returns nothing
    set gg_trg_Shield01Exit = CreateTrigger(  )
    call TriggerRegisterLeaveRectSimple( gg_trg_Shield01Exit, gg_rct_Shield01 )
    call TriggerAddCondition( gg_trg_Shield01Exit, Condition( function Trig_Shield01Exit_Conditions ) )
    call TriggerAddAction( gg_trg_Shield01Exit, function Trig_Shield01Exit_Actions )
endfunction

//===========================================================================
// Trigger: Shield01Down
//===========================================================================
function Trig_Shield01Down_Func001002 takes nothing returns nothing
    call SetUnitVertexColorBJ( GetEnumUnit(), 100.00, 100.00, 100.00, 0.00 )
endfunction

function Trig_Shield01Down_Func005001 takes nothing returns boolean
    return ( udg_Shield02Switch == false )
endfunction

function Trig_Shield01Down_Actions takes nothing returns nothing
    call ForGroup( udg_Shield01Group, function Trig_Shield01Down_Func001002 )
    call GroupClear( udg_Shield01Group )
    set udg_Shield01Switch = false
    call SetDoodadAnimationRectBJ( "death", 'YZef', gg_rct_Shield_01_DOODAD_KILL )
    if ( Trig_Shield01Down_Func005001() ) then
        call SetDoodadAnimationRectBJ( "death", 'YZef', gg_rct_Shield_02_DOODAD_KILL )
    else
        call DoNothing(  )
    endif
endfunction

//===========================================================================
function InitTrig_Shield01Down takes nothing returns nothing
    set gg_trg_Shield01Down = CreateTrigger(  )
    call TriggerRegisterUnitLifeEvent( gg_trg_Shield01Down, gg_unit_Hamg_0122, LESS_THAN_OR_EQUAL, 0.00 )
    call TriggerAddAction( gg_trg_Shield01Down, function Trig_Shield01Down_Actions )
endfunction

//===========================================================================
// Trigger: Shield01Damage
//===========================================================================
function Trig_Shield01Damage_Func001002001 takes nothing returns boolean
    return ( GetUnitStateSwap(UNIT_STATE_LIFE, GetEnumUnit()) > 0.00 )
endfunction

function Trig_Shield01Damage_Func001002 takes nothing returns nothing
    if ( Trig_Shield01Damage_Func001002001() ) then
        call SetUnitLifeBJ( GetEnumUnit(), ( GetUnitStateSwap(UNIT_STATE_LIFE, GetEnumUnit()) - 10.00 ) )
    else
        call DoNothing(  )
    endif
endfunction

function Trig_Shield01Damage_Func002002 takes nothing returns nothing
    call SetUnitVertexColorBJ( GetEnumUnit(), 50.00, 0.00, 50.00, 0 )
endfunction

function Trig_Shield01Damage_Actions takes nothing returns nothing
    call ForGroup( udg_Shield01Group, function Trig_Shield01Damage_Func001002 )
    call ForGroup( udg_Shield01Group, function Trig_Shield01Damage_Func002002 )
endfunction

//===========================================================================
function InitTrig_Shield01Damage takes nothing returns nothing
    set gg_trg_Shield01Damage = CreateTrigger(  )
    call TriggerRegisterTimerEventPeriodic( gg_trg_Shield01Damage, 1.00 )
    call TriggerAddAction( gg_trg_Shield01Damage, function Trig_Shield01Damage_Actions )
endfunction

//===========================================================================
// Trigger: Shield02Enter AnimateDead
//===========================================================================
function Trig_Shield02Enter_AnimateDead_Conditions takes nothing returns boolean
    if ( not ( RectContainsUnit(gg_rct_Shield02, GetSummonedUnit()) == true ) ) then
        return false
    endif
    if ( not ( IsUnitType(GetSummonedUnit(), UNIT_TYPE_UNDEAD) == true ) ) then
        return false
    endif
    if ( not ( IsUnitDeadBJ(udg_Archmage02) == false ) ) then
        return false
    endif
    return true
endfunction

function Trig_Shield02Enter_AnimateDead_Actions takes nothing returns nothing
    call GroupAddUnitSimple( GetSummonedUnit(), udg_Shield02Group )
endfunction

//===========================================================================
function InitTrig_Shield02Enter_AnimateDead takes nothing returns nothing
    set gg_trg_Shield02Enter_AnimateDead = CreateTrigger(  )
    call TriggerRegisterPlayerUnitEventSimple( gg_trg_Shield02Enter_AnimateDead, Player(6), EVENT_PLAYER_UNIT_SUMMON )
    call TriggerAddCondition( gg_trg_Shield02Enter_AnimateDead, Condition( function Trig_Shield02Enter_AnimateDead_Conditions ) )
    call TriggerAddAction( gg_trg_Shield02Enter_AnimateDead, function Trig_Shield02Enter_AnimateDead_Actions )
endfunction

//===========================================================================
// Trigger: Shield02Activate
//===========================================================================
function Trig_Shield02Activate_Conditions takes nothing returns boolean
    if ( not ( GetOwningPlayer(GetEnteringUnit()) == Player(6) ) ) then
        return false
    endif
    return true
endfunction

function Trig_Shield02Activate_Actions takes nothing returns nothing
    call SetDoodadAnimationRectBJ( "Stand", 'YZef', gg_rct_Shield02 )
    call DisableTrigger( GetTriggeringTrigger() )
endfunction

//===========================================================================
function InitTrig_Shield02Activate takes nothing returns nothing
    set gg_trg_Shield02Activate = CreateTrigger(  )
    call TriggerRegisterEnterRectSimple( gg_trg_Shield02Activate, gg_rct_Shield02Activate )
    call TriggerAddCondition( gg_trg_Shield02Activate, Condition( function Trig_Shield02Activate_Conditions ) )
    call TriggerAddAction( gg_trg_Shield02Activate, function Trig_Shield02Activate_Actions )
endfunction

//===========================================================================
// Trigger: Shield02Enter
//===========================================================================
function Trig_Shield02Enter_Func004001 takes nothing returns boolean
    return ( RACE_UNDEAD == GetUnitRace(GetEnteringUnit()) )
endfunction

function Trig_Shield02Enter_Func004002 takes nothing returns boolean
    return ( IsUnitType(GetEnteringUnit(), UNIT_TYPE_UNDEAD) == true )
endfunction

function Trig_Shield02Enter_Conditions takes nothing returns boolean
    if ( not ( GetOwningPlayer(GetTriggerUnit()) == Player(6) ) ) then
        return false
    endif
    if ( not ( IsUnitDeadBJ(udg_Archmage02) == false ) ) then
        return false
    endif
    if ( not GetBooleanOr( Trig_Shield02Enter_Func004001(), Trig_Shield02Enter_Func004002() ) ) then
        return false
    endif
    return true
endfunction

function Trig_Shield02Enter_Actions takes nothing returns nothing
    call GroupAddUnitSimple( GetEnteringUnit(), udg_Shield02Group )
endfunction

//===========================================================================
function InitTrig_Shield02Enter takes nothing returns nothing
    set gg_trg_Shield02Enter = CreateTrigger(  )
    call TriggerRegisterEnterRectSimple( gg_trg_Shield02Enter, gg_rct_Shield02 )
    call TriggerAddCondition( gg_trg_Shield02Enter, Condition( function Trig_Shield02Enter_Conditions ) )
    call TriggerAddAction( gg_trg_Shield02Enter, function Trig_Shield02Enter_Actions )
endfunction

//===========================================================================
// Trigger: Shield02Exit
//===========================================================================
function Trig_Shield02Exit_Conditions takes nothing returns boolean
    if ( not ( GetOwningPlayer(GetLeavingUnit()) == Player(6) ) ) then
        return false
    endif
    if ( not ( GetUnitRace(GetLeavingUnit()) == RACE_UNDEAD ) ) then
        return false
    endif
    return true
endfunction

function Trig_Shield02Exit_Func002001001 takes nothing returns boolean
    return ( IsUnitInGroup(GetLeavingUnit(), udg_Shield03Group) == true )
endfunction

function Trig_Shield02Exit_Func002001002001 takes nothing returns boolean
    return ( IsUnitInGroup(GetTriggerUnit(), udg_Shield02Group) == true )
endfunction

function Trig_Shield02Exit_Func002001002002 takes nothing returns boolean
    return ( IsUnitInGroup(GetLeavingUnit(), udg_Shield01Group) == true )
endfunction

function Trig_Shield02Exit_Func002001002 takes nothing returns boolean
    return GetBooleanOr( Trig_Shield02Exit_Func002001002001(), Trig_Shield02Exit_Func002001002002() )
endfunction

function Trig_Shield02Exit_Func002001 takes nothing returns boolean
    return GetBooleanOr( Trig_Shield02Exit_Func002001001(), Trig_Shield02Exit_Func002001002() )
endfunction

function Trig_Shield02Exit_Actions takes nothing returns nothing
    call GroupRemoveUnitSimple( GetLeavingUnit(), udg_Shield02Group )
    if ( Trig_Shield02Exit_Func002001() ) then
        call DoNothing(  )
    else
        call SetUnitVertexColorBJ( GetLeavingUnit(), 100.00, 100, 100, 0 )
    endif
endfunction

//===========================================================================
function InitTrig_Shield02Exit takes nothing returns nothing
    set gg_trg_Shield02Exit = CreateTrigger(  )
    call TriggerRegisterLeaveRectSimple( gg_trg_Shield02Exit, gg_rct_Shield02 )
    call TriggerAddCondition( gg_trg_Shield02Exit, Condition( function Trig_Shield02Exit_Conditions ) )
    call TriggerAddAction( gg_trg_Shield02Exit, function Trig_Shield02Exit_Actions )
endfunction

//===========================================================================
// Trigger: Shield02Down
//===========================================================================
function Trig_Shield02Down_Func001002 takes nothing returns nothing
    call SetUnitVertexColorBJ( GetEnumUnit(), 100.00, 100.00, 100.00, 0.00 )
endfunction

function Trig_Shield02Down_Func004001 takes nothing returns boolean
    return ( udg_Shield01Switch == false )
endfunction

function Trig_Shield02Down_Actions takes nothing returns nothing
    call ForGroup( udg_Shield02Group, function Trig_Shield02Down_Func001002 )
    call GroupClear( udg_Shield02Group )
    set udg_Shield02Switch = false
    if ( Trig_Shield02Down_Func004001() ) then
        call SetDoodadAnimationRectBJ( "death", 'YZef', gg_rct_Shield_02_DOODAD_KILL )
    else
        call DoNothing(  )
    endif
endfunction

//===========================================================================
function InitTrig_Shield02Down takes nothing returns nothing
    set gg_trg_Shield02Down = CreateTrigger(  )
    call TriggerRegisterUnitLifeEvent( gg_trg_Shield02Down, gg_unit_Hamg_0019, LESS_THAN_OR_EQUAL, 0.00 )
    call TriggerAddAction( gg_trg_Shield02Down, function Trig_Shield02Down_Actions )
endfunction

//===========================================================================
// Trigger: Shield02Damage
//===========================================================================
function Trig_Shield02Damage_Func001002001 takes nothing returns boolean
    return ( GetUnitStateSwap(UNIT_STATE_LIFE, GetEnumUnit()) > 0.00 )
endfunction

function Trig_Shield02Damage_Func001002 takes nothing returns nothing
    if ( Trig_Shield02Damage_Func001002001() ) then
        call SetUnitLifeBJ( GetEnumUnit(), ( GetUnitStateSwap(UNIT_STATE_LIFE, GetEnumUnit()) - 10.00 ) )
    else
        call DoNothing(  )
    endif
endfunction

function Trig_Shield02Damage_Func002002 takes nothing returns nothing
    call SetUnitVertexColorBJ( GetEnumUnit(), 50.00, 0.00, 50.00, 0 )
endfunction

function Trig_Shield02Damage_Actions takes nothing returns nothing
    call ForGroup( udg_Shield02Group, function Trig_Shield02Damage_Func001002 )
    call ForGroup( udg_Shield02Group, function Trig_Shield02Damage_Func002002 )
endfunction

//===========================================================================
function InitTrig_Shield02Damage takes nothing returns nothing
    set gg_trg_Shield02Damage = CreateTrigger(  )
    call TriggerRegisterTimerEventPeriodic( gg_trg_Shield02Damage, 1.00 )
    call TriggerAddAction( gg_trg_Shield02Damage, function Trig_Shield02Damage_Actions )
endfunction

//===========================================================================
// Trigger: Shield03Enter AnimateDead
//===========================================================================
function Trig_Shield03Enter_AnimateDead_Conditions takes nothing returns boolean
    if ( not ( RectContainsUnit(gg_rct_Shield03, GetSummonedUnit()) == true ) ) then
        return false
    endif
    if ( not ( IsUnitType(GetSummonedUnit(), UNIT_TYPE_UNDEAD) == true ) ) then
        return false
    endif
    if ( not ( IsUnitDeadBJ(udg_Archmage03) == false ) ) then
        return false
    endif
    return true
endfunction

function Trig_Shield03Enter_AnimateDead_Actions takes nothing returns nothing
    call GroupAddUnitSimple( GetSummonedUnit(), udg_Shield03Group )
endfunction

//===========================================================================
function InitTrig_Shield03Enter_AnimateDead takes nothing returns nothing
    set gg_trg_Shield03Enter_AnimateDead = CreateTrigger(  )
    call TriggerRegisterPlayerUnitEventSimple( gg_trg_Shield03Enter_AnimateDead, Player(6), EVENT_PLAYER_UNIT_SUMMON )
    call TriggerAddCondition( gg_trg_Shield03Enter_AnimateDead, Condition( function Trig_Shield03Enter_AnimateDead_Conditions ) )
    call TriggerAddAction( gg_trg_Shield03Enter_AnimateDead, function Trig_Shield03Enter_AnimateDead_Actions )
endfunction

//===========================================================================
// Trigger: Shield03Activate
//===========================================================================
function Trig_Shield03Activate_Conditions takes nothing returns boolean
    if ( not ( GetOwningPlayer(GetEnteringUnit()) == Player(6) ) ) then
        return false
    endif
    return true
endfunction

function Trig_Shield03Activate_Actions takes nothing returns nothing
    call SetDoodadAnimationRectBJ( "Stand", 'YZef', gg_rct_Shield03 )
    call DisableTrigger( GetTriggeringTrigger() )
endfunction

//===========================================================================
function InitTrig_Shield03Activate takes nothing returns nothing
    set gg_trg_Shield03Activate = CreateTrigger(  )
    call TriggerRegisterEnterRectSimple( gg_trg_Shield03Activate, gg_rct_Shield03Activate )
    call TriggerAddCondition( gg_trg_Shield03Activate, Condition( function Trig_Shield03Activate_Conditions ) )
    call TriggerAddAction( gg_trg_Shield03Activate, function Trig_Shield03Activate_Actions )
endfunction

//===========================================================================
// Trigger: Shield03Enter
//===========================================================================
function Trig_Shield03Enter_Func004001 takes nothing returns boolean
    return ( RACE_UNDEAD == GetUnitRace(GetEnteringUnit()) )
endfunction

function Trig_Shield03Enter_Func004002 takes nothing returns boolean
    return ( IsUnitType(GetEnteringUnit(), UNIT_TYPE_UNDEAD) == true )
endfunction

function Trig_Shield03Enter_Conditions takes nothing returns boolean
    if ( not ( GetOwningPlayer(GetEnteringUnit()) == Player(6) ) ) then
        return false
    endif
    if ( not ( IsUnitDeadBJ(udg_Archmage03) == false ) ) then
        return false
    endif
    if ( not GetBooleanOr( Trig_Shield03Enter_Func004001(), Trig_Shield03Enter_Func004002() ) ) then
        return false
    endif
    return true
endfunction

function Trig_Shield03Enter_Actions takes nothing returns nothing
    call GroupAddUnitSimple( GetEnteringUnit(), udg_Shield03Group )
endfunction

//===========================================================================
function InitTrig_Shield03Enter takes nothing returns nothing
    set gg_trg_Shield03Enter = CreateTrigger(  )
    call TriggerRegisterEnterRectSimple( gg_trg_Shield03Enter, gg_rct_Shield03 )
    call TriggerAddCondition( gg_trg_Shield03Enter, Condition( function Trig_Shield03Enter_Conditions ) )
    call TriggerAddAction( gg_trg_Shield03Enter, function Trig_Shield03Enter_Actions )
endfunction

//===========================================================================
// Trigger: Shield03Exit
//===========================================================================
function Trig_Shield03Exit_Conditions takes nothing returns boolean
    if ( not ( GetOwningPlayer(GetLeavingUnit()) == Player(6) ) ) then
        return false
    endif
    if ( not ( GetUnitRace(GetLeavingUnit()) == RACE_UNDEAD ) ) then
        return false
    endif
    return true
endfunction

function Trig_Shield03Exit_Func002001001 takes nothing returns boolean
    return ( IsUnitInGroup(GetLeavingUnit(), udg_Shield03Group) == true )
endfunction

function Trig_Shield03Exit_Func002001002001 takes nothing returns boolean
    return ( IsUnitInGroup(GetTriggerUnit(), udg_Shield02Group) == true )
endfunction

function Trig_Shield03Exit_Func002001002002 takes nothing returns boolean
    return ( IsUnitInGroup(GetLeavingUnit(), udg_Shield01Group) == true )
endfunction

function Trig_Shield03Exit_Func002001002 takes nothing returns boolean
    return GetBooleanOr( Trig_Shield03Exit_Func002001002001(), Trig_Shield03Exit_Func002001002002() )
endfunction

function Trig_Shield03Exit_Func002001 takes nothing returns boolean
    return GetBooleanOr( Trig_Shield03Exit_Func002001001(), Trig_Shield03Exit_Func002001002() )
endfunction

function Trig_Shield03Exit_Actions takes nothing returns nothing
    call GroupRemoveUnitSimple( GetLeavingUnit(), udg_Shield03Group )
    if ( Trig_Shield03Exit_Func002001() ) then
        call DoNothing(  )
    else
        call SetUnitVertexColorBJ( GetLeavingUnit(), 100.00, 100, 100, 0 )
    endif
endfunction

//===========================================================================
function InitTrig_Shield03Exit takes nothing returns nothing
    set gg_trg_Shield03Exit = CreateTrigger(  )
    call TriggerRegisterLeaveRectSimple( gg_trg_Shield03Exit, gg_rct_Shield03 )
    call TriggerAddCondition( gg_trg_Shield03Exit, Condition( function Trig_Shield03Exit_Conditions ) )
    call TriggerAddAction( gg_trg_Shield03Exit, function Trig_Shield03Exit_Actions )
endfunction

//===========================================================================
// Trigger: Shield03Down
//===========================================================================
function Trig_Shield03Down_Func001002 takes nothing returns nothing
    call SetUnitVertexColorBJ( GetEnumUnit(), 100.00, 100.00, 100.00, 0.00 )
endfunction

function Trig_Shield03Down_Func004001001 takes nothing returns boolean
    return ( udg_Shield01Switch == false )
endfunction

function Trig_Shield03Down_Func004001002 takes nothing returns boolean
    return ( udg_Shield02Switch == false )
endfunction

function Trig_Shield03Down_Func004001 takes nothing returns boolean
    return GetBooleanAnd( Trig_Shield03Down_Func004001001(), Trig_Shield03Down_Func004001002() )
endfunction

function Trig_Shield03Down_Actions takes nothing returns nothing
    call ForGroup( udg_Shield03Group, function Trig_Shield03Down_Func001002 )
    call GroupClear( udg_Shield03Group )
    set udg_Shield03Switch = false
    if ( Trig_Shield03Down_Func004001() ) then
        call SetDoodadAnimationRectBJ( "death", 'YZef', gg_rct_Shield_03_DOODAD_KILL )
    else
        call DoNothing(  )
    endif
endfunction

//===========================================================================
function InitTrig_Shield03Down takes nothing returns nothing
    set gg_trg_Shield03Down = CreateTrigger(  )
    call TriggerRegisterUnitEvent( gg_trg_Shield03Down, gg_unit_Hant_0172, EVENT_UNIT_DEATH )
    call TriggerAddAction( gg_trg_Shield03Down, function Trig_Shield03Down_Actions )
endfunction

//===========================================================================
// Trigger: Shield03Damage
//===========================================================================
function Trig_Shield03Damage_Func001002001 takes nothing returns boolean
    return ( GetUnitStateSwap(UNIT_STATE_LIFE, GetEnumUnit()) > 0.00 )
endfunction

function Trig_Shield03Damage_Func001002 takes nothing returns nothing
    if ( Trig_Shield03Damage_Func001002001() ) then
        call SetUnitLifeBJ( GetEnumUnit(), ( GetUnitStateSwap(UNIT_STATE_LIFE, GetEnumUnit()) - 10.00 ) )
    else
        call DoNothing(  )
    endif
endfunction

function Trig_Shield03Damage_Func002002 takes nothing returns nothing
    call SetUnitVertexColorBJ( GetEnumUnit(), 50.00, 0.00, 50.00, 0 )
endfunction

function Trig_Shield03Damage_Actions takes nothing returns nothing
    call ForGroup( udg_Shield03Group, function Trig_Shield03Damage_Func001002 )
    call ForGroup( udg_Shield03Group, function Trig_Shield03Damage_Func002002 )
endfunction

//===========================================================================
function InitTrig_Shield03Damage takes nothing returns nothing
    set gg_trg_Shield03Damage = CreateTrigger(  )
    call TriggerRegisterTimerEventPeriodic( gg_trg_Shield03Damage, 1.00 )
    call TriggerAddAction( gg_trg_Shield03Damage, function Trig_Shield03Damage_Actions )
endfunction

//===========================================================================
// Trigger: Victory
//
// Save all heroes.
// Save the campaign game cache.
// Enable the next level.
// Start the next level.
//===========================================================================
function Trig_Victory_Actions takes nothing returns nothing
    call CommentString( "Start the next level" )
    call TriggerSleepAction( 2 )
    call ConditionalTriggerExecute( gg_trg_Next_Level_Run )
endfunction

//===========================================================================
function InitTrig_Victory takes nothing returns nothing
    set gg_trg_Victory = CreateTrigger(  )
    call TriggerAddAction( gg_trg_Victory, function Trig_Victory_Actions )
endfunction

//===========================================================================
// Trigger: Defeat
//
// Player 7 is Purple when game starts.
//===========================================================================
function Trig_Defeat_Func007001001002001 takes nothing returns boolean
    return ( IsUnitAliveBJ(GetFilterUnit()) == true )
endfunction

function Trig_Defeat_Func007001001002002 takes nothing returns boolean
    return ( IsUnitType(GetFilterUnit(), UNIT_TYPE_STRUCTURE) == true )
endfunction

function Trig_Defeat_Func007001001002 takes nothing returns boolean
    return GetBooleanAnd( Trig_Defeat_Func007001001002001(), Trig_Defeat_Func007001001002002() )
endfunction

function Trig_Defeat_Conditions takes nothing returns boolean
    if ( not ( CountUnitsInGroup(GetUnitsOfPlayerMatching(Player(6), Condition(function Trig_Defeat_Func007001001002))) <= 0 ) ) then
        return false
    endif
    return true
endfunction

function Trig_Defeat_Actions takes nothing returns nothing
    call DisableTrigger( gg_trg_Victory )
    call DisableTrigger( gg_trg_Ending01 )
    set udg_GAMEOVER = true
    call QuestMessageBJ( GetPlayersAll(), bj_QUESTMESSAGE_FAILED, "TRIGSTR_123" )
    call TriggerSleepAction( bj_QUEUE_DELAY_QUEST )
    call CustomDefeatBJ( Player(6), "TRIGSTR_124" )
endfunction

//===========================================================================
function InitTrig_Defeat takes nothing returns nothing
    set gg_trg_Defeat = CreateTrigger(  )
    call TriggerRegisterPlayerUnitEventSimple( gg_trg_Defeat, Player(6), EVENT_PLAYER_UNIT_DEATH )
    call TriggerAddCondition( gg_trg_Defeat, Condition( function Trig_Defeat_Conditions ) )
    call TriggerAddAction( gg_trg_Defeat, function Trig_Defeat_Actions )
endfunction

//===========================================================================
function InitCustomTriggers takes nothing returns nothing
    call InitTrig_Melee_Initialization(  )
    call InitTrig_Difficulty_Easy(  )
    call InitTrig_Difficulty_Normal(  )
    call InitTrig_Difficulty_Hard(  )
    call InitTrig_SetupComputerPlayers(  )
    call InitTrig_StartCampaignAI(  )
    call InitTrig_SetupComputerAlliances(  )
    call InitTrig_SetupPlayerAlliances(  )
    call InitTrig_SetupPlayerResources(  )
    call InitTrig_SetupArthas(  )
    call InitTrig_SetupKelThuzad(  )
    call InitTrig_SetupArchmage01(  )
    call InitTrig_SetupArchmage02(  )
    call InitTrig_SetupArchmage03(  )
    call InitTrig_SetupArchmageExtra(  )
    call InitTrig_SetupArchmageHermit(  )
    call InitTrig_SetupArchmageYellow(  )
    call InitTrig_SetupAntonidas(  )
    call InitTrig_SetupOpeningKnights(  )
    call InitTrig_SetupGhoulGroup(  )
    call InitTrig_SetupGyroForce(  )
    call InitTrig_SetupQuests(  )
    call InitTrig_SetupShields(  )
    call InitTrig_SetupBookOfSummoning(  )
    call InitTrig_SetupArchmageCount(  )
    call InitTrig_SetupScoreScreen(  )
    call InitTrig_Leaderboard_Create(  )
    call InitTrig_Leaderboard_Update(  )
    call InitTrig_PurpleGold(  )
    call InitTrig_YellowGold(  )
    call InitTrig_OrangeGold(  )
    call InitTrig_PurpleLumber(  )
    call InitTrig_YellowLumber(  )
    call InitTrig_OrangeLumber(  )
    call InitTrig_ArthasLevelUp(  )
    call InitTrig_KelThuzadLevelUp(  )
    call InitTrig_Archmage01Leash(  )
    call InitTrig_Archmage02Leash(  )
    call InitTrig_Archmage03Leash(  )
    call InitTrig_Load_Heroes(  )
    call InitTrig_Load_Arthas(  )
    call InitTrig_Load_KelThuzad(  )
    call InitTrig_Next_Level_Prep(  )
    call InitTrig_Next_Level_Run(  )
    call InitTrig_Victory_Cheat(  )
    call InitTrig_DefeatCheat(  )
    call InitTrig_StartAIYellow(  )
    call InitTrig_StartAIOrange(  )
    call InitTrig_OpeningSetup(  )
    call InitTrig_OpeningCatapultMove(  )
    call InitTrig_OpeningCancelled(  )
    call InitTrig_Opening01(  )
    call InitTrig_Opening02(  )
    call InitTrig_Opening03(  )
    call InitTrig_EndingCancelled(  )
    call InitTrig_Ending01(  )
    call InitTrig_Ending02(  )
    call InitTrig_EndingAlly(  )
    call InitTrig_Arthas_Kill_Antonidas(  )
    call InitTrig_ExoticBeastiaryQ(  )
    call InitTrig_ExoticBeastiary(  )
    call InitTrig_Cage01(  )
    call InitTrig_Cage02(  )
    call InitTrig_Cage03(  )
    call InitTrig_Cage04(  )
    call InitTrig_Cage05(  )
    call InitTrig_GateDown(  )
    call InitTrig_GyroShield02(  )
    call InitTrig_GyroShield02WyrmGroupAdd(  )
    call InitTrig_GyroShield02WyrmGroupSubtract(  )
    call InitTrig_GyroShield02WyrmGroupSubtractDies(  )
    call InitTrig_GyroShield02Done(  )
    call InitTrig_IZZZZZZZI(  )
    call InitTrig_GyroShield03(  )
    call InitTrig_GyroShield03WyrmGroupAdd(  )
    call InitTrig_GyroShield03WyrmGroupSubtract(  )
    call InitTrig_GyroShield03WyrmGroupSubtractDies(  )
    call InitTrig_GyroShield03Done(  )
    call InitTrig_VaultOfEnchantments(  )
    call InitTrig_Vault01(  )
    call InitTrig_Archmage01(  )
    call InitTrig_Archmage01Dead(  )
    call InitTrig_Archmage02(  )
    call InitTrig_Archmage02Dead(  )
    call InitTrig_Archmage03(  )
    call InitTrig_Archmage03Dead(  )
    call InitTrig_ContainmentArea(  )
    call InitTrig_CratesDeadTown(  )
    call InitTrig_Shield01Enter_AnimateDead(  )
    call InitTrig_Shield01Enter(  )
    call InitTrig_Shield01Exit(  )
    call InitTrig_Shield01Down(  )
    call InitTrig_Shield01Damage(  )
    call InitTrig_Shield02Enter_AnimateDead(  )
    call InitTrig_Shield02Activate(  )
    call InitTrig_Shield02Enter(  )
    call InitTrig_Shield02Exit(  )
    call InitTrig_Shield02Down(  )
    call InitTrig_Shield02Damage(  )
    call InitTrig_Shield03Enter_AnimateDead(  )
    call InitTrig_Shield03Activate(  )
    call InitTrig_Shield03Enter(  )
    call InitTrig_Shield03Exit(  )
    call InitTrig_Shield03Down(  )
    call InitTrig_Shield03Damage(  )
    call InitTrig_Victory(  )
    call InitTrig_Defeat(  )
endfunction

//===========================================================================
function RunInitializationTriggers takes nothing returns nothing
    call ConditionalTriggerExecute( gg_trg_Melee_Initialization )
endfunction

//***************************************************************************
//*
//*  TechTree
//*
//***************************************************************************

function InitTechTree_Player6 takes nothing returns nothing
    call SetPlayerTechMaxAllowed( Player(6), 'Udea', 0 )
    call SetPlayerTechMaxAllowed( Player(6), 'Ulic', 0 )
    call SetPlayerTechMaxAllowed( Player(6), 'Udre', 0 )
    call SetPlayerTechMaxAllowed( Player(6), 'Hpal', 0 )
    call SetPlayerTechMaxAllowed( Player(6), 'Hamg', 0 )
    call SetPlayerTechMaxAllowed( Player(6), 'Hmkg', 0 )
    call SetPlayerTechMaxAllowed( Player(6), 'htow', 0 )
    call SetPlayerTechMaxAllowed( Player(6), 'hkee', 0 )
    call SetPlayerTechMaxAllowed( Player(6), 'hcas', 0 )
    call SetPlayerTechMaxAllowed( Player(6), 'hhou', 0 )
    call SetPlayerTechMaxAllowed( Player(6), 'halt', 0 )
    call SetPlayerTechMaxAllowed( Player(6), 'hbar', 0 )
    call SetPlayerTechMaxAllowed( Player(6), 'hlum', 0 )
    call SetPlayerTechMaxAllowed( Player(6), 'hbla', 0 )
    call SetPlayerTechMaxAllowed( Player(6), 'harm', 0 )
    call SetPlayerTechMaxAllowed( Player(6), 'hars', 0 )
    call SetPlayerTechMaxAllowed( Player(6), 'hgra', 0 )
    call SetPlayerTechMaxAllowed( Player(6), 'hwtw', 0 )
    call SetPlayerTechMaxAllowed( Player(6), 'hgtw', 0 )
    call SetPlayerTechMaxAllowed( Player(6), 'hctw', 0 )
endfunction

function InitTechTree_Player7 takes nothing returns nothing
    call SetPlayerTechMaxAllowed( Player(7), 'Hpal', 0 )
    call SetPlayerTechMaxAllowed( Player(7), 'Hamg', 0 )
    call SetPlayerTechMaxAllowed( Player(7), 'Hmkg', 0 )
endfunction

function InitTechTree takes nothing returns nothing
    call InitTechTree_Player6(  )
    call InitTechTree_Player7(  )
endfunction

//***************************************************************************
//*
//*  Players
//*
//***************************************************************************

function InitCustomPlayerSlots takes nothing returns nothing

    // Player 1
    call SetPlayerStartLocation( Player(1), 0 )
    call ForcePlayerStartLocation( Player(1), 0 )
    call SetPlayerColor( Player(1), ConvertPlayerColor(1) )
    call SetPlayerRacePreference( Player(1), RACE_PREF_HUMAN )
    call SetPlayerRaceSelectable( Player(1), true )
    call SetPlayerController( Player(1), MAP_CONTROL_COMPUTER )

    // Player 3
    call SetPlayerStartLocation( Player(3), 1 )
    call ForcePlayerStartLocation( Player(3), 1 )
    call SetPlayerColor( Player(3), ConvertPlayerColor(3) )
    call SetPlayerRacePreference( Player(3), RACE_PREF_HUMAN )
    call SetPlayerRaceSelectable( Player(3), true )
    call SetPlayerController( Player(3), MAP_CONTROL_COMPUTER )

    // Player 4
    call SetPlayerStartLocation( Player(4), 2 )
    call ForcePlayerStartLocation( Player(4), 2 )
    call SetPlayerColor( Player(4), ConvertPlayerColor(4) )
    call SetPlayerRacePreference( Player(4), RACE_PREF_HUMAN )
    call SetPlayerRaceSelectable( Player(4), true )
    call SetPlayerController( Player(4), MAP_CONTROL_COMPUTER )

    // Player 5
    call SetPlayerStartLocation( Player(5), 3 )
    call ForcePlayerStartLocation( Player(5), 3 )
    call SetPlayerColor( Player(5), ConvertPlayerColor(5) )
    call SetPlayerRacePreference( Player(5), RACE_PREF_HUMAN )
    call SetPlayerRaceSelectable( Player(5), true )
    call SetPlayerController( Player(5), MAP_CONTROL_COMPUTER )

    // Player 6
    call SetPlayerStartLocation( Player(6), 4 )
    call ForcePlayerStartLocation( Player(6), 4 )
    call SetPlayerColor( Player(6), ConvertPlayerColor(6) )
    call SetPlayerRacePreference( Player(6), RACE_PREF_UNDEAD )
    call SetPlayerRaceSelectable( Player(6), true )
    call SetPlayerController( Player(6), MAP_CONTROL_USER )

    // Player 7
    call SetPlayerStartLocation( Player(7), 5 )
    call ForcePlayerStartLocation( Player(7), 5 )
    call SetPlayerColor( Player(7), ConvertPlayerColor(7) )
    call SetPlayerRacePreference( Player(7), RACE_PREF_HUMAN )
    call SetPlayerRaceSelectable( Player(7), true )
    call SetPlayerController( Player(7), MAP_CONTROL_COMPUTER )

endfunction

function InitCustomTeams takes nothing returns nothing
    // Force: TRIGSTR_040
    call SetPlayerTeam( Player(6), 0 )
    call SetPlayerTeam( Player(7), 0 )

    // Force: TRIGSTR_033
    call SetPlayerTeam( Player(1), 1 )
    call SetPlayerTeam( Player(3), 1 )
    call SetPlayerTeam( Player(4), 1 )
    call SetPlayerTeam( Player(5), 1 )

    //   Allied
    call SetPlayerAlliance( Player(1), Player(3), ALLIANCE_PASSIVE, true )
    call SetPlayerAlliance( Player(1), Player(4), ALLIANCE_PASSIVE, true )
    call SetPlayerAlliance( Player(1), Player(5), ALLIANCE_PASSIVE, true )
    call SetPlayerAlliance( Player(3), Player(1), ALLIANCE_PASSIVE, true )
    call SetPlayerAlliance( Player(3), Player(4), ALLIANCE_PASSIVE, true )
    call SetPlayerAlliance( Player(3), Player(5), ALLIANCE_PASSIVE, true )
    call SetPlayerAlliance( Player(4), Player(1), ALLIANCE_PASSIVE, true )
    call SetPlayerAlliance( Player(4), Player(3), ALLIANCE_PASSIVE, true )
    call SetPlayerAlliance( Player(4), Player(5), ALLIANCE_PASSIVE, true )
    call SetPlayerAlliance( Player(5), Player(1), ALLIANCE_PASSIVE, true )
    call SetPlayerAlliance( Player(5), Player(3), ALLIANCE_PASSIVE, true )
    call SetPlayerAlliance( Player(5), Player(4), ALLIANCE_PASSIVE, true )

    //   Shared Vision
    call SetPlayerAlliance( Player(1), Player(3), ALLIANCE_SHARED_VISION, true )
    call SetPlayerAlliance( Player(1), Player(4), ALLIANCE_SHARED_VISION, true )
    call SetPlayerAlliance( Player(1), Player(5), ALLIANCE_SHARED_VISION, true )
    call SetPlayerAlliance( Player(3), Player(1), ALLIANCE_SHARED_VISION, true )
    call SetPlayerAlliance( Player(3), Player(4), ALLIANCE_SHARED_VISION, true )
    call SetPlayerAlliance( Player(3), Player(5), ALLIANCE_SHARED_VISION, true )
    call SetPlayerAlliance( Player(4), Player(1), ALLIANCE_SHARED_VISION, true )
    call SetPlayerAlliance( Player(4), Player(3), ALLIANCE_SHARED_VISION, true )
    call SetPlayerAlliance( Player(4), Player(5), ALLIANCE_SHARED_VISION, true )
    call SetPlayerAlliance( Player(5), Player(1), ALLIANCE_SHARED_VISION, true )
    call SetPlayerAlliance( Player(5), Player(3), ALLIANCE_SHARED_VISION, true )
    call SetPlayerAlliance( Player(5), Player(4), ALLIANCE_SHARED_VISION, true )

endfunction

function InitAllyPriorities takes nothing returns nothing

    call SetStartLocPrioCount( 0, 2 )
    call SetStartLocPrio( 0, 0, 3, MAP_LOC_PRIO_LOW )
    call SetStartLocPrio( 0, 1, 5, MAP_LOC_PRIO_LOW )
endfunction

//***************************************************************************
//*
//*  Main Initialization
//*
//***************************************************************************

//===========================================================================
function main takes nothing returns nothing
    call SetCameraBounds( -4864.0 + GetCameraMargin(CAMERA_MARGIN_LEFT), -12160.0 + GetCameraMargin(CAMERA_MARGIN_BOTTOM), 4352.0 - GetCameraMargin(CAMERA_MARGIN_RIGHT), 9344.0 - GetCameraMargin(CAMERA_MARGIN_TOP), -4864.0 + GetCameraMargin(CAMERA_MARGIN_LEFT), 9344.0 - GetCameraMargin(CAMERA_MARGIN_TOP), 4352.0 - GetCameraMargin(CAMERA_MARGIN_RIGHT), -12160.0 + GetCameraMargin(CAMERA_MARGIN_BOTTOM) )
    call SetDayNightModels( "Environment\\DNC\\DNCDalaran\\DNCDalaranTerrain\\DNCDalaranTerrain.mdl", "Environment\\DNC\\DNCDalaran\\DNCDalaranUnit\\DNCDalaranUnit.mdl" )
    call SetAmbientDaySound( "DalaranDay" )
    call SetAmbientNightSound( "DalaranNight" )
    call SetMapMusic( "Music", true, 0 )
    call InitSounds(  )
    call CreateRegions(  )
    call CreateCameras(  )
    call InitTechTree(  )
    call CreateAllDestructables(  )
    call CreateAllItems(  )
    call CreateAllUnits(  )
    call InitBlizzard(  )
    call InitGlobals(  )
    call InitCustomTriggers(  )
    call RunInitializationTriggers(  )

endfunction

//***************************************************************************
//*
//*  Map Configuration
//*
//***************************************************************************

function config takes nothing returns nothing
    call SetMapName( "TRIGSTR_011" )
    call SetMapDescription( "TRIGSTR_135" )
    call SetPlayers( 6 )
    call SetTeams( 6 )
    call SetGamePlacement( MAP_PLACEMENT_USE_MAP_SETTINGS )

    call DefineStartLocation( 0, -640.0, 6848.0 )
    call DefineStartLocation( 1, -3520.0, -3456.0 )
    call DefineStartLocation( 2, 3008.0, 448.0 )
    call DefineStartLocation( 3, -3392.0, 4928.0 )
    call DefineStartLocation( 4, -384.0, -9856.0 )
    call DefineStartLocation( 5, -576.0, -6912.0 )

    // Player setup
    call InitCustomPlayerSlots(  )
    call InitCustomTeams(  )
    call InitAllyPriorities(  )
endfunction

