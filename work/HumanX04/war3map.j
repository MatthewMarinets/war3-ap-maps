//===========================================================================
// 
// HumanX04
// 
//   Warcraft III map script
//   Generated by the Warcraft III World Editor
//   Date: Sun May 11 20:21:58 2003
//   Map Author: Blizzard Entertainment
// 
//===========================================================================

//***************************************************************************
//*
//*  Global Variables
//*
//***************************************************************************

globals
    // User-defined
    boolean                 udg_GameOver               = false
    player                  udg_AP1_Player             = null
    force                   udg_APG1_Player            = null
    unit                    udg_Vashj                  = null
    group                   udg_HiddenUnits            = null
    group                   udg_SelectedUnits          = null
    player                  udg_P2_Watchers            = null
    boolean                 udg_IntroSkipped           = false
    location                udg_CameraReturnPoint      = null
    unit                    udg_Kael                   = null
    location                udg_RevivalSpot            = null
    unit                    udg_RevivalHero            = null
    location                udg_RevivalReturnSpot      = null
    unit                    udg_RevivalAltar           = null
    location                udg_VashjReturnSpot        = null
    location                udg_KaelReturnSpot         = null
    boolean                 udg_InCinematic            = false
    boolean                 udg_VictorySkipped         = false
    boolean                 udg_ExpDisabledForVashj    = false
    boolean                 udg_ExpDisabledForKael     = false
    timer                   udg_CombatCheckTimer       = null
    boolean                 udg_InCombat               = false
    group                   udg_SummonedUnits          = null
    unit                    udg_Speaker                = null
    real                    udg_SpeakingDistance       = 0
    unit                    udg_Maiev                  = null
    unit                    udg_Illidan                = null
    unit                    udg_TownPeasant01          = null
    unit                    udg_TownPeasant02          = null
    real                    udg_WagonMovementSpeed     = 0
    unit                    udg_Wagon                  = null
    player                  udg_P3_IllidanCage         = null
    quest                   udg_QuestIllidan           = null
    questitem               udg_QuestIllidanRecapture  = null
    questitem               udg_QuestIllidanNoMaiev    = null
    quest                   udg_QuestEscort            = null
    questitem               udg_QuestEscortToBloodElf  = null
    player                  udg_WagonOwner             = null
    real                    udg_RandomValue            = 0
    boolean                 udg_ExpDisabledForMaiev    = false
    player                  udg_P8_BloodElfBase        = null
    player                  udg_P10_BloodElfAttack     = null
    player                  udg_P11_NightElfAttack     = null
    location array          udg_zBreadcrumbArray
    integer                 udg_BreadcrumbTotal        = 0
    real                    udg_BETimerLength          = 0
    real                    udg_NETimerLength          = 0
    timer                   udg_BEBuildTimer           = null
    timer                   udg_NEBuildTimer           = null
    trigger                 udg_BEGroupChosen          = null
    trigger                 udg_NEGroupChosen          = null
    integer                 udg_BEUnitCount            = 0
    integer                 udg_NEUnitCount            = 0
    timer                   udg_BuildTimerAdjustmentTimer = null
    real                    udg_BEUnitToNEUnitRatio    = 0
    real                    udg_RandomNumber           = 0
    integer                 udg_BreadcrumbCurrent      = 0
    integer                 udg_BreadcrumbAllowed      = 0
    integer                 udg_BreadcrumbReached      = 0
    real                    udg_GuardCallForHelpDist   = 0
    real                    udg_GuardCallForHelpDuration = 0
    real                    udg_GuardCallForHelpFrequency = 0
    real                    udg_GuardLeftBehindRange   = 0
    real                    udg_HeroSaysGoDistance     = 0
    real                    udg_SpeedOfGuards          = 0
    real                    udg_SpeedOfWagons          = 0
    integer                 udg_TempLastIndex          = 0
    integer                 udg_TempNextIndex          = 0
    real                    udg_TempLastAngle          = 0
    real                    udg_TempNextAngle          = 0
    real                    udg_TempMaxAngle           = 0
    real                    udg_TempMinAngle           = 0
    real                    udg_TempAngle              = 0
    real array              udg_BreadcrumbAngleArray
    integer                 udg_CaravanWagonFirst      = 0
    integer                 udg_CaravanWagonLast       = 0
    integer                 udg_CaravanGuardFirst      = 0
    integer                 udg_CaravanGuardLast       = 0
    location                udg_zReorientTarget        = null
    real                    udg_ReorientAngle          = 0
    timer                   udg_CaravanTestPulse       = null
    timer                   udg_CaravanOrderPulse      = null
    integer                 udg_FormationTotal         = 0
    real array              udg_FormationAngleArray
    real array              udg_FormationDistanceArray
    rect array              udg_FormationRegionArray
    real                    udg_TempX                  = 0
    real                    udg_TempY                  = 0
    unit array              udg_CaravanUnitArray
    group                   udg_CaravanWagonsGroup     = null
    group                   udg_CaravanGuardsGroup     = null
    unit                    udg_CaravanMaiev           = null
    unit                    udg_CaravanHunt01          = null
    unit                    udg_CaravanArcher02        = null
    unit                    udg_CaravanCage            = null
    boolean                 udg_GuardsCatchingUp       = false
    timer                   udg_CaravanAggroTimer      = null
    player                  udg_P5_Maiev               = null
    real                    udg_PlayerHeroRespawnTime  = 0
    real                    udg_BaseMaievRespawnTime   = 0
    unit                    udg_CaravanArcher01        = null
    real                    udg_WagonControlRadius     = 0
    real                    udg_ClosestRegionDistance  = 0
    timer                   udg_WagonPingTimer         = null
    timer                   udg_MaievOrderPulse        = null
    real                    udg_RangeWagonToPlayerGoal = 0
    real                    udg_RangeFactor            = 0
    integer                 udg_UnitDifference         = 0
    real                    udg_NETimerMinimum         = 0
    real                    udg_NETimerMaximum         = 0
    real                    udg_BETimerMinimum         = 0
    real                    udg_BETimerMaximum         = 0
    real                    udg_BETimerBaseMinimum     = 0
    real                    udg_NETimerBaseMinimum     = 0
    timer                   udg_TransferOwnerTimer     = null
    boolean                 udg_DebugOn                = false
    timer                   udg_WagonHeartbeat         = null
    timer                   udg_GoldWispTimer          = null
    real                    udg_MaievRespawnTime       = 0
    unit                    udg_VengeanceUnit          = null
    timer                   udg_RoyalGuardTimer        = null
    leaderboard             udg_OwnerBoard             = null
    real                    udg_BETimerLengthLast      = 0
    real                    udg_NETimerLengthLast      = 0
    real                    udg_BEVolatilityLimit      = 0
    real                    udg_NEVolatilityLimit      = 0
    unit                    udg_IntroSpellBreaker      = null
    unit                    udg_IntroSiren             = null
    unit                    udg_IntroArcher            = null
    unit                    udg_IntroMyrmidon          = null
    unit                    udg_IntroWorker            = null
    unit                    udg_IntroWorkerB           = null
    unit                    udg_IntroWorkerC           = null
    unit                    udg_IntroWorkerD           = null
    timer                   udg_BEBaseAttackedTimer    = null
    location                udg_TempPointA             = null
    location                udg_TempPointB             = null
    location                udg_TempPointC             = null
    location                udg_TempPointD             = null
    location                udg_TempPingPoint          = null
    integer                 udg_HighScoreEasy          = 0
    integer                 udg_HighScoreNormal        = 0
    integer                 udg_HighScoreHard          = 0
    unit                    udg_Brewmaster             = null
    boolean                 udg_ExpDisabledForBrewmaster = false
    location                udg_TempPointE             = null

    // Generated
    rect                    gg_rct_BE_Arcane_Sanctum_Spawn_01 = null
    rect                    gg_rct_BE_Barracks_Spawn_03 = null
    rect                    gg_rct_BE_Barracks_Spawn_01 = null
    rect                    gg_rct_BE_Barracks_Spawn_02 = null
    rect                    gg_rct_BE_Pool_Spawn_01    = null
    rect                    gg_rct_BE_Pool_Spawn_02    = null
    rect                    gg_rct_BE_Pool_Spawn_03    = null
    rect                    gg_rct_Breadcrumb_01       = null
    rect                    gg_rct_Breadcrumb_02       = null
    rect                    gg_rct_Breadcrumb_03       = null
    rect                    gg_rct_Breadcrumb_04       = null
    rect                    gg_rct_Breadcrumb_05       = null
    rect                    gg_rct_Breadcrumb_06       = null
    rect                    gg_rct_Breadcrumb_07       = null
    rect                    gg_rct_Breadcrumb_08       = null
    rect                    gg_rct_Breadcrumb_09       = null
    rect                    gg_rct_Breadcrumb_10       = null
    rect                    gg_rct_Breadcrumb_11       = null
    rect                    gg_rct_Breadcrumb_12       = null
    rect                    gg_rct_Breadcrumb_13       = null
    rect                    gg_rct_Breadcrumb_14       = null
    rect                    gg_rct_Breadcrumb_15       = null
    rect                    gg_rct_Breadcrumb_16       = null
    rect                    gg_rct_Breadcrumb_17       = null
    rect                    gg_rct_Breadcrumb_18       = null
    rect                    gg_rct_Breadcrumb_19       = null
    rect                    gg_rct_Breadcrumb_20       = null
    rect                    gg_rct_Breadcrumb_21       = null
    rect                    gg_rct_Breadcrumb_22       = null
    rect                    gg_rct_Breadcrumb_23       = null
    rect                    gg_rct_Breadcrumb_24       = null
    rect                    gg_rct_Breadcrumb_25       = null
    rect                    gg_rct_Breadcrumb_26       = null
    rect                    gg_rct_Breadcrumb_27       = null
    rect                    gg_rct_Breadcrumb_28       = null
    rect                    gg_rct_Breadcrumb_29       = null
    rect                    gg_rct_Breadcrumb_30       = null
    rect                    gg_rct_Breadcrumb_31       = null
    rect                    gg_rct_Breadcrumb_32       = null
    rect                    gg_rct_Breadcrumb_33       = null
    rect                    gg_rct_Breadcrumb_34       = null
    rect                    gg_rct_Breadcrumb_35       = null
    rect                    gg_rct_Breadcrumb_36       = null
    rect                    gg_rct_Breadcrumb_37       = null
    rect                    gg_rct_Breadcrumb_38       = null
    rect                    gg_rct_Breadcrumb_39       = null
    rect                    gg_rct_Breadcrumb_40       = null
    rect                    gg_rct_Breadcrumb_41       = null
    rect                    gg_rct_BloodElfGoal        = null
    rect                    gg_rct_Formation01         = null
    rect                    gg_rct_Formation02         = null
    rect                    gg_rct_Formation03         = null
    rect                    gg_rct_Formation04         = null
    rect                    gg_rct_Gameplay_Kael_Start = null
    rect                    gg_rct_Gameplay_Vashj_Start = null
    rect                    gg_rct_Gold_Peons          = null
    rect                    gg_rct_Intro_Kael_Start    = null
    rect                    gg_rct_Intro_Vashj_Start   = null
    rect                    gg_rct_Lumber_Peons        = null
    rect                    gg_rct_MaievGoal           = null
    rect                    gg_rct_NE_Ancient_of_Lore_Spawn_01 = null
    rect                    gg_rct_NE_Ancient_of_Lore_Spawn_02 = null
    rect                    gg_rct_NE_Ancient_of_Lore_Spawn_03 = null
    rect                    gg_rct_NE_Ancient_of_War_Spawn_01 = null
    rect                    gg_rct_NE_Ancient_of_War_Spawn_02 = null
    rect                    gg_rct_NE_Ancient_of_War_Spawn_03 = null
    rect                    gg_rct_NE_Ancient_of_War_Spawn_04 = null
    rect                    gg_rct_NE_Ancient_of_Wind_Spawn_01 = null
    rect                    gg_rct_RespawnKael         = null
    rect                    gg_rct_RespawnMaiev        = null
    rect                    gg_rct_RespawnVashj        = null
    rect                    gg_rct_Victory_Kael_Start  = null
    rect                    gg_rct_Victory_KaelMoveForward = null
    rect                    gg_rct_Victory_Priest01    = null
    rect                    gg_rct_Victory_Priest02    = null
    rect                    gg_rct_Victory_Priest03    = null
    rect                    gg_rct_Victory_SB01        = null
    rect                    gg_rct_Victory_SB02        = null
    rect                    gg_rct_Victory_SB03        = null
    rect                    gg_rct_Victory_SB04        = null
    rect                    gg_rct_Victory_SB05        = null
    rect                    gg_rct_Victory_Sorc01      = null
    rect                    gg_rct_Victory_Sorc02      = null
    rect                    gg_rct_Victory_Sorc03      = null
    rect                    gg_rct_Victory_Vashj_Start = null
    rect                    gg_rct_Formation_Center    = null
    rect                    gg_rct_GuardCallForHelpArea = null
    rect                    gg_rct_Formation05         = null
    rect                    gg_rct_GoldWisps           = null
    rect                    gg_rct_HardArcher01        = null
    rect                    gg_rct_HardMaiev           = null
    rect                    gg_rct_HardArcher02        = null
    rect                    gg_rct_HardHunt01          = null
    rect                    gg_rct_HardWagon           = null
    rect                    gg_rct_Intro_Kael_StartB   = null
    rect                    gg_rct_Intro_Vashj_StartB  = null
    rect                    gg_rct_NewIntroKaelStart   = null
    rect                    gg_rct_NewIntroVashjStart  = null
    rect                    gg_rct_NewIntroVashjDest   = null
    rect                    gg_rct_NewIntroKaelDest    = null
    rect                    gg_rct_NewIntroVashjDestA  = null
    rect                    gg_rct_IntroSPBreakerStart = null
    rect                    gg_rct_IntroArcherStart    = null
    rect                    gg_rct_IntroMyrmidonStart  = null
    rect                    gg_rct_IntroSirenStart     = null
    rect                    gg_rct_IntroWorkerStart    = null
    rect                    gg_rct_IntroWorkerBStart   = null
    rect                    gg_rct_IntroWorkerCStart   = null
    rect                    gg_rct_IntroWorkerDStart   = null
    rect                    gg_rct_GameplayBrewmasterStart = null
    rect                    gg_rct_RespawnBrewmaster   = null
    camerasetup             gg_cam_Victory_01          = null
    camerasetup             gg_cam_Victory_02B         = null
    camerasetup             gg_cam_Intro_Skipped       = null
    camerasetup             gg_cam_Intro_01            = null
    camerasetup             gg_cam_Intro_02            = null
    camerasetup             gg_cam_Intro_01B           = null
    camerasetup             gg_cam_Intro_02B           = null
    camerasetup             gg_cam_Victory_01B         = null
    camerasetup             gg_cam_Victory_02          = null
    camerasetup             gg_cam_NewIntroStart       = null
    camerasetup             gg_cam_NewIntroStartA      = null
    camerasetup             gg_cam_IntroThisPlace      = null
    sound                   gg_snd_A05Illidan44        = null
    sound                   gg_snd_A05Illidan46        = null
    sound                   gg_snd_A05Kael01           = null
    sound                   gg_snd_A05Kael16           = null
    sound                   gg_snd_A05Kael17           = null
    sound                   gg_snd_A05Kael19           = null
    sound                   gg_snd_A05Kael21           = null
    sound                   gg_snd_A05Kael22           = null
    sound                   gg_snd_A05Kael23           = null
    sound                   gg_snd_A05Kael24           = null
    sound                   gg_snd_A05Kael27           = null
    sound                   gg_snd_A05LadyVashj02      = null
    sound                   gg_snd_A05LadyVashj15      = null
    sound                   gg_snd_A05LadyVashj18      = null
    sound                   gg_snd_A05LadyVashj20      = null
    sound                   gg_snd_A05LadyVashj45      = null
    sound                   gg_snd_A05LadyVashj47      = null
    sound                   gg_snd_A05LadyVashj48      = null
    sound                   gg_snd_A05Maiev32          = null
    sound                   gg_snd_A05Maiev33          = null
    sound                   gg_snd_A05Maiev34          = null
    sound                   gg_snd_KaelReady1_H04X     = null
    sound                   gg_snd_LadyVashjReady1_H04X = null
    sound                   gg_snd_CatapultYes1        = null
    sound                   gg_snd_CatapultYes2        = null
    sound                   gg_snd_A05Kael0101         = null
    sound                   gg_snd_A05LadyVashj0201    = null
    trigger                 gg_trg_Initialization      = null
    trigger                 gg_trg_Init_01_Players     = null
    trigger                 gg_trg_Init_02_Units       = null
    trigger                 gg_trg_Init_03_Music       = null
    trigger                 gg_trg_Init_04_Environment = null
    trigger                 gg_trg_Init_05_Quests      = null
    trigger                 gg_trg_Init_06a_Hard       = null
    trigger                 gg_trg_Init_06b_Normal     = null
    trigger                 gg_trg_Init_06c_Easy       = null
    trigger                 gg_trg_Init_07a_Caravan_Variables = null
    trigger                 gg_trg_Init_07b_Army_Generation_Variables = null
    trigger                 gg_trg_Init_08_Breadcrumbs = null
    trigger                 gg_trg_Init_09a_Formations = null
    trigger                 gg_trg_Init_09b_Caravan    = null
    trigger                 gg_trg_Init_09c_Caravan_Units = null
    trigger                 gg_trg_Load_Heroes         = null
    trigger                 gg_trg_Load_Vashj          = null
    trigger                 gg_trg_Load_Kael           = null
    trigger                 gg_trg_Load_Brewmaster     = null
    trigger                 gg_trg_Experience_Cap_Vashj = null
    trigger                 gg_trg_Experience_Cap_Kael = null
    trigger                 gg_trg_Experience_Cap_Brewmaster = null
    trigger                 gg_trg_Cinematic_Revival   = null
    trigger                 gg_trg_Intro_Cinematic_Q   = null
    trigger                 gg_trg_Intro_Skipped       = null
    trigger                 gg_trg_Intro_Setup         = null
    trigger                 gg_trg_Intro_Cleanup       = null
    trigger                 gg_trg_Gameplay            = null
    trigger                 gg_trg_Victory_Cinematic_Q = null
    trigger                 gg_trg_Victory_Wagon_Explodes = null
    trigger                 gg_trg_Victory_Skipped     = null
    trigger                 gg_trg_Victory_Setup       = null
    trigger                 gg_trg_Create_Path_Visibility = null
    trigger                 gg_trg_Fire_it_Up          = null
    trigger                 gg_trg_Start_Build_Animations = null
    trigger                 gg_trg_Start_Timers        = null
    trigger                 gg_trg_Initial_Production  = null
    trigger                 gg_trg_Put_Wisps_on_Gold   = null
    trigger                 gg_trg_BE_Timer_Expires    = null
    trigger                 gg_trg_NE_Timer_Expires    = null
    trigger                 gg_trg_BE_01               = null
    trigger                 gg_trg_BE_02               = null
    trigger                 gg_trg_BE_03               = null
    trigger                 gg_trg_NE_01               = null
    trigger                 gg_trg_NE_02               = null
    trigger                 gg_trg_Adjustment_Timer_Expires = null
    trigger                 gg_trg_Adjust_by_Unit_Comparison_Count = null
    trigger                 gg_trg_Adjust_by_Wagon_proximity_to_BE_Base = null
    trigger                 gg_trg_Adjust_by_Wagon_proximity_to_NE_Base = null
    trigger                 gg_trg_Adjust_by_Number_of_Units = null
    trigger                 gg_trg_Limit_TimerLengths  = null
    trigger                 gg_trg_Sync_Timers_to_TimerLength = null
    trigger                 gg_trg_BE_Base_Attacked    = null
    trigger                 gg_trg_BE_Base_Attacked_Reset = null
    trigger                 gg_trg_Give_Wagon_to_Player = null
    trigger                 gg_trg_Force_Wagon_Moves   = null
    trigger                 gg_trg_Player_gets_Wagon_First_Time = null
    trigger                 gg_trg_Player_gets_Wagon_First_Time_Q = null
    trigger                 gg_trg_Player_gets_Wagon_Subsequent_Times = null
    trigger                 gg_trg_Player_gets_Wagon_Subsequent_Times_Q = null
    trigger                 gg_trg_Give_Wagon_to_Maiev = null
    trigger                 gg_trg_Player_Loses_Wagon_First_Time = null
    trigger                 gg_trg_Player_Loses_Wagon_First_Time_Q = null
    trigger                 gg_trg_Player_Loses_Wagon_Subsequent_Times = null
    trigger                 gg_trg_Player_Loses_Wagon_Subsequent_Times_Q = null
    trigger                 gg_trg_MaievOrderPulse_Expires = null
    trigger                 gg_trg_Create_Initial_Board = null
    trigger                 gg_trg_Change_Board_to_Player = null
    trigger                 gg_trg_Change_Board_to_Maiev = null
    trigger                 gg_trg_Caravan_Go          = null
    trigger                 gg_trg_Reorient_Formation  = null
    trigger                 gg_trg_Caravan_Orders_Pause = null
    trigger                 gg_trg_Caravan_Orders_Resume = null
    trigger                 gg_trg_Caravan_Orders      = null
    trigger                 gg_trg_Caravan_Check_Dist  = null
    trigger                 gg_trg_Caravan_Unit_Dies   = null
    trigger                 gg_trg_Guard_Attacked      = null
    trigger                 gg_trg_Guard_Catches_Up    = null
    trigger                 gg_trg_Wagons_Reach_Breadcrumb = null
    trigger                 gg_trg_Target_Next_Breadcrumb = null
    trigger                 gg_trg_Kael_Dies           = null
    trigger                 gg_trg_Vashj_Dies          = null
    trigger                 gg_trg_Brewmaster_Dies     = null
    trigger                 gg_trg_Maiev_Dies          = null
    trigger                 gg_trg_Kael_Ready_Q        = null
    trigger                 gg_trg_Vashj_Ready_Q       = null
    trigger                 gg_trg_Maiev_Attacks       = null
    trigger                 gg_trg_Maiev_Attacks_Q     = null
    trigger                 gg_trg_Give_Money_to_Player = null
    trigger                 gg_trg_PingTimerExpires    = null
    trigger                 gg_trg_BE_Building_dies    = null
    trigger                 gg_trg_NE_Building_dies    = null
    trigger                 gg_trg_Start_Suicide_Scripts = null
    trigger                 gg_trg_AI_Resources_Maiev_Gold = null
    trigger                 gg_trg_AI_Resources_Maiev_Lumber = null
    trigger                 gg_trg_Quest_Secure_Wagon_Create = null
    trigger                 gg_trg_Quest_Secure_Wagon_Discover = null
    trigger                 gg_trg_Quest_Secure_Wagon_Update_Recapture = null
    trigger                 gg_trg_Quest_Secure_Wagon_Update_Lost_Wagon = null
    trigger                 gg_trg_Quest_Secure_Wagon_Completed = null
    trigger                 gg_trg_Quest_Escort_Wagon_Create = null
    trigger                 gg_trg_Quest_Escort_Wagon_Discover = null
    trigger                 gg_trg_Quest_Escort_Wagon_Completed = null
    trigger                 gg_trg_Mission_Failed_Wagon_at_Maiev = null
    trigger                 gg_trg_Mission_Failed_Base_Defeated = null
    trigger                 gg_trg_Get_the_Wagon_Q     = null
    trigger                 gg_trg_Only_Control_Hero_Notice_Q = null
    trigger                 gg_trg_Hero_Dies           = null
    trigger                 gg_trg_Hero_Dies_Q         = null
    trigger                 gg_trg_Item_Shop_Usuable_Q = null
    trigger                 gg_trg_Maiev_Dies_First_Time = null
    trigger                 gg_trg_Maiev_Dies_First_Time_Q = null
    trigger                 gg_trg_Brewmaster_Available_Q = null
    trigger                 gg_trg_Next_Level_Prep     = null
    trigger                 gg_trg_Next_Level_Run      = null
    trigger                 gg_trg_Victory_Cheat       = null
    trigger                 gg_trg_Defeat_Cheat        = null
    trigger                 gg_trg_Victory_Wagon_at_BE_Base = null
    trigger                 gg_trg_Defeat_Wagon_at_Maiev = null
    trigger                 gg_trg_Defeat_BE_Buildings_Dead = null
    trigger                 gg_trg_Victory_NE_Base_Dead = null
    trigger                 gg_trg_A                   = null
    trigger                 gg_trg_DEBUG               = null
    trigger                 gg_trg_Combat_Detected_A   = null
    trigger                 gg_trg_Combat_Detected_B   = null
    trigger                 gg_trg_Combat_Resolved     = null
    unit                    gg_unit_Ewrd_0039          = null
    unit                    gg_unit_earc_0086          = null
    unit                    gg_unit_n000_0124          = null
    unit                    gg_unit_ncp3_0097          = null
    unit                    gg_unit_eilw_0038          = null
    unit                    gg_unit_eaom_0008          = null
    unit                    gg_unit_eaom_0009          = null
    unit                    gg_unit_eaom_0010          = null
    unit                    gg_unit_eaoe_0011          = null
    unit                    gg_unit_eaoe_0012          = null
    unit                    gg_unit_eaow_0013          = null
    unit                    gg_unit_eate_0014          = null
    unit                    gg_unit_earc_0087          = null
    unit                    gg_unit_eaoe_0030          = null
    unit                    gg_unit_eaom_0031          = null
    unit                    gg_unit_hcas_0000          = null
    unit                    gg_unit_hbar_0037          = null
    unit                    gg_unit_hars_0040          = null
    unit                    gg_unit_hbar_0041          = null
    unit                    gg_unit_hbar_0042          = null
    unit                    gg_unit_halt_0062          = null
    unit                    gg_unit_nnsg_0045          = null
    unit                    gg_unit_nnsg_0046          = null
    unit                    gg_unit_nnad_0061          = null
    unit                    gg_unit_nnsg_0044          = null
    unit                    gg_unit_esen_0103          = null
endglobals

function InitGlobals takes nothing returns nothing
    local integer i = 0
    set udg_GameOver = false
    set udg_AP1_Player = Player(0)
    set udg_APG1_Player = bj_FORCE_PLAYER[0]
    set udg_Vashj = null
    set udg_HiddenUnits = CreateGroup()
    set udg_SelectedUnits = CreateGroup()
    set udg_P2_Watchers = Player(1)
    set udg_IntroSkipped = false
    set udg_Kael = null
    set udg_RevivalHero = null
    set udg_RevivalAltar = null
    set udg_InCinematic = false
    set udg_VictorySkipped = false
    set udg_ExpDisabledForVashj = false
    set udg_ExpDisabledForKael = false
    set udg_CombatCheckTimer = CreateTimer()
    set udg_InCombat = false
    set udg_SummonedUnits = CreateGroup()
    set udg_SpeakingDistance = 1500.00
    set udg_Maiev = null
    set udg_WagonMovementSpeed = 0
    set udg_P3_IllidanCage = Player(2)
    set udg_WagonOwner = Player(1)
    set udg_RandomValue = 0
    set udg_ExpDisabledForMaiev = false
    set udg_P8_BloodElfBase = Player(7)
    set udg_P10_BloodElfAttack = Player(9)
    set udg_P11_NightElfAttack = Player(10)
    set udg_BreadcrumbTotal = 0
    set udg_BETimerLength = 0
    set udg_NETimerLength = 0
    set udg_BEBuildTimer = CreateTimer()
    set udg_NEBuildTimer = CreateTimer()
    set udg_BEUnitCount = 0
    set udg_NEUnitCount = 0
    set udg_BuildTimerAdjustmentTimer = CreateTimer()
    set udg_BEUnitToNEUnitRatio = 0
    set udg_RandomNumber = 0
    set udg_BreadcrumbCurrent = 0
    set udg_BreadcrumbAllowed = 0
    set udg_BreadcrumbReached = 0
    set udg_GuardCallForHelpDist = 0
    set udg_GuardCallForHelpDuration = 0
    set udg_GuardCallForHelpFrequency = 0
    set udg_GuardLeftBehindRange = 0
    set udg_HeroSaysGoDistance = 0
    set udg_SpeedOfGuards = 0
    set udg_SpeedOfWagons = 0
    set udg_TempLastIndex = 0
    set udg_TempNextIndex = 0
    set udg_TempLastAngle = 0
    set udg_TempNextAngle = 0
    set udg_TempMaxAngle = 0
    set udg_TempMinAngle = 0
    set udg_TempAngle = 0
    set i = 0
    loop
        exitwhen (i > 41)
        set udg_BreadcrumbAngleArray[i] = 0
        set i = i + 1
    endloop

    set udg_CaravanWagonFirst = 0
    set udg_CaravanWagonLast = 0
    set udg_CaravanGuardFirst = 0
    set udg_CaravanGuardLast = 0
    set udg_ReorientAngle = 0
    set udg_CaravanTestPulse = CreateTimer()
    set udg_CaravanOrderPulse = CreateTimer()
    set udg_FormationTotal = 0
    set i = 0
    loop
        exitwhen (i > 5)
        set udg_FormationAngleArray[i] = 0
        set i = i + 1
    endloop

    set i = 0
    loop
        exitwhen (i > 5)
        set udg_FormationDistanceArray[i] = 0
        set i = i + 1
    endloop

    set udg_TempX = 0
    set udg_TempY = 0
    set udg_CaravanWagonsGroup = CreateGroup()
    set udg_CaravanGuardsGroup = CreateGroup()
    set udg_GuardsCatchingUp = false
    set udg_CaravanAggroTimer = CreateTimer()
    set udg_P5_Maiev = Player(4)
    set udg_PlayerHeroRespawnTime = 0
    set udg_BaseMaievRespawnTime = 0
    set udg_WagonControlRadius = 0
    set udg_ClosestRegionDistance = 0
    set udg_WagonPingTimer = CreateTimer()
    set udg_MaievOrderPulse = CreateTimer()
    set udg_RangeWagonToPlayerGoal = 0
    set udg_RangeFactor = 0
    set udg_UnitDifference = 0
    set udg_NETimerMinimum = 0
    set udg_NETimerMaximum = 0
    set udg_BETimerMinimum = 0
    set udg_BETimerMaximum = 0
    set udg_BETimerBaseMinimum = 0
    set udg_NETimerBaseMinimum = 0
    set udg_TransferOwnerTimer = CreateTimer()
    set udg_DebugOn = false
    set udg_WagonHeartbeat = CreateTimer()
    set udg_GoldWispTimer = CreateTimer()
    set udg_MaievRespawnTime = 0
    set udg_RoyalGuardTimer = CreateTimer()
    set udg_BETimerLengthLast = 0
    set udg_NETimerLengthLast = 0
    set udg_BEVolatilityLimit = 0
    set udg_NEVolatilityLimit = 0
    set udg_BEBaseAttackedTimer = CreateTimer()
    set udg_HighScoreEasy = 0
    set udg_HighScoreNormal = 0
    set udg_HighScoreHard = 0
    set udg_ExpDisabledForBrewmaster = false
endfunction

//***************************************************************************
//*
//*  Sounds
//*
//***************************************************************************

function InitSounds takes nothing returns nothing
    set gg_snd_A05Illidan44 = CreateSound( "Sound\\Dialogue\\HumanExpCamp\\Human05x\\A05Illidan44.mp3", false, false, false, 10, 10, "" )
    call SetSoundParamsFromLabel( gg_snd_A05Illidan44, "A05Illidan44" )
    call SetSoundDuration( gg_snd_A05Illidan44, 9430 )
    set gg_snd_A05Illidan46 = CreateSound( "Sound\\Dialogue\\HumanExpCamp\\Human05x\\A05Illidan46.mp3", false, false, false, 10, 10, "" )
    call SetSoundParamsFromLabel( gg_snd_A05Illidan46, "A05Illidan46" )
    call SetSoundDuration( gg_snd_A05Illidan46, 3474 )
    set gg_snd_A05Kael01 = CreateSound( "Sound\\Dialogue\\HumanExpCamp\\Human05x\\A05Kael01.mp3", false, false, false, 10, 10, "" )
    call SetSoundParamsFromLabel( gg_snd_A05Kael01, "A05Kael01" )
    call SetSoundDuration( gg_snd_A05Kael01, 8620 )
    set gg_snd_A05Kael16 = CreateSound( "Sound\\Dialogue\\HumanExpCamp\\Human05x\\A05Kael16.mp3", false, false, false, 10, 10, "" )
    call SetSoundParamsFromLabel( gg_snd_A05Kael16, "A05Kael16" )
    call SetSoundDuration( gg_snd_A05Kael16, 5982 )
    set gg_snd_A05Kael17 = CreateSound( "Sound\\Dialogue\\HumanExpCamp\\Human05x\\A05Kael17.mp3", false, false, false, 10, 10, "" )
    call SetSoundParamsFromLabel( gg_snd_A05Kael17, "A05Kael17" )
    call SetSoundDuration( gg_snd_A05Kael17, 5277 )
    set gg_snd_A05Kael19 = CreateSound( "Sound\\Dialogue\\HumanExpCamp\\Human05x\\A05Kael19.mp3", false, false, false, 10, 10, "" )
    call SetSoundParamsFromLabel( gg_snd_A05Kael19, "A05Kael19" )
    call SetSoundDuration( gg_snd_A05Kael19, 1829 )
    set gg_snd_A05Kael21 = CreateSound( "Sound\\Dialogue\\HumanExpCamp\\Human05x\\A05Kael21.mp3", false, false, false, 10, 10, "" )
    call SetSoundParamsFromLabel( gg_snd_A05Kael21, "A05Kael21" )
    call SetSoundDuration( gg_snd_A05Kael21, 2560 )
    set gg_snd_A05Kael22 = CreateSound( "Sound\\Dialogue\\HumanExpCamp\\Human05x\\A05Kael22.mp3", false, false, false, 10, 10, "" )
    call SetSoundParamsFromLabel( gg_snd_A05Kael22, "A05Kael22" )
    call SetSoundDuration( gg_snd_A05Kael22, 3082 )
    set gg_snd_A05Kael23 = CreateSound( "Sound\\Dialogue\\HumanExpCamp\\Human05x\\A05Kael23.mp3", false, false, false, 10, 10, "" )
    call SetSoundParamsFromLabel( gg_snd_A05Kael23, "A05Kael23" )
    call SetSoundDuration( gg_snd_A05Kael23, 2900 )
    set gg_snd_A05Kael24 = CreateSound( "Sound\\Dialogue\\HumanExpCamp\\Human05x\\A05Kael24.mp3", false, false, false, 10, 10, "" )
    call SetSoundParamsFromLabel( gg_snd_A05Kael24, "A05Kael24" )
    call SetSoundDuration( gg_snd_A05Kael24, 3971 )
    set gg_snd_A05Kael27 = CreateSound( "Sound\\Dialogue\\HumanExpCamp\\Human05x\\A05Kael27.mp3", false, false, false, 10, 10, "" )
    call SetSoundParamsFromLabel( gg_snd_A05Kael27, "A05Kael27" )
    call SetSoundDuration( gg_snd_A05Kael27, 2978 )
    set gg_snd_A05LadyVashj02 = CreateSound( "Sound\\Dialogue\\HumanExpCamp\\Human05x\\A05LadyVashj02.mp3", false, false, false, 10, 10, "" )
    call SetSoundParamsFromLabel( gg_snd_A05LadyVashj02, "A05LadyVashj02" )
    call SetSoundDuration( gg_snd_A05LadyVashj02, 3396 )
    set gg_snd_A05LadyVashj15 = CreateSound( "Sound\\Dialogue\\HumanExpCamp\\Human05x\\A05LadyVashj15.mp3", false, false, false, 10, 10, "" )
    call SetSoundParamsFromLabel( gg_snd_A05LadyVashj15, "A05LadyVashj15" )
    call SetSoundDuration( gg_snd_A05LadyVashj15, 3474 )
    set gg_snd_A05LadyVashj18 = CreateSound( "Sound\\Dialogue\\HumanExpCamp\\Human05x\\A05LadyVashj18.mp3", false, false, false, 10, 10, "" )
    call SetSoundParamsFromLabel( gg_snd_A05LadyVashj18, "A05LadyVashj18" )
    call SetSoundDuration( gg_snd_A05LadyVashj18, 2664 )
    set gg_snd_A05LadyVashj20 = CreateSound( "Sound\\Dialogue\\HumanExpCamp\\Human05x\\A05LadyVashj20.mp3", false, false, false, 10, 10, "" )
    call SetSoundParamsFromLabel( gg_snd_A05LadyVashj20, "A05LadyVashj20" )
    call SetSoundDuration( gg_snd_A05LadyVashj20, 5590 )
    set gg_snd_A05LadyVashj45 = CreateSound( "Sound\\Dialogue\\HumanExpCamp\\Human05x\\A05LadyVashj45.mp3", false, false, false, 10, 10, "" )
    call SetSoundParamsFromLabel( gg_snd_A05LadyVashj45, "A05LadyVashj45" )
    call SetSoundDuration( gg_snd_A05LadyVashj45, 5198 )
    set gg_snd_A05LadyVashj47 = CreateSound( "Sound\\Dialogue\\HumanExpCamp\\Human05x\\A05LadyVashj47.mp3", false, false, false, 10, 10, "" )
    call SetSoundParamsFromLabel( gg_snd_A05LadyVashj47, "A05LadyVashj47" )
    call SetSoundDuration( gg_snd_A05LadyVashj47, 8673 )
    set gg_snd_A05LadyVashj48 = CreateSound( "Sound\\Dialogue\\HumanExpCamp\\Human05x\\A05LadyVashj48.mp3", false, false, false, 10, 10, "" )
    call SetSoundParamsFromLabel( gg_snd_A05LadyVashj48, "A05LadyVashj48" )
    call SetSoundDuration( gg_snd_A05LadyVashj48, 10266 )
    set gg_snd_A05Maiev32 = CreateSound( "Sound\\Dialogue\\HumanExpCamp\\Human05x\\A05Maiev32.mp3", false, false, false, 10, 10, "" )
    call SetSoundParamsFromLabel( gg_snd_A05Maiev32, "A05Maiev32" )
    call SetSoundDuration( gg_snd_A05Maiev32, 4127 )
    set gg_snd_A05Maiev33 = CreateSound( "Sound\\Dialogue\\HumanExpCamp\\Human05x\\A05Maiev33.mp3", false, false, false, 10, 10, "" )
    call SetSoundParamsFromLabel( gg_snd_A05Maiev33, "A05Maiev33" )
    call SetSoundDuration( gg_snd_A05Maiev33, 2612 )
    set gg_snd_A05Maiev34 = CreateSound( "Sound\\Dialogue\\HumanExpCamp\\Human05x\\A05Maiev34.mp3", false, false, false, 10, 10, "DefaultEAXON" )
    call SetSoundParamsFromLabel( gg_snd_A05Maiev34, "A05Maiev34" )
    call SetSoundDuration( gg_snd_A05Maiev34, 6452 )
    set gg_snd_KaelReady1_H04X = CreateSound( "Sound\\Ambient\\DoodadEffects\\KaelReady1_H04X.wav", false, false, true, 10, 10, "DefaultEAXON" )
    call SetSoundParamsFromLabel( gg_snd_KaelReady1_H04X, "KaelReadyX" )
    call SetSoundDuration( gg_snd_KaelReady1_H04X, 891 )
    set gg_snd_LadyVashjReady1_H04X = CreateSound( "Sound\\Ambient\\DoodadEffects\\LadyVashjReady1_H04X.wav", false, false, true, 10, 10, "DefaultEAXON" )
    call SetSoundParamsFromLabel( gg_snd_LadyVashjReady1_H04X, "LadyVashjReadyX" )
    call SetSoundDuration( gg_snd_LadyVashjReady1_H04X, 1324 )
    set gg_snd_CatapultYes1 = CreateSound( "Units\\Orc\\Catapult\\CatapultYes1.wav", false, true, true, 10, 10, "DefaultEAXON" )
    call SetSoundParamsFromLabel( gg_snd_CatapultYes1, "CatapultYes" )
    call SetSoundDuration( gg_snd_CatapultYes1, 2281 )
    set gg_snd_CatapultYes2 = CreateSound( "Units\\Orc\\Catapult\\CatapultYes2.wav", false, true, true, 10, 10, "DefaultEAXON" )
    call SetSoundParamsFromLabel( gg_snd_CatapultYes2, "CatapultYes" )
    call SetSoundDuration( gg_snd_CatapultYes2, 2438 )
    set gg_snd_A05Kael0101 = CreateSound( "Sound\\Dialogue\\HumanExpCamp\\Human05x\\A05Kael01.mp3", false, false, false, 10, 10, "" )
    call SetSoundParamsFromLabel( gg_snd_A05Kael0101, "A05Kael01" )
    call SetSoundDuration( gg_snd_A05Kael0101, 8620 )
    set gg_snd_A05LadyVashj0201 = CreateSound( "Sound\\Dialogue\\HumanExpCamp\\Human05x\\A05LadyVashj02.mp3", false, false, false, 10, 10, "" )
    call SetSoundParamsFromLabel( gg_snd_A05LadyVashj0201, "A05LadyVashj02" )
    call SetSoundDuration( gg_snd_A05LadyVashj0201, 3396 )
endfunction

//***************************************************************************
//*
//*  Unit Creation
//*
//***************************************************************************

//===========================================================================
function CreateBuildingsForPlayer1 takes nothing returns nothing
    local player p = Player(1)
    local unit u
    local integer unitID
    local trigger t
    local real life

    set u = CreateUnit( p, 'etoe', 12032.0, 7104.0, 270.000 )
    set u = CreateUnit( p, 'emow', 11168.0, 6240.0, 270.000 )
    set u = CreateUnit( p, 'emow', 10976.0, 6240.0, 270.000 )
    set u = CreateUnit( p, 'emow', 12320.0, 6112.0, 270.000 )
    set gg_unit_eaom_0008 = CreateUnit( p, 'eaom', 12096.0, 8384.0, 270.000 )
    set gg_unit_eaom_0009 = CreateUnit( p, 'eaom', 9920.0, 8000.0, 270.000 )
    set gg_unit_eaom_0010 = CreateUnit( p, 'eaom', 10496.0, 7616.0, 270.000 )
    set gg_unit_eaoe_0011 = CreateUnit( p, 'eaoe', 11136.0, 8128.0, 270.000 )
    set gg_unit_eaoe_0012 = CreateUnit( p, 'eaoe', 11520.0, 7680.0, 270.000 )
    set gg_unit_eaow_0013 = CreateUnit( p, 'eaow', 11072.0, 7168.0, 270.000 )
    set gg_unit_eate_0014 = CreateUnit( p, 'eate', 12000.0, 7776.0, 270.000 )
    set u = CreateUnit( p, 'eden', 10432.0, 6976.0, 270.000 )
    set u = CreateUnit( p, 'edob', 11200.0, 6592.0, 270.000 )
    set u = CreateUnit( p, 'etrp', 11488.0, 9824.0, 270.000 )
    set u = CreateUnit( p, 'etrp', 12576.0, 8864.0, 270.000 )
    set u = CreateUnit( p, 'etrp', 11488.0, 8800.0, 270.000 )
    set u = CreateUnit( p, 'emow', 9824.0, 7456.0, 270.000 )
    set u = CreateUnit( p, 'emow', 10912.0, 9504.0, 270.000 )
    set u = CreateUnit( p, 'emow', 10720.0, 9440.0, 270.000 )
    set u = CreateUnit( p, 'emow', 9888.0, 7264.0, 270.000 )
    set u = CreateUnit( p, 'emow', 9568.0, 8544.0, 270.000 )
    set u = CreateUnit( p, 'emow', 9760.0, 8608.0, 270.000 )
    set u = CreateUnit( p, 'emow', 9568.0, 8736.0, 270.000 )
    set gg_unit_eaoe_0030 = CreateUnit( p, 'eaoe', 10304.0, 8960.0, 270.000 )
    set gg_unit_eaom_0031 = CreateUnit( p, 'eaom', 10560.0, 8320.0, 270.000 )
    set u = CreateUnit( p, 'etrp', 9440.0, 7712.0, 270.000 )
    set u = CreateUnit( p, 'etrp', 10592.0, 6496.0, 270.000 )
    set u = CreateUnit( p, 'etrp', 12384.0, 7072.0, 270.000 )
    set u = CreateUnit( p, 'etrp', 9888.0, 9120.0, 270.000 )
    set u = CreateUnit( p, 'emow', 12448.0, 7840.0, 270.000 )
    set u = CreateUnit( p, 'emow', 12448.0, 7648.0, 270.000 )
    set gg_unit_ncp3_0097 = CreateUnit( p, 'ncp3', 11968.0, 9280.0, 270.000 )
    set u = CreateUnit( p, 'etrp', 9312.0, 8288.0, 270.000 )
    set u = CreateUnit( p, 'etrp', 10528.0, 9376.0, 270.000 )
    set u = CreateUnit( p, 'etrp', 9568.0, 6944.0, 270.000 )
    set u = CreateUnit( p, 'etrp', 10016.0, 7456.0, 270.000 )
    set u = CreateUnit( p, 'etrp', 9760.0, 8416.0, 270.000 )
    set u = CreateUnit( p, 'etrp', 12128.0, 6112.0, 270.000 )
    set u = CreateUnit( p, 'etrp', 11360.0, 5984.0, 270.000 )
    set u = CreateUnit( p, 'etrp', 11040.0, 7648.0, 270.000 )
    set u = CreateUnit( p, 'etrp', 11616.0, 6816.0, 270.000 )
endfunction

//===========================================================================
function CreateUnitsForPlayer1 takes nothing returns nothing
    local player p = Player(1)
    local unit u
    local integer unitID
    local trigger t
    local real life

    set u = CreateUnit( p, 'earc', 11422.3, 9535.6, 28.983 )
    set u = CreateUnit( p, 'earc', 11779.2, 6934.8, 222.693 )
    set u = CreateUnit( p, 'ewsp', 12292.7, 6863.0, 5.548 )
    set u = CreateUnit( p, 'ewsp', 12443.9, 6774.1, 49.396 )
    set u = CreateUnit( p, 'ewsp', 12523.1, 6611.5, 247.826 )
    set u = CreateUnit( p, 'ewsp', 12462.5, 6526.2, 170.832 )
    set u = CreateUnit( p, 'edry', 10905.4, 7647.4, 307.945 )
    set u = CreateUnit( p, 'earc', 9734.1, 7090.4, 337.609 )
    set u = CreateUnit( p, 'earc', 9330.2, 8794.5, 247.661 )
    set u = CreateUnit( p, 'earc', 10528.2, 9167.3, 36.322 )
    set u = CreateUnit( p, 'earc', 12463.4, 8231.6, 61.393 )
    set u = CreateUnit( p, 'earc', 9475.8, 7960.0, 159.307 )
    set u = CreateUnit( p, 'esen', 12401.5, 8738.0, 135.652 )
    set u = CreateUnit( p, 'earc', 10690.6, 6848.2, 264.888 )
    set u = CreateUnit( p, 'earc', 11378.8, 6272.3, 59.306 )
endfunction

//===========================================================================
function CreateUnitsForPlayer4 takes nothing returns nothing
    local player p = Player(4)
    local unit u
    local integer unitID
    local trigger t
    local real life

    set gg_unit_eilw_0038 = CreateUnit( p, 'eilw', 3981.9, 9555.6, 15.308 )
    set gg_unit_Ewrd_0039 = CreateUnit( p, 'Ewrd', 4010.9, 9339.4, 234.240 )
    call SetHeroLevel( gg_unit_Ewrd_0039, 10, false )
    call SetUnitState( gg_unit_Ewrd_0039, UNIT_STATE_MANA, 0 )
    call SelectHeroSkill( gg_unit_Ewrd_0039, 'AEfk' )
    call SelectHeroSkill( gg_unit_Ewrd_0039, 'AEfk' )
    call SelectHeroSkill( gg_unit_Ewrd_0039, 'AEfk' )
    call SelectHeroSkill( gg_unit_Ewrd_0039, 'AEbl' )
    call SelectHeroSkill( gg_unit_Ewrd_0039, 'AEbl' )
    call SelectHeroSkill( gg_unit_Ewrd_0039, 'AEbl' )
    call SelectHeroSkill( gg_unit_Ewrd_0039, 'AEsh' )
    call SelectHeroSkill( gg_unit_Ewrd_0039, 'AEsh' )
    call SelectHeroSkill( gg_unit_Ewrd_0039, 'AEsh' )
    call SelectHeroSkill( gg_unit_Ewrd_0039, 'AEsv' )
    call UnitAddItemToSlotById( gg_unit_Ewrd_0039, 'phlt', 0 )
    call UnitAddItemToSlotById( gg_unit_Ewrd_0039, 'phlt', 1 )
    call UnitAddItemToSlotById( gg_unit_Ewrd_0039, 'phlt', 2 )
    call UnitAddItemToSlotById( gg_unit_Ewrd_0039, 'phlt', 3 )
    call UnitAddItemToSlotById( gg_unit_Ewrd_0039, 'phlt', 4 )
    call UnitAddItemToSlotById( gg_unit_Ewrd_0039, 'phlt', 5 )
    set gg_unit_earc_0086 = CreateUnit( p, 'earc', 3971.7, 9837.9, 182.698 )
    set gg_unit_earc_0087 = CreateUnit( p, 'earc', 4432.0, 9429.1, 250.199 )
    set gg_unit_esen_0103 = CreateUnit( p, 'esen', 4324.5, 10001.3, 64.166 )
endfunction

//===========================================================================
function CreateBuildingsForPlayer7 takes nothing returns nothing
    local player p = Player(7)
    local unit u
    local integer unitID
    local trigger t
    local real life

    set gg_unit_hcas_0000 = CreateUnit( p, 'hcas', -2880.0, 14400.0, 270.000 )
    set u = CreateUnit( p, 'hlum', -3744.0, 14432.0, 270.000 )
    set gg_unit_hbar_0037 = CreateUnit( p, 'hbar', -3264.0, 13952.0, 270.000 )
    set gg_unit_hars_0040 = CreateUnit( p, 'hars', -4032.0, 13056.0, 270.000 )
    set gg_unit_hbar_0041 = CreateUnit( p, 'hbar', -3904.0, 13760.0, 270.000 )
    set gg_unit_hbar_0042 = CreateUnit( p, 'hbar', -3456.0, 13312.0, 270.000 )
    set u = CreateUnit( p, 'hbla', -3776.0, 11520.0, 270.000 )
    set gg_unit_nnsg_0044 = CreateUnit( p, 'nnsg', -1600.0, 13376.0, 270.000 )
    set gg_unit_nnsg_0045 = CreateUnit( p, 'nnsg', -2112.0, 14464.0, 270.000 )
    set gg_unit_nnsg_0046 = CreateUnit( p, 'nnsg', -1472.0, 14208.0, 270.000 )
    set u = CreateUnit( p, 'hvlt', -2496.0, 13696.0, 270.000 )
    set u = CreateUnit( p, 'nnfm', -1120.0, 14688.0, 270.000 )
    set u = CreateUnit( p, 'nnfm', -928.0, 14112.0, 270.000 )
    set u = CreateUnit( p, 'nntg', -1856.0, 12864.0, 270.000 )
    set u = CreateUnit( p, 'nntg', -1280.0, 13696.0, 270.000 )
    set gg_unit_nnad_0061 = CreateUnit( p, 'nnad', -2080.0, 13792.0, 270.000 )
    set gg_unit_halt_0062 = CreateUnit( p, 'halt', -2912.0, 13536.0, 270.000 )
    set u = CreateUnit( p, 'hhou', -3904.0, 12224.0, 270.000 )
    set u = CreateUnit( p, 'hhou', -3968.0, 12096.0, 270.000 )
    set u = CreateUnit( p, 'hhou', -4416.0, 11456.0, 270.000 )
    set u = CreateUnit( p, 'hhou', -4480.0, 11328.0, 270.000 )
    set u = CreateUnit( p, 'hhou', -4544.0, 11456.0, 270.000 )
    set u = CreateUnit( p, 'hhou', -4672.0, 12480.0, 270.000 )
    set u = CreateUnit( p, 'hhou', -4544.0, 12352.0, 270.000 )
    set u = CreateUnit( p, 'hhou', -3072.0, 14912.0, 270.000 )
    set u = CreateUnit( p, 'hhou', -3200.0, 14848.0, 270.000 )
    set u = CreateUnit( p, 'nnfm', -1760.0, 14752.0, 270.000 )
    set u = CreateUnit( p, 'hctw', -3136.0, 12672.0, 270.000 )
    set u = CreateUnit( p, 'hgtw', -3328.0, 14528.0, 270.000 )
    set u = CreateUnit( p, 'hgtw', -3776.0, 12608.0, 270.000 )
    set u = CreateUnit( p, 'nntg', -832.0, 14464.0, 270.000 )
    set u = CreateUnit( p, 'hgtw', -2496.0, 14336.0, 270.000 )
    set u = CreateUnit( p, 'hgtw', -4288.0, 13376.0, 270.000 )
    set u = CreateUnit( p, 'hatw', -4160.0, 14080.0, 270.000 )
    set u = CreateUnit( p, 'hctw', -1600.0, 12736.0, 270.000 )
    set gg_unit_n000_0124 = CreateUnit( p, 'n000', -2496.0, 12800.0, 270.000 )
    set u = CreateUnit( p, 'hgtw', -3008.0, 12992.0, 270.000 )
endfunction

//===========================================================================
function CreateUnitsForPlayer7 takes nothing returns nothing
    local player p = Player(7)
    local unit u
    local integer unitID
    local trigger t
    local real life

    set u = CreateUnit( p, 'nhew', -2776.7, 14886.5, 241.058 )
    set u = CreateUnit( p, 'nhew', -2639.7, 14849.3, 228.896 )
    set u = CreateUnit( p, 'nhew', -2729.9, 14753.8, 171.007 )
    set u = CreateUnit( p, 'nhew', -2650.5, 14705.2, 265.284 )
    set u = CreateUnit( p, 'nhew', -2825.2, 14687.7, 159.076 )
    set u = CreateUnit( p, 'nhew', -3971.6, 14572.6, 23.149 )
    set u = CreateUnit( p, 'nhew', -3784.0, 14638.4, 270.612 )
endfunction

//===========================================================================
function CreateNeutralPassiveBuildings takes nothing returns nothing
    local player p = Player(PLAYER_NEUTRAL_PASSIVE)
    local unit u
    local integer unitID
    local trigger t
    local real life

    set u = CreateUnit( p, 'ngol', 12224.0, 6592.0, 270.000 )
    call SetResourceAmount( u, 12500 )
    set u = CreateUnit( p, 'nmre', -384.0, 7040.0, 270.000 )
    call SetUnitColor( u, ConvertPlayerColor(12) )
    set u = CreateUnit( p, 'ngol', -2560.0, 15104.0, 270.000 )
    call SetResourceAmount( u, 12500 )
    set u = CreateUnit( p, 'ngme', 2176.0, 11328.0, 270.000 )
    set u = CreateUnit( p, 'nfnp', 8576.0, 10688.0, 270.000 )
    set u = CreateUnit( p, 'ngme', 9536.0, 10816.0, 270.000 )
    set u = CreateUnit( p, 'ngme', -1024.0, 7424.0, 270.000 )
endfunction

//===========================================================================
function CreateNeutralPassive takes nothing returns nothing
    local player p = Player(PLAYER_NEUTRAL_PASSIVE)
    local unit u
    local integer unitID
    local trigger t
    local real life

    set u = CreateUnit( p, 'ndwm', 11510.5, 8248.1, 142.047 )
    set u = CreateUnit( p, 'ndwm', 10315.1, 7325.9, 48.682 )
    set u = CreateUnit( p, 'ndwm', -1324.3, 7126.1, 238.202 )
    set u = CreateUnit( p, 'ndwm', -915.6, 6801.5, 345.322 )
    set u = CreateUnit( p, 'nfbr', 5947.4, 7262.0, 267.745 )
    set u = CreateUnit( p, 'nfbr', 9165.8, 10617.1, 117.568 )
endfunction

//===========================================================================
function CreatePlayerBuildings takes nothing returns nothing
    call CreateBuildingsForPlayer1(  )
    call CreateBuildingsForPlayer7(  )
endfunction

//===========================================================================
function CreatePlayerUnits takes nothing returns nothing
    call CreateUnitsForPlayer1(  )
    call CreateUnitsForPlayer4(  )
    call CreateUnitsForPlayer7(  )
endfunction

//===========================================================================
function CreateAllUnits takes nothing returns nothing
    call CreateNeutralPassiveBuildings(  )
    call CreatePlayerBuildings(  )
    call CreateNeutralPassive(  )
    call CreatePlayerUnits(  )
endfunction

//***************************************************************************
//*
//*  Regions
//*
//***************************************************************************

function CreateRegions takes nothing returns nothing
    local weathereffect we

    set gg_rct_BE_Arcane_Sanctum_Spawn_01 = Rect( -4224.0, 12800.0, -4096.0, 12928.0 )
    set gg_rct_BE_Barracks_Spawn_03 = Rect( -4096.0, 13504.0, -3968.0, 13632.0 )
    set gg_rct_BE_Barracks_Spawn_01 = Rect( -3648.0, 13056.0, -3520.0, 13184.0 )
    set gg_rct_BE_Barracks_Spawn_02 = Rect( -3456.0, 13696.0, -3328.0, 13824.0 )
    set gg_rct_BE_Pool_Spawn_01 = Rect( -2304.0, 14208.0, -2176.0, 14336.0 )
    set gg_rct_BE_Pool_Spawn_02 = Rect( -1792.0, 13120.0, -1664.0, 13248.0 )
    set gg_rct_BE_Pool_Spawn_03 = Rect( -1664.0, 13952.0, -1536.0, 14080.0 )
    set gg_rct_Breadcrumb_01 = Rect( -2560.0, 12416.0, -2432.0, 12544.0 )
    set gg_rct_Breadcrumb_02 = Rect( -2240.0, 11872.0, -2112.0, 12000.0 )
    set gg_rct_Breadcrumb_03 = Rect( -1728.0, 11264.0, -1600.0, 11392.0 )
    set gg_rct_Breadcrumb_04 = Rect( -1440.0, 10848.0, -1312.0, 10976.0 )
    set gg_rct_Breadcrumb_05 = Rect( -1088.0, 10272.0, -960.0, 10400.0 )
    set gg_rct_Breadcrumb_06 = Rect( -864.0, 9728.0, -736.0, 9856.0 )
    set gg_rct_Breadcrumb_07 = Rect( -704.0, 9184.0, -576.0, 9312.0 )
    set gg_rct_Breadcrumb_08 = Rect( -480.0, 8640.0, -352.0, 8768.0 )
    set gg_rct_Breadcrumb_09 = Rect( 0.0, 8160.0, 128.0, 8288.0 )
    set gg_rct_Breadcrumb_10 = Rect( 576.0, 8128.0, 704.0, 8256.0 )
    set gg_rct_Breadcrumb_11 = Rect( 1120.0, 8352.0, 1248.0, 8480.0 )
    set gg_rct_Breadcrumb_12 = Rect( 1600.0, 8768.0, 1728.0, 8896.0 )
    set gg_rct_Breadcrumb_13 = Rect( 2048.0, 9216.0, 2176.0, 9344.0 )
    set gg_rct_Breadcrumb_14 = Rect( 2528.0, 9696.0, 2656.0, 9824.0 )
    set gg_rct_Breadcrumb_15 = Rect( 3072.0, 10144.0, 3200.0, 10272.0 )
    set gg_rct_Breadcrumb_16 = Rect( 3680.0, 9888.0, 3808.0, 10016.0 )
    set gg_rct_Breadcrumb_17 = Rect( 4352.0, 9888.0, 4480.0, 10016.0 )
    set gg_rct_Breadcrumb_18 = Rect( 4832.0, 10304.0, 4960.0, 10432.0 )
    set gg_rct_Breadcrumb_19 = Rect( 5280.0, 10496.0, 5408.0, 10624.0 )
    set gg_rct_Breadcrumb_20 = Rect( 5792.0, 10752.0, 5920.0, 10880.0 )
    set gg_rct_Breadcrumb_21 = Rect( 6240.0, 10976.0, 6368.0, 11104.0 )
    set gg_rct_Breadcrumb_22 = Rect( 6784.0, 11232.0, 6912.0, 11360.0 )
    set gg_rct_Breadcrumb_23 = Rect( 7232.0, 11552.0, 7360.0, 11680.0 )
    set gg_rct_Breadcrumb_24 = Rect( 7616.0, 11904.0, 7744.0, 12032.0 )
    set gg_rct_Breadcrumb_25 = Rect( 7968.0, 12288.0, 8096.0, 12416.0 )
    set gg_rct_Breadcrumb_26 = Rect( 8384.0, 12736.0, 8512.0, 12864.0 )
    set gg_rct_Breadcrumb_27 = Rect( 8800.0, 13152.0, 8928.0, 13280.0 )
    set gg_rct_Breadcrumb_28 = Rect( 9280.0, 13440.0, 9408.0, 13568.0 )
    set gg_rct_Breadcrumb_29 = Rect( 9760.0, 13408.0, 9888.0, 13536.0 )
    set gg_rct_Breadcrumb_30 = Rect( 10240.0, 13088.0, 10368.0, 13216.0 )
    set gg_rct_Breadcrumb_31 = Rect( 10720.0, 12704.0, 10848.0, 12832.0 )
    set gg_rct_Breadcrumb_32 = Rect( 11232.0, 12192.0, 11360.0, 12320.0 )
    set gg_rct_Breadcrumb_33 = Rect( 11744.0, 11712.0, 11872.0, 11840.0 )
    set gg_rct_Breadcrumb_34 = Rect( 12032.0, 11136.0, 12160.0, 11264.0 )
    set gg_rct_Breadcrumb_35 = Rect( 12128.0, 10560.0, 12256.0, 10688.0 )
    set gg_rct_Breadcrumb_36 = Rect( 12096.0, 10048.0, 12224.0, 10176.0 )
    set gg_rct_Breadcrumb_37 = Rect( 12000.0, 9568.0, 12128.0, 9696.0 )
    set gg_rct_Breadcrumb_38 = Rect( 11904.0, 9152.0, 12032.0, 9280.0 )
    set gg_rct_Breadcrumb_39 = Rect( 11840.0, 8960.0, 11968.0, 9088.0 )
    set gg_rct_Breadcrumb_40 = Rect( 11776.0, 8800.0, 11904.0, 8928.0 )
    set gg_rct_Breadcrumb_41 = Rect( 11712.0, 8640.0, 11840.0, 8768.0 )
    set gg_rct_BloodElfGoal = Rect( -2624.0, 12672.0, -2368.0, 12928.0 )
    set gg_rct_Formation01 = Rect( 4288.0, 9504.0, 4448.0, 9664.0 )
    set gg_rct_Formation02 = Rect( 3936.0, 9856.0, 4096.0, 10016.0 )
    set gg_rct_Formation03 = Rect( 4192.0, 9088.0, 4352.0, 9248.0 )
    set gg_rct_Formation04 = Rect( 3808.0, 9312.0, 3968.0, 9472.0 )
    set gg_rct_Gameplay_Kael_Start = Rect( -1888.0, 11936.0, -1760.0, 12064.0 )
    set gg_rct_Gameplay_Vashj_Start = Rect( -2208.0, 11744.0, -2080.0, 11872.0 )
    set gg_rct_Gold_Peons = Rect( -2944.0, 14592.0, -2528.0, 14976.0 )
    set gg_rct_Intro_Kael_Start = Rect( 9984.0, 5696.0, 10112.0, 5824.0 )
    set gg_rct_Intro_Vashj_Start = Rect( 10112.0, 5632.0, 10240.0, 5760.0 )
    set gg_rct_Lumber_Peons = Rect( -4096.0, 14432.0, -3680.0, 14816.0 )
    set gg_rct_MaievGoal = Rect( 11840.0, 9152.0, 12096.0, 9408.0 )
    set gg_rct_NE_Ancient_of_Lore_Spawn_01 = Rect( 10112.0, 8704.0, 10240.0, 8832.0 )
    set gg_rct_NE_Ancient_of_Lore_Spawn_02 = Rect( 10944.0, 7872.0, 11072.0, 8000.0 )
    set gg_rct_NE_Ancient_of_Lore_Spawn_03 = Rect( 11328.0, 7424.0, 11456.0, 7552.0 )
    set gg_rct_NE_Ancient_of_War_Spawn_01 = Rect( 9728.0, 7744.0, 9856.0, 7872.0 )
    set gg_rct_NE_Ancient_of_War_Spawn_02 = Rect( 10368.0, 8064.0, 10496.0, 8192.0 )
    set gg_rct_NE_Ancient_of_War_Spawn_03 = Rect( 10304.0, 7360.0, 10432.0, 7488.0 )
    set gg_rct_NE_Ancient_of_War_Spawn_04 = Rect( 11904.0, 8128.0, 12032.0, 8256.0 )
    set gg_rct_NE_Ancient_of_Wind_Spawn_01 = Rect( 10880.0, 6912.0, 11008.0, 7040.0 )
    set gg_rct_RespawnKael = Rect( -2912.0, 13312.0, -2784.0, 13440.0 )
    set gg_rct_RespawnMaiev = Rect( 11840.0, 7488.0, 11968.0, 7616.0 )
    set gg_rct_RespawnVashj = Rect( -2176.0, 13568.0, -2048.0, 13696.0 )
    set gg_rct_Victory_Kael_Start = Rect( -2336.0, 12064.0, -2208.0, 12192.0 )
    set gg_rct_Victory_KaelMoveForward = Rect( -2496.0, 12384.0, -2400.0, 12480.0 )
    set gg_rct_Victory_Priest01 = Rect( -2080.0, 11744.0, -1984.0, 11840.0 )
    set gg_rct_Victory_Priest02 = Rect( -2240.0, 11648.0, -2144.0, 11744.0 )
    set gg_rct_Victory_Priest03 = Rect( -2368.0, 11584.0, -2272.0, 11680.0 )
    set gg_rct_Victory_SB01 = Rect( -1984.0, 12096.0, -1888.0, 12192.0 )
    set gg_rct_Victory_SB02 = Rect( -2112.0, 12000.0, -2016.0, 12096.0 )
    set gg_rct_Victory_SB03 = Rect( -2240.0, 11904.0, -2144.0, 12000.0 )
    set gg_rct_Victory_SB04 = Rect( -2368.0, 11808.0, -2272.0, 11904.0 )
    set gg_rct_Victory_SB05 = Rect( -2496.0, 11712.0, -2400.0, 11808.0 )
    set gg_rct_Victory_Sorc01 = Rect( -1760.0, 12064.0, -1664.0, 12160.0 )
    set gg_rct_Victory_Sorc02 = Rect( -1856.0, 11968.0, -1760.0, 12064.0 )
    set gg_rct_Victory_Sorc03 = Rect( -1952.0, 11872.0, -1856.0, 11968.0 )
    set gg_rct_Victory_Vashj_Start = Rect( -2848.0, 12736.0, -2720.0, 12864.0 )
    set gg_rct_Formation_Center = Rect( 4160.0, 9600.0, 4224.0, 9696.0 )
    set gg_rct_GuardCallForHelpArea = Rect( 4032.0, 9792.0, 4288.0, 10080.0 )
    set gg_rct_Formation05 = Rect( 4448.0, 9696.0, 4608.0, 9856.0 )
    set gg_rct_GoldWisps = Rect( 12448.0, 6272.0, 12896.0, 6784.0 )
    set gg_rct_HardArcher01 = Rect( 4768.0, 10560.0, 4896.0, 10688.0 )
    set gg_rct_HardMaiev = Rect( 4800.0, 10080.0, 4928.0, 10208.0 )
    set gg_rct_HardArcher02 = Rect( 5248.0, 10144.0, 5376.0, 10272.0 )
    set gg_rct_HardHunt01 = Rect( 5120.0, 10752.0, 5248.0, 10880.0 )
    set gg_rct_HardWagon = Rect( 4800.0, 10272.0, 4928.0, 10400.0 )
    set gg_rct_Intro_Kael_StartB = Rect( 3488.0, 7616.0, 3616.0, 7744.0 )
    set gg_rct_Intro_Vashj_StartB = Rect( 3680.0, 7552.0, 3808.0, 7680.0 )
    set gg_rct_NewIntroKaelStart = Rect( 5120.0, 14272.0, 5312.0, 14464.0 )
    set gg_rct_NewIntroVashjStart = Rect( 5408.0, 14144.0, 5600.0, 14336.0 )
    set gg_rct_NewIntroVashjDest = Rect( 5568.0, 14656.0, 5728.0, 14816.0 )
    set gg_rct_NewIntroKaelDest = Rect( 5280.0, 14752.0, 5440.0, 14944.0 )
    set gg_rct_NewIntroVashjDestA = Rect( 4704.0, 15840.0, 4832.0, 16032.0 )
    set gg_rct_IntroSPBreakerStart = Rect( 4864.0, 14016.0, 5024.0, 14208.0 )
    set gg_rct_IntroArcherStart = Rect( 5216.0, 13888.0, 5408.0, 14080.0 )
    set gg_rct_IntroMyrmidonStart = Rect( 4608.0, 13760.0, 4768.0, 13952.0 )
    set gg_rct_IntroSirenStart = Rect( 4832.0, 13568.0, 4992.0, 13760.0 )
    set gg_rct_IntroWorkerStart = Rect( 4384.0, 13504.0, 4544.0, 13728.0 )
    set gg_rct_IntroWorkerBStart = Rect( 4640.0, 13248.0, 4800.0, 13472.0 )
    set gg_rct_IntroWorkerCStart = Rect( 4160.0, 13280.0, 4320.0, 13504.0 )
    set gg_rct_IntroWorkerDStart = Rect( 4480.0, 13056.0, 4640.0, 13216.0 )
    set gg_rct_GameplayBrewmasterStart = Rect( -2112.0, 12000.0, -1984.0, 12128.0 )
    set gg_rct_RespawnBrewmaster = Rect( -2816.0, 13440.0, -2688.0, 13568.0 )
endfunction

//***************************************************************************
//*
//*  Cameras
//*
//***************************************************************************

function CreateCameras takes nothing returns nothing

    set gg_cam_Victory_01 = CreateCameraSetup(  )
    call CameraSetupSetField( gg_cam_Victory_01, CAMERA_FIELD_ZOFFSET, 0.0, 0.0 )
    call CameraSetupSetField( gg_cam_Victory_01, CAMERA_FIELD_ROTATION, 63.7, 0.0 )
    call CameraSetupSetField( gg_cam_Victory_01, CAMERA_FIELD_ANGLE_OF_ATTACK, 329.3, 0.0 )
    call CameraSetupSetField( gg_cam_Victory_01, CAMERA_FIELD_TARGET_DISTANCE, 1364.7, 0.0 )
    call CameraSetupSetField( gg_cam_Victory_01, CAMERA_FIELD_ROLL, 0.0, 0.0 )
    call CameraSetupSetField( gg_cam_Victory_01, CAMERA_FIELD_FIELD_OF_VIEW, 70.0, 0.0 )
    call CameraSetupSetField( gg_cam_Victory_01, CAMERA_FIELD_FARZ, 5000.0, 0.0 )
    call CameraSetupSetDestPosition( gg_cam_Victory_01, -2875.7, 12538.1, 0.0 )

    set gg_cam_Victory_02B = CreateCameraSetup(  )
    call CameraSetupSetField( gg_cam_Victory_02B, CAMERA_FIELD_ZOFFSET, 0.0, 0.0 )
    call CameraSetupSetField( gg_cam_Victory_02B, CAMERA_FIELD_ROTATION, 296.1, 0.0 )
    call CameraSetupSetField( gg_cam_Victory_02B, CAMERA_FIELD_ANGLE_OF_ATTACK, 325.9, 0.0 )
    call CameraSetupSetField( gg_cam_Victory_02B, CAMERA_FIELD_TARGET_DISTANCE, 1319.8, 0.0 )
    call CameraSetupSetField( gg_cam_Victory_02B, CAMERA_FIELD_ROLL, 0.0, 0.0 )
    call CameraSetupSetField( gg_cam_Victory_02B, CAMERA_FIELD_FIELD_OF_VIEW, 70.0, 0.0 )
    call CameraSetupSetField( gg_cam_Victory_02B, CAMERA_FIELD_FARZ, 5000.0, 0.0 )
    call CameraSetupSetDestPosition( gg_cam_Victory_02B, -2511.7, 12446.9, 0.0 )

    set gg_cam_Intro_Skipped = CreateCameraSetup(  )
    call CameraSetupSetField( gg_cam_Intro_Skipped, CAMERA_FIELD_ZOFFSET, 0.0, 0.0 )
    call CameraSetupSetField( gg_cam_Intro_Skipped, CAMERA_FIELD_ROTATION, 90.0, 0.0 )
    call CameraSetupSetField( gg_cam_Intro_Skipped, CAMERA_FIELD_ANGLE_OF_ATTACK, 304.0, 0.0 )
    call CameraSetupSetField( gg_cam_Intro_Skipped, CAMERA_FIELD_TARGET_DISTANCE, 1650.0, 0.0 )
    call CameraSetupSetField( gg_cam_Intro_Skipped, CAMERA_FIELD_ROLL, 0.0, 0.0 )
    call CameraSetupSetField( gg_cam_Intro_Skipped, CAMERA_FIELD_FIELD_OF_VIEW, 70.0, 0.0 )
    call CameraSetupSetField( gg_cam_Intro_Skipped, CAMERA_FIELD_FARZ, 5000.0, 0.0 )
    call CameraSetupSetDestPosition( gg_cam_Intro_Skipped, -2006.7, 11925.7, 0.0 )

    set gg_cam_Intro_01 = CreateCameraSetup(  )
    call CameraSetupSetField( gg_cam_Intro_01, CAMERA_FIELD_ZOFFSET, 0.0, 0.0 )
    call CameraSetupSetField( gg_cam_Intro_01, CAMERA_FIELD_ROTATION, 59.3, 0.0 )
    call CameraSetupSetField( gg_cam_Intro_01, CAMERA_FIELD_ANGLE_OF_ATTACK, 328.5, 0.0 )
    call CameraSetupSetField( gg_cam_Intro_01, CAMERA_FIELD_TARGET_DISTANCE, 1642.9, 0.0 )
    call CameraSetupSetField( gg_cam_Intro_01, CAMERA_FIELD_ROLL, 0.0, 0.0 )
    call CameraSetupSetField( gg_cam_Intro_01, CAMERA_FIELD_FIELD_OF_VIEW, 65.0, 0.0 )
    call CameraSetupSetField( gg_cam_Intro_01, CAMERA_FIELD_FARZ, 3500.0, 0.0 )
    call CameraSetupSetDestPosition( gg_cam_Intro_01, 10413.5, 6342.5, 0.0 )

    set gg_cam_Intro_02 = CreateCameraSetup(  )
    call CameraSetupSetField( gg_cam_Intro_02, CAMERA_FIELD_ZOFFSET, 0.0, 0.0 )
    call CameraSetupSetField( gg_cam_Intro_02, CAMERA_FIELD_ROTATION, 74.7, 0.0 )
    call CameraSetupSetField( gg_cam_Intro_02, CAMERA_FIELD_ANGLE_OF_ATTACK, 333.8, 0.0 )
    call CameraSetupSetField( gg_cam_Intro_02, CAMERA_FIELD_TARGET_DISTANCE, 1969.2, 0.0 )
    call CameraSetupSetField( gg_cam_Intro_02, CAMERA_FIELD_ROLL, 0.0, 0.0 )
    call CameraSetupSetField( gg_cam_Intro_02, CAMERA_FIELD_FIELD_OF_VIEW, 68.0, 0.0 )
    call CameraSetupSetField( gg_cam_Intro_02, CAMERA_FIELD_FARZ, 4900.0, 0.0 )
    call CameraSetupSetDestPosition( gg_cam_Intro_02, 3863.7, 8460.5, 0.0 )

    set gg_cam_Intro_01B = CreateCameraSetup(  )
    call CameraSetupSetField( gg_cam_Intro_01B, CAMERA_FIELD_ZOFFSET, 0.0, 0.0 )
    call CameraSetupSetField( gg_cam_Intro_01B, CAMERA_FIELD_ROTATION, 65.3, 0.0 )
    call CameraSetupSetField( gg_cam_Intro_01B, CAMERA_FIELD_ANGLE_OF_ATTACK, 328.4, 0.0 )
    call CameraSetupSetField( gg_cam_Intro_01B, CAMERA_FIELD_TARGET_DISTANCE, 1642.9, 0.0 )
    call CameraSetupSetField( gg_cam_Intro_01B, CAMERA_FIELD_ROLL, 0.0, 0.0 )
    call CameraSetupSetField( gg_cam_Intro_01B, CAMERA_FIELD_FIELD_OF_VIEW, 65.0, 0.0 )
    call CameraSetupSetField( gg_cam_Intro_01B, CAMERA_FIELD_FARZ, 3500.0, 0.0 )
    call CameraSetupSetDestPosition( gg_cam_Intro_01B, 10413.5, 6342.5, 0.0 )

    set gg_cam_Intro_02B = CreateCameraSetup(  )
    call CameraSetupSetField( gg_cam_Intro_02B, CAMERA_FIELD_ZOFFSET, 0.0, 0.0 )
    call CameraSetupSetField( gg_cam_Intro_02B, CAMERA_FIELD_ROTATION, 74.6, 0.0 )
    call CameraSetupSetField( gg_cam_Intro_02B, CAMERA_FIELD_ANGLE_OF_ATTACK, 333.2, 0.0 )
    call CameraSetupSetField( gg_cam_Intro_02B, CAMERA_FIELD_TARGET_DISTANCE, 1200.0, 0.0 )
    call CameraSetupSetField( gg_cam_Intro_02B, CAMERA_FIELD_ROLL, 0.0, 0.0 )
    call CameraSetupSetField( gg_cam_Intro_02B, CAMERA_FIELD_FIELD_OF_VIEW, 70.0, 0.0 )
    call CameraSetupSetField( gg_cam_Intro_02B, CAMERA_FIELD_FARZ, 5000.0, 0.0 )
    call CameraSetupSetDestPosition( gg_cam_Intro_02B, 4044.6, 9478.9, 0.0 )

    set gg_cam_Victory_01B = CreateCameraSetup(  )
    call CameraSetupSetField( gg_cam_Victory_01B, CAMERA_FIELD_ZOFFSET, 20.0, 0.0 )
    call CameraSetupSetField( gg_cam_Victory_01B, CAMERA_FIELD_ROTATION, 56.6, 0.0 )
    call CameraSetupSetField( gg_cam_Victory_01B, CAMERA_FIELD_ANGLE_OF_ATTACK, 326.7, 0.0 )
    call CameraSetupSetField( gg_cam_Victory_01B, CAMERA_FIELD_TARGET_DISTANCE, 1025.3, 0.0 )
    call CameraSetupSetField( gg_cam_Victory_01B, CAMERA_FIELD_ROLL, 0.0, 0.0 )
    call CameraSetupSetField( gg_cam_Victory_01B, CAMERA_FIELD_FIELD_OF_VIEW, 70.0, 0.0 )
    call CameraSetupSetField( gg_cam_Victory_01B, CAMERA_FIELD_FARZ, 5000.0, 0.0 )
    call CameraSetupSetDestPosition( gg_cam_Victory_01B, -2656.0, 12659.4, 0.0 )

    set gg_cam_Victory_02 = CreateCameraSetup(  )
    call CameraSetupSetField( gg_cam_Victory_02, CAMERA_FIELD_ZOFFSET, 0.0, 0.0 )
    call CameraSetupSetField( gg_cam_Victory_02, CAMERA_FIELD_ROTATION, 290.1, 0.0 )
    call CameraSetupSetField( gg_cam_Victory_02, CAMERA_FIELD_ANGLE_OF_ATTACK, 325.9, 0.0 )
    call CameraSetupSetField( gg_cam_Victory_02, CAMERA_FIELD_TARGET_DISTANCE, 1319.8, 0.0 )
    call CameraSetupSetField( gg_cam_Victory_02, CAMERA_FIELD_ROLL, 0.0, 0.0 )
    call CameraSetupSetField( gg_cam_Victory_02, CAMERA_FIELD_FIELD_OF_VIEW, 70.0, 0.0 )
    call CameraSetupSetField( gg_cam_Victory_02, CAMERA_FIELD_FARZ, 5000.0, 0.0 )
    call CameraSetupSetDestPosition( gg_cam_Victory_02, -2491.6, 12458.9, 0.0 )

    set gg_cam_NewIntroStart = CreateCameraSetup(  )
    call CameraSetupSetField( gg_cam_NewIntroStart, CAMERA_FIELD_ZOFFSET, 0.0, 0.0 )
    call CameraSetupSetField( gg_cam_NewIntroStart, CAMERA_FIELD_ROTATION, 60.8, 0.0 )
    call CameraSetupSetField( gg_cam_NewIntroStart, CAMERA_FIELD_ANGLE_OF_ATTACK, 313.3, 0.0 )
    call CameraSetupSetField( gg_cam_NewIntroStart, CAMERA_FIELD_TARGET_DISTANCE, 2645.9, 0.0 )
    call CameraSetupSetField( gg_cam_NewIntroStart, CAMERA_FIELD_ROLL, 0.0, 0.0 )
    call CameraSetupSetField( gg_cam_NewIntroStart, CAMERA_FIELD_FIELD_OF_VIEW, 65.0, 0.0 )
    call CameraSetupSetField( gg_cam_NewIntroStart, CAMERA_FIELD_FARZ, 4792.5, 0.0 )
    call CameraSetupSetDestPosition( gg_cam_NewIntroStart, 4907.0, 13773.6, 0.0 )

    set gg_cam_NewIntroStartA = CreateCameraSetup(  )
    call CameraSetupSetField( gg_cam_NewIntroStartA, CAMERA_FIELD_ZOFFSET, 0.0, 0.0 )
    call CameraSetupSetField( gg_cam_NewIntroStartA, CAMERA_FIELD_ROTATION, 60.8, 0.0 )
    call CameraSetupSetField( gg_cam_NewIntroStartA, CAMERA_FIELD_ANGLE_OF_ATTACK, 313.3, 0.0 )
    call CameraSetupSetField( gg_cam_NewIntroStartA, CAMERA_FIELD_TARGET_DISTANCE, 1807.2, 0.0 )
    call CameraSetupSetField( gg_cam_NewIntroStartA, CAMERA_FIELD_ROLL, 0.0, 0.0 )
    call CameraSetupSetField( gg_cam_NewIntroStartA, CAMERA_FIELD_FIELD_OF_VIEW, 65.0, 0.0 )
    call CameraSetupSetField( gg_cam_NewIntroStartA, CAMERA_FIELD_FARZ, 4792.5, 0.0 )
    call CameraSetupSetDestPosition( gg_cam_NewIntroStartA, 5600.1, 14315.5, 0.0 )

    set gg_cam_IntroThisPlace = CreateCameraSetup(  )
    call CameraSetupSetField( gg_cam_IntroThisPlace, CAMERA_FIELD_ZOFFSET, 0.0, 0.0 )
    call CameraSetupSetField( gg_cam_IntroThisPlace, CAMERA_FIELD_ROTATION, 60.8, 0.0 )
    call CameraSetupSetField( gg_cam_IntroThisPlace, CAMERA_FIELD_ANGLE_OF_ATTACK, 313.3, 0.0 )
    call CameraSetupSetField( gg_cam_IntroThisPlace, CAMERA_FIELD_TARGET_DISTANCE, 1493.6, 0.0 )
    call CameraSetupSetField( gg_cam_IntroThisPlace, CAMERA_FIELD_ROLL, 0.0, 0.0 )
    call CameraSetupSetField( gg_cam_IntroThisPlace, CAMERA_FIELD_FIELD_OF_VIEW, 65.0, 0.0 )
    call CameraSetupSetField( gg_cam_IntroThisPlace, CAMERA_FIELD_FARZ, 4792.5, 0.0 )
    call CameraSetupSetDestPosition( gg_cam_IntroThisPlace, 5406.6, 14687.4, 0.0 )

endfunction

//***************************************************************************
//*
//*  Triggers
//*
//***************************************************************************

//===========================================================================
// Trigger: Initialization
//
// Template version 1.03
//===========================================================================
function Trig_Initialization_Actions takes nothing returns nothing
    call SetCampaignMenuRaceBJ( bj_CAMPAIGN_INDEX_XH )
    call SetAllyColorFilterState( 0 )
    call ConditionalTriggerExecute( gg_trg_Init_01_Players )
    call ConditionalTriggerExecute( gg_trg_Init_02_Units )
    call ConditionalTriggerExecute( gg_trg_Init_03_Music )
    call ConditionalTriggerExecute( gg_trg_Init_04_Environment )
    call ConditionalTriggerExecute( gg_trg_Init_05_Quests )
    call ConditionalTriggerExecute( gg_trg_Init_06a_Hard )
    call ConditionalTriggerExecute( gg_trg_Init_06b_Normal )
    call ConditionalTriggerExecute( gg_trg_Init_06c_Easy )
    call ConditionalTriggerExecute( gg_trg_Init_07a_Caravan_Variables )
    call ConditionalTriggerExecute( gg_trg_Init_07b_Army_Generation_Variables )
    call ConditionalTriggerExecute( gg_trg_Init_08_Breadcrumbs )
    call ConditionalTriggerExecute( gg_trg_Init_09a_Formations )
    call ConditionalTriggerExecute( gg_trg_Init_09b_Caravan )
    // Start Intro Cinematic
    call QueuedTriggerAddBJ( gg_trg_Intro_Cinematic_Q, true )
endfunction

//===========================================================================
function InitTrig_Initialization takes nothing returns nothing
    set gg_trg_Initialization = CreateTrigger(  )
    call TriggerAddAction( gg_trg_Initialization, function Trig_Initialization_Actions )
endfunction

//===========================================================================
// Trigger: Init 01 Players
//===========================================================================
function Trig_Init_01_Players_Actions takes nothing returns nothing
    // Alliance Settings
    call SetPlayerAllianceStateBJ( udg_AP1_Player, Player(PLAYER_NEUTRAL_PASSIVE), bj_ALLIANCE_NEUTRAL )
    call SetPlayerAllianceStateBJ( udg_AP1_Player, udg_P2_Watchers, bj_ALLIANCE_UNALLIED )
    call SetPlayerAllianceStateBJ( udg_AP1_Player, udg_P3_IllidanCage, bj_ALLIANCE_ALLIED_VISION )
    call SetPlayerAllianceStateBJ( udg_AP1_Player, udg_P5_Maiev, bj_ALLIANCE_UNALLIED )
    call SetPlayerAllianceStateBJ( udg_AP1_Player, udg_P8_BloodElfBase, bj_ALLIANCE_ALLIED_VISION )
    call SetPlayerAllianceStateBJ( udg_AP1_Player, udg_P10_BloodElfAttack, bj_ALLIANCE_ALLIED_VISION )
    call SetPlayerAllianceStateBJ( udg_AP1_Player, udg_P11_NightElfAttack, bj_ALLIANCE_UNALLIED )
    call SetPlayerAllianceStateBJ( udg_P2_Watchers, Player(PLAYER_NEUTRAL_AGGRESSIVE), bj_ALLIANCE_NEUTRAL )
    call SetPlayerAllianceStateBJ( udg_P2_Watchers, udg_AP1_Player, bj_ALLIANCE_UNALLIED )
    call SetPlayerAllianceStateBJ( udg_P2_Watchers, udg_P3_IllidanCage, bj_ALLIANCE_NEUTRAL )
    call SetPlayerAllianceStateBJ( udg_P2_Watchers, udg_P5_Maiev, bj_ALLIANCE_ALLIED_VISION )
    call SetPlayerAllianceStateBJ( udg_P2_Watchers, udg_P8_BloodElfBase, bj_ALLIANCE_UNALLIED )
    call SetPlayerAllianceStateBJ( udg_P2_Watchers, udg_P10_BloodElfAttack, bj_ALLIANCE_UNALLIED )
    call SetPlayerAllianceStateBJ( udg_P2_Watchers, udg_P11_NightElfAttack, bj_ALLIANCE_ALLIED_VISION )
    call SetPlayerAllianceStateBJ( udg_P5_Maiev, Player(PLAYER_NEUTRAL_AGGRESSIVE), bj_ALLIANCE_NEUTRAL )
    call SetPlayerAllianceStateBJ( udg_P5_Maiev, udg_AP1_Player, bj_ALLIANCE_UNALLIED )
    call SetPlayerAllianceStateBJ( udg_P5_Maiev, udg_P2_Watchers, bj_ALLIANCE_ALLIED_VISION )
    call SetPlayerAllianceStateBJ( udg_P5_Maiev, udg_P3_IllidanCage, bj_ALLIANCE_NEUTRAL )
    call SetPlayerAllianceStateBJ( udg_P5_Maiev, udg_P8_BloodElfBase, bj_ALLIANCE_UNALLIED )
    call SetPlayerAllianceStateBJ( udg_P5_Maiev, udg_P10_BloodElfAttack, bj_ALLIANCE_UNALLIED )
    call SetPlayerAllianceStateBJ( udg_P5_Maiev, udg_P11_NightElfAttack, bj_ALLIANCE_ALLIED_VISION )
    call SetPlayerAllianceStateBJ( udg_P8_BloodElfBase, udg_AP1_Player, bj_ALLIANCE_ALLIED_VISION )
    call SetPlayerAllianceStateBJ( udg_P8_BloodElfBase, udg_P2_Watchers, bj_ALLIANCE_UNALLIED )
    call SetPlayerAllianceStateBJ( udg_P8_BloodElfBase, udg_P3_IllidanCage, bj_ALLIANCE_NEUTRAL )
    call SetPlayerAllianceStateBJ( udg_P8_BloodElfBase, udg_P5_Maiev, bj_ALLIANCE_UNALLIED )
    call SetPlayerAllianceStateBJ( udg_P8_BloodElfBase, udg_P10_BloodElfAttack, bj_ALLIANCE_ALLIED_VISION )
    call SetPlayerAllianceStateBJ( udg_P8_BloodElfBase, udg_P11_NightElfAttack, bj_ALLIANCE_UNALLIED )
    call SetPlayerAllianceStateBJ( udg_P8_BloodElfBase, Player(PLAYER_NEUTRAL_AGGRESSIVE), bj_ALLIANCE_UNALLIED )
    call SetPlayerAllianceStateBJ( udg_P10_BloodElfAttack, udg_AP1_Player, bj_ALLIANCE_ALLIED_VISION )
    call SetPlayerAllianceStateBJ( udg_P10_BloodElfAttack, udg_P2_Watchers, bj_ALLIANCE_UNALLIED )
    call SetPlayerAllianceStateBJ( udg_P10_BloodElfAttack, udg_P3_IllidanCage, bj_ALLIANCE_NEUTRAL )
    call SetPlayerAllianceStateBJ( udg_P10_BloodElfAttack, udg_P5_Maiev, bj_ALLIANCE_UNALLIED )
    call SetPlayerAllianceStateBJ( udg_P10_BloodElfAttack, udg_P8_BloodElfBase, bj_ALLIANCE_ALLIED_VISION )
    call SetPlayerAllianceStateBJ( udg_P10_BloodElfAttack, udg_P11_NightElfAttack, bj_ALLIANCE_UNALLIED )
    call SetPlayerAllianceStateBJ( udg_P10_BloodElfAttack, Player(PLAYER_NEUTRAL_AGGRESSIVE), bj_ALLIANCE_UNALLIED )
    call SetPlayerAllianceStateBJ( udg_P11_NightElfAttack, Player(PLAYER_NEUTRAL_AGGRESSIVE), bj_ALLIANCE_NEUTRAL )
    call SetPlayerAllianceStateBJ( udg_P11_NightElfAttack, udg_AP1_Player, bj_ALLIANCE_UNALLIED )
    call SetPlayerAllianceStateBJ( udg_P11_NightElfAttack, udg_P2_Watchers, bj_ALLIANCE_ALLIED_VISION )
    call SetPlayerAllianceStateBJ( udg_P11_NightElfAttack, udg_P3_IllidanCage, bj_ALLIANCE_NEUTRAL )
    call SetPlayerAllianceStateBJ( udg_P11_NightElfAttack, udg_P5_Maiev, bj_ALLIANCE_ALLIED_VISION )
    call SetPlayerAllianceStateBJ( udg_P11_NightElfAttack, udg_P8_BloodElfBase, bj_ALLIANCE_UNALLIED )
    call SetPlayerAllianceStateBJ( udg_P11_NightElfAttack, udg_P10_BloodElfAttack, bj_ALLIANCE_UNALLIED )
    call SetPlayerAllianceStateBJ( Player(PLAYER_NEUTRAL_AGGRESSIVE), udg_P2_Watchers, bj_ALLIANCE_NEUTRAL )
    call SetPlayerAllianceStateBJ( Player(PLAYER_NEUTRAL_AGGRESSIVE), udg_P5_Maiev, bj_ALLIANCE_NEUTRAL )
    call SetPlayerAllianceStateBJ( Player(PLAYER_NEUTRAL_AGGRESSIVE), udg_P11_NightElfAttack, bj_ALLIANCE_NEUTRAL )
    // Initial Resources
    call SetPlayerStateBJ( udg_AP1_Player, PLAYER_STATE_RESOURCE_GOLD, 750 )
    call SetPlayerStateBJ( udg_AP1_Player, PLAYER_STATE_RESOURCE_LUMBER, 0 )
    call SetPlayerStateBJ( udg_P2_Watchers, PLAYER_STATE_RESOURCE_GOLD, 5000 )
    call SetPlayerStateBJ( udg_P2_Watchers, PLAYER_STATE_RESOURCE_LUMBER, 5000 )
    // Player Colors
    call SetPlayerColorBJ( udg_AP1_Player, PLAYER_COLOR_ORANGE, true )
    call SetPlayerColorBJ( udg_P3_IllidanCage, GetPlayerColor(udg_AP1_Player), true )
    call SetPlayerColorBJ( udg_P5_Maiev, PLAYER_COLOR_CYAN, true )
    call SetPlayerColorBJ( udg_P8_BloodElfBase, PLAYER_COLOR_RED, true )
    call SetPlayerColorBJ( udg_P10_BloodElfAttack, PLAYER_COLOR_RED, true )
    call SetPlayerColorBJ( udg_P11_NightElfAttack, PLAYER_COLOR_BLUE, true )
    // Hide Excess Players
    call SetPlayerOnScoreScreenBJ( false, udg_P2_Watchers )
    call SetPlayerOnScoreScreenBJ( false, udg_P3_IllidanCage )
    call SetPlayerOnScoreScreenBJ( false, udg_P8_BloodElfBase )
    // Initial Visibility
    call SetPlayerAllianceBJ( udg_P2_Watchers, ALLIANCE_SHARED_VISION, true, udg_AP1_Player )
    call SetPlayerAllianceBJ( udg_P5_Maiev, ALLIANCE_SHARED_VISION, true, udg_AP1_Player )
    call SetPlayerAllianceBJ( udg_P11_NightElfAttack, ALLIANCE_SHARED_VISION, true, udg_AP1_Player )
endfunction

//===========================================================================
function InitTrig_Init_01_Players takes nothing returns nothing
    set gg_trg_Init_01_Players = CreateTrigger(  )
    call TriggerAddAction( gg_trg_Init_01_Players, function Trig_Init_01_Players_Actions )
endfunction

//===========================================================================
// Trigger: Init 02 Units
//===========================================================================
function Trig_Init_02_Units_Actions takes nothing returns nothing
    // Heroes
    call ConditionalTriggerExecute( gg_trg_Load_Heroes )
    call SetPlayerHandicapXPBJ( udg_AP1_Player, 30.00 )
    // NPCs
    set udg_Maiev = gg_unit_Ewrd_0039
    set udg_Wagon = gg_unit_eilw_0038
    call SetUnitInvulnerable( udg_Wagon, true )
    call UnitShareVisionBJ( true, udg_Wagon, udg_AP1_Player )
    set udg_CaravanMaiev = udg_Maiev
    set udg_CaravanArcher01 = gg_unit_earc_0086
    set udg_CaravanArcher02 = gg_unit_earc_0087
    set udg_CaravanHunt01 = gg_unit_esen_0103
    set udg_CaravanCage = udg_Wagon
    // Creeps
    // Variables
    set udg_WagonMovementSpeed = 150.00
    // Altar Invulnerability
    call SetUnitInvulnerable( gg_unit_halt_0062, true )
    call SetUnitInvulnerable( gg_unit_nnad_0061, true )
    call SetUnitInvulnerable( gg_unit_eate_0014, true )
endfunction

//===========================================================================
function InitTrig_Init_02_Units takes nothing returns nothing
    set gg_trg_Init_02_Units = CreateTrigger(  )
    call TriggerAddAction( gg_trg_Init_02_Units, function Trig_Init_02_Units_Actions )
endfunction

//===========================================================================
// Trigger: Init 03 Music
//===========================================================================
function Trig_Init_03_Music_Actions takes nothing returns nothing
    call ClearMapMusicBJ(  )
    call TriggerSleepAction( 0.01 )
    call PlayThematicMusicBJ( "Sound\\Music\\mp3Music\\NagaTheme.mp3" )
    call SetMapMusicIndexedBJ( "music", 3 )
endfunction

//===========================================================================
function InitTrig_Init_03_Music takes nothing returns nothing
    set gg_trg_Init_03_Music = CreateTrigger(  )
    call TriggerAddAction( gg_trg_Init_03_Music, function Trig_Init_03_Music_Actions )
endfunction

//===========================================================================
// Trigger: Init 04 Environment
//===========================================================================
function Trig_Init_04_Environment_Actions takes nothing returns nothing
    // Initial Time Of Day
    call SetTimeOfDay( 14.00 )
    // Weather Effects
    // Fog
    // Initial Visibility
    // Bridges, Gates, etc.
endfunction

//===========================================================================
function InitTrig_Init_04_Environment takes nothing returns nothing
    set gg_trg_Init_04_Environment = CreateTrigger(  )
    call TriggerAddAction( gg_trg_Init_04_Environment, function Trig_Init_04_Environment_Actions )
endfunction

//===========================================================================
// Trigger: Init 05 Quests
//===========================================================================
function Trig_Init_05_Quests_Actions takes nothing returns nothing
    // Create Quests
    call ConditionalTriggerExecute( gg_trg_Quest_Secure_Wagon_Create )
    call ConditionalTriggerExecute( gg_trg_Quest_Escort_Wagon_Create )
endfunction

//===========================================================================
function InitTrig_Init_05_Quests takes nothing returns nothing
    set gg_trg_Init_05_Quests = CreateTrigger(  )
    call TriggerAddAction( gg_trg_Init_05_Quests, function Trig_Init_05_Quests_Actions )
endfunction

//===========================================================================
// Trigger: Init 06a Hard
//===========================================================================
function Trig_Init_06a_Hard_Conditions takes nothing returns boolean
    if ( not ( GetGameDifficulty() == MAP_DIFFICULTY_HARD ) ) then
        return false
    endif
    return true
endfunction

function Trig_Init_06a_Hard_Actions takes nothing returns nothing
    // See Init07b Army Generation Variables
    // See Heroes Die - Maiev Dies
    // See Intro Cleanup (Cage Moved closer to Maeiv's base)
    call SetUnitManaPercentBJ( gg_unit_Ewrd_0039, 100 )
    call RemoveItem( UnitItemInSlotBJ(udg_Maiev, 1) )
    call RemoveItem( UnitItemInSlotBJ(udg_Maiev, 2) )
    call UnitAddItemByIdSwapped( 'I000', udg_Maiev )
    call UnitAddItemByIdSwapped( 'I001', udg_Maiev )
endfunction

//===========================================================================
function InitTrig_Init_06a_Hard takes nothing returns nothing
    set gg_trg_Init_06a_Hard = CreateTrigger(  )
    call TriggerAddCondition( gg_trg_Init_06a_Hard, Condition( function Trig_Init_06a_Hard_Conditions ) )
    call TriggerAddAction( gg_trg_Init_06a_Hard, function Trig_Init_06a_Hard_Actions )
endfunction

//===========================================================================
// Trigger: Init 06b Normal
//===========================================================================
function Trig_Init_06b_Normal_Conditions takes nothing returns boolean
    if ( not ( GetGameDifficulty() == MAP_DIFFICULTY_NORMAL ) ) then
        return false
    endif
    return true
endfunction

function Trig_Init_06b_Normal_Actions takes nothing returns nothing
endfunction

//===========================================================================
function InitTrig_Init_06b_Normal takes nothing returns nothing
    set gg_trg_Init_06b_Normal = CreateTrigger(  )
    call TriggerAddCondition( gg_trg_Init_06b_Normal, Condition( function Trig_Init_06b_Normal_Conditions ) )
    call TriggerAddAction( gg_trg_Init_06b_Normal, function Trig_Init_06b_Normal_Actions )
endfunction

//===========================================================================
// Trigger: Init 06c Easy
//===========================================================================
function Trig_Init_06c_Easy_Conditions takes nothing returns boolean
    if ( not ( GetGameDifficulty() == MAP_DIFFICULTY_EASY ) ) then
        return false
    endif
    return true
endfunction

function Trig_Init_06c_Easy_Actions takes nothing returns nothing
    // Handicap All Opponents
    call SetPlayerHandicapBJ( udg_P2_Watchers, bj_HANDICAP_EASY )
    call SetPlayerHandicapBJ( udg_P5_Maiev, bj_HANDICAP_EASY )
    call SetPlayerHandicapBJ( udg_P11_NightElfAttack, bj_HANDICAP_EASY )
    call SetPlayerHandicapBJ( Player(PLAYER_NEUTRAL_AGGRESSIVE), bj_HANDICAP_EASY )
endfunction

//===========================================================================
function InitTrig_Init_06c_Easy takes nothing returns nothing
    set gg_trg_Init_06c_Easy = CreateTrigger(  )
    call TriggerAddCondition( gg_trg_Init_06c_Easy, Condition( function Trig_Init_06c_Easy_Conditions ) )
    call TriggerAddAction( gg_trg_Init_06c_Easy, function Trig_Init_06c_Easy_Actions )
endfunction

//===========================================================================
// Trigger: Init 07a Caravan Variables
//===========================================================================
function Trig_Init_07a_Caravan_Variables_Actions takes nothing returns nothing
    set udg_GuardCallForHelpDist = 1500.00
    set udg_GuardCallForHelpDuration = 2.00
    set udg_GuardCallForHelpFrequency = 1.00
    set udg_GuardLeftBehindRange = 1500.00
    set udg_HeroSaysGoDistance = 512.00
    set udg_SpeedOfGuards = 250.00
    set udg_SpeedOfWagons = 40.00
    set udg_WagonControlRadius = 768.00
endfunction

//===========================================================================
function InitTrig_Init_07a_Caravan_Variables takes nothing returns nothing
    set gg_trg_Init_07a_Caravan_Variables = CreateTrigger(  )
    call TriggerAddAction( gg_trg_Init_07a_Caravan_Variables, function Trig_Init_07a_Caravan_Variables_Actions )
endfunction

//===========================================================================
// Trigger: Init 07b Army Generation Variables
//===========================================================================
function Trig_Init_07b_Army_Generation_Variables_Func016C takes nothing returns boolean
    if ( not ( GetGameDifficulty() == MAP_DIFFICULTY_HARD ) ) then
        return false
    endif
    return true
endfunction

function Trig_Init_07b_Army_Generation_Variables_Actions takes nothing returns nothing
    set udg_BETimerLength = 40.00
    set udg_BETimerLengthLast = 40.00
    set udg_NETimerLength = 50.00
    set udg_NETimerLengthLast = 50.00
    set udg_NETimerMinimum = 15.00
    set udg_NETimerBaseMinimum = 15.00
    set udg_NETimerMaximum = 70.00
    set udg_BETimerMinimum = 10.00
    set udg_BETimerBaseMinimum = 10.00
    set udg_BETimerMaximum = 60.00
    set udg_BEVolatilityLimit = 4.00
    set udg_NEVolatilityLimit = 6.00
    // The respawn times below must give the hero enough time to reach the altar
    set udg_BaseMaievRespawnTime = -15.00
    set udg_PlayerHeroRespawnTime = 10.00
    if ( Trig_Init_07b_Army_Generation_Variables_Func016C() ) then
        set udg_NETimerLength = 40.00
        set udg_NETimerLengthLast = 40.00
        set udg_NETimerMinimum = 12.00
        set udg_NETimerBaseMinimum = 12.00
        set udg_BETimerMinimum = 12.00
        set udg_BETimerBaseMinimum = 12.00
        set udg_NETimerMaximum = 50.00
    else
    endif
endfunction

//===========================================================================
function InitTrig_Init_07b_Army_Generation_Variables takes nothing returns nothing
    set gg_trg_Init_07b_Army_Generation_Variables = CreateTrigger(  )
    call TriggerAddAction( gg_trg_Init_07b_Army_Generation_Variables, function Trig_Init_07b_Army_Generation_Variables_Actions )
endfunction

//===========================================================================
// Trigger: Init 08 Breadcrumbs
//===========================================================================
function Trig_Init_08_Breadcrumbs_Func049Func009001 takes nothing returns boolean
    return ( ( udg_TempMaxAngle - udg_TempMinAngle ) > 180.00 )
endfunction

function Trig_Init_08_Breadcrumbs_Func049Func012001 takes nothing returns boolean
    return ( GetForLoopIndexA() == 1 )
endfunction

function Trig_Init_08_Breadcrumbs_Func049Func013001 takes nothing returns boolean
    return ( GetForLoopIndexA() == udg_BreadcrumbTotal )
endfunction

function Trig_Init_08_Breadcrumbs_Actions takes nothing returns nothing
    // Configure Breadcrumb Ranges
    set udg_BreadcrumbTotal = 41
    set udg_BreadcrumbCurrent = 17
    set udg_BreadcrumbAllowed = 41
    set udg_BreadcrumbReached = 16
    // Configure Breadcrumb Point Array
    set udg_zBreadcrumbArray[1] = GetRectCenter(gg_rct_Breadcrumb_01)
    set udg_zBreadcrumbArray[2] = GetRectCenter(gg_rct_Breadcrumb_02)
    set udg_zBreadcrumbArray[3] = GetRectCenter(gg_rct_Breadcrumb_03)
    set udg_zBreadcrumbArray[4] = GetRectCenter(gg_rct_Breadcrumb_04)
    set udg_zBreadcrumbArray[5] = GetRectCenter(gg_rct_Breadcrumb_05)
    set udg_zBreadcrumbArray[6] = GetRectCenter(gg_rct_Breadcrumb_06)
    set udg_zBreadcrumbArray[7] = GetRectCenter(gg_rct_Breadcrumb_07)
    set udg_zBreadcrumbArray[8] = GetRectCenter(gg_rct_Breadcrumb_08)
    set udg_zBreadcrumbArray[9] = GetRectCenter(gg_rct_Breadcrumb_09)
    set udg_zBreadcrumbArray[10] = GetRectCenter(gg_rct_Breadcrumb_10)
    set udg_zBreadcrumbArray[11] = GetRectCenter(gg_rct_Breadcrumb_11)
    set udg_zBreadcrumbArray[12] = GetRectCenter(gg_rct_Breadcrumb_12)
    set udg_zBreadcrumbArray[13] = GetRectCenter(gg_rct_Breadcrumb_13)
    set udg_zBreadcrumbArray[14] = GetRectCenter(gg_rct_Breadcrumb_14)
    set udg_zBreadcrumbArray[15] = GetRectCenter(gg_rct_Breadcrumb_15)
    set udg_zBreadcrumbArray[16] = GetRectCenter(gg_rct_Breadcrumb_16)
    set udg_zBreadcrumbArray[17] = GetRectCenter(gg_rct_Breadcrumb_17)
    set udg_zBreadcrumbArray[18] = GetRectCenter(gg_rct_Breadcrumb_18)
    set udg_zBreadcrumbArray[19] = GetRectCenter(gg_rct_Breadcrumb_19)
    set udg_zBreadcrumbArray[20] = GetRectCenter(gg_rct_Breadcrumb_20)
    set udg_zBreadcrumbArray[21] = GetRectCenter(gg_rct_Breadcrumb_21)
    set udg_zBreadcrumbArray[22] = GetRectCenter(gg_rct_Breadcrumb_22)
    set udg_zBreadcrumbArray[23] = GetRectCenter(gg_rct_Breadcrumb_23)
    set udg_zBreadcrumbArray[24] = GetRectCenter(gg_rct_Breadcrumb_24)
    set udg_zBreadcrumbArray[25] = GetRectCenter(gg_rct_Breadcrumb_25)
    set udg_zBreadcrumbArray[26] = GetRectCenter(gg_rct_Breadcrumb_26)
    set udg_zBreadcrumbArray[27] = GetRectCenter(gg_rct_Breadcrumb_27)
    set udg_zBreadcrumbArray[28] = GetRectCenter(gg_rct_Breadcrumb_28)
    set udg_zBreadcrumbArray[29] = GetRectCenter(gg_rct_Breadcrumb_29)
    set udg_zBreadcrumbArray[30] = GetRectCenter(gg_rct_Breadcrumb_30)
    set udg_zBreadcrumbArray[31] = GetRectCenter(gg_rct_Breadcrumb_31)
    set udg_zBreadcrumbArray[32] = GetRectCenter(gg_rct_Breadcrumb_32)
    set udg_zBreadcrumbArray[33] = GetRectCenter(gg_rct_Breadcrumb_33)
    set udg_zBreadcrumbArray[34] = GetRectCenter(gg_rct_Breadcrumb_34)
    set udg_zBreadcrumbArray[35] = GetRectCenter(gg_rct_Breadcrumb_35)
    set udg_zBreadcrumbArray[36] = GetRectCenter(gg_rct_Breadcrumb_36)
    set udg_zBreadcrumbArray[37] = GetRectCenter(gg_rct_Breadcrumb_37)
    set udg_zBreadcrumbArray[38] = GetRectCenter(gg_rct_Breadcrumb_38)
    set udg_zBreadcrumbArray[39] = GetRectCenter(gg_rct_Breadcrumb_39)
    set udg_zBreadcrumbArray[40] = GetRectCenter(gg_rct_Breadcrumb_40)
    set udg_zBreadcrumbArray[41] = GetRectCenter(gg_rct_Breadcrumb_41)
    // Configure Breadcrumb Angle Array
    set bj_forLoopAIndex = 1
    set bj_forLoopAIndexEnd = udg_BreadcrumbTotal
    loop
        exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
        // Make sure we're not trying to query indices that don't exist
        set udg_TempLastIndex = IMaxBJ(( GetForLoopIndexA() - 1 ), 1)
        set udg_TempNextIndex = IMinBJ(( GetForLoopIndexA() + 1 ), udg_BreadcrumbTotal)
        set udg_TempLastAngle = AngleBetweenPoints(udg_zBreadcrumbArray[udg_TempLastIndex], udg_zBreadcrumbArray[GetForLoopIndexA()])
        set udg_TempNextAngle = AngleBetweenPoints(udg_zBreadcrumbArray[GetForLoopIndexA()], udg_zBreadcrumbArray[udg_TempNextIndex])
        // If the angle is over 180 degrees, add a full rotation to the min angle so that we're always taking an average on the right side of the circle
        set udg_TempMinAngle = RMinBJ(udg_TempLastAngle, udg_TempNextAngle)
        set udg_TempMaxAngle = RMaxBJ(udg_TempLastAngle, udg_TempNextAngle)
        if ( Trig_Init_08_Breadcrumbs_Func049Func009001() ) then
            set udg_TempMinAngle = ( udg_TempMinAngle + 360.00 )
        else
            call DoNothing(  )
        endif
        set udg_TempAngle = ( ( udg_TempMinAngle + udg_TempMaxAngle ) / 2.00 )
        // Special-case the first and last breadcrumbs, as they don't have two neighbors to average
        if ( Trig_Init_08_Breadcrumbs_Func049Func012001() ) then
            set udg_TempAngle = udg_TempNextAngle
        else
            call DoNothing(  )
        endif
        if ( Trig_Init_08_Breadcrumbs_Func049Func013001() ) then
            set udg_TempAngle = udg_TempLastAngle
        else
            call DoNothing(  )
        endif
        set udg_BreadcrumbAngleArray[GetForLoopIndexA()] = udg_TempAngle
        set bj_forLoopAIndex = bj_forLoopAIndex + 1
    endloop
endfunction

//===========================================================================
function InitTrig_Init_08_Breadcrumbs takes nothing returns nothing
    set gg_trg_Init_08_Breadcrumbs = CreateTrigger(  )
    call TriggerAddAction( gg_trg_Init_08_Breadcrumbs, function Trig_Init_08_Breadcrumbs_Actions )
endfunction

//===========================================================================
// Trigger: Init 09a Formations
//===========================================================================
function Trig_Init_09a_Formations_Actions takes nothing returns nothing
    // Configure Region Array
    set udg_FormationRegionArray[1] = gg_rct_Formation01
    set udg_FormationRegionArray[2] = gg_rct_Formation02
    set udg_FormationRegionArray[3] = gg_rct_Formation03
    set udg_FormationRegionArray[4] = gg_rct_Formation04
    set udg_FormationRegionArray[5] = gg_rct_Formation05
    // Configure Unit Ranges
    set udg_FormationTotal = 5
    set udg_CaravanWagonFirst = 1
    set udg_CaravanWagonLast = 1
    set udg_CaravanGuardFirst = 2
    set udg_CaravanGuardLast = 5
    // Read formation data from initial region placement
    set bj_forLoopAIndex = 1
    set bj_forLoopAIndexEnd = udg_FormationTotal
    loop
        exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
        set udg_FormationDistanceArray[GetForLoopIndexA()] = DistanceBetweenPoints(GetRectCenter(gg_rct_Formation_Center), GetRectCenter(udg_FormationRegionArray[GetForLoopIndexA()]))
        set udg_FormationAngleArray[GetForLoopIndexA()] = AngleBetweenPoints(GetRectCenter(gg_rct_Formation_Center), GetRectCenter(udg_FormationRegionArray[GetForLoopIndexA()]))
        set bj_forLoopAIndex = bj_forLoopAIndex + 1
    endloop
endfunction

//===========================================================================
function InitTrig_Init_09a_Formations takes nothing returns nothing
    set gg_trg_Init_09a_Formations = CreateTrigger(  )
    call TriggerAddAction( gg_trg_Init_09a_Formations, function Trig_Init_09a_Formations_Actions )
endfunction

//===========================================================================
// Trigger: Init 09b Caravan
//===========================================================================
function Trig_Init_09b_Caravan_Actions takes nothing returns nothing
    call ConditionalTriggerExecute( gg_trg_Init_09c_Caravan_Units )
    // Reorient the formation
    set udg_zReorientTarget = udg_zBreadcrumbArray[udg_BreadcrumbCurrent]
    set udg_ReorientAngle = udg_BreadcrumbAngleArray[udg_BreadcrumbCurrent]
    call ConditionalTriggerExecute( gg_trg_Reorient_Formation )
    // Configure each caravan unit
    set bj_forLoopAIndex = udg_CaravanWagonFirst
    set bj_forLoopAIndexEnd = udg_CaravanWagonLast
    loop
        exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
        call SetUnitMoveSpeed( udg_CaravanUnitArray[GetForLoopIndexA()], udg_SpeedOfWagons )
        call GroupAddUnitSimple( udg_CaravanUnitArray[GetForLoopIndexA()], udg_CaravanWagonsGroup )
        set bj_forLoopAIndex = bj_forLoopAIndex + 1
    endloop
    set bj_forLoopAIndex = udg_CaravanGuardFirst
    set bj_forLoopAIndexEnd = udg_CaravanGuardLast
    loop
        exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
        call SetUnitMoveSpeed( udg_CaravanUnitArray[GetForLoopIndexA()], udg_SpeedOfGuards )
        call SetUnitTimeScalePercent( udg_CaravanUnitArray[GetForLoopIndexA()], 60.00 )
        call GroupAddUnitSimple( udg_CaravanUnitArray[GetForLoopIndexA()], udg_CaravanGuardsGroup )
        set bj_forLoopAIndex = bj_forLoopAIndex + 1
    endloop
endfunction

//===========================================================================
function InitTrig_Init_09b_Caravan takes nothing returns nothing
    set gg_trg_Init_09b_Caravan = CreateTrigger(  )
    call TriggerAddAction( gg_trg_Init_09b_Caravan, function Trig_Init_09b_Caravan_Actions )
endfunction

//===========================================================================
// Trigger: Init 09c Caravan Units
//===========================================================================
function Trig_Init_09c_Caravan_Units_Actions takes nothing returns nothing
    // Configure the Caravan Units Array
    set udg_CaravanUnitArray[1] = udg_CaravanCage
    set udg_CaravanUnitArray[2] = udg_CaravanArcher01
    set udg_CaravanUnitArray[3] = udg_CaravanArcher02
    set udg_CaravanUnitArray[4] = udg_CaravanMaiev
    set udg_CaravanUnitArray[5] = udg_CaravanHunt01
    call RemoveGuardPosition( udg_CaravanCage )
    call RemoveGuardPosition( udg_CaravanArcher01 )
    call RemoveGuardPosition( udg_CaravanArcher02 )
    call RemoveGuardPosition( udg_CaravanMaiev )
    call RemoveGuardPosition( udg_CaravanHunt01 )
endfunction

//===========================================================================
function InitTrig_Init_09c_Caravan_Units takes nothing returns nothing
    set gg_trg_Init_09c_Caravan_Units = CreateTrigger(  )
    call TriggerAddAction( gg_trg_Init_09c_Caravan_Units, function Trig_Init_09c_Caravan_Units_Actions )
endfunction

//===========================================================================
// Trigger: Load Heroes
//===========================================================================
function Trig_Load_Heroes_Func011Func001C takes nothing returns boolean
    if ( ( udg_HighScoreHard == 31 ) ) then
        return true
    endif
    if ( ( udg_HighScoreNormal == 31 ) ) then
        return true
    endif
    return false
endfunction

function Trig_Load_Heroes_Func011C takes nothing returns boolean
    if ( not Trig_Load_Heroes_Func011Func001C() ) then
        return false
    endif
    return true
endfunction

function Trig_Load_Heroes_Actions takes nothing returns nothing
    // Create The Game Cache
    call InitGameCacheBJ( "Campaigns.w3v" )
    // Load Each Hero
    call ConditionalTriggerExecute( gg_trg_Load_Kael )
    call ConditionalTriggerExecute( gg_trg_Load_Vashj )
    // Load Scores from Secret Mission
    set udg_HighScoreEasy = GetStoredIntegerBJ("FinalWaveEasy", "HumanX03s", GetLastCreatedGameCacheBJ())
    set udg_HighScoreNormal = GetStoredIntegerBJ("FinalWaveNormal", "HumanX03s", GetLastCreatedGameCacheBJ())
    set udg_HighScoreHard = GetStoredIntegerBJ("FinalWaveHard", "HumanX03s", GetLastCreatedGameCacheBJ())
    // Load Brewmaster if FinalWaveHard=31
    if ( Trig_Load_Heroes_Func011C() ) then
        call ConditionalTriggerExecute( gg_trg_Load_Brewmaster )
    else
    endif
endfunction

//===========================================================================
function InitTrig_Load_Heroes takes nothing returns nothing
    set gg_trg_Load_Heroes = CreateTrigger(  )
    call TriggerAddAction( gg_trg_Load_Heroes, function Trig_Load_Heroes_Actions )
endfunction

//===========================================================================
// Trigger: Load Vashj
//===========================================================================
function Trig_Load_Vashj_Func004001 takes nothing returns boolean
    return ( udg_Vashj != null )
endfunction

function Trig_Load_Vashj_Func007001 takes nothing returns boolean
    return ( udg_Vashj != null )
endfunction

function Trig_Load_Vashj_Actions takes nothing returns nothing
    // Load Hero From Cache
    call RestoreUnitLocFacingAngleBJ( "Vashj", "HumanX04S", GetLastCreatedGameCacheBJ(), udg_AP1_Player, GetRectCenter(gg_rct_NewIntroVashjStart), 60.00 )
    set udg_Vashj = GetLastRestoredUnitBJ()
    if ( Trig_Load_Vashj_Func004001() ) then
        return
    else
        call DoNothing(  )
    endif
    call RestoreUnitLocFacingAngleBJ( "Vashj", "HumanX04", GetLastCreatedGameCacheBJ(), udg_AP1_Player, GetRectCenter(gg_rct_NewIntroVashjStart), 60.00 )
    set udg_Vashj = GetLastRestoredUnitBJ()
    if ( Trig_Load_Vashj_Func007001() ) then
        return
    else
        call DoNothing(  )
    endif
    // Create Default Hero
    call CreateNUnitsAtLoc( 1, 'Hvsh', udg_AP1_Player, GetRectCenter(gg_rct_NewIntroVashjStart), 60.00 )
    call SetHeroLevelBJ( GetLastCreatedUnit(), 5, false )
    call SelectHeroSkill( GetLastCreatedUnit(), 'ANfl' )
    call SelectHeroSkill( GetLastCreatedUnit(), 'ANfl' )
    call SelectHeroSkill( GetLastCreatedUnit(), 'ANfa' )
    call SelectHeroSkill( GetLastCreatedUnit(), 'ANfa' )
    call SelectHeroSkill( GetLastCreatedUnit(), 'ANms' )
    set udg_Vashj = GetLastCreatedUnit()
endfunction

//===========================================================================
function InitTrig_Load_Vashj takes nothing returns nothing
    set gg_trg_Load_Vashj = CreateTrigger(  )
    call TriggerAddAction( gg_trg_Load_Vashj, function Trig_Load_Vashj_Actions )
endfunction

//===========================================================================
// Trigger: Load Kael
//===========================================================================
function Trig_Load_Kael_Func004C takes nothing returns boolean
    if ( not ( GetLastRestoredUnitBJ() != null ) ) then
        return false
    endif
    return true
endfunction

function Trig_Load_Kael_Func005001 takes nothing returns boolean
    return ( udg_Kael != null )
endfunction

function Trig_Load_Kael_Func008C takes nothing returns boolean
    if ( not ( GetLastRestoredUnitBJ() != null ) ) then
        return false
    endif
    return true
endfunction

function Trig_Load_Kael_Func009001 takes nothing returns boolean
    return ( udg_Kael != null )
endfunction

function Trig_Load_Kael_Actions takes nothing returns nothing
    // Load Hero From Cache
    call RestoreUnitLocFacingAngleBJ( "Kael", "HumanX04S", GetLastCreatedGameCacheBJ(), udg_AP1_Player, GetRectCenter(gg_rct_NewIntroKaelStart), 60.00 )
    set udg_Kael = GetLastRestoredUnitBJ()
    if ( Trig_Load_Kael_Func004C() ) then
        call SetHeroLevelBJ( udg_Kael, 5, false )
        call AddHeroXPSwapped( 400, udg_Kael, false )
    else
    endif
    if ( Trig_Load_Kael_Func005001() ) then
        return
    else
        call DoNothing(  )
    endif
    call RestoreUnitLocFacingAngleBJ( "Kael", "HumanX04", GetLastCreatedGameCacheBJ(), udg_AP1_Player, GetRectCenter(gg_rct_NewIntroKaelStart), 60.00 )
    set udg_Kael = GetLastRestoredUnitBJ()
    if ( Trig_Load_Kael_Func008C() ) then
        call SetHeroLevelBJ( udg_Kael, 5, false )
        call AddHeroXPSwapped( 400, udg_Kael, false )
    else
    endif
    if ( Trig_Load_Kael_Func009001() ) then
        return
    else
        call DoNothing(  )
    endif
    // Create Default Hero
    call CreateNUnitsAtLoc( 1, 'Hkal', udg_AP1_Player, GetRectCenter(gg_rct_NewIntroKaelStart), 60.00 )
    set udg_Kael = GetLastCreatedUnit()
    call SetHeroLevelBJ( udg_Kael, 5, false )
    call AddHeroXPSwapped( 400, udg_Kael, false )
    call SelectHeroSkill( udg_Kael, 'AHfs' )
    call SelectHeroSkill( udg_Kael, 'AHfs' )
    call SelectHeroSkill( udg_Kael, 'AHbn' )
    call SelectHeroSkill( udg_Kael, 'AHdr' )
    call SelectHeroSkill( udg_Kael, 'AHdr' )
endfunction

//===========================================================================
function InitTrig_Load_Kael takes nothing returns nothing
    set gg_trg_Load_Kael = CreateTrigger(  )
    call TriggerAddAction( gg_trg_Load_Kael, function Trig_Load_Kael_Actions )
endfunction

//===========================================================================
// Trigger: Load Brewmaster
//===========================================================================
function Trig_Load_Brewmaster_Actions takes nothing returns nothing
    // Create Default Hero
    call CreateNUnitsAtLoc( 1, 'Npbm', udg_AP1_Player, GetRectCenter(gg_rct_GameplayBrewmasterStart), 315.00 )
    set udg_Brewmaster = GetLastCreatedUnit()
    call SetHeroLevelBJ( udg_Brewmaster, 5, false )
    call SelectHeroSkill( udg_Brewmaster, 'ANbf' )
    call SelectHeroSkill( udg_Brewmaster, 'ANbf' )
    call SelectHeroSkill( udg_Brewmaster, 'ANdh' )
    call SelectHeroSkill( udg_Brewmaster, 'ANdh' )
    call SelectHeroSkill( udg_Brewmaster, 'ANdb' )
endfunction

//===========================================================================
function InitTrig_Load_Brewmaster takes nothing returns nothing
    set gg_trg_Load_Brewmaster = CreateTrigger(  )
    call TriggerAddAction( gg_trg_Load_Brewmaster, function Trig_Load_Brewmaster_Actions )
endfunction

//===========================================================================
// Trigger: Experience Cap Vashj
//===========================================================================
function Trig_Experience_Cap_Vashj_Conditions takes nothing returns boolean
    if ( not ( GetLevelingUnit() == udg_Vashj ) ) then
        return false
    endif
    if ( not ( GetHeroLevel(GetLevelingUnit()) >= 7 ) ) then
        return false
    endif
    return true
endfunction

function Trig_Experience_Cap_Vashj_Actions takes nothing returns nothing
    call SuspendHeroXPBJ( false, udg_Vashj )
    set udg_ExpDisabledForVashj = true
endfunction

//===========================================================================
function InitTrig_Experience_Cap_Vashj takes nothing returns nothing
    set gg_trg_Experience_Cap_Vashj = CreateTrigger(  )
    call TriggerRegisterPlayerUnitEventSimple( gg_trg_Experience_Cap_Vashj, Player(0), EVENT_PLAYER_HERO_LEVEL )
    call TriggerAddCondition( gg_trg_Experience_Cap_Vashj, Condition( function Trig_Experience_Cap_Vashj_Conditions ) )
    call TriggerAddAction( gg_trg_Experience_Cap_Vashj, function Trig_Experience_Cap_Vashj_Actions )
endfunction

//===========================================================================
// Trigger: Experience Cap Kael
//===========================================================================
function Trig_Experience_Cap_Kael_Conditions takes nothing returns boolean
    if ( not ( GetLevelingUnit() == udg_Kael ) ) then
        return false
    endif
    if ( not ( GetHeroLevel(GetLevelingUnit()) >= 7 ) ) then
        return false
    endif
    return true
endfunction

function Trig_Experience_Cap_Kael_Actions takes nothing returns nothing
    call SuspendHeroXPBJ( false, udg_Kael )
    set udg_ExpDisabledForKael = true
endfunction

//===========================================================================
function InitTrig_Experience_Cap_Kael takes nothing returns nothing
    set gg_trg_Experience_Cap_Kael = CreateTrigger(  )
    call TriggerRegisterPlayerUnitEventSimple( gg_trg_Experience_Cap_Kael, Player(0), EVENT_PLAYER_HERO_LEVEL )
    call TriggerAddCondition( gg_trg_Experience_Cap_Kael, Condition( function Trig_Experience_Cap_Kael_Conditions ) )
    call TriggerAddAction( gg_trg_Experience_Cap_Kael, function Trig_Experience_Cap_Kael_Actions )
endfunction

//===========================================================================
// Trigger: Experience Cap Brewmaster
//===========================================================================
function Trig_Experience_Cap_Brewmaster_Conditions takes nothing returns boolean
    if ( not ( GetLevelingUnit() == udg_Brewmaster ) ) then
        return false
    endif
    if ( not ( GetHeroLevel(GetLevelingUnit()) >= 7 ) ) then
        return false
    endif
    return true
endfunction

function Trig_Experience_Cap_Brewmaster_Actions takes nothing returns nothing
    call SuspendHeroXPBJ( false, udg_Brewmaster )
    set udg_ExpDisabledForBrewmaster = true
endfunction

//===========================================================================
function InitTrig_Experience_Cap_Brewmaster takes nothing returns nothing
    set gg_trg_Experience_Cap_Brewmaster = CreateTrigger(  )
    call TriggerRegisterPlayerUnitEventSimple( gg_trg_Experience_Cap_Brewmaster, Player(0), EVENT_PLAYER_HERO_LEVEL )
    call TriggerAddCondition( gg_trg_Experience_Cap_Brewmaster, Condition( function Trig_Experience_Cap_Brewmaster_Conditions ) )
    call TriggerAddAction( gg_trg_Experience_Cap_Brewmaster, function Trig_Experience_Cap_Brewmaster_Actions )
endfunction

//===========================================================================
// Trigger: Cinematic Revival
//
// Before running this in a cinematic, do the following:
//   - Set "RevivalHero" to the hero you wish to revive.
//   - Set "RevivalSpot" to the place at which you wish the hero to be revived.
// After running this, set the unit facing for the revived hero.
// After the cinematic, move the hero instantly to RevivalReturnSpot.
//===========================================================================
function Trig_Cinematic_Revival_Func003001 takes nothing returns boolean
    return ( IsUnitAliveBJ(udg_RevivalHero) == true )
endfunction

function Trig_Cinematic_Revival_Func006002001002001 takes nothing returns boolean
    return ( IsUnitAliveBJ(GetFilterUnit()) == true )
endfunction

function Trig_Cinematic_Revival_Func006002001002002001001 takes nothing returns boolean
    return ( GetUnitTypeId(GetFilterUnit()) == 'halt' )
endfunction

function Trig_Cinematic_Revival_Func006002001002002001002 takes nothing returns boolean
    return ( GetUnitTypeId(GetFilterUnit()) == 'oalt' )
endfunction

function Trig_Cinematic_Revival_Func006002001002002001 takes nothing returns boolean
    return GetBooleanOr( Trig_Cinematic_Revival_Func006002001002002001001(), Trig_Cinematic_Revival_Func006002001002002001002() )
endfunction

function Trig_Cinematic_Revival_Func006002001002002002001 takes nothing returns boolean
    return ( GetUnitTypeId(GetFilterUnit()) == 'uaod' )
endfunction

function Trig_Cinematic_Revival_Func006002001002002002002 takes nothing returns boolean
    return ( GetUnitTypeId(GetFilterUnit()) == 'eate' )
endfunction

function Trig_Cinematic_Revival_Func006002001002002002 takes nothing returns boolean
    return GetBooleanOr( Trig_Cinematic_Revival_Func006002001002002002001(), Trig_Cinematic_Revival_Func006002001002002002002() )
endfunction

function Trig_Cinematic_Revival_Func006002001002002 takes nothing returns boolean
    return GetBooleanOr( Trig_Cinematic_Revival_Func006002001002002001(), Trig_Cinematic_Revival_Func006002001002002002() )
endfunction

function Trig_Cinematic_Revival_Func006002001002 takes nothing returns boolean
    return GetBooleanAnd( Trig_Cinematic_Revival_Func006002001002001(), Trig_Cinematic_Revival_Func006002001002002() )
endfunction

function Trig_Cinematic_Revival_Func007001 takes nothing returns boolean
    return ( udg_RevivalAltar != null )
endfunction

function Trig_Cinematic_Revival_Actions takes nothing returns nothing
    set udg_RevivalReturnSpot = GetUnitLoc(udg_RevivalHero)
    call SetUnitPositionLoc( udg_RevivalHero, udg_RevivalSpot )
    if ( Trig_Cinematic_Revival_Func003001() ) then
        return
    else
        call DoNothing(  )
    endif
    call ReviveHeroLoc( udg_RevivalHero, udg_RevivalSpot, false )
    set udg_RevivalReturnSpot = udg_RevivalSpot
    set udg_RevivalAltar = GroupPickRandomUnit(GetUnitsOfPlayerMatching(GetOwningPlayer(udg_RevivalHero), Condition(function Trig_Cinematic_Revival_Func006002001002)))
    if ( Trig_Cinematic_Revival_Func007001() ) then
        set udg_RevivalReturnSpot = OffsetLocation(GetUnitLoc(udg_RevivalAltar), 0, -128.00)
    else
        call DoNothing(  )
    endif
endfunction

//===========================================================================
function InitTrig_Cinematic_Revival takes nothing returns nothing
    set gg_trg_Cinematic_Revival = CreateTrigger(  )
    call TriggerAddAction( gg_trg_Cinematic_Revival, function Trig_Cinematic_Revival_Actions )
endfunction

//===========================================================================
// Trigger: Intro Cinematic Q
//===========================================================================
function Trig_Intro_Cinematic_Q_Func052001 takes nothing returns boolean
    return ( udg_IntroSkipped == true )
endfunction

function Trig_Intro_Cinematic_Q_Func055001 takes nothing returns boolean
    return ( udg_IntroSkipped == true )
endfunction

function Trig_Intro_Cinematic_Q_Func058001 takes nothing returns boolean
    return ( udg_IntroSkipped == true )
endfunction

function Trig_Intro_Cinematic_Q_Func061001 takes nothing returns boolean
    return ( udg_IntroSkipped == true )
endfunction

function Trig_Intro_Cinematic_Q_Func064001 takes nothing returns boolean
    return ( udg_IntroSkipped == true )
endfunction

function Trig_Intro_Cinematic_Q_Func067001 takes nothing returns boolean
    return ( udg_IntroSkipped == true )
endfunction

function Trig_Intro_Cinematic_Q_Func074001 takes nothing returns boolean
    return ( udg_IntroSkipped == true )
endfunction

function Trig_Intro_Cinematic_Q_Func078001 takes nothing returns boolean
    return ( udg_IntroSkipped == true )
endfunction

function Trig_Intro_Cinematic_Q_Func081001 takes nothing returns boolean
    return ( udg_IntroSkipped == true )
endfunction

function Trig_Intro_Cinematic_Q_Func085001 takes nothing returns boolean
    return ( udg_IntroSkipped == true )
endfunction

function Trig_Intro_Cinematic_Q_Func093001 takes nothing returns boolean
    return ( udg_IntroSkipped == true )
endfunction

function Trig_Intro_Cinematic_Q_Func097001 takes nothing returns boolean
    return ( udg_IntroSkipped == true )
endfunction

function Trig_Intro_Cinematic_Q_Func100001 takes nothing returns boolean
    return ( udg_IntroSkipped == true )
endfunction

function Trig_Intro_Cinematic_Q_Func103001 takes nothing returns boolean
    return ( udg_IntroSkipped == true )
endfunction

function Trig_Intro_Cinematic_Q_Func106001 takes nothing returns boolean
    return ( udg_IntroSkipped == true )
endfunction

function Trig_Intro_Cinematic_Q_Func109001 takes nothing returns boolean
    return ( udg_IntroSkipped == true )
endfunction

function Trig_Intro_Cinematic_Q_Func112001 takes nothing returns boolean
    return ( udg_IntroSkipped == true )
endfunction

function Trig_Intro_Cinematic_Q_Func115001 takes nothing returns boolean
    return ( udg_IntroSkipped == true )
endfunction

function Trig_Intro_Cinematic_Q_Func118001 takes nothing returns boolean
    return ( udg_IntroSkipped == true )
endfunction

function Trig_Intro_Cinematic_Q_Func121001 takes nothing returns boolean
    return ( udg_IntroSkipped == true )
endfunction

function Trig_Intro_Cinematic_Q_Actions takes nothing returns nothing
    call Preloader( "Scripts\\HumanX04.pld" )
    set udg_InCinematic = true
    // Fade Out
    call CinematicFadeBJ( bj_CINEFADETYPE_FADEOUT, 0.00, "ReplaceableTextures\\CameraMasks\\White_mask.tga", 0, 0, 0, 0 )
    // Set Up Scene
    call CinematicModeBJ( true, GetPlayersAll() )
    call ConditionalTriggerExecute( gg_trg_Intro_Setup )
    call CreateNUnitsAtLoc( 1, 'hspt', Player(0), GetRectCenter(gg_rct_IntroSPBreakerStart), 60.00 )
    set udg_IntroSpellBreaker = GetLastCreatedUnit()
    call SetUnitColor( GetLastCreatedUnit(), PLAYER_COLOR_RED )
    call CreateNUnitsAtLoc( 1, 'nhea', Player(0), GetRectCenter(gg_rct_IntroArcherStart), 60.00 )
    set udg_IntroArcher = GetLastCreatedUnit()
    call SetUnitColor( GetLastCreatedUnit(), PLAYER_COLOR_RED )
    call CreateNUnitsAtLoc( 1, 'nmyr', Player(0), GetRectCenter(gg_rct_IntroMyrmidonStart), 60.00 )
    set udg_IntroMyrmidon = GetLastCreatedUnit()
    call SetUnitColor( GetLastCreatedUnit(), PLAYER_COLOR_RED )
    call CreateNUnitsAtLoc( 1, 'nnsw', Player(0), GetRectCenter(gg_rct_IntroSirenStart), 60.00 )
    set udg_IntroSiren = GetLastCreatedUnit()
    call SetUnitColor( GetLastCreatedUnit(), PLAYER_COLOR_RED )
    call CreateNUnitsAtLoc( 1, 'nhew', Player(0), GetRectCenter(gg_rct_IntroWorkerStart), 60.00 )
    set udg_IntroWorker = GetLastCreatedUnit()
    call SetUnitColor( GetLastCreatedUnit(), PLAYER_COLOR_RED )
    call CreateNUnitsAtLoc( 1, 'nhew', Player(0), GetRectCenter(gg_rct_IntroWorkerBStart), 60.00 )
    set udg_IntroWorkerB = GetLastCreatedUnit()
    call SetUnitColor( GetLastCreatedUnit(), PLAYER_COLOR_RED )
    call CreateNUnitsAtLoc( 1, 'nhew', Player(0), GetRectCenter(gg_rct_IntroWorkerCStart), 60.00 )
    set udg_IntroWorkerC = GetLastCreatedUnit()
    call SetUnitColor( GetLastCreatedUnit(), PLAYER_COLOR_RED )
    call CreateNUnitsAtLoc( 1, 'nhew', Player(0), GetRectCenter(gg_rct_IntroWorkerDStart), 60.00 )
    set udg_IntroWorkerD = GetLastCreatedUnit()
    call SetUnitColor( GetLastCreatedUnit(), PLAYER_COLOR_RED )
    call IssuePointOrderLocBJ( udg_IntroSpellBreaker, "move", GetRectCenter(gg_rct_NewIntroKaelStart) )
    call IssuePointOrderLocBJ( udg_IntroArcher, "move", GetRectCenter(gg_rct_NewIntroVashjStart) )
    call IssuePointOrderLocBJ( udg_IntroMyrmidon, "move", GetRectCenter(gg_rct_IntroSPBreakerStart) )
    call IssuePointOrderLocBJ( udg_IntroSiren, "move", GetRectCenter(gg_rct_IntroArcherStart) )
    call IssuePointOrderLocBJ( udg_IntroWorker, "move", GetRectCenter(gg_rct_IntroMyrmidonStart) )
    call IssuePointOrderLocBJ( udg_IntroWorkerB, "move", GetRectCenter(gg_rct_IntroSirenStart) )
    call IssuePointOrderLocBJ( udg_IntroWorkerC, "move", GetRectCenter(gg_rct_IntroWorkerStart) )
    call IssuePointOrderLocBJ( udg_IntroWorkerD, "move", GetRectCenter(gg_rct_IntroWorkerBStart) )
    call CameraSetupApplyForPlayer( true, gg_cam_NewIntroStart, udg_AP1_Player, 0 )
    call CameraSetupApplyForPlayer( true, gg_cam_IntroThisPlace, udg_AP1_Player, 8.30 )
    call IssuePointOrderLocBJ( udg_Kael, "move", GetRectCenter(gg_rct_NewIntroKaelDest) )
    call IssuePointOrderLocBJ( udg_Vashj, "move", GetRectCenter(gg_rct_NewIntroVashjDest) )
    // Fade In
    call CinematicFadeBJ( bj_CINEFADETYPE_FADEIN, 2.00, "ReplaceableTextures\\CameraMasks\\White_mask.tga", 0, 0, 0, 0 )
    call TriggerSleepAction( 2.00 )
    call EnableTrigger( gg_trg_Intro_Skipped )
    // xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
    // CINEMATIC BEGINS - Cinematic Can Now Be Skipped
    // xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
    call TriggerSleepAction( 2.00 )
    if ( Trig_Intro_Cinematic_Q_Func052001() ) then
        return
    else
        call DoNothing(  )
    endif
    call TransmissionFromUnitWithNameBJ( GetPlayersAll(), udg_Kael, "TRIGSTR_271", gg_snd_A05Kael0101, "TRIGSTR_272", bj_TIMETYPE_ADD, 0, false )
    call WaitForSoundBJ( gg_snd_A05Kael0101, 0 )
    if ( Trig_Intro_Cinematic_Q_Func055001() ) then
        return
    else
        call DoNothing(  )
    endif
    call TransmissionFromUnitWithNameBJ( GetPlayersAll(), udg_Vashj, "TRIGSTR_269", gg_snd_A05LadyVashj0201, "TRIGSTR_270", bj_TIMETYPE_ADD, 0, false )
    call WaitForSoundBJ( gg_snd_A05LadyVashj0201, 0 )
    if ( Trig_Intro_Cinematic_Q_Func058001() ) then
        return
    else
        call DoNothing(  )
    endif
    call IssuePointOrderLocBJ( udg_Vashj, "move", GetRectCenter(gg_rct_NewIntroVashjDestA) )
    call TriggerSleepAction( 1.00 )
    if ( Trig_Intro_Cinematic_Q_Func061001() ) then
        return
    else
        call DoNothing(  )
    endif
    call IssuePointOrderLocBJ( udg_Kael, "move", GetRectCenter(gg_rct_NewIntroVashjDestA) )
    call TriggerSleepAction( 1.00 )
    if ( Trig_Intro_Cinematic_Q_Func064001() ) then
        return
    else
        call DoNothing(  )
    endif
    call CinematicFadeBJ( bj_CINEFADETYPE_FADEOUT, 1.00, "ReplaceableTextures\\CameraMasks\\White_mask.tga", 0, 0, 0, 0 )
    call TriggerSleepAction( 1.00 )
    if ( Trig_Intro_Cinematic_Q_Func067001() ) then
        return
    else
        call DoNothing(  )
    endif
    call CameraSetupApplyForPlayer( true, gg_cam_Intro_01, udg_AP1_Player, 0 )
    call CameraSetupApplyForPlayer( true, gg_cam_Intro_01B, udg_AP1_Player, ( ( GetSoundDurationBJ(gg_snd_A05LadyVashj15) + GetSoundDurationBJ(gg_snd_A05Kael16) ) + 2.50 ) )
    call SetUnitPositionLocFacingBJ( udg_Kael, GetRectCenter(gg_rct_Intro_Kael_Start), 60.00 )
    call SetUnitPositionLocFacingBJ( udg_Vashj, GetRectCenter(gg_rct_Intro_Vashj_Start), 60.00 )
    call CinematicFadeBJ( bj_CINEFADETYPE_FADEIN, 1.00, "ReplaceableTextures\\CameraMasks\\White_mask.tga", 0, 0, 0, 0 )
    call TriggerSleepAction( 1.00 )
    if ( Trig_Intro_Cinematic_Q_Func074001() ) then
        return
    else
        call DoNothing(  )
    endif
    call SetUnitFacingToFaceUnitTimed( udg_Vashj, udg_Kael, 0.30 )
    call TransmissionFromUnitWithNameBJ( GetPlayersAll(), udg_Vashj, "TRIGSTR_213", gg_snd_A05LadyVashj15, "TRIGSTR_214", bj_TIMETYPE_ADD, 0, false )
    call WaitForSoundBJ( gg_snd_A05LadyVashj15, 0 )
    if ( Trig_Intro_Cinematic_Q_Func078001() ) then
        return
    else
        call DoNothing(  )
    endif
    call TransmissionFromUnitWithNameBJ( GetPlayersAll(), udg_Kael, "TRIGSTR_215", gg_snd_A05Kael16, "TRIGSTR_216", bj_TIMETYPE_ADD, 0, false )
    call WaitForSoundBJ( gg_snd_A05Kael16, 0 )
    if ( Trig_Intro_Cinematic_Q_Func081001() ) then
        return
    else
        call DoNothing(  )
    endif
    // Fade Out
    call CinematicFadeBJ( bj_CINEFADETYPE_FADEOUT, 0.50, "ReplaceableTextures\\CameraMasks\\White_mask.tga", 0, 0, 0, 0 )
    call TriggerSleepAction( 0.50 )
    if ( Trig_Intro_Cinematic_Q_Func085001() ) then
        return
    else
        call DoNothing(  )
    endif
    call SetUnitPositionLocFacingBJ( udg_Kael, GetRectCenter(gg_rct_Intro_Kael_StartB), 70.00 )
    call SetUnitPositionLocFacingBJ( udg_Vashj, GetRectCenter(gg_rct_Intro_Vashj_StartB), 70.00 )
    call CameraSetupApplyForPlayer( true, gg_cam_Intro_02, udg_AP1_Player, 0 )
    call CameraSetupApplyForPlayer( true, gg_cam_Intro_02B, udg_AP1_Player, ( ( GetSoundDurationBJ(gg_snd_A05Kael17) + GetSoundDurationBJ(gg_snd_A05LadyVashj18) ) + 2.00 ) )
    call PauseUnitBJ( false, udg_Wagon )
    call IssuePointOrderLocBJ( udg_Wagon, "move", GetRectCenter(gg_rct_Formation01) )
    call TriggerSleepAction( 0.50 )
    if ( Trig_Intro_Cinematic_Q_Func093001() ) then
        return
    else
        call DoNothing(  )
    endif
    // Fade In
    call CinematicFadeBJ( bj_CINEFADETYPE_FADEIN, 0.50, "ReplaceableTextures\\CameraMasks\\White_mask.tga", 0, 0, 0, 0 )
    call TriggerSleepAction( 0.50 )
    if ( Trig_Intro_Cinematic_Q_Func097001() ) then
        return
    else
        call DoNothing(  )
    endif
    call TransmissionFromUnitWithNameBJ( GetPlayersAll(), udg_Kael, "TRIGSTR_209", gg_snd_A05Kael17, "TRIGSTR_210", bj_TIMETYPE_ADD, 0, false )
    call WaitForSoundBJ( gg_snd_A05Kael17, 5.00 )
    if ( Trig_Intro_Cinematic_Q_Func100001() ) then
        return
    else
        call DoNothing(  )
    endif
    call PlaySoundOnUnitBJ( gg_snd_CatapultYes2, 40.00, udg_Wagon )
    call WaitForSoundBJ( gg_snd_A05Kael17, 4.00 )
    if ( Trig_Intro_Cinematic_Q_Func103001() ) then
        return
    else
        call DoNothing(  )
    endif
    call PlaySoundOnUnitBJ( gg_snd_CatapultYes2, 40.00, udg_Wagon )
    call WaitForSoundBJ( gg_snd_A05Kael17, 3.00 )
    if ( Trig_Intro_Cinematic_Q_Func106001() ) then
        return
    else
        call DoNothing(  )
    endif
    call PlaySoundOnUnitBJ( gg_snd_CatapultYes1, 40.00, udg_Wagon )
    call WaitForSoundBJ( gg_snd_A05Kael17, 1.50 )
    if ( Trig_Intro_Cinematic_Q_Func109001() ) then
        return
    else
        call DoNothing(  )
    endif
    call PlaySoundOnUnitBJ( gg_snd_CatapultYes2, 40.00, udg_Wagon )
    call WaitForSoundBJ( gg_snd_A05Kael17, 0 )
    if ( Trig_Intro_Cinematic_Q_Func112001() ) then
        return
    else
        call DoNothing(  )
    endif
    call TransmissionFromUnitWithNameBJ( GetPlayersAll(), udg_Vashj, "TRIGSTR_211", gg_snd_A05LadyVashj18, "TRIGSTR_212", bj_TIMETYPE_ADD, 0, false )
    call WaitForSoundBJ( gg_snd_A05LadyVashj18, 4.00 )
    if ( Trig_Intro_Cinematic_Q_Func115001() ) then
        return
    else
        call DoNothing(  )
    endif
    call PlaySoundOnUnitBJ( gg_snd_CatapultYes1, 40.00, udg_Wagon )
    call WaitForSoundBJ( gg_snd_A05LadyVashj18, 2.00 )
    if ( Trig_Intro_Cinematic_Q_Func118001() ) then
        return
    else
        call DoNothing(  )
    endif
    call PlaySoundOnUnitBJ( gg_snd_CatapultYes2, 40.00, udg_Wagon )
    call WaitForSoundBJ( gg_snd_A05LadyVashj18, 0 )
    if ( Trig_Intro_Cinematic_Q_Func121001() ) then
        return
    else
        call DoNothing(  )
    endif
    // xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
    // CINEMATIC ENDS - Cinematic Can No Longer Be Skipped
    // xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
    call DisableTrigger( gg_trg_Intro_Skipped )
    // Fade Out
    call CinematicFadeBJ( bj_CINEFADETYPE_FADEOUT, 1.00, "ReplaceableTextures\\CameraMasks\\White_mask.tga", 0, 0, 0, 0 )
    call TriggerSleepAction( 1.00 )
    // Cleanup
    call ConditionalTriggerExecute( gg_trg_Intro_Cleanup )
    // Start AI, Let AI Settle Down
    call ConditionalTriggerExecute( gg_trg_Start_Suicide_Scripts )
    call TriggerSleepAction( 1.00 )
    call CinematicModeBJ( false, GetPlayersAll() )
    // Fade In
    call CinematicFadeBJ( bj_CINEFADETYPE_FADEIN, 1.00, "ReplaceableTextures\\CameraMasks\\White_mask.tga", 0, 0, 0, 0 )
    call TriggerSleepAction( 1.00 )
    // Start Game
    call ConditionalTriggerExecute( gg_trg_Gameplay )
    set udg_InCinematic = false
    call QueuedTriggerRemoveBJ( GetTriggeringTrigger() )
endfunction

//===========================================================================
function InitTrig_Intro_Cinematic_Q takes nothing returns nothing
    set gg_trg_Intro_Cinematic_Q = CreateTrigger(  )
    call TriggerAddAction( gg_trg_Intro_Cinematic_Q, function Trig_Intro_Cinematic_Q_Actions )
endfunction

//===========================================================================
// Trigger: Intro Skipped
//===========================================================================
function Trig_Intro_Skipped_Actions takes nothing returns nothing
    call DisableTrigger( GetTriggeringTrigger() )
    set udg_IntroSkipped = true
    // Fade Out
    call CinematicFadeBJ( bj_CINEFADETYPE_FADEOUT, 0.50, "ReplaceableTextures\\CameraMasks\\White_mask.tga", 0, 0, 0, 0 )
    call TriggerSleepAction( 0.50 )
    // Cleanup
    call ConditionalTriggerExecute( gg_trg_Intro_Cleanup )
    // Start AI, Let AI Settle Down
    call ConditionalTriggerExecute( gg_trg_Start_Suicide_Scripts )
    call TriggerSleepAction( 1.00 )
    call CinematicModeBJ( false, udg_APG1_Player )
    // Fade In
    call CinematicFadeBJ( bj_CINEFADETYPE_FADEIN, 0.50, "ReplaceableTextures\\CameraMasks\\White_mask.tga", 0, 0, 0, 0 )
    call TriggerSleepAction( 0.50 )
    // Start Game
    call ConditionalTriggerExecute( gg_trg_Gameplay )
    set udg_InCinematic = false
    call QueuedTriggerRemoveBJ( gg_trg_Intro_Cinematic_Q )
endfunction

//===========================================================================
function InitTrig_Intro_Skipped takes nothing returns nothing
    set gg_trg_Intro_Skipped = CreateTrigger(  )
    call DisableTrigger( gg_trg_Intro_Skipped )
    call TriggerRegisterPlayerEventEndCinematic( gg_trg_Intro_Skipped, Player(0) )
    call TriggerAddAction( gg_trg_Intro_Skipped, function Trig_Intro_Skipped_Actions )
endfunction

//===========================================================================
// Trigger: Intro Setup
//===========================================================================
function Trig_Intro_Setup_Func013002002 takes nothing returns boolean
    return ( IsUnitHiddenBJ(GetFilterUnit()) == false )
endfunction

function Trig_Intro_Setup_Func016002 takes nothing returns nothing
    call ShowUnitHide( GetEnumUnit() )
endfunction

function Trig_Intro_Setup_Func018002 takes nothing returns nothing
    call SetItemVisibleBJ( false, GetEnumItem() )
endfunction

function Trig_Intro_Setup_Actions takes nothing returns nothing
    // Set Sky
    call SetSkyModel( "Environment\\Sky\\Outland_Sky\\Outland_Sky.mdl" )
    // Disable XP Gain
    call SuspendHeroXPBJ( false, udg_Kael )
    call SuspendHeroXPBJ( false, udg_Vashj )
    // Pause Time Of Day
    call UseTimeOfDayBJ( false )
    // Pause Units
    call PauseAllUnitsBJ( true )
    call PauseUnitBJ( false, udg_Kael )
    call PauseUnitBJ( false, udg_Vashj )
    // Hide Units
    set udg_HiddenUnits = GetUnitsOfPlayerMatching(udg_AP1_Player, Condition(function Trig_Intro_Setup_Func013002002))
    call GroupRemoveUnitSimple( udg_Kael, udg_HiddenUnits )
    call GroupRemoveUnitSimple( udg_Vashj, udg_HiddenUnits )
    call ForGroupBJ( udg_HiddenUnits, function Trig_Intro_Setup_Func016002 )
    // Hide Items
    call EnumItemsInRectBJ( GetPlayableMapRect(), function Trig_Intro_Setup_Func018002 )
    // Disable Abilities
    call SetPlayerAbilityAvailableBJ( false, 'Ashm', udg_AP1_Player )
    call SetPlayerAbilityAvailableBJ( false, 'AIba', udg_AP1_Player )
endfunction

//===========================================================================
function InitTrig_Intro_Setup takes nothing returns nothing
    set gg_trg_Intro_Setup = CreateTrigger(  )
    call TriggerAddAction( gg_trg_Intro_Setup, function Trig_Intro_Setup_Actions )
endfunction

//===========================================================================
// Trigger: Intro Cleanup
//===========================================================================
function Trig_Intro_Cleanup_Func021002 takes nothing returns nothing
    call SetItemVisibleBJ( true, GetEnumItem() )
endfunction

function Trig_Intro_Cleanup_Func023002 takes nothing returns nothing
    call ShowUnitShow( GetEnumUnit() )
endfunction

function Trig_Intro_Cleanup_Func029001 takes nothing returns boolean
    return ( udg_ExpDisabledForKael == false )
endfunction

function Trig_Intro_Cleanup_Func030001 takes nothing returns boolean
    return ( udg_ExpDisabledForVashj == false )
endfunction

function Trig_Intro_Cleanup_Func031001 takes nothing returns boolean
    return ( udg_ExpDisabledForBrewmaster == false )
endfunction

function Trig_Intro_Cleanup_Func041002 takes nothing returns nothing
    call IssueImmediateOrderBJ( GetEnumUnit(), "autoharvestgold" )
endfunction

function Trig_Intro_Cleanup_Func042002 takes nothing returns nothing
    call IssueImmediateOrderBJ( GetEnumUnit(), "autoharvestlumber" )
endfunction

function Trig_Intro_Cleanup_Func048C takes nothing returns boolean
    if ( not ( GetGameDifficulty() == MAP_DIFFICULTY_HARD ) ) then
        return false
    endif
    return true
endfunction

function Trig_Intro_Cleanup_Actions takes nothing returns nothing
    // Restore Abilities
    call SetPlayerAbilityAvailableBJ( true, 'Ashm', udg_AP1_Player )
    call SetPlayerAbilityAvailableBJ( true, 'AIba', udg_AP1_Player )
    // Remove Units
    call RemoveUnit( udg_IntroArcher )
    call RemoveUnit( udg_IntroMyrmidon )
    call RemoveUnit( udg_IntroSiren )
    call RemoveUnit( udg_IntroSpellBreaker )
    call RemoveUnit( udg_IntroWorker )
    call RemoveUnit( udg_IntroWorkerB )
    call RemoveUnit( udg_IntroWorkerC )
    call RemoveUnit( udg_IntroWorkerD )
    // Move Units
    call SetUnitPositionLocFacingBJ( udg_Kael, GetRectCenter(gg_rct_Gameplay_Kael_Start), 255.00 )
    call SetUnitPositionLocFacingBJ( udg_Vashj, GetRectCenter(gg_rct_Gameplay_Vashj_Start), 285.00 )
    call SetUnitPositionLocFacingBJ( udg_Wagon, GetRectCenter(gg_rct_Formation01), 0.00 )
    // Set Max HP for Heroes
    call SetUnitManaPercentBJ( udg_Kael, 100 )
    call SetUnitManaPercentBJ( udg_Vashj, 100 )
    // Unhide Items
    call EnumItemsInRectBJ( GetPlayableMapRect(), function Trig_Intro_Cleanup_Func021002 )
    // Unhide Units
    call ForGroupBJ( udg_HiddenUnits, function Trig_Intro_Cleanup_Func023002 )
    // Unpause Units
    call PauseAllUnitsBJ( false )
    // Pause Time Of Day
    call UseTimeOfDayBJ( true )
    // Re-enable XP Gain
    if ( Trig_Intro_Cleanup_Func029001() ) then
        call SuspendHeroXPBJ( true, udg_Kael )
    else
        call DoNothing(  )
    endif
    if ( Trig_Intro_Cleanup_Func030001() ) then
        call SuspendHeroXPBJ( true, udg_Vashj )
    else
        call DoNothing(  )
    endif
    if ( Trig_Intro_Cleanup_Func031001() ) then
        call SuspendHeroXPBJ( true, udg_Brewmaster )
    else
        call DoNothing(  )
    endif
    // Restore Selection
    call SelectUnitSingle( udg_Kael )
    // Reset Sky
    call SetSkyModel( null )
    // Reset Camera
    call CameraResetSmoothingFactorBJ(  )
    call ResetToGameCameraForPlayer( udg_AP1_Player, 0 )
    call PanCameraToTimedLocForPlayer( udg_AP1_Player, CameraSetupGetDestPositionLoc(gg_cam_Intro_Skipped), 0 )
    // Initial Harvesting
    call ForGroupBJ( GetUnitsInRectOfPlayer(gg_rct_Gold_Peons, udg_P8_BloodElfBase), function Trig_Intro_Cleanup_Func041002 )
    call ForGroupBJ( GetUnitsInRectOfPlayer(gg_rct_Lumber_Peons, udg_P8_BloodElfBase), function Trig_Intro_Cleanup_Func042002 )
    // Visibility
    call CreateFogModifierRectBJ( true, udg_AP1_Player, FOG_OF_WAR_MASKED, GetPlayableMapRect() )
    call DestroyFogModifier( GetLastCreatedFogModifier() )
    call ConditionalTriggerExecute( gg_trg_Create_Path_Visibility )
    // Move Caravan for Hard
    if ( Trig_Intro_Cleanup_Func048C() ) then
        call SetUnitPositionLoc( udg_CaravanArcher01, GetRectCenter(gg_rct_HardArcher01) )
        call SetUnitPositionLoc( udg_CaravanArcher02, GetRectCenter(gg_rct_HardArcher02) )
        call SetUnitPositionLoc( udg_CaravanHunt01, GetRectCenter(gg_rct_HardHunt01) )
        call SetUnitPositionLoc( udg_CaravanMaiev, GetRectCenter(gg_rct_HardMaiev) )
        call SetUnitPositionLoc( udg_CaravanCage, GetRectCenter(gg_rct_HardWagon) )
        set udg_BreadcrumbCurrent = 19
        set udg_BreadcrumbReached = 18
        set udg_zReorientTarget = udg_zBreadcrumbArray[udg_BreadcrumbCurrent]
        set udg_ReorientAngle = udg_BreadcrumbAngleArray[udg_BreadcrumbCurrent]
        call ConditionalTriggerExecute( gg_trg_Reorient_Formation )
    else
    endif
endfunction

//===========================================================================
function InitTrig_Intro_Cleanup takes nothing returns nothing
    set gg_trg_Intro_Cleanup = CreateTrigger(  )
    call TriggerAddAction( gg_trg_Intro_Cleanup, function Trig_Intro_Cleanup_Actions )
endfunction

//===========================================================================
// Trigger: Gameplay
//===========================================================================
function Trig_Gameplay_Func007C takes nothing returns boolean
    if ( not ( udg_Brewmaster != null ) ) then
        return false
    endif
    return true
endfunction

function Trig_Gameplay_Actions takes nothing returns nothing
    // Do initial gameplay stuff, like quest messages and hints
    call ConditionalTriggerExecute( gg_trg_Caravan_Go )
    call ConditionalTriggerExecute( gg_trg_Fire_it_Up )
    call TriggerSleepAction( 1.00 )
    call QueuedTriggerAddBJ( gg_trg_Get_the_Wagon_Q, true )
    call QueuedTriggerAddBJ( gg_trg_Only_Control_Hero_Notice_Q, true )
    if ( Trig_Gameplay_Func007C() ) then
        call QueuedTriggerAddBJ( gg_trg_Brewmaster_Available_Q, true )
    else
    endif
endfunction

//===========================================================================
function InitTrig_Gameplay takes nothing returns nothing
    set gg_trg_Gameplay = CreateTrigger(  )
    call TriggerAddAction( gg_trg_Gameplay, function Trig_Gameplay_Actions )
endfunction

//===========================================================================
// Trigger: Victory Cinematic Q
//===========================================================================
function Trig_Victory_Cinematic_Q_Func027001 takes nothing returns boolean
    return ( RectContainsUnit(gg_rct_BloodElfGoal, udg_Illidan) == true )
endfunction

function Trig_Victory_Cinematic_Q_Func028001 takes nothing returns boolean
    return ( udg_VictorySkipped == true )
endfunction

function Trig_Victory_Cinematic_Q_Func030001 takes nothing returns boolean
    return ( udg_VictorySkipped == true )
endfunction

function Trig_Victory_Cinematic_Q_Func035001 takes nothing returns boolean
    return ( udg_VictorySkipped == true )
endfunction

function Trig_Victory_Cinematic_Q_Func038001 takes nothing returns boolean
    return ( udg_VictorySkipped == true )
endfunction

function Trig_Victory_Cinematic_Q_Func041001 takes nothing returns boolean
    return ( udg_VictorySkipped == true )
endfunction

function Trig_Victory_Cinematic_Q_Func045001 takes nothing returns boolean
    return ( udg_VictorySkipped == true )
endfunction

function Trig_Victory_Cinematic_Q_Func049001 takes nothing returns boolean
    return ( udg_VictorySkipped == true )
endfunction

function Trig_Victory_Cinematic_Q_Func054001 takes nothing returns boolean
    return ( udg_VictorySkipped == true )
endfunction

function Trig_Victory_Cinematic_Q_Func058001 takes nothing returns boolean
    return ( udg_VictorySkipped == true )
endfunction

function Trig_Victory_Cinematic_Q_Func061001 takes nothing returns boolean
    return ( udg_VictorySkipped == true )
endfunction

function Trig_Victory_Cinematic_Q_Func066001 takes nothing returns boolean
    return ( udg_VictorySkipped == true )
endfunction

function Trig_Victory_Cinematic_Q_Actions takes nothing returns nothing
    set udg_InCinematic = true
    // Quest update
    call ConditionalTriggerExecute( gg_trg_Quest_Secure_Wagon_Completed )
    call ConditionalTriggerExecute( gg_trg_Quest_Escort_Wagon_Completed )
    call TriggerSleepAction( bj_QUEUE_DELAY_QUEST )
    // Fade Out
    call CinematicFadeBJ( bj_CINEFADETYPE_FADEOUT, 1.00, "ReplaceableTextures\\CameraMasks\\White_mask.tga", 0, 0, 0, 0 )
    call TriggerSleepAction( 1.00 )
    // Set Up Scene
    call CinematicModeBJ( true, udg_APG1_Player )
    call TriggerSleepAction( 0.25 )
    call ConditionalTriggerExecute( gg_trg_Next_Level_Prep )
    call ConditionalTriggerExecute( gg_trg_Victory_Setup )
    call TriggerSleepAction( 0.25 )
    call CameraSetupApplyForPlayer( true, gg_cam_Victory_01, udg_AP1_Player, 0 )
    call CameraSetupApplyForPlayer( true, gg_cam_Victory_01B, udg_AP1_Player, ( 1.00 + ( GetSoundDurationBJ(gg_snd_A05Illidan44) + GetSoundDurationBJ(gg_snd_A05LadyVashj45) ) ) )
    // Fade In
    call CinematicFadeBJ( bj_CINEFADETYPE_FADEIN, 1.00, "ReplaceableTextures\\CameraMasks\\White_mask.tga", 0, 0, 0, 0 )
    call VolumeGroupResetBJ(  )
    call TriggerSleepAction( 1.00 )
    call EnableTrigger( gg_trg_Victory_Skipped )
    // xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
    // CINEMATIC BEGINS - Cinematic Can Now Be Skipped
    // xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
    call PauseUnitBJ( false, udg_Vashj )
    call IssueTargetOrderBJ( udg_Vashj, "forkedlightning", udg_Wagon )
    loop
        exitwhen ( Trig_Victory_Cinematic_Q_Func027001() )
        call TriggerSleepAction(RMaxBJ(bj_WAIT_FOR_COND_MIN_INTERVAL, 0.20))
    endloop
    if ( Trig_Victory_Cinematic_Q_Func028001() ) then
        return
    else
        call DoNothing(  )
    endif
    call TriggerSleepAction( 1.30 )
    if ( Trig_Victory_Cinematic_Q_Func030001() ) then
        return
    else
        call DoNothing(  )
    endif
    call SetSpeechVolumeGroupsBJ(  )
    call SetPlayerColorBJ( udg_P8_BloodElfBase, PLAYER_COLOR_PURPLE, false )
    call TransmissionFromUnitWithNameBJ( GetPlayersAll(), udg_Illidan, "TRIGSTR_095", gg_snd_A05Illidan44, "TRIGSTR_096", bj_TIMETYPE_ADD, 0, false )
    call WaitForSoundBJ( gg_snd_A05Illidan44, 0.00 )
    if ( Trig_Victory_Cinematic_Q_Func035001() ) then
        return
    else
        call DoNothing(  )
    endif
    call TransmissionFromUnitWithNameBJ( GetPlayersAll(), udg_Vashj, "TRIGSTR_097", gg_snd_A05LadyVashj45, "TRIGSTR_098", bj_TIMETYPE_ADD, 0, false )
    call WaitForSoundBJ( gg_snd_A05LadyVashj45, 1.00 )
    if ( Trig_Victory_Cinematic_Q_Func038001() ) then
        return
    else
        call DoNothing(  )
    endif
    call SetUnitFacingToFaceUnitTimed( udg_Vashj, udg_Kael, 0.60 )
    call WaitForSoundBJ( gg_snd_A05LadyVashj45, 0.00 )
    if ( Trig_Victory_Cinematic_Q_Func041001() ) then
        return
    else
        call DoNothing(  )
    endif
    // Fade Out
    call CinematicFadeBJ( bj_CINEFADETYPE_FADEOUT, 0.50, "ReplaceableTextures\\CameraMasks\\White_mask.tga", 0, 0, 0, 0 )
    call TriggerSleepAction( 0.50 )
    if ( Trig_Victory_Cinematic_Q_Func045001() ) then
        return
    else
        call DoNothing(  )
    endif
    call CameraSetupApplyForPlayer( true, gg_cam_Victory_02, udg_AP1_Player, 0 )
    call CameraSetupApplyForPlayer( true, gg_cam_Victory_02B, udg_AP1_Player, ( ( 1 + GetSoundDurationBJ(gg_snd_A05Illidan46) ) + ( GetSoundDurationBJ(gg_snd_A05LadyVashj47) + GetSoundDurationBJ(gg_snd_A05LadyVashj48) ) ) )
    call TriggerSleepAction( 0.50 )
    if ( Trig_Victory_Cinematic_Q_Func049001() ) then
        return
    else
        call DoNothing(  )
    endif
    // Fade In
    call CinematicFadeBJ( bj_CINEFADETYPE_FADEIN, 0.50, "ReplaceableTextures\\CameraMasks\\White_mask.tga", 0, 0, 0, 0 )
    call SetUnitFacingToFaceUnitTimed( udg_Illidan, udg_Kael, 0.50 )
    call TriggerSleepAction( 0.50 )
    if ( Trig_Victory_Cinematic_Q_Func054001() ) then
        return
    else
        call DoNothing(  )
    endif
    call SetUnitFacingToFaceUnitTimed( udg_Illidan, udg_Kael, 0.30 )
    call TransmissionFromUnitWithNameBJ( GetPlayersAll(), udg_Illidan, "TRIGSTR_099", gg_snd_A05Illidan46, "TRIGSTR_100", bj_TIMETYPE_ADD, 0, false )
    call WaitForSoundBJ( gg_snd_A05Illidan46, 0.00 )
    if ( Trig_Victory_Cinematic_Q_Func058001() ) then
        return
    else
        call DoNothing(  )
    endif
    call TransmissionFromUnitWithNameBJ( GetPlayersAll(), udg_Vashj, "TRIGSTR_101", gg_snd_A05LadyVashj47, "TRIGSTR_102", bj_TIMETYPE_ADD, 0, false )
    call WaitForSoundBJ( gg_snd_A05LadyVashj47, 0.00 )
    if ( Trig_Victory_Cinematic_Q_Func061001() ) then
        return
    else
        call DoNothing(  )
    endif
    call PauseUnitBJ( false, udg_Kael )
    call IssuePointOrderLocBJ( udg_Kael, "move", GetRectCenter(gg_rct_Victory_KaelMoveForward) )
    call TransmissionFromUnitWithNameBJ( GetPlayersAll(), udg_Vashj, "TRIGSTR_103", gg_snd_A05LadyVashj48, "TRIGSTR_104", bj_TIMETYPE_ADD, 0, false )
    call WaitForSoundBJ( gg_snd_A05LadyVashj48, 0.00 )
    if ( Trig_Victory_Cinematic_Q_Func066001() ) then
        return
    else
        call DoNothing(  )
    endif
    // xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
    // CINEMATIC ENDS - Cinematic Can No Longer Be Skipped
    // xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
    call DisableTrigger( gg_trg_Victory_Skipped )
    // Fade Out
    call CinematicFadeBJ( bj_CINEFADETYPE_FADEOUT, 2.00, "ReplaceableTextures\\CameraMasks\\White_mask.tga", 0, 0, 0, 0 )
    call TriggerSleepAction( 2.00 )
    call ConditionalTriggerExecute( gg_trg_Next_Level_Run )
endfunction

//===========================================================================
function InitTrig_Victory_Cinematic_Q takes nothing returns nothing
    set gg_trg_Victory_Cinematic_Q = CreateTrigger(  )
    call TriggerAddAction( gg_trg_Victory_Cinematic_Q, function Trig_Victory_Cinematic_Q_Actions )
endfunction

//===========================================================================
// Trigger: Victory Wagon Explodes
//===========================================================================
function Trig_Victory_Wagon_Explodes_Actions takes nothing returns nothing
    call AddSpecialEffectLocBJ( GetUnitLoc(GetDyingUnit()), "Objects\\Spawnmodels\\Other\\NeutralBuildingExplosion\\NeutralBuildingExplosion.mdl" )
    call CreateNUnitsAtLoc( 1, 'Eevi', Player(7), GetRectCenter(gg_rct_BloodElfGoal), 180.00 )
    set udg_Illidan = GetLastCreatedUnit()
    call SetHeroLevelBJ( udg_Illidan, 10, false )
    call SetUnitColor( udg_Illidan, PLAYER_COLOR_PURPLE )
    call UnitAddItemByIdSwapped( 'gldo', udg_Illidan )
    call RemoveUnit( udg_Wagon )
endfunction

//===========================================================================
function InitTrig_Victory_Wagon_Explodes takes nothing returns nothing
    set gg_trg_Victory_Wagon_Explodes = CreateTrigger(  )
    call TriggerRegisterUnitEvent( gg_trg_Victory_Wagon_Explodes, gg_unit_eilw_0038, EVENT_UNIT_DEATH )
    call TriggerAddAction( gg_trg_Victory_Wagon_Explodes, function Trig_Victory_Wagon_Explodes_Actions )
endfunction

//===========================================================================
// Trigger: Victory Skipped
//===========================================================================
function Trig_Victory_Skipped_Actions takes nothing returns nothing
    call DisableTrigger( GetTriggeringTrigger() )
    set udg_VictorySkipped = true
    // Fade Out
    call CinematicFadeBJ( bj_CINEFADETYPE_FADEOUT, 2.00, "ReplaceableTextures\\CameraMasks\\White_mask.tga", 0, 0, 0, 0 )
    call TriggerSleepAction( 2.00 )
    call ConditionalTriggerExecute( gg_trg_Next_Level_Run )
endfunction

//===========================================================================
function InitTrig_Victory_Skipped takes nothing returns nothing
    set gg_trg_Victory_Skipped = CreateTrigger(  )
    call DisableTrigger( gg_trg_Victory_Skipped )
    call TriggerRegisterPlayerEventEndCinematic( gg_trg_Victory_Skipped, Player(0) )
    call TriggerAddAction( gg_trg_Victory_Skipped, function Trig_Victory_Skipped_Actions )
endfunction

//===========================================================================
// Trigger: Victory Setup
//===========================================================================
function Trig_Victory_Setup_Func008C takes nothing returns boolean
    if ( not ( udg_Brewmaster != null ) ) then
        return false
    endif
    return true
endfunction

function Trig_Victory_Setup_Func030002002 takes nothing returns boolean
    return ( IsUnitHiddenBJ(GetFilterUnit()) == false )
endfunction

function Trig_Victory_Setup_Func031A takes nothing returns nothing
    call GroupAddUnitSimple( GetEnumUnit(), udg_HiddenUnits )
endfunction

function Trig_Victory_Setup_Func032A takes nothing returns nothing
    call GroupAddUnitSimple( GetEnumUnit(), udg_HiddenUnits )
endfunction

function Trig_Victory_Setup_Func033A takes nothing returns nothing
    call GroupAddUnitSimple( GetEnumUnit(), udg_HiddenUnits )
endfunction

function Trig_Victory_Setup_Func034A takes nothing returns nothing
    call GroupAddUnitSimple( GetEnumUnit(), udg_HiddenUnits )
endfunction

function Trig_Victory_Setup_Func038002 takes nothing returns nothing
    call ShowUnitHide( GetEnumUnit() )
endfunction

function Trig_Victory_Setup_Func056002 takes nothing returns nothing
    call SetItemVisibleBJ( false, GetEnumItem() )
endfunction

function Trig_Victory_Setup_Func058002 takes nothing returns nothing
    call UnitRemoveBuffsBJ( bj_REMOVEBUFFS_ALL, GetEnumUnit() )
endfunction

function Trig_Victory_Setup_Func059002 takes nothing returns nothing
    call UnitRemoveBuffsBJ( bj_REMOVEBUFFS_ALL, GetEnumUnit() )
endfunction

function Trig_Victory_Setup_Actions takes nothing returns nothing
    // Set Sky
    call SetSkyModel( "Environment\\Sky\\Outland_Sky\\Outland_Sky.mdl" )
    // Hide Leaderboard
    call LeaderboardDisplayBJ( false, udg_OwnerBoard )
    // Clear Selection
    call ClearSelection(  )
    // Hide Brewmaster if exists
    if ( Trig_Victory_Setup_Func008C() ) then
        call ShowUnitHide( udg_Brewmaster )
    else
    endif
    // Revive Hero
    set udg_RevivalHero = udg_Vashj
    set udg_RevivalSpot = GetRectCenter(gg_rct_Victory_Vashj_Start)
    call ConditionalTriggerExecute( gg_trg_Cinematic_Revival )
    set udg_VashjReturnSpot = udg_RevivalReturnSpot
    call SetUnitFacingTimed( udg_Vashj, 0.00, 0 )
    // Revive Hero
    set udg_RevivalHero = udg_Kael
    set udg_RevivalSpot = GetRectCenter(gg_rct_Victory_Kael_Start)
    call ConditionalTriggerExecute( gg_trg_Cinematic_Revival )
    set udg_KaelReturnSpot = udg_RevivalReturnSpot
    call SetUnitFacingTimed( udg_Kael, 110.00, 0 )
    // Make Sure Wagon in center
    call SetUnitOwner( udg_Wagon, udg_P3_IllidanCage, true )
    call SetUnitPositionLocFacingBJ( udg_Wagon, GetRectCenter(gg_rct_BloodElfGoal), 180.00 )
    // Disable XP Gain
    call SuspendHeroXPBJ( false, udg_Vashj )
    call SuspendHeroXPBJ( false, udg_Kael )
    // Pause Time Of Day
    call UseTimeOfDayBJ( false )
    // Hide Units
    set udg_HiddenUnits = GetUnitsOfPlayerMatching(udg_AP1_Player, Condition(function Trig_Victory_Setup_Func030002002))
    call ForGroupBJ( GetUnitsOfPlayerAll(udg_P2_Watchers), function Trig_Victory_Setup_Func031A )
    call ForGroupBJ( GetUnitsOfPlayerAll(udg_P5_Maiev), function Trig_Victory_Setup_Func032A )
    call ForGroupBJ( GetUnitsOfPlayerAll(udg_P10_BloodElfAttack), function Trig_Victory_Setup_Func033A )
    call ForGroupBJ( GetUnitsOfPlayerAll(udg_P11_NightElfAttack), function Trig_Victory_Setup_Func034A )
    call GroupRemoveUnitSimple( udg_Vashj, udg_HiddenUnits )
    call GroupRemoveUnitSimple( udg_Kael, udg_HiddenUnits )
    call GroupRemoveUnitSimple( udg_Wagon, udg_HiddenUnits )
    call ForGroupBJ( udg_HiddenUnits, function Trig_Victory_Setup_Func038002 )
    // Remove CoP
    call RemoveUnit( gg_unit_n000_0124 )
    // Create Blood Elf Lines
    call CreateNUnitsAtLoc( 1, 'hspt', udg_P8_BloodElfBase, GetRectCenter(gg_rct_Victory_SB01), 120.00 )
    call CreateNUnitsAtLoc( 1, 'hspt', udg_P8_BloodElfBase, GetRectCenter(gg_rct_Victory_SB02), 120.00 )
    call CreateNUnitsAtLoc( 1, 'hspt', udg_P8_BloodElfBase, GetRectCenter(gg_rct_Victory_SB03), 120.00 )
    call CreateNUnitsAtLoc( 1, 'hspt', udg_P8_BloodElfBase, GetRectCenter(gg_rct_Victory_SB04), 120.00 )
    call CreateNUnitsAtLoc( 1, 'hspt', udg_P8_BloodElfBase, GetRectCenter(gg_rct_Victory_SB05), 120.00 )
    call CreateNUnitsAtLoc( 1, 'hsor', udg_P8_BloodElfBase, GetRectCenter(gg_rct_Victory_Sorc01), 120.00 )
    call CreateNUnitsAtLoc( 1, 'hsor', udg_P8_BloodElfBase, GetRectCenter(gg_rct_Victory_Sorc02), 120.00 )
    call CreateNUnitsAtLoc( 1, 'hsor', udg_P8_BloodElfBase, GetRectCenter(gg_rct_Victory_Sorc03), 120.00 )
    call CreateNUnitsAtLoc( 1, 'hmpr', udg_P8_BloodElfBase, GetRectCenter(gg_rct_Victory_Priest01), 120.00 )
    call CreateNUnitsAtLoc( 1, 'hmpr', udg_P8_BloodElfBase, GetRectCenter(gg_rct_Victory_Priest02), 120.00 )
    call CreateNUnitsAtLoc( 1, 'hmpr', udg_P8_BloodElfBase, GetRectCenter(gg_rct_Victory_Priest03), 120.00 )
    // Pause Units
    call PauseAllUnitsBJ( true )
    // Hide Items
    call EnumItemsInRectBJ( GetPlayableMapRect(), function Trig_Victory_Setup_Func056002 )
    // Remove Buffs
    call ForGroupBJ( GetUnitsOfPlayerAll(udg_AP1_Player), function Trig_Victory_Setup_Func058002 )
    call ForGroupBJ( GetUnitsOfPlayerAll(udg_P2_Watchers), function Trig_Victory_Setup_Func059002 )
    // Disable Abilities
    call SetPlayerAbilityAvailableBJ( false, 'Ashm', udg_AP1_Player )
    call SetPlayerAbilityAvailableBJ( false, 'AIba', udg_AP1_Player )
    // Music Theme
    call PlayThematicMusicBJ( "Sound\\Music\\mp3Music\\IllidansTheme.mp3" )
    // Setup Kill
    call SetUnitManaPercentBJ( udg_Vashj, 100 )
    call UnitResetCooldown( udg_Vashj )
    call SetUnitInvulnerable( udg_Wagon, false )
    call SetUnitLifePercentBJ( udg_Wagon, 10.00 )
    call SetPlayerAllianceStateBJ( udg_AP1_Player, udg_P3_IllidanCage, bj_ALLIANCE_UNALLIED )
endfunction

//===========================================================================
function InitTrig_Victory_Setup takes nothing returns nothing
    set gg_trg_Victory_Setup = CreateTrigger(  )
    call TriggerAddAction( gg_trg_Victory_Setup, function Trig_Victory_Setup_Actions )
endfunction

//===========================================================================
// Trigger: Create Path Visibility
//===========================================================================
function Trig_Create_Path_Visibility_Actions takes nothing returns nothing
    call CreateFogModifierRectBJ( true, udg_AP1_Player, FOG_OF_WAR_VISIBLE, GetPlayableMapRect() )
    call DestroyFogModifier( GetLastCreatedFogModifier() )
    set bj_forLoopAIndex = 1
    set bj_forLoopAIndexEnd = udg_BreadcrumbTotal
    loop
        exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
        call CreateFogModifierRadiusLocBJ( true, udg_AP1_Player, FOG_OF_WAR_VISIBLE, udg_zBreadcrumbArray[GetForLoopIndexA()], 1024.00 )
        set bj_forLoopAIndex = bj_forLoopAIndex + 1
    endloop
endfunction

//===========================================================================
function InitTrig_Create_Path_Visibility takes nothing returns nothing
    set gg_trg_Create_Path_Visibility = CreateTrigger(  )
    call TriggerAddAction( gg_trg_Create_Path_Visibility, function Trig_Create_Path_Visibility_Actions )
endfunction

//===========================================================================
// Trigger: Fire it Up
//===========================================================================
function Trig_Fire_it_Up_Actions takes nothing returns nothing
    call ConditionalTriggerExecute( gg_trg_Start_Build_Animations )
    call ConditionalTriggerExecute( gg_trg_Start_Timers )
    call ConditionalTriggerExecute( gg_trg_Initial_Production )
    call ConditionalTriggerExecute( gg_trg_Create_Initial_Board )
endfunction

//===========================================================================
function InitTrig_Fire_it_Up takes nothing returns nothing
    set gg_trg_Fire_it_Up = CreateTrigger(  )
    call TriggerAddAction( gg_trg_Fire_it_Up, function Trig_Fire_it_Up_Actions )
endfunction

//===========================================================================
// Trigger: Start Build Animations
//===========================================================================
function Trig_Start_Build_Animations_Actions takes nothing returns nothing
    call SetUnitAnimation( gg_unit_hars_0040, "stand work" )
    call SetUnitAnimation( gg_unit_hbar_0041, "stand work" )
    call SetUnitAnimation( gg_unit_hbar_0042, "stand work" )
    call SetUnitAnimation( gg_unit_hbar_0037, "stand work" )
    call SetUnitAnimation( gg_unit_nnsg_0045, "stand work" )
    call SetUnitAnimation( gg_unit_nnsg_0046, "stand work" )
    call SetUnitAnimation( gg_unit_nnsg_0044, "stand work" )
    call SetUnitAnimation( gg_unit_eaom_0009, "stand work" )
    call SetUnitAnimation( gg_unit_eaom_0031, "stand work" )
    call SetUnitAnimation( gg_unit_eaom_0010, "stand work" )
    call SetUnitAnimation( gg_unit_eaom_0008, "stand work" )
    call SetUnitAnimation( gg_unit_eaoe_0030, "stand work" )
    call SetUnitAnimation( gg_unit_eaoe_0011, "stand work" )
    call SetUnitAnimation( gg_unit_eaoe_0012, "stand work" )
    call SetUnitAnimation( gg_unit_eaow_0013, "stand work" )
endfunction

//===========================================================================
function InitTrig_Start_Build_Animations takes nothing returns nothing
    set gg_trg_Start_Build_Animations = CreateTrigger(  )
    call TriggerAddAction( gg_trg_Start_Build_Animations, function Trig_Start_Build_Animations_Actions )
endfunction

//===========================================================================
// Trigger: Start Timers
//===========================================================================
function Trig_Start_Timers_Actions takes nothing returns nothing
    call StartTimerBJ( udg_BEBuildTimer, false, udg_BETimerLength )
    call StartTimerBJ( udg_NEBuildTimer, false, udg_NETimerLength )
    call StartTimerBJ( udg_BuildTimerAdjustmentTimer, true, 5.00 )
    call StartTimerBJ( udg_RoyalGuardTimer, false, 120.00 )
    call StartTimerBJ( udg_WagonPingTimer, true, 4.00 )
    call StartTimerBJ( udg_TransferOwnerTimer, false, 5.00 )
    call StartTimerBJ( udg_GoldWispTimer, false, 61.00 )
endfunction

//===========================================================================
function InitTrig_Start_Timers takes nothing returns nothing
    set gg_trg_Start_Timers = CreateTrigger(  )
    call TriggerAddAction( gg_trg_Start_Timers, function Trig_Start_Timers_Actions )
endfunction

//===========================================================================
// Trigger: Initial Production
//===========================================================================
function Trig_Initial_Production_Actions takes nothing returns nothing
    call ConditionalTriggerExecute( gg_trg_BE_01 )
    call ConditionalTriggerExecute( gg_trg_NE_01 )
endfunction

//===========================================================================
function InitTrig_Initial_Production takes nothing returns nothing
    set gg_trg_Initial_Production = CreateTrigger(  )
    call TriggerAddAction( gg_trg_Initial_Production, function Trig_Initial_Production_Actions )
endfunction

//===========================================================================
// Trigger: Put Wisps on Gold
//===========================================================================
function Trig_Put_Wisps_on_Gold_Actions takes nothing returns nothing
    call GroupImmediateOrderBJ( GetUnitsInRectAll(gg_rct_GoldWisps), "autoharvestgold" )
endfunction

//===========================================================================
function InitTrig_Put_Wisps_on_Gold takes nothing returns nothing
    set gg_trg_Put_Wisps_on_Gold = CreateTrigger(  )
    call TriggerRegisterTimerExpireEventBJ( gg_trg_Put_Wisps_on_Gold, udg_GoldWispTimer )
    call TriggerAddAction( gg_trg_Put_Wisps_on_Gold, function Trig_Put_Wisps_on_Gold_Actions )
endfunction

//===========================================================================
// Trigger: BE Timer Expires
//===========================================================================
function Trig_BE_Timer_Expires_Conditions takes nothing returns boolean
    if ( not ( udg_InCinematic == false ) ) then
        return false
    endif
    return true
endfunction

function Trig_BE_Timer_Expires_Func006Func001C takes nothing returns boolean
    if ( not ( udg_RandomNumber <= 2.00 ) ) then
        return false
    endif
    return true
endfunction

function Trig_BE_Timer_Expires_Func006C takes nothing returns boolean
    if ( not ( udg_RandomNumber <= 1.00 ) ) then
        return false
    endif
    return true
endfunction

function Trig_BE_Timer_Expires_Actions takes nothing returns nothing
    // Restart Timer
    call StartTimerBJ( udg_BEBuildTimer, false, udg_BETimerLength )
    // Choose Force
    set udg_RandomNumber = GetRandomReal(0, 3.00)
    if ( Trig_BE_Timer_Expires_Func006C() ) then
        set udg_BEGroupChosen = gg_trg_BE_01
    else
        if ( Trig_BE_Timer_Expires_Func006Func001C() ) then
            set udg_BEGroupChosen = gg_trg_BE_02
        else
            set udg_BEGroupChosen = gg_trg_BE_03
        endif
    endif
    // Create Force
    call ConditionalTriggerExecute( udg_BEGroupChosen )
endfunction

//===========================================================================
function InitTrig_BE_Timer_Expires takes nothing returns nothing
    set gg_trg_BE_Timer_Expires = CreateTrigger(  )
    call TriggerRegisterTimerExpireEventBJ( gg_trg_BE_Timer_Expires, udg_BEBuildTimer )
    call TriggerAddCondition( gg_trg_BE_Timer_Expires, Condition( function Trig_BE_Timer_Expires_Conditions ) )
    call TriggerAddAction( gg_trg_BE_Timer_Expires, function Trig_BE_Timer_Expires_Actions )
endfunction

//===========================================================================
// Trigger: NE Timer Expires
//===========================================================================
function Trig_NE_Timer_Expires_Conditions takes nothing returns boolean
    if ( not ( udg_InCinematic == false ) ) then
        return false
    endif
    return true
endfunction

function Trig_NE_Timer_Expires_Func006C takes nothing returns boolean
    if ( not ( udg_RandomNumber <= 1.00 ) ) then
        return false
    endif
    return true
endfunction

function Trig_NE_Timer_Expires_Actions takes nothing returns nothing
    // Restart Timer
    call StartTimerBJ( udg_NEBuildTimer, false, udg_NETimerLength )
    // Choose Force
    set udg_RandomNumber = GetRandomReal(0, 2.00)
    if ( Trig_NE_Timer_Expires_Func006C() ) then
        set udg_NEGroupChosen = gg_trg_NE_01
    else
        set udg_NEGroupChosen = gg_trg_NE_02
    endif
    // Create Force
    call ConditionalTriggerExecute( udg_NEGroupChosen )
endfunction

//===========================================================================
function InitTrig_NE_Timer_Expires takes nothing returns nothing
    set gg_trg_NE_Timer_Expires = CreateTrigger(  )
    call TriggerRegisterTimerExpireEventBJ( gg_trg_NE_Timer_Expires, udg_NEBuildTimer )
    call TriggerAddCondition( gg_trg_NE_Timer_Expires, Condition( function Trig_NE_Timer_Expires_Conditions ) )
    call TriggerAddAction( gg_trg_NE_Timer_Expires, function Trig_NE_Timer_Expires_Actions )
endfunction

//===========================================================================
// Trigger: BE 01
//===========================================================================
function Trig_BE_01_Func001C takes nothing returns boolean
    if ( not ( IsUnitAliveBJ(gg_unit_hars_0040) == true ) ) then
        return false
    endif
    return true
endfunction

function Trig_BE_01_Func002C takes nothing returns boolean
    if ( not ( IsUnitAliveBJ(gg_unit_hbar_0042) == true ) ) then
        return false
    endif
    return true
endfunction

function Trig_BE_01_Func003C takes nothing returns boolean
    if ( not ( IsUnitAliveBJ(gg_unit_hbar_0037) == true ) ) then
        return false
    endif
    return true
endfunction

function Trig_BE_01_Func004C takes nothing returns boolean
    if ( not ( IsUnitAliveBJ(gg_unit_hbar_0041) == true ) ) then
        return false
    endif
    return true
endfunction

function Trig_BE_01_Func005Func001C takes nothing returns boolean
    if ( not ( IsUnitAliveBJ(gg_unit_nnsg_0045) == true ) ) then
        return false
    endif
    return true
endfunction

function Trig_BE_01_Func005Func004001001002001 takes nothing returns boolean
    return ( GetUnitTypeId(GetFilterUnit()) == 'nsnp' )
endfunction

function Trig_BE_01_Func005Func004001001002002 takes nothing returns boolean
    return ( IsUnitAliveBJ(GetFilterUnit()) == true )
endfunction

function Trig_BE_01_Func005Func004001001002 takes nothing returns boolean
    return GetBooleanAnd( Trig_BE_01_Func005Func004001001002001(), Trig_BE_01_Func005Func004001001002002() )
endfunction

function Trig_BE_01_Func005C takes nothing returns boolean
    if ( not ( IsUnitAliveBJ(gg_unit_nnsg_0045) == true ) ) then
        return false
    endif
    if ( not ( CountUnitsInGroup(GetUnitsOfPlayerMatching(udg_P10_BloodElfAttack, Condition(function Trig_BE_01_Func005Func004001001002))) < 5 ) ) then
        return false
    endif
    return true
endfunction

function Trig_BE_01_Func006Func001C takes nothing returns boolean
    if ( not ( IsUnitAliveBJ(gg_unit_nnsg_0044) == true ) ) then
        return false
    endif
    return true
endfunction

function Trig_BE_01_Func006Func005001001002001 takes nothing returns boolean
    return ( GetUnitTypeId(GetFilterUnit()) == 'nnrg' )
endfunction

function Trig_BE_01_Func006Func005001001002002 takes nothing returns boolean
    return ( IsUnitAliveBJ(GetFilterUnit()) == true )
endfunction

function Trig_BE_01_Func006Func005001001002 takes nothing returns boolean
    return GetBooleanAnd( Trig_BE_01_Func006Func005001001002001(), Trig_BE_01_Func006Func005001001002002() )
endfunction

function Trig_BE_01_Func006C takes nothing returns boolean
    if ( not ( IsUnitAliveBJ(gg_unit_nnsg_0044) == true ) ) then
        return false
    endif
    if ( not ( CountUnitsInGroup(GetUnitsOfPlayerMatching(udg_P10_BloodElfAttack, Condition(function Trig_BE_01_Func006Func005001001002))) < 1 ) ) then
        return false
    endif
    if ( not ( TimerGetRemaining(udg_RoyalGuardTimer) <= 0.00 ) ) then
        return false
    endif
    return true
endfunction

function Trig_BE_01_Func007C takes nothing returns boolean
    if ( not ( IsUnitAliveBJ(gg_unit_nnsg_0046) == true ) ) then
        return false
    endif
    return true
endfunction

function Trig_BE_01_Actions takes nothing returns nothing
    if ( Trig_BE_01_Func001C() ) then
        call CreateNUnitsAtLoc( 1, 'hspt', udg_P10_BloodElfAttack, GetRectCenter(gg_rct_BE_Arcane_Sanctum_Spawn_01), 270.00 )
    else
    endif
    if ( Trig_BE_01_Func002C() ) then
        call CreateNUnitsAtLoc( 1, 'hhes', udg_P10_BloodElfAttack, GetRectCenter(gg_rct_BE_Barracks_Spawn_01), 270.00 )
    else
    endif
    if ( Trig_BE_01_Func003C() ) then
        call CreateNUnitsAtLoc( 1, 'nhea', udg_P10_BloodElfAttack, GetRectCenter(gg_rct_BE_Barracks_Spawn_02), 270.00 )
    else
    endif
    if ( Trig_BE_01_Func004C() ) then
        call CreateNUnitsAtLoc( 1, 'hhes', udg_P10_BloodElfAttack, GetRectCenter(gg_rct_BE_Barracks_Spawn_03), 270.00 )
    else
    endif
    if ( Trig_BE_01_Func005C() ) then
        call CreateNUnitsAtLoc( 1, 'nsnp', udg_P10_BloodElfAttack, GetRectCenter(gg_rct_BE_Pool_Spawn_01), 270.00 )
    else
        if ( Trig_BE_01_Func005Func001C() ) then
            call CreateNUnitsAtLoc( 1, 'nmyr', udg_P10_BloodElfAttack, GetRectCenter(gg_rct_BE_Pool_Spawn_01), 270.00 )
        else
        endif
    endif
    if ( Trig_BE_01_Func006C() ) then
        call CreateNUnitsAtLoc( 1, 'nnrg', udg_P10_BloodElfAttack, GetRectCenter(gg_rct_BE_Pool_Spawn_02), 270.00 )
        call StartTimerBJ( udg_RoyalGuardTimer, false, 120.00 )
    else
        if ( Trig_BE_01_Func006Func001C() ) then
            call CreateNUnitsAtLoc( 1, 'nmyr', udg_P10_BloodElfAttack, GetRectCenter(gg_rct_BE_Pool_Spawn_02), 270.00 )
        else
        endif
    endif
    if ( Trig_BE_01_Func007C() ) then
        call CreateNUnitsAtLoc( 1, 'nnsw', udg_P10_BloodElfAttack, GetRectCenter(gg_rct_BE_Pool_Spawn_03), 270.00 )
    else
    endif
endfunction

//===========================================================================
function InitTrig_BE_01 takes nothing returns nothing
    set gg_trg_BE_01 = CreateTrigger(  )
    call TriggerAddAction( gg_trg_BE_01, function Trig_BE_01_Actions )
endfunction

//===========================================================================
// Trigger: BE 02
//===========================================================================
function Trig_BE_02_Func001C takes nothing returns boolean
    if ( not ( IsUnitAliveBJ(gg_unit_hars_0040) == true ) ) then
        return false
    endif
    return true
endfunction

function Trig_BE_02_Func002C takes nothing returns boolean
    if ( not ( IsUnitAliveBJ(gg_unit_hbar_0042) == true ) ) then
        return false
    endif
    return true
endfunction

function Trig_BE_02_Func003Func001C takes nothing returns boolean
    if ( not ( IsUnitAliveBJ(gg_unit_hbar_0037) == true ) ) then
        return false
    endif
    return true
endfunction

function Trig_BE_02_Func003Func004001001002001 takes nothing returns boolean
    return ( GetUnitTypeId(GetFilterUnit()) == 'nhea' )
endfunction

function Trig_BE_02_Func003Func004001001002002 takes nothing returns boolean
    return ( IsUnitAliveBJ(GetFilterUnit()) == true )
endfunction

function Trig_BE_02_Func003Func004001001002 takes nothing returns boolean
    return GetBooleanAnd( Trig_BE_02_Func003Func004001001002001(), Trig_BE_02_Func003Func004001001002002() )
endfunction

function Trig_BE_02_Func003C takes nothing returns boolean
    if ( not ( IsUnitAliveBJ(gg_unit_hbar_0037) == true ) ) then
        return false
    endif
    if ( not ( CountUnitsInGroup(GetUnitsOfPlayerMatching(udg_P10_BloodElfAttack, Condition(function Trig_BE_02_Func003Func004001001002))) < 6 ) ) then
        return false
    endif
    return true
endfunction

function Trig_BE_02_Func004C takes nothing returns boolean
    if ( not ( IsUnitAliveBJ(gg_unit_hbar_0041) == true ) ) then
        return false
    endif
    return true
endfunction

function Trig_BE_02_Func005Func001C takes nothing returns boolean
    if ( not ( IsUnitAliveBJ(gg_unit_nnsg_0045) == true ) ) then
        return false
    endif
    return true
endfunction

function Trig_BE_02_Func005Func004001001002001 takes nothing returns boolean
    return ( GetUnitTypeId(GetFilterUnit()) == 'nsnp' )
endfunction

function Trig_BE_02_Func005Func004001001002002 takes nothing returns boolean
    return ( IsUnitAliveBJ(GetFilterUnit()) == true )
endfunction

function Trig_BE_02_Func005Func004001001002 takes nothing returns boolean
    return GetBooleanAnd( Trig_BE_02_Func005Func004001001002001(), Trig_BE_02_Func005Func004001001002002() )
endfunction

function Trig_BE_02_Func005C takes nothing returns boolean
    if ( not ( IsUnitAliveBJ(gg_unit_nnsg_0045) == true ) ) then
        return false
    endif
    if ( not ( CountUnitsInGroup(GetUnitsOfPlayerMatching(udg_P10_BloodElfAttack, Condition(function Trig_BE_02_Func005Func004001001002))) < 6 ) ) then
        return false
    endif
    return true
endfunction

function Trig_BE_02_Func006C takes nothing returns boolean
    if ( not ( IsUnitAliveBJ(gg_unit_nnsg_0044) == true ) ) then
        return false
    endif
    return true
endfunction

function Trig_BE_02_Func007Func004001001002001 takes nothing returns boolean
    return ( GetUnitTypeId(GetFilterUnit()) == 'nnrg' )
endfunction

function Trig_BE_02_Func007Func004001001002002 takes nothing returns boolean
    return ( IsUnitAliveBJ(GetFilterUnit()) == true )
endfunction

function Trig_BE_02_Func007Func004001001002 takes nothing returns boolean
    return GetBooleanAnd( Trig_BE_02_Func007Func004001001002001(), Trig_BE_02_Func007Func004001001002002() )
endfunction

function Trig_BE_02_Func007C takes nothing returns boolean
    if ( not ( IsUnitAliveBJ(gg_unit_nnsg_0046) == true ) ) then
        return false
    endif
    if ( not ( CountUnitsInGroup(GetUnitsOfPlayerMatching(udg_P10_BloodElfAttack, Condition(function Trig_BE_02_Func007Func004001001002))) < 1 ) ) then
        return false
    endif
    if ( not ( TimerGetRemaining(udg_RoyalGuardTimer) <= 0.00 ) ) then
        return false
    endif
    return true
endfunction

function Trig_BE_02_Actions takes nothing returns nothing
    if ( Trig_BE_02_Func001C() ) then
        call CreateNUnitsAtLoc( 1, 'hsor', udg_P10_BloodElfAttack, GetRectCenter(gg_rct_BE_Arcane_Sanctum_Spawn_01), 270.00 )
    else
    endif
    if ( Trig_BE_02_Func002C() ) then
        call CreateNUnitsAtLoc( 1, 'hhes', udg_P10_BloodElfAttack, GetRectCenter(gg_rct_BE_Barracks_Spawn_01), 270.00 )
    else
    endif
    if ( Trig_BE_02_Func003C() ) then
        call CreateNUnitsAtLoc( 1, 'nhea', udg_P10_BloodElfAttack, GetRectCenter(gg_rct_BE_Barracks_Spawn_02), 270.00 )
    else
        if ( Trig_BE_02_Func003Func001C() ) then
            call CreateNUnitsAtLoc( 1, 'hhes', udg_P10_BloodElfAttack, GetRectCenter(gg_rct_BE_Barracks_Spawn_02), 270.00 )
        else
        endif
    endif
    if ( Trig_BE_02_Func004C() ) then
        call CreateNUnitsAtLoc( 1, 'hhes', udg_P10_BloodElfAttack, GetRectCenter(gg_rct_BE_Barracks_Spawn_03), 270.00 )
    else
    endif
    if ( Trig_BE_02_Func005C() ) then
        call CreateNUnitsAtLoc( 1, 'nsnp', udg_P10_BloodElfAttack, GetRectCenter(gg_rct_BE_Pool_Spawn_01), 270.00 )
    else
        if ( Trig_BE_02_Func005Func001C() ) then
            call CreateNUnitsAtLoc( 1, 'nmyr', udg_P10_BloodElfAttack, GetRectCenter(gg_rct_BE_Pool_Spawn_01), 270.00 )
        else
        endif
    endif
    if ( Trig_BE_02_Func006C() ) then
        call CreateNUnitsAtLoc( 1, 'nmyr', udg_P10_BloodElfAttack, GetRectCenter(gg_rct_BE_Pool_Spawn_02), 270.00 )
    else
    endif
    if ( Trig_BE_02_Func007C() ) then
        call CreateNUnitsAtLoc( 1, 'nnrg', udg_P10_BloodElfAttack, GetRectCenter(gg_rct_BE_Pool_Spawn_03), 270.00 )
        call StartTimerBJ( udg_RoyalGuardTimer, false, 120.00 )
    else
    endif
endfunction

//===========================================================================
function InitTrig_BE_02 takes nothing returns nothing
    set gg_trg_BE_02 = CreateTrigger(  )
    call TriggerAddAction( gg_trg_BE_02, function Trig_BE_02_Actions )
endfunction

//===========================================================================
// Trigger: BE 03
//===========================================================================
function Trig_BE_03_Func001C takes nothing returns boolean
    if ( not ( IsUnitAliveBJ(gg_unit_hars_0040) == true ) ) then
        return false
    endif
    return true
endfunction

function Trig_BE_03_Func002C takes nothing returns boolean
    if ( not ( IsUnitAliveBJ(gg_unit_hbar_0042) == true ) ) then
        return false
    endif
    return true
endfunction

function Trig_BE_03_Func003Func001C takes nothing returns boolean
    if ( not ( IsUnitAliveBJ(gg_unit_hbar_0037) == true ) ) then
        return false
    endif
    return true
endfunction

function Trig_BE_03_Func003Func004001001002001 takes nothing returns boolean
    return ( GetUnitTypeId(GetFilterUnit()) == 'nhea' )
endfunction

function Trig_BE_03_Func003Func004001001002002 takes nothing returns boolean
    return ( IsUnitAliveBJ(GetFilterUnit()) == true )
endfunction

function Trig_BE_03_Func003Func004001001002 takes nothing returns boolean
    return GetBooleanAnd( Trig_BE_03_Func003Func004001001002001(), Trig_BE_03_Func003Func004001001002002() )
endfunction

function Trig_BE_03_Func003C takes nothing returns boolean
    if ( not ( IsUnitAliveBJ(gg_unit_hbar_0037) == true ) ) then
        return false
    endif
    if ( not ( CountUnitsInGroup(GetUnitsOfPlayerMatching(udg_P10_BloodElfAttack, Condition(function Trig_BE_03_Func003Func004001001002))) < 6 ) ) then
        return false
    endif
    return true
endfunction

function Trig_BE_03_Func004C takes nothing returns boolean
    if ( not ( IsUnitAliveBJ(gg_unit_hbar_0041) == true ) ) then
        return false
    endif
    return true
endfunction

function Trig_BE_03_Func005C takes nothing returns boolean
    if ( not ( IsUnitAliveBJ(gg_unit_nnsg_0045) == true ) ) then
        return false
    endif
    return true
endfunction

function Trig_BE_03_Func006Func004001001002001 takes nothing returns boolean
    return ( GetUnitTypeId(GetFilterUnit()) == 'nnrg' )
endfunction

function Trig_BE_03_Func006Func004001001002002 takes nothing returns boolean
    return ( IsUnitAliveBJ(GetFilterUnit()) == true )
endfunction

function Trig_BE_03_Func006Func004001001002 takes nothing returns boolean
    return GetBooleanAnd( Trig_BE_03_Func006Func004001001002001(), Trig_BE_03_Func006Func004001001002002() )
endfunction

function Trig_BE_03_Func006C takes nothing returns boolean
    if ( not ( IsUnitAliveBJ(gg_unit_nnsg_0044) == true ) ) then
        return false
    endif
    if ( not ( CountUnitsInGroup(GetUnitsOfPlayerMatching(udg_P10_BloodElfAttack, Condition(function Trig_BE_03_Func006Func004001001002))) < 1 ) ) then
        return false
    endif
    if ( not ( TimerGetRemaining(udg_RoyalGuardTimer) <= 0.00 ) ) then
        return false
    endif
    return true
endfunction

function Trig_BE_03_Func007C takes nothing returns boolean
    if ( not ( IsUnitAliveBJ(gg_unit_nnsg_0046) == true ) ) then
        return false
    endif
    return true
endfunction

function Trig_BE_03_Actions takes nothing returns nothing
    if ( Trig_BE_03_Func001C() ) then
        call CreateNUnitsAtLoc( 1, 'hmpr', udg_P10_BloodElfAttack, GetRectCenter(gg_rct_BE_Arcane_Sanctum_Spawn_01), 270.00 )
    else
    endif
    if ( Trig_BE_03_Func002C() ) then
        call CreateNUnitsAtLoc( 1, 'hhes', udg_P10_BloodElfAttack, GetRectCenter(gg_rct_BE_Barracks_Spawn_01), 270.00 )
    else
    endif
    if ( Trig_BE_03_Func003C() ) then
        call CreateNUnitsAtLoc( 1, 'nhea', udg_P10_BloodElfAttack, GetRectCenter(gg_rct_BE_Barracks_Spawn_02), 270.00 )
    else
        if ( Trig_BE_03_Func003Func001C() ) then
            call CreateNUnitsAtLoc( 1, 'hhes', udg_P10_BloodElfAttack, GetRectCenter(gg_rct_BE_Barracks_Spawn_02), 270.00 )
        else
        endif
    endif
    if ( Trig_BE_03_Func004C() ) then
        call CreateNUnitsAtLoc( 1, 'hhes', udg_P10_BloodElfAttack, GetRectCenter(gg_rct_BE_Barracks_Spawn_03), 270.00 )
    else
    endif
    if ( Trig_BE_03_Func005C() ) then
        call CreateNUnitsAtLoc( 1, 'nsnp', udg_P10_BloodElfAttack, GetRectCenter(gg_rct_BE_Pool_Spawn_01), 270.00 )
    else
    endif
    if ( Trig_BE_03_Func006C() ) then
        call CreateNUnitsAtLoc( 1, 'nnrg', udg_P10_BloodElfAttack, GetRectCenter(gg_rct_BE_Pool_Spawn_02), 270.00 )
        call StartTimerBJ( udg_RoyalGuardTimer, false, 120.00 )
    else
    endif
    if ( Trig_BE_03_Func007C() ) then
        call CreateNUnitsAtLoc( 1, 'nmyr', udg_P10_BloodElfAttack, GetRectCenter(gg_rct_BE_Pool_Spawn_03), 270.00 )
    else
    endif
endfunction

//===========================================================================
function InitTrig_BE_03 takes nothing returns nothing
    set gg_trg_BE_03 = CreateTrigger(  )
    call TriggerAddAction( gg_trg_BE_03, function Trig_BE_03_Actions )
endfunction

//===========================================================================
// Trigger: NE 01
//===========================================================================
function Trig_NE_01_Func001C takes nothing returns boolean
    if ( not ( IsUnitAliveBJ(gg_unit_eaom_0009) == true ) ) then
        return false
    endif
    return true
endfunction

function Trig_NE_01_Func002C takes nothing returns boolean
    if ( not ( IsUnitAliveBJ(gg_unit_eaom_0031) == true ) ) then
        return false
    endif
    return true
endfunction

function Trig_NE_01_Func003C takes nothing returns boolean
    if ( not ( IsUnitAliveBJ(gg_unit_eaom_0010) == true ) ) then
        return false
    endif
    return true
endfunction

function Trig_NE_01_Func004C takes nothing returns boolean
    if ( not ( IsUnitAliveBJ(gg_unit_eaom_0008) == true ) ) then
        return false
    endif
    return true
endfunction

function Trig_NE_01_Func005C takes nothing returns boolean
    if ( not ( IsUnitAliveBJ(gg_unit_eaoe_0030) == true ) ) then
        return false
    endif
    return true
endfunction

function Trig_NE_01_Func006C takes nothing returns boolean
    if ( not ( IsUnitAliveBJ(gg_unit_eaoe_0011) == true ) ) then
        return false
    endif
    return true
endfunction

function Trig_NE_01_Func007C takes nothing returns boolean
    if ( not ( IsUnitAliveBJ(gg_unit_eaoe_0012) == true ) ) then
        return false
    endif
    return true
endfunction

function Trig_NE_01_Func008C takes nothing returns boolean
    if ( not ( IsUnitAliveBJ(gg_unit_eaow_0013) == true ) ) then
        return false
    endif
    return true
endfunction

function Trig_NE_01_Actions takes nothing returns nothing
    if ( Trig_NE_01_Func001C() ) then
        call CreateNUnitsAtLoc( 1, 'earc', udg_P11_NightElfAttack, GetRectCenter(gg_rct_NE_Ancient_of_War_Spawn_01), 90.00 )
    else
    endif
    if ( Trig_NE_01_Func002C() ) then
        call CreateNUnitsAtLoc( 1, 'earc', udg_P11_NightElfAttack, GetRectCenter(gg_rct_NE_Ancient_of_War_Spawn_02), 90.00 )
    else
    endif
    if ( Trig_NE_01_Func003C() ) then
        call CreateNUnitsAtLoc( 1, 'esen', udg_P11_NightElfAttack, GetRectCenter(gg_rct_NE_Ancient_of_War_Spawn_03), 90.00 )
    else
    endif
    if ( Trig_NE_01_Func004C() ) then
        call CreateNUnitsAtLoc( 1, 'esen', udg_P11_NightElfAttack, GetRectCenter(gg_rct_NE_Ancient_of_War_Spawn_04), 90.00 )
    else
    endif
    if ( Trig_NE_01_Func005C() ) then
        call CreateNUnitsAtLoc( 1, 'edry', udg_P11_NightElfAttack, GetRectCenter(gg_rct_NE_Ancient_of_Lore_Spawn_01), 90.00 )
    else
    endif
    if ( Trig_NE_01_Func006C() ) then
        call CreateNUnitsAtLoc( 1, 'edoc', udg_P11_NightElfAttack, GetRectCenter(gg_rct_NE_Ancient_of_Lore_Spawn_02), 90.00 )
        call IssueImmediateOrderBJ( GetLastCreatedUnit(), "bearform" )
    else
    endif
    if ( Trig_NE_01_Func007C() ) then
        call CreateNUnitsAtLoc( 1, 'edoc', udg_P11_NightElfAttack, GetRectCenter(gg_rct_NE_Ancient_of_Lore_Spawn_03), 90.00 )
    else
    endif
    if ( Trig_NE_01_Func008C() ) then
        call CreateNUnitsAtLoc( 1, 'edot', udg_P11_NightElfAttack, GetRectCenter(gg_rct_NE_Ancient_of_Wind_Spawn_01), 90.00 )
    else
    endif
endfunction

//===========================================================================
function InitTrig_NE_01 takes nothing returns nothing
    set gg_trg_NE_01 = CreateTrigger(  )
    call TriggerAddAction( gg_trg_NE_01, function Trig_NE_01_Actions )
endfunction

//===========================================================================
// Trigger: NE 02
//===========================================================================
function Trig_NE_02_Func001C takes nothing returns boolean
    if ( not ( IsUnitAliveBJ(gg_unit_eaom_0009) == true ) ) then
        return false
    endif
    return true
endfunction

function Trig_NE_02_Func002C takes nothing returns boolean
    if ( not ( IsUnitAliveBJ(gg_unit_eaom_0031) == true ) ) then
        return false
    endif
    return true
endfunction

function Trig_NE_02_Func003C takes nothing returns boolean
    if ( not ( IsUnitAliveBJ(gg_unit_eaom_0010) == true ) ) then
        return false
    endif
    return true
endfunction

function Trig_NE_02_Func004C takes nothing returns boolean
    if ( not ( IsUnitAliveBJ(gg_unit_eaom_0008) == true ) ) then
        return false
    endif
    return true
endfunction

function Trig_NE_02_Func005C takes nothing returns boolean
    if ( not ( IsUnitAliveBJ(gg_unit_eaoe_0030) == true ) ) then
        return false
    endif
    return true
endfunction

function Trig_NE_02_Func006C takes nothing returns boolean
    if ( not ( IsUnitAliveBJ(gg_unit_eaoe_0011) == true ) ) then
        return false
    endif
    return true
endfunction

function Trig_NE_02_Func007Func003001001002001 takes nothing returns boolean
    return ( GetUnitTypeId(GetFilterUnit()) == 'emtg' )
endfunction

function Trig_NE_02_Func007Func003001001002002 takes nothing returns boolean
    return ( IsUnitAliveBJ(GetFilterUnit()) == true )
endfunction

function Trig_NE_02_Func007Func003001001002 takes nothing returns boolean
    return GetBooleanAnd( Trig_NE_02_Func007Func003001001002001(), Trig_NE_02_Func007Func003001001002002() )
endfunction

function Trig_NE_02_Func007C takes nothing returns boolean
    if ( not ( IsUnitAliveBJ(gg_unit_eaoe_0012) == true ) ) then
        return false
    endif
    if ( not ( CountUnitsInGroup(GetUnitsOfPlayerMatching(udg_P11_NightElfAttack, Condition(function Trig_NE_02_Func007Func003001001002))) < 2 ) ) then
        return false
    endif
    return true
endfunction

function Trig_NE_02_Func008C takes nothing returns boolean
    if ( not ( IsUnitAliveBJ(gg_unit_eaow_0013) == true ) ) then
        return false
    endif
    return true
endfunction

function Trig_NE_02_Actions takes nothing returns nothing
    if ( Trig_NE_02_Func001C() ) then
        call CreateNUnitsAtLoc( 1, 'earc', udg_P11_NightElfAttack, GetRectCenter(gg_rct_NE_Ancient_of_War_Spawn_01), 90.00 )
    else
    endif
    if ( Trig_NE_02_Func002C() ) then
        call CreateNUnitsAtLoc( 1, 'earc', udg_P11_NightElfAttack, GetRectCenter(gg_rct_NE_Ancient_of_War_Spawn_02), 90.00 )
    else
    endif
    if ( Trig_NE_02_Func003C() ) then
        call CreateNUnitsAtLoc( 1, 'esen', udg_P11_NightElfAttack, GetRectCenter(gg_rct_NE_Ancient_of_War_Spawn_03), 90.00 )
    else
    endif
    if ( Trig_NE_02_Func004C() ) then
        call CreateNUnitsAtLoc( 1, 'esen', udg_P11_NightElfAttack, GetRectCenter(gg_rct_NE_Ancient_of_War_Spawn_04), 90.00 )
    else
    endif
    if ( Trig_NE_02_Func005C() ) then
        call CreateNUnitsAtLoc( 1, 'edry', udg_P11_NightElfAttack, GetRectCenter(gg_rct_NE_Ancient_of_Lore_Spawn_01), 90.00 )
    else
    endif
    if ( Trig_NE_02_Func006C() ) then
        call CreateNUnitsAtLoc( 1, 'edoc', udg_P11_NightElfAttack, GetRectCenter(gg_rct_NE_Ancient_of_Lore_Spawn_02), 90.00 )
        call IssueImmediateOrderBJ( GetLastCreatedUnit(), "bearform" )
    else
    endif
    if ( Trig_NE_02_Func007C() ) then
        call CreateNUnitsAtLoc( 1, 'emtg', udg_P11_NightElfAttack, GetRectCenter(gg_rct_NE_Ancient_of_Lore_Spawn_03), 90.00 )
    else
    endif
    if ( Trig_NE_02_Func008C() ) then
    else
    endif
endfunction

//===========================================================================
function InitTrig_NE_02 takes nothing returns nothing
    set gg_trg_NE_02 = CreateTrigger(  )
    call TriggerAddAction( gg_trg_NE_02, function Trig_NE_02_Actions )
endfunction

//===========================================================================
// Trigger: Adjustment Timer Expires
//===========================================================================
function Trig_Adjustment_Timer_Expires_Func008C takes nothing returns boolean
    if ( not ( udg_DebugOn == true ) ) then
        return false
    endif
    return true
endfunction

function Trig_Adjustment_Timer_Expires_Actions takes nothing returns nothing
    // Adjust Timer Length
    call ConditionalTriggerExecute( gg_trg_Adjust_by_Unit_Comparison_Count )
    call ConditionalTriggerExecute( gg_trg_Adjust_by_Wagon_proximity_to_BE_Base )
    call ConditionalTriggerExecute( gg_trg_Adjust_by_Wagon_proximity_to_NE_Base )
    call ConditionalTriggerExecute( gg_trg_Adjust_by_Number_of_Units )
    call ConditionalTriggerExecute( gg_trg_Limit_TimerLengths )
    call ConditionalTriggerExecute( gg_trg_Sync_Timers_to_TimerLength )
    if ( Trig_Adjustment_Timer_Expires_Func008C() ) then
        call DisplayTimedTextToForce( GetPlayersAll(), 10.00, ( "|cffff0000" + ( R2S(udg_BETimerLength) + "|r" ) ) )
        call DisplayTimedTextToForce( GetPlayersAll(), 10.00, ( "|cff0000ff" + ( R2S(udg_NETimerLength) + "|r" ) ) )
    else
    endif
endfunction

//===========================================================================
function InitTrig_Adjustment_Timer_Expires takes nothing returns nothing
    set gg_trg_Adjustment_Timer_Expires = CreateTrigger(  )
    call TriggerRegisterTimerExpireEventBJ( gg_trg_Adjustment_Timer_Expires, udg_BuildTimerAdjustmentTimer )
    call TriggerAddAction( gg_trg_Adjustment_Timer_Expires, function Trig_Adjustment_Timer_Expires_Actions )
endfunction

//===========================================================================
// Trigger: Adjust by Unit Comparison Count
//===========================================================================
function Trig_Adjust_by_Unit_Comparison_Count_Func001002001002 takes nothing returns boolean
    return ( IsUnitAliveBJ(GetFilterUnit()) == true )
endfunction

function Trig_Adjust_by_Unit_Comparison_Count_Func002002001002 takes nothing returns boolean
    return ( IsUnitAliveBJ(GetFilterUnit()) == true )
endfunction

function Trig_Adjust_by_Unit_Comparison_Count_Actions takes nothing returns nothing
    set udg_BEUnitCount = CountUnitsInGroup(GetUnitsOfPlayerMatching(udg_P10_BloodElfAttack, Condition(function Trig_Adjust_by_Unit_Comparison_Count_Func001002001002)))
    set udg_NEUnitCount = CountUnitsInGroup(GetUnitsOfPlayerMatching(udg_P11_NightElfAttack, Condition(function Trig_Adjust_by_Unit_Comparison_Count_Func002002001002)))
    set udg_UnitDifference = ( udg_BEUnitCount - udg_NEUnitCount )
    set udg_BETimerLength = ( udg_BETimerLength + ( I2R(udg_UnitDifference) / 1.50 ) )
    set udg_NETimerLength = ( udg_NETimerLength - ( I2R(udg_UnitDifference) / 1.50 ) )
endfunction

//===========================================================================
function InitTrig_Adjust_by_Unit_Comparison_Count takes nothing returns nothing
    set gg_trg_Adjust_by_Unit_Comparison_Count = CreateTrigger(  )
    call TriggerAddAction( gg_trg_Adjust_by_Unit_Comparison_Count, function Trig_Adjust_by_Unit_Comparison_Count_Actions )
endfunction

//===========================================================================
// Trigger: Adjust by Wagon proximity to BE Base
//===========================================================================
function Trig_Adjust_by_Wagon_proximity_to_BE_Base_Conditions takes nothing returns boolean
    if ( not ( GetOwningPlayer(udg_Wagon) == udg_P3_IllidanCage ) ) then
        return false
    endif
    return true
endfunction

function Trig_Adjust_by_Wagon_proximity_to_BE_Base_Func003Func001C takes nothing returns boolean
    if ( not ( udg_DebugOn == true ) ) then
        return false
    endif
    return true
endfunction

function Trig_Adjust_by_Wagon_proximity_to_BE_Base_Func003C takes nothing returns boolean
    if ( not ( udg_RangeFactor >= 0.00 ) ) then
        return false
    endif
    return true
endfunction

function Trig_Adjust_by_Wagon_proximity_to_BE_Base_Actions takes nothing returns nothing
    set udg_RangeWagonToPlayerGoal = DistanceBetweenPoints(GetUnitLoc(udg_Wagon), GetUnitLoc(gg_unit_n000_0124))
    set udg_RangeFactor = ( -20.00 + ( udg_RangeWagonToPlayerGoal / 600.00 ) )
    if ( Trig_Adjust_by_Wagon_proximity_to_BE_Base_Func003C() ) then
        set udg_RangeFactor = 0.00
    else
        if ( Trig_Adjust_by_Wagon_proximity_to_BE_Base_Func003Func001C() ) then
            call DisplayTimedTextToForce( GetPlayersAll(), 10.00, ( "RF = " + R2S(udg_RangeFactor) ) )
        else
        endif
    endif
    set udg_NETimerLength = ( udg_NETimerLength + udg_RangeFactor )
    set udg_BETimerLength = ( udg_BETimerLength - udg_RangeFactor )
    set udg_BETimerMinimum = ( udg_BETimerBaseMinimum - ( udg_RangeFactor * 2.25 ) )
endfunction

//===========================================================================
function InitTrig_Adjust_by_Wagon_proximity_to_BE_Base takes nothing returns nothing
    set gg_trg_Adjust_by_Wagon_proximity_to_BE_Base = CreateTrigger(  )
    call TriggerAddCondition( gg_trg_Adjust_by_Wagon_proximity_to_BE_Base, Condition( function Trig_Adjust_by_Wagon_proximity_to_BE_Base_Conditions ) )
    call TriggerAddAction( gg_trg_Adjust_by_Wagon_proximity_to_BE_Base, function Trig_Adjust_by_Wagon_proximity_to_BE_Base_Actions )
endfunction

//===========================================================================
// Trigger: Adjust by Wagon proximity to NE Base
//===========================================================================
function Trig_Adjust_by_Wagon_proximity_to_NE_Base_Conditions takes nothing returns boolean
    if ( not ( GetOwningPlayer(udg_Wagon) == udg_P5_Maiev ) ) then
        return false
    endif
    return true
endfunction

function Trig_Adjust_by_Wagon_proximity_to_NE_Base_Func003C takes nothing returns boolean
    if ( not ( udg_RangeFactor <= 0.00 ) ) then
        return false
    endif
    return true
endfunction

function Trig_Adjust_by_Wagon_proximity_to_NE_Base_Func004C takes nothing returns boolean
    if ( not ( udg_DebugOn == true ) ) then
        return false
    endif
    return true
endfunction

function Trig_Adjust_by_Wagon_proximity_to_NE_Base_Actions takes nothing returns nothing
    set udg_RangeWagonToPlayerGoal = DistanceBetweenPoints(GetUnitLoc(gg_unit_ncp3_0097), GetUnitLoc(udg_Wagon))
    set udg_RangeFactor = ( 10.00 - ( udg_RangeWagonToPlayerGoal / 600.00 ) )
    if ( Trig_Adjust_by_Wagon_proximity_to_NE_Base_Func003C() ) then
        set udg_RangeFactor = 0.00
    else
    endif
    if ( Trig_Adjust_by_Wagon_proximity_to_NE_Base_Func004C() ) then
        call DisplayTimedTextToForce( GetPlayersAll(), 10.00, ( "RF = " + R2S(udg_RangeFactor) ) )
    else
    endif
    set udg_NETimerLength = ( udg_NETimerLength + udg_RangeFactor )
    set udg_BETimerLength = ( udg_BETimerLength - udg_RangeFactor )
    set udg_NETimerMinimum = ( udg_NETimerBaseMinimum + ( udg_RangeFactor * 4.00 ) )
endfunction

//===========================================================================
function InitTrig_Adjust_by_Wagon_proximity_to_NE_Base takes nothing returns nothing
    set gg_trg_Adjust_by_Wagon_proximity_to_NE_Base = CreateTrigger(  )
    call TriggerAddCondition( gg_trg_Adjust_by_Wagon_proximity_to_NE_Base, Condition( function Trig_Adjust_by_Wagon_proximity_to_NE_Base_Conditions ) )
    call TriggerAddAction( gg_trg_Adjust_by_Wagon_proximity_to_NE_Base, function Trig_Adjust_by_Wagon_proximity_to_NE_Base_Actions )
endfunction

//===========================================================================
// Trigger: Adjust by Number of Units
//===========================================================================
function Trig_Adjust_by_Number_of_Units_Func001002001002 takes nothing returns boolean
    return ( IsUnitAliveBJ(GetFilterUnit()) == true )
endfunction

function Trig_Adjust_by_Number_of_Units_Func002002001002 takes nothing returns boolean
    return ( IsUnitAliveBJ(GetFilterUnit()) == true )
endfunction

function Trig_Adjust_by_Number_of_Units_Func004C takes nothing returns boolean
    if ( not ( GetGameDifficulty() == MAP_DIFFICULTY_HARD ) ) then
        return false
    endif
    return true
endfunction

function Trig_Adjust_by_Number_of_Units_Func006C takes nothing returns boolean
    if ( not ( GetGameDifficulty() == MAP_DIFFICULTY_HARD ) ) then
        return false
    endif
    return true
endfunction

function Trig_Adjust_by_Number_of_Units_Actions takes nothing returns nothing
    set udg_BEUnitCount = CountUnitsInGroup(GetUnitsOfPlayerMatching(udg_P10_BloodElfAttack, Condition(function Trig_Adjust_by_Number_of_Units_Func001002001002)))
    set udg_NEUnitCount = CountUnitsInGroup(GetUnitsOfPlayerMatching(udg_P11_NightElfAttack, Condition(function Trig_Adjust_by_Number_of_Units_Func002002001002)))
    set udg_NETimerLength = ( udg_NETimerLength - 1.00 )
    if ( Trig_Adjust_by_Number_of_Units_Func004C() ) then
        set udg_NETimerLength = ( udg_NETimerLength + ( I2R(udg_NEUnitCount) / 10.00 ) )
    else
        set udg_NETimerLength = ( udg_NETimerLength + ( I2R(udg_NEUnitCount) / 8.00 ) )
    endif
    set udg_BETimerLength = ( udg_BETimerLength - 1.00 )
    if ( Trig_Adjust_by_Number_of_Units_Func006C() ) then
        set udg_BETimerLength = ( udg_BETimerLength + ( I2R(udg_BEUnitCount) / 10.00 ) )
    else
        set udg_BETimerLength = ( udg_BETimerLength + ( I2R(udg_BEUnitCount) / 12.00 ) )
    endif
endfunction

//===========================================================================
function InitTrig_Adjust_by_Number_of_Units takes nothing returns nothing
    set gg_trg_Adjust_by_Number_of_Units = CreateTrigger(  )
    call TriggerAddAction( gg_trg_Adjust_by_Number_of_Units, function Trig_Adjust_by_Number_of_Units_Actions )
endfunction

//===========================================================================
// Trigger: Limit TimerLengths
//===========================================================================
function Trig_Limit_TimerLengths_Func002C takes nothing returns boolean
    if ( not ( udg_BETimerLength >= ( udg_BETimerLengthLast + udg_BEVolatilityLimit ) ) ) then
        return false
    endif
    return true
endfunction

function Trig_Limit_TimerLengths_Func003C takes nothing returns boolean
    if ( not ( udg_BETimerLength <= ( udg_BETimerLengthLast - udg_BEVolatilityLimit ) ) ) then
        return false
    endif
    return true
endfunction

function Trig_Limit_TimerLengths_Func004C takes nothing returns boolean
    if ( not ( udg_NETimerLength >= ( udg_NETimerLengthLast + udg_NEVolatilityLimit ) ) ) then
        return false
    endif
    return true
endfunction

function Trig_Limit_TimerLengths_Func005C takes nothing returns boolean
    if ( not ( udg_NETimerLength <= ( udg_NETimerLengthLast - udg_NEVolatilityLimit ) ) ) then
        return false
    endif
    return true
endfunction

function Trig_Limit_TimerLengths_Func007C takes nothing returns boolean
    if ( not ( udg_NETimerLength < udg_NETimerMinimum ) ) then
        return false
    endif
    return true
endfunction

function Trig_Limit_TimerLengths_Func008C takes nothing returns boolean
    if ( not ( udg_NETimerLength > udg_NETimerMaximum ) ) then
        return false
    endif
    return true
endfunction

function Trig_Limit_TimerLengths_Func009C takes nothing returns boolean
    if ( not ( udg_BETimerLength < udg_BETimerMinimum ) ) then
        return false
    endif
    return true
endfunction

function Trig_Limit_TimerLengths_Func010C takes nothing returns boolean
    if ( not ( udg_BETimerLength > udg_BETimerMaximum ) ) then
        return false
    endif
    return true
endfunction

function Trig_Limit_TimerLengths_Actions takes nothing returns nothing
    // LIMIT TIMER LENGTH VOLATILITY
    if ( Trig_Limit_TimerLengths_Func002C() ) then
        set udg_BETimerLength = ( udg_BETimerLengthLast + udg_BEVolatilityLimit )
    else
    endif
    if ( Trig_Limit_TimerLengths_Func003C() ) then
        set udg_BETimerLength = ( udg_BETimerLengthLast - udg_BEVolatilityLimit )
    else
    endif
    if ( Trig_Limit_TimerLengths_Func004C() ) then
        set udg_NETimerLength = ( udg_NETimerLengthLast + udg_NEVolatilityLimit )
    else
    endif
    if ( Trig_Limit_TimerLengths_Func005C() ) then
        set udg_NETimerLength = ( udg_NETimerLengthLast - udg_NEVolatilityLimit )
    else
    endif
    // ENFORCE TIMER LENGTH LIMITS
    if ( Trig_Limit_TimerLengths_Func007C() ) then
        set udg_NETimerLength = udg_NETimerMinimum
    else
    endif
    if ( Trig_Limit_TimerLengths_Func008C() ) then
        set udg_NETimerLength = udg_NETimerMaximum
    else
    endif
    if ( Trig_Limit_TimerLengths_Func009C() ) then
        set udg_BETimerLength = udg_BETimerMinimum
    else
    endif
    if ( Trig_Limit_TimerLengths_Func010C() ) then
        set udg_BETimerLength = udg_BETimerMaximum
    else
    endif
    // SAVE TIMER LENGTH
    set udg_BETimerLengthLast = udg_BETimerLength
    set udg_NETimerLengthLast = udg_NETimerLength
endfunction

//===========================================================================
function InitTrig_Limit_TimerLengths takes nothing returns nothing
    set gg_trg_Limit_TimerLengths = CreateTrigger(  )
    call TriggerAddAction( gg_trg_Limit_TimerLengths, function Trig_Limit_TimerLengths_Actions )
endfunction

//===========================================================================
// Trigger: Sync Timers to TimerLength
//===========================================================================
function Trig_Sync_Timers_to_TimerLength_Func001C takes nothing returns boolean
    if ( not ( udg_BETimerLength <= TimerGetRemaining(udg_BEBuildTimer) ) ) then
        return false
    endif
    return true
endfunction

function Trig_Sync_Timers_to_TimerLength_Func002C takes nothing returns boolean
    if ( not ( udg_NETimerLength <= TimerGetRemaining(udg_NEBuildTimer) ) ) then
        return false
    endif
    return true
endfunction

function Trig_Sync_Timers_to_TimerLength_Actions takes nothing returns nothing
    if ( Trig_Sync_Timers_to_TimerLength_Func001C() ) then
        call StartTimerBJ( udg_BEBuildTimer, false, udg_BETimerLength )
    else
    endif
    if ( Trig_Sync_Timers_to_TimerLength_Func002C() ) then
        call StartTimerBJ( udg_NEBuildTimer, false, udg_NETimerLength )
    else
    endif
endfunction

//===========================================================================
function InitTrig_Sync_Timers_to_TimerLength takes nothing returns nothing
    set gg_trg_Sync_Timers_to_TimerLength = CreateTrigger(  )
    call TriggerAddAction( gg_trg_Sync_Timers_to_TimerLength, function Trig_Sync_Timers_to_TimerLength_Actions )
endfunction

//===========================================================================
// Trigger: BE Base Attacked
//===========================================================================
function Trig_BE_Base_Attacked_Conditions takes nothing returns boolean
    if ( not ( GetOwningPlayer(GetAttacker()) == udg_P11_NightElfAttack ) ) then
        return false
    endif
    return true
endfunction

function Trig_BE_Base_Attacked_Func002C takes nothing returns boolean
    if ( not ( GetGameDifficulty() == MAP_DIFFICULTY_HARD ) ) then
        return false
    endif
    return true
endfunction

function Trig_BE_Base_Attacked_Actions takes nothing returns nothing
    call StartTimerBJ( udg_BEBaseAttackedTimer, false, 30.00 )
    if ( Trig_BE_Base_Attacked_Func002C() ) then
        set udg_BEVolatilityLimit = 10.00
    else
        set udg_BEVolatilityLimit = 20.00
    endif
endfunction

//===========================================================================
function InitTrig_BE_Base_Attacked takes nothing returns nothing
    set gg_trg_BE_Base_Attacked = CreateTrigger(  )
    call TriggerRegisterPlayerUnitEventSimple( gg_trg_BE_Base_Attacked, Player(7), EVENT_PLAYER_UNIT_ATTACKED )
    call TriggerAddCondition( gg_trg_BE_Base_Attacked, Condition( function Trig_BE_Base_Attacked_Conditions ) )
    call TriggerAddAction( gg_trg_BE_Base_Attacked, function Trig_BE_Base_Attacked_Actions )
endfunction

//===========================================================================
// Trigger: BE Base Attacked Reset
//===========================================================================
function Trig_BE_Base_Attacked_Reset_Actions takes nothing returns nothing
    set udg_BEVolatilityLimit = 4.00
endfunction

//===========================================================================
function InitTrig_BE_Base_Attacked_Reset takes nothing returns nothing
    set gg_trg_BE_Base_Attacked_Reset = CreateTrigger(  )
    call TriggerRegisterTimerExpireEventBJ( gg_trg_BE_Base_Attacked_Reset, udg_BEBaseAttackedTimer )
    call TriggerAddAction( gg_trg_BE_Base_Attacked_Reset, function Trig_BE_Base_Attacked_Reset_Actions )
endfunction

//===========================================================================
// Trigger: Give Wagon to Player
//===========================================================================
function Trig_Give_Wagon_to_Player_Conditions takes nothing returns boolean
    if ( not ( udg_InCinematic == false ) ) then
        return false
    endif
    if ( not ( udg_GameOver == false ) ) then
        return false
    endif
    if ( not ( GetOwningPlayer(udg_Wagon) == udg_P5_Maiev ) ) then
        return false
    endif
    if ( not ( TimerGetRemaining(udg_TransferOwnerTimer) <= 0.00 ) ) then
        return false
    endif
    return true
endfunction

function Trig_Give_Wagon_to_Player_Func005C takes nothing returns boolean
    if ( not ( udg_Brewmaster != null ) ) then
        return false
    endif
    return true
endfunction

function Trig_Give_Wagon_to_Player_Func006Func017Func001C takes nothing returns boolean
    if ( not ( GetEnumUnit() != udg_Maiev ) ) then
        return false
    endif
    return true
endfunction

function Trig_Give_Wagon_to_Player_Func006Func017A takes nothing returns nothing
    if ( Trig_Give_Wagon_to_Player_Func006Func017Func001C() ) then
        call IssuePointOrderLocBJ( GetEnumUnit(), "attack", GetRectCenter(gg_rct_BloodElfGoal) )
        call SetUnitOwner( GetEnumUnit(), udg_P11_NightElfAttack, true )
    else
    endif
endfunction

function Trig_Give_Wagon_to_Player_Func006Func024C takes nothing returns boolean
    if ( ( IsUnitDeadBJ(udg_Maiev) == true ) ) then
        return true
    endif
    if ( ( DistanceBetweenPoints(udg_TempPointA, udg_TempPointB) > udg_WagonControlRadius ) ) then
        return true
    endif
    return false
endfunction

function Trig_Give_Wagon_to_Player_Func006Func025Func001C takes nothing returns boolean
    if ( not ( IsUnitAliveBJ(udg_Kael) == true ) ) then
        return false
    endif
    if ( not ( DistanceBetweenPoints(udg_TempPointA, udg_TempPointC) <= udg_WagonControlRadius ) ) then
        return false
    endif
    return true
endfunction

function Trig_Give_Wagon_to_Player_Func006Func025Func002C takes nothing returns boolean
    if ( not ( IsUnitAliveBJ(udg_Vashj) == true ) ) then
        return false
    endif
    if ( not ( DistanceBetweenPoints(udg_TempPointA, udg_TempPointD) <= udg_WagonControlRadius ) ) then
        return false
    endif
    return true
endfunction

function Trig_Give_Wagon_to_Player_Func006Func025Func003C takes nothing returns boolean
    if ( not ( udg_Brewmaster != null ) ) then
        return false
    endif
    if ( not ( IsUnitAliveBJ(udg_Brewmaster) == true ) ) then
        return false
    endif
    if ( not ( DistanceBetweenPoints(udg_TempPointA, udg_TempPointE) <= udg_WagonControlRadius ) ) then
        return false
    endif
    return true
endfunction

function Trig_Give_Wagon_to_Player_Func006Func025C takes nothing returns boolean
    if ( Trig_Give_Wagon_to_Player_Func006Func025Func001C() ) then
        return true
    endif
    if ( Trig_Give_Wagon_to_Player_Func006Func025Func002C() ) then
        return true
    endif
    if ( Trig_Give_Wagon_to_Player_Func006Func025Func003C() ) then
        return true
    endif
    return false
endfunction

function Trig_Give_Wagon_to_Player_Func006C takes nothing returns boolean
    if ( not Trig_Give_Wagon_to_Player_Func006Func024C() ) then
        return false
    endif
    if ( not Trig_Give_Wagon_to_Player_Func006Func025C() ) then
        return false
    endif
    return true
endfunction

function Trig_Give_Wagon_to_Player_Actions takes nothing returns nothing
    set udg_TempPointA = GetUnitLoc(udg_Wagon)
    set udg_TempPointB = GetUnitLoc(udg_Maiev)
    set udg_TempPointC = GetUnitLoc(udg_Kael)
    set udg_TempPointD = GetUnitLoc(udg_Vashj)
    if ( Trig_Give_Wagon_to_Player_Func005C() ) then
        set udg_TempPointE = GetUnitLoc(udg_Brewmaster)
    else
        set udg_TempPointE = GetUnitLoc(gg_unit_hcas_0000)
    endif
    if ( Trig_Give_Wagon_to_Player_Func006C() ) then
        // Turn off how to get control hint
        call DisableTrigger( gg_trg_Maiev_Dies_First_Time )
        // Start TransferTimer
        call StartTimerBJ( udg_TransferOwnerTimer, false, 5.00 )
        // Change Leaderboard
        call ConditionalTriggerExecute( gg_trg_Change_Board_to_Player )
        // Pause Caravan
        call ConditionalTriggerExecute( gg_trg_Caravan_Orders_Pause )
        // Change Wagon Owner
        call SetUnitOwner( udg_Wagon, udg_P3_IllidanCage, true )
        call IssuePointOrderLocBJ( udg_Wagon, "move", GetRectCenter(gg_rct_BloodElfGoal) )
        call StartTimerBJ( udg_WagonHeartbeat, true, 4.00 )
        // Reset Timer Minimums
        set udg_NETimerMinimum = udg_NETimerBaseMinimum
        set udg_BETimerMinimum = udg_BETimerBaseMinimum
        // Free Guards to Suicide
        call ForGroupBJ( udg_CaravanGuardsGroup, function Trig_Give_Wagon_to_Player_Func006Func017A )
        call GroupClear( udg_CaravanGuardsGroup )
        call SetUnitMoveSpeed( udg_Maiev, GetUnitDefaultMoveSpeed(udg_Maiev) )
        call StartTimerBJ( udg_MaievOrderPulse, true, 5.00 )
        // Acknowledge ownership change to player
        call ConditionalTriggerExecute( gg_trg_Player_gets_Wagon_First_Time )
        call ConditionalTriggerExecute( gg_trg_Player_gets_Wagon_Subsequent_Times )
    else
    endif
    call RemoveLocation( udg_TempPointA )
    call RemoveLocation( udg_TempPointB )
    call RemoveLocation( udg_TempPointC )
    call RemoveLocation( udg_TempPointD )
    call RemoveLocation( udg_TempPointE )
endfunction

//===========================================================================
function InitTrig_Give_Wagon_to_Player takes nothing returns nothing
    set gg_trg_Give_Wagon_to_Player = CreateTrigger(  )
    call TriggerRegisterTimerEventPeriodic( gg_trg_Give_Wagon_to_Player, 2 )
    call TriggerAddCondition( gg_trg_Give_Wagon_to_Player, Condition( function Trig_Give_Wagon_to_Player_Conditions ) )
    call TriggerAddAction( gg_trg_Give_Wagon_to_Player, function Trig_Give_Wagon_to_Player_Actions )
endfunction

//===========================================================================
// Trigger: Force Wagon Moves
//===========================================================================
function Trig_Force_Wagon_Moves_Conditions takes nothing returns boolean
    if ( not ( udg_InCinematic == false ) ) then
        return false
    endif
    if ( not ( udg_GameOver == false ) ) then
        return false
    endif
    return true
endfunction

function Trig_Force_Wagon_Moves_Actions takes nothing returns nothing
    call IssuePointOrderLocBJ( udg_Wagon, "move", GetRectCenter(gg_rct_BloodElfGoal) )
endfunction

//===========================================================================
function InitTrig_Force_Wagon_Moves takes nothing returns nothing
    set gg_trg_Force_Wagon_Moves = CreateTrigger(  )
    call TriggerRegisterTimerExpireEventBJ( gg_trg_Force_Wagon_Moves, udg_WagonHeartbeat )
    call TriggerAddCondition( gg_trg_Force_Wagon_Moves, Condition( function Trig_Force_Wagon_Moves_Conditions ) )
    call TriggerAddAction( gg_trg_Force_Wagon_Moves, function Trig_Force_Wagon_Moves_Actions )
endfunction

//===========================================================================
// Trigger: Player gets Wagon First Time
//===========================================================================
function Trig_Player_gets_Wagon_First_Time_Conditions takes nothing returns boolean
    if ( not ( IsTriggerEnabled(GetTriggeringTrigger()) == true ) ) then
        return false
    endif
    return true
endfunction

function Trig_Player_gets_Wagon_First_Time_Actions takes nothing returns nothing
    call DisableTrigger( GetTriggeringTrigger() )
    call QueuedTriggerAddBJ( gg_trg_Player_gets_Wagon_First_Time_Q, true )
    call TriggerSleepAction( 0.01 )
    call EnableTrigger( gg_trg_Player_gets_Wagon_Subsequent_Times )
endfunction

//===========================================================================
function InitTrig_Player_gets_Wagon_First_Time takes nothing returns nothing
    set gg_trg_Player_gets_Wagon_First_Time = CreateTrigger(  )
    call TriggerAddCondition( gg_trg_Player_gets_Wagon_First_Time, Condition( function Trig_Player_gets_Wagon_First_Time_Conditions ) )
    call TriggerAddAction( gg_trg_Player_gets_Wagon_First_Time, function Trig_Player_gets_Wagon_First_Time_Actions )
endfunction

//===========================================================================
// Trigger: Player gets Wagon First Time Q
//===========================================================================
function Trig_Player_gets_Wagon_First_Time_Q_Conditions takes nothing returns boolean
    if ( not ( udg_GameOver == false ) ) then
        return false
    endif
    return true
endfunction

function Trig_Player_gets_Wagon_First_Time_Q_Func004C takes nothing returns boolean
    if ( not ( IsUnitAliveBJ(udg_Kael) == true ) ) then
        return false
    endif
    return true
endfunction

function Trig_Player_gets_Wagon_First_Time_Q_Actions takes nothing returns nothing
    call DisableTrigger( GetTriggeringTrigger() )
    call ConditionalTriggerExecute( gg_trg_Quest_Secure_Wagon_Update_Recapture )
    call TriggerSleepAction( bj_QUEUE_DELAY_QUEST )
    if ( Trig_Player_gets_Wagon_First_Time_Q_Func004C() ) then
        call SetSpeechVolumeGroupsBJ(  )
        call TransmissionFromUnitWithNameBJ( GetPlayersAll(), udg_Kael, "TRIGSTR_223", gg_snd_A05Kael24, "TRIGSTR_224", bj_TIMETYPE_ADD, 0, false )
        call WaitForSoundBJ( gg_snd_A05Kael24, 0 )
        call VolumeGroupResetBJ(  )
    else
    endif
    call ConditionalTriggerExecute( gg_trg_Quest_Escort_Wagon_Discover )
    call PingMinimapLocForForce( GetPlayersAll(), GetRectCenter(gg_rct_BloodElfGoal), 4.00 )
    call SetCameraQuickPositionLocForPlayer( udg_AP1_Player, GetRectCenter(gg_rct_BloodElfGoal) )
    call TriggerSleepAction( bj_QUEUE_DELAY_QUEST )
    call QueuedTriggerRemoveBJ( GetTriggeringTrigger() )
endfunction

//===========================================================================
function InitTrig_Player_gets_Wagon_First_Time_Q takes nothing returns nothing
    set gg_trg_Player_gets_Wagon_First_Time_Q = CreateTrigger(  )
    call TriggerAddCondition( gg_trg_Player_gets_Wagon_First_Time_Q, Condition( function Trig_Player_gets_Wagon_First_Time_Q_Conditions ) )
    call TriggerAddAction( gg_trg_Player_gets_Wagon_First_Time_Q, function Trig_Player_gets_Wagon_First_Time_Q_Actions )
endfunction

//===========================================================================
// Trigger: Player gets Wagon Subsequent Times
//===========================================================================
function Trig_Player_gets_Wagon_Subsequent_Times_Conditions takes nothing returns boolean
    if ( not ( IsTriggerEnabled(GetTriggeringTrigger()) == true ) ) then
        return false
    endif
    return true
endfunction

function Trig_Player_gets_Wagon_Subsequent_Times_Actions takes nothing returns nothing
    call QueuedTriggerAddBJ( gg_trg_Player_gets_Wagon_Subsequent_Times_Q, true )
endfunction

//===========================================================================
function InitTrig_Player_gets_Wagon_Subsequent_Times takes nothing returns nothing
    set gg_trg_Player_gets_Wagon_Subsequent_Times = CreateTrigger(  )
    call DisableTrigger( gg_trg_Player_gets_Wagon_Subsequent_Times )
    call TriggerAddCondition( gg_trg_Player_gets_Wagon_Subsequent_Times, Condition( function Trig_Player_gets_Wagon_Subsequent_Times_Conditions ) )
    call TriggerAddAction( gg_trg_Player_gets_Wagon_Subsequent_Times, function Trig_Player_gets_Wagon_Subsequent_Times_Actions )
endfunction

//===========================================================================
// Trigger: Player gets Wagon Subsequent Times Q
//===========================================================================
function Trig_Player_gets_Wagon_Subsequent_Times_Q_Conditions takes nothing returns boolean
    if ( not ( udg_GameOver == false ) ) then
        return false
    endif
    return true
endfunction

function Trig_Player_gets_Wagon_Subsequent_Times_Q_Func003C takes nothing returns boolean
    if ( not ( IsUnitAliveBJ(udg_Kael) == true ) ) then
        return false
    endif
    return true
endfunction

function Trig_Player_gets_Wagon_Subsequent_Times_Q_Actions takes nothing returns nothing
    call ConditionalTriggerExecute( gg_trg_Quest_Secure_Wagon_Update_Recapture )
    call TriggerSleepAction( bj_QUEUE_DELAY_QUEST )
    if ( Trig_Player_gets_Wagon_Subsequent_Times_Q_Func003C() ) then
        call SetSpeechVolumeGroupsBJ(  )
        call TransmissionFromUnitWithNameBJ( GetPlayersAll(), udg_Kael, "TRIGSTR_246", gg_snd_A05Kael27, "TRIGSTR_247", bj_TIMETYPE_ADD, 0, false )
        call WaitForSoundBJ( gg_snd_A05Kael27, 0 )
        call VolumeGroupResetBJ(  )
    else
    endif
    call QueuedTriggerRemoveBJ( GetTriggeringTrigger() )
endfunction

//===========================================================================
function InitTrig_Player_gets_Wagon_Subsequent_Times_Q takes nothing returns nothing
    set gg_trg_Player_gets_Wagon_Subsequent_Times_Q = CreateTrigger(  )
    call TriggerAddCondition( gg_trg_Player_gets_Wagon_Subsequent_Times_Q, Condition( function Trig_Player_gets_Wagon_Subsequent_Times_Q_Conditions ) )
    call TriggerAddAction( gg_trg_Player_gets_Wagon_Subsequent_Times_Q, function Trig_Player_gets_Wagon_Subsequent_Times_Q_Actions )
endfunction

//===========================================================================
// Trigger: Give Wagon to Maiev
//===========================================================================
function Trig_Give_Wagon_to_Maiev_Conditions takes nothing returns boolean
    if ( not ( udg_GameOver == false ) ) then
        return false
    endif
    if ( not ( udg_InCinematic == false ) ) then
        return false
    endif
    if ( not ( GetOwningPlayer(udg_Wagon) == udg_P3_IllidanCage ) ) then
        return false
    endif
    if ( not ( TimerGetRemaining(udg_TransferOwnerTimer) <= 0.00 ) ) then
        return false
    endif
    return true
endfunction

function Trig_Give_Wagon_to_Maiev_Func005Func026Func001C takes nothing returns boolean
    if ( not ( DistanceBetweenPoints(udg_TempPointA, udg_zBreadcrumbArray[GetForLoopIndexA()]) <= udg_ClosestRegionDistance ) ) then
        return false
    endif
    return true
endfunction

function Trig_Give_Wagon_to_Maiev_Func005Func036C takes nothing returns boolean
    if ( not ( IsUnitAliveBJ(udg_Maiev) == true ) ) then
        return false
    endif
    if ( not ( DistanceBetweenPoints(udg_TempPointA, udg_TempPointB) <= udg_WagonControlRadius ) ) then
        return false
    endif
    return true
endfunction

function Trig_Give_Wagon_to_Maiev_Func005Func037Func001C takes nothing returns boolean
    if ( ( IsUnitDeadBJ(udg_Kael) == true ) ) then
        return true
    endif
    if ( ( DistanceBetweenPoints(udg_TempPointA, udg_TempPointC) > udg_WagonControlRadius ) ) then
        return true
    endif
    return false
endfunction

function Trig_Give_Wagon_to_Maiev_Func005Func037Func002C takes nothing returns boolean
    if ( ( IsUnitDeadBJ(udg_Vashj) == true ) ) then
        return true
    endif
    if ( ( DistanceBetweenPoints(udg_TempPointA, udg_TempPointD) > udg_WagonControlRadius ) ) then
        return true
    endif
    return false
endfunction

function Trig_Give_Wagon_to_Maiev_Func005Func037C takes nothing returns boolean
    if ( not Trig_Give_Wagon_to_Maiev_Func005Func037Func001C() ) then
        return false
    endif
    if ( not Trig_Give_Wagon_to_Maiev_Func005Func037Func002C() ) then
        return false
    endif
    return true
endfunction

function Trig_Give_Wagon_to_Maiev_Func005C takes nothing returns boolean
    if ( not Trig_Give_Wagon_to_Maiev_Func005Func036C() ) then
        return false
    endif
    if ( not Trig_Give_Wagon_to_Maiev_Func005Func037C() ) then
        return false
    endif
    return true
endfunction

function Trig_Give_Wagon_to_Maiev_Actions takes nothing returns nothing
    set udg_TempPointA = GetUnitLoc(udg_Wagon)
    set udg_TempPointB = GetUnitLoc(udg_Maiev)
    set udg_TempPointC = GetUnitLoc(udg_Kael)
    set udg_TempPointD = GetUnitLoc(udg_Vashj)
    if ( Trig_Give_Wagon_to_Maiev_Func005C() ) then
        // Start TransferTimer
        call StartTimerBJ( udg_TransferOwnerTimer, false, 5.00 )
        // Change Leaderboard
        call ConditionalTriggerExecute( gg_trg_Change_Board_to_Maiev )
        // Change Wagon Owner
        call PauseTimerBJ( true, udg_WagonHeartbeat )
        call SetUnitOwner( udg_Wagon, udg_P5_Maiev, true )
        // Reset Timer Minimums
        set udg_NETimerMinimum = udg_NETimerBaseMinimum
        set udg_BETimerMinimum = udg_BETimerBaseMinimum
        // Reinitialize Wagon Guards
        call PauseTimerBJ( true, udg_MaievOrderPulse )
        call GroupAddUnitSimple( udg_Maiev, udg_CaravanGuardsGroup )
        call CreateNUnitsAtLoc( 1, 'esen', udg_P5_Maiev, GetRectCenter(gg_rct_NE_Ancient_of_War_Spawn_01), 270.00 )
        set udg_CaravanHunt01 = GetLastCreatedUnit()
        call GroupAddUnitSimple( udg_CaravanHunt01, udg_CaravanGuardsGroup )
        call CreateNUnitsAtLoc( 1, 'earc', udg_P5_Maiev, GetRectCenter(gg_rct_NE_Ancient_of_War_Spawn_02), 270.00 )
        set udg_CaravanArcher01 = GetLastCreatedUnit()
        call GroupAddUnitSimple( udg_CaravanArcher01, udg_CaravanGuardsGroup )
        call CreateNUnitsAtLoc( 1, 'earc', udg_P5_Maiev, GetRectCenter(gg_rct_NE_Ancient_of_War_Spawn_03), 270.00 )
        set udg_CaravanArcher02 = GetLastCreatedUnit()
        call GroupAddUnitSimple( udg_CaravanArcher02, udg_CaravanGuardsGroup )
        call ConditionalTriggerExecute( gg_trg_Init_09c_Caravan_Units )
        // Reinitialize Wagon Position Along Breadcrumbs
        set udg_ClosestRegionDistance = 1000000.00
        set bj_forLoopAIndex = 1
        set bj_forLoopAIndexEnd = ( udg_BreadcrumbTotal - 1 )
        loop
            exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
            if ( Trig_Give_Wagon_to_Maiev_Func005Func026Func001C() ) then
                set udg_ClosestRegionDistance = DistanceBetweenPoints(udg_TempPointA, udg_zBreadcrumbArray[GetForLoopIndexA()])
                set udg_BreadcrumbReached = GetForLoopIndexA()
                set udg_BreadcrumbCurrent = ( GetForLoopIndexA() + 1 )
            else
            endif
            set bj_forLoopAIndex = bj_forLoopAIndex + 1
        endloop
        // Reorient the formation
        set udg_zReorientTarget = udg_zBreadcrumbArray[udg_BreadcrumbCurrent]
        set udg_ReorientAngle = udg_BreadcrumbAngleArray[udg_BreadcrumbCurrent]
        call ConditionalTriggerExecute( gg_trg_Reorient_Formation )
        // Resume Caravan Behavior
        call ConditionalTriggerExecute( gg_trg_Caravan_Orders_Resume )
        // Acknowledge ownership change to player
        call ConditionalTriggerExecute( gg_trg_Player_Loses_Wagon_First_Time )
        call ConditionalTriggerExecute( gg_trg_Player_Loses_Wagon_Subsequent_Times )
    else
    endif
    call RemoveLocation( udg_TempPointA )
    call RemoveLocation( udg_TempPointB )
    call RemoveLocation( udg_TempPointC )
    call RemoveLocation( udg_TempPointD )
endfunction

//===========================================================================
function InitTrig_Give_Wagon_to_Maiev takes nothing returns nothing
    set gg_trg_Give_Wagon_to_Maiev = CreateTrigger(  )
    call TriggerRegisterTimerEventPeriodic( gg_trg_Give_Wagon_to_Maiev, 2 )
    call TriggerAddCondition( gg_trg_Give_Wagon_to_Maiev, Condition( function Trig_Give_Wagon_to_Maiev_Conditions ) )
    call TriggerAddAction( gg_trg_Give_Wagon_to_Maiev, function Trig_Give_Wagon_to_Maiev_Actions )
endfunction

//===========================================================================
// Trigger: Player Loses Wagon First Time
//===========================================================================
function Trig_Player_Loses_Wagon_First_Time_Conditions takes nothing returns boolean
    if ( not ( IsTriggerEnabled(GetTriggeringTrigger()) == true ) ) then
        return false
    endif
    return true
endfunction

function Trig_Player_Loses_Wagon_First_Time_Actions takes nothing returns nothing
    call DisableTrigger( GetTriggeringTrigger() )
    call QueuedTriggerAddBJ( gg_trg_Player_Loses_Wagon_First_Time_Q, true )
    call TriggerSleepAction( 0.01 )
    call EnableTrigger( gg_trg_Player_Loses_Wagon_Subsequent_Times )
endfunction

//===========================================================================
function InitTrig_Player_Loses_Wagon_First_Time takes nothing returns nothing
    set gg_trg_Player_Loses_Wagon_First_Time = CreateTrigger(  )
    call TriggerAddCondition( gg_trg_Player_Loses_Wagon_First_Time, Condition( function Trig_Player_Loses_Wagon_First_Time_Conditions ) )
    call TriggerAddAction( gg_trg_Player_Loses_Wagon_First_Time, function Trig_Player_Loses_Wagon_First_Time_Actions )
endfunction

//===========================================================================
// Trigger: Player Loses Wagon First Time Q
//===========================================================================
function Trig_Player_Loses_Wagon_First_Time_Q_Conditions takes nothing returns boolean
    if ( not ( udg_GameOver == false ) ) then
        return false
    endif
    return true
endfunction

function Trig_Player_Loses_Wagon_First_Time_Q_Func002C takes nothing returns boolean
    if ( not ( IsUnitAliveBJ(udg_Kael) == true ) ) then
        return false
    endif
    return true
endfunction

function Trig_Player_Loses_Wagon_First_Time_Q_Func003C takes nothing returns boolean
    if ( not ( IsUnitAliveBJ(udg_Vashj) == true ) ) then
        return false
    endif
    return true
endfunction

function Trig_Player_Loses_Wagon_First_Time_Q_Actions takes nothing returns nothing
    call DisableTrigger( GetTriggeringTrigger() )
    if ( Trig_Player_Loses_Wagon_First_Time_Q_Func002C() ) then
        call SetSpeechVolumeGroupsBJ(  )
        call TransmissionFromUnitWithNameBJ( GetPlayersAll(), udg_Kael, "TRIGSTR_178", gg_snd_A05Kael19, "TRIGSTR_179", bj_TIMETYPE_ADD, 0, false )
        call WaitForSoundBJ( gg_snd_A05Kael19, 0 )
        call VolumeGroupResetBJ(  )
    else
    endif
    if ( Trig_Player_Loses_Wagon_First_Time_Q_Func003C() ) then
        call SetSpeechVolumeGroupsBJ(  )
        call TransmissionFromUnitWithNameBJ( GetPlayersAll(), udg_Vashj, "TRIGSTR_180", gg_snd_A05LadyVashj20, "TRIGSTR_181", bj_TIMETYPE_ADD, 0, false )
        call WaitForSoundBJ( gg_snd_A05LadyVashj20, 0 )
        call VolumeGroupResetBJ(  )
    else
    endif
    call ConditionalTriggerExecute( gg_trg_Quest_Secure_Wagon_Update_Lost_Wagon )
    call TriggerSleepAction( bj_QUEUE_DELAY_QUEST )
    call QueuedTriggerRemoveBJ( GetTriggeringTrigger() )
endfunction

//===========================================================================
function InitTrig_Player_Loses_Wagon_First_Time_Q takes nothing returns nothing
    set gg_trg_Player_Loses_Wagon_First_Time_Q = CreateTrigger(  )
    call TriggerAddCondition( gg_trg_Player_Loses_Wagon_First_Time_Q, Condition( function Trig_Player_Loses_Wagon_First_Time_Q_Conditions ) )
    call TriggerAddAction( gg_trg_Player_Loses_Wagon_First_Time_Q, function Trig_Player_Loses_Wagon_First_Time_Q_Actions )
endfunction

//===========================================================================
// Trigger: Player Loses Wagon Subsequent Times
//===========================================================================
function Trig_Player_Loses_Wagon_Subsequent_Times_Conditions takes nothing returns boolean
    if ( not ( IsTriggerEnabled(GetTriggeringTrigger()) == true ) ) then
        return false
    endif
    return true
endfunction

function Trig_Player_Loses_Wagon_Subsequent_Times_Actions takes nothing returns nothing
    call QueuedTriggerAddBJ( gg_trg_Player_Loses_Wagon_Subsequent_Times_Q, true )
endfunction

//===========================================================================
function InitTrig_Player_Loses_Wagon_Subsequent_Times takes nothing returns nothing
    set gg_trg_Player_Loses_Wagon_Subsequent_Times = CreateTrigger(  )
    call DisableTrigger( gg_trg_Player_Loses_Wagon_Subsequent_Times )
    call TriggerAddCondition( gg_trg_Player_Loses_Wagon_Subsequent_Times, Condition( function Trig_Player_Loses_Wagon_Subsequent_Times_Conditions ) )
    call TriggerAddAction( gg_trg_Player_Loses_Wagon_Subsequent_Times, function Trig_Player_Loses_Wagon_Subsequent_Times_Actions )
endfunction

//===========================================================================
// Trigger: Player Loses Wagon Subsequent Times Q
//===========================================================================
function Trig_Player_Loses_Wagon_Subsequent_Times_Q_Conditions takes nothing returns boolean
    if ( not ( udg_GameOver == false ) ) then
        return false
    endif
    if ( not ( IsUnitAliveBJ(udg_Kael) == true ) ) then
        return false
    endif
    return true
endfunction

function Trig_Player_Loses_Wagon_Subsequent_Times_Q_Func002Func005C takes nothing returns boolean
    if ( not ( udg_RandomValue <= 2.00 ) ) then
        return false
    endif
    return true
endfunction

function Trig_Player_Loses_Wagon_Subsequent_Times_Q_Func002C takes nothing returns boolean
    if ( not ( udg_RandomValue <= 1.00 ) ) then
        return false
    endif
    return true
endfunction

function Trig_Player_Loses_Wagon_Subsequent_Times_Q_Actions takes nothing returns nothing
    set udg_RandomValue = GetRandomReal(0, 3.00)
    if ( Trig_Player_Loses_Wagon_Subsequent_Times_Q_Func002C() ) then
        call SetSpeechVolumeGroupsBJ(  )
        call TransmissionFromUnitWithNameBJ( GetPlayersAll(), udg_Kael, "TRIGSTR_182", gg_snd_A05Kael21, "TRIGSTR_183", bj_TIMETYPE_ADD, 0, false )
        call WaitForSoundBJ( gg_snd_A05Kael21, 0 )
        call VolumeGroupResetBJ(  )
    else
        if ( Trig_Player_Loses_Wagon_Subsequent_Times_Q_Func002Func005C() ) then
            call SetSpeechVolumeGroupsBJ(  )
            call TransmissionFromUnitWithNameBJ( GetPlayersAll(), udg_Kael, "TRIGSTR_184", gg_snd_A05Kael22, "TRIGSTR_185", bj_TIMETYPE_ADD, 0, false )
            call WaitForSoundBJ( gg_snd_A05Kael22, 0 )
            call VolumeGroupResetBJ(  )
        else
            call SetSpeechVolumeGroupsBJ(  )
            call TransmissionFromUnitWithNameBJ( GetPlayersAll(), udg_Kael, "TRIGSTR_186", gg_snd_A05Kael23, "TRIGSTR_187", bj_TIMETYPE_ADD, 0, false )
            call WaitForSoundBJ( gg_snd_A05Kael23, 0 )
            call VolumeGroupResetBJ(  )
        endif
    endif
    call ConditionalTriggerExecute( gg_trg_Quest_Secure_Wagon_Update_Lost_Wagon )
    call TriggerSleepAction( bj_QUEUE_DELAY_QUEST )
    call QueuedTriggerRemoveBJ( GetTriggeringTrigger() )
endfunction

//===========================================================================
function InitTrig_Player_Loses_Wagon_Subsequent_Times_Q takes nothing returns nothing
    set gg_trg_Player_Loses_Wagon_Subsequent_Times_Q = CreateTrigger(  )
    call TriggerAddCondition( gg_trg_Player_Loses_Wagon_Subsequent_Times_Q, Condition( function Trig_Player_Loses_Wagon_Subsequent_Times_Q_Conditions ) )
    call TriggerAddAction( gg_trg_Player_Loses_Wagon_Subsequent_Times_Q, function Trig_Player_Loses_Wagon_Subsequent_Times_Q_Actions )
endfunction

//===========================================================================
// Trigger: MaievOrderPulse Expires
//===========================================================================
function Trig_MaievOrderPulse_Expires_Conditions takes nothing returns boolean
    if ( not ( GetOwningPlayer(udg_Wagon) == udg_P3_IllidanCage ) ) then
        return false
    endif
    if ( not ( udg_InCinematic == false ) ) then
        return false
    endif
    if ( not ( udg_GameOver == false ) ) then
        return false
    endif
    return true
endfunction

function Trig_MaievOrderPulse_Expires_Actions takes nothing returns nothing
    set udg_TempPointA = GetUnitLoc(udg_Wagon)
    call IssuePointOrderLocBJ( udg_Maiev, "attack", udg_TempPointA )
    call RemoveLocation( udg_TempPointA )
endfunction

//===========================================================================
function InitTrig_MaievOrderPulse_Expires takes nothing returns nothing
    set gg_trg_MaievOrderPulse_Expires = CreateTrigger(  )
    call TriggerRegisterTimerExpireEventBJ( gg_trg_MaievOrderPulse_Expires, udg_MaievOrderPulse )
    call TriggerAddCondition( gg_trg_MaievOrderPulse_Expires, Condition( function Trig_MaievOrderPulse_Expires_Conditions ) )
    call TriggerAddAction( gg_trg_MaievOrderPulse_Expires, function Trig_MaievOrderPulse_Expires_Actions )
endfunction

//===========================================================================
// Trigger: Create Initial Board
//===========================================================================
function Trig_Create_Initial_Board_Actions takes nothing returns nothing
    call CreateLeaderboardBJ( GetPlayersAll(), "TRIGSTR_257" )
    set udg_OwnerBoard = GetLastCreatedLeaderboard()
    call LeaderboardSetStyleBJ( udg_OwnerBoard, true, false, false, false )
    call LeaderboardDisplayBJ( true, udg_OwnerBoard )
endfunction

//===========================================================================
function InitTrig_Create_Initial_Board takes nothing returns nothing
    set gg_trg_Create_Initial_Board = CreateTrigger(  )
    call TriggerAddAction( gg_trg_Create_Initial_Board, function Trig_Create_Initial_Board_Actions )
endfunction

//===========================================================================
// Trigger: Change Board to Player
//===========================================================================
function Trig_Change_Board_to_Player_Actions takes nothing returns nothing
    call LeaderboardSetLabelBJ( udg_OwnerBoard, "TRIGSTR_258" )
endfunction

//===========================================================================
function InitTrig_Change_Board_to_Player takes nothing returns nothing
    set gg_trg_Change_Board_to_Player = CreateTrigger(  )
    call TriggerAddAction( gg_trg_Change_Board_to_Player, function Trig_Change_Board_to_Player_Actions )
endfunction

//===========================================================================
// Trigger: Change Board to Maiev
//===========================================================================
function Trig_Change_Board_to_Maiev_Actions takes nothing returns nothing
    call LeaderboardSetLabelBJ( udg_OwnerBoard, "TRIGSTR_259" )
endfunction

//===========================================================================
function InitTrig_Change_Board_to_Maiev takes nothing returns nothing
    set gg_trg_Change_Board_to_Maiev = CreateTrigger(  )
    call TriggerAddAction( gg_trg_Change_Board_to_Maiev, function Trig_Change_Board_to_Maiev_Actions )
endfunction

//===========================================================================
// Trigger: Caravan Go
//===========================================================================
function Trig_Caravan_Go_Actions takes nothing returns nothing
    // Start the region testing timer
    call StartTimerBJ( udg_CaravanTestPulse, true, 0.20 )
    call StartTimerBJ( udg_CaravanOrderPulse, true, 3.00 )
endfunction

//===========================================================================
function InitTrig_Caravan_Go takes nothing returns nothing
    set gg_trg_Caravan_Go = CreateTrigger(  )
    call TriggerAddAction( gg_trg_Caravan_Go, function Trig_Caravan_Go_Actions )
endfunction

//===========================================================================
// Trigger: Reorient Formation
//
// This trigger repositions all of the CaravanRegions in formation (according to FormationAngles and FormationDistances), centered about ReorientTarget and rotated to ReorientAngle.
// Before running this trigger, set the following variables:  ReorientAngle, ReorientTarget
// The actions in the loop perform a simple transform on the formation data to rotate it to ReorientAngle (with respect to the formation origin) and shift it over to ReorientTarget.
// The formation data is stored in polar notation to make this calculation easier.
//===========================================================================
function Trig_Reorient_Formation_Actions takes nothing returns nothing
    set bj_forLoopAIndex = 1
    set bj_forLoopAIndexEnd = udg_FormationTotal
    loop
        exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
        set udg_TempAngle = ( udg_ReorientAngle + udg_FormationAngleArray[GetForLoopIndexA()] )
        set udg_TempX = ( udg_FormationDistanceArray[GetForLoopIndexA()] * CosBJ(udg_TempAngle) )
        set udg_TempY = ( udg_FormationDistanceArray[GetForLoopIndexA()] * SinBJ(udg_TempAngle) )
        call MoveRectToLoc( udg_FormationRegionArray[GetForLoopIndexA()], OffsetLocation(udg_zReorientTarget, udg_TempX, udg_TempY) )
        set bj_forLoopAIndex = bj_forLoopAIndex + 1
    endloop
endfunction

//===========================================================================
function InitTrig_Reorient_Formation takes nothing returns nothing
    set gg_trg_Reorient_Formation = CreateTrigger(  )
    call TriggerAddAction( gg_trg_Reorient_Formation, function Trig_Reorient_Formation_Actions )
endfunction

//===========================================================================
// Trigger: Caravan Orders Pause
//===========================================================================
function Trig_Caravan_Orders_Pause_Actions takes nothing returns nothing
    set bj_forLoopAIndex = udg_CaravanGuardFirst
    set bj_forLoopAIndexEnd = udg_CaravanGuardLast
    loop
        exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
        call SetUnitMoveSpeed( udg_CaravanUnitArray[GetForLoopIndexA()], GetUnitDefaultMoveSpeed(udg_CaravanUnitArray[GetForLoopIndexA()]) )
        set bj_forLoopAIndex = bj_forLoopAIndex + 1
    endloop
    call PauseTimerBJ( true, udg_CaravanOrderPulse )
endfunction

//===========================================================================
function InitTrig_Caravan_Orders_Pause takes nothing returns nothing
    set gg_trg_Caravan_Orders_Pause = CreateTrigger(  )
    call TriggerAddAction( gg_trg_Caravan_Orders_Pause, function Trig_Caravan_Orders_Pause_Actions )
endfunction

//===========================================================================
// Trigger: Caravan Orders Resume
//===========================================================================
function Trig_Caravan_Orders_Resume_Actions takes nothing returns nothing
    call StartTimerBJ( udg_CaravanOrderPulse, true, 3.00 )
endfunction

//===========================================================================
function InitTrig_Caravan_Orders_Resume takes nothing returns nothing
    set gg_trg_Caravan_Orders_Resume = CreateTrigger(  )
    call TriggerAddAction( gg_trg_Caravan_Orders_Resume, function Trig_Caravan_Orders_Resume_Actions )
endfunction

//===========================================================================
// Trigger: Caravan Orders
//===========================================================================
function Trig_Caravan_Orders_Conditions takes nothing returns boolean
    if ( not ( udg_InCinematic == false ) ) then
        return false
    endif
    return true
endfunction

function Trig_Caravan_Orders_Func002Func001C takes nothing returns boolean
    if ( not ( udg_CaravanUnitArray[GetForLoopIndexA()] != null ) ) then
        return false
    endif
    return true
endfunction

function Trig_Caravan_Orders_Func003Func001Func001C takes nothing returns boolean
    if ( not ( udg_GuardsCatchingUp == true ) ) then
        return false
    endif
    return true
endfunction

function Trig_Caravan_Orders_Func003Func001C takes nothing returns boolean
    if ( not ( udg_CaravanUnitArray[GetForLoopIndexA()] != null ) ) then
        return false
    endif
    if ( not ( TimerGetRemaining(udg_CaravanAggroTimer) <= 0.00 ) ) then
        return false
    endif
    return true
endfunction

function Trig_Caravan_Orders_Actions takes nothing returns nothing
    call ConditionalTriggerExecute( gg_trg_Caravan_Check_Dist )
    set bj_forLoopAIndex = udg_CaravanWagonFirst
    set bj_forLoopAIndexEnd = udg_CaravanWagonLast
    loop
        exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
        if ( Trig_Caravan_Orders_Func002Func001C() ) then
            set udg_TempPointA = GetRectCenter(udg_FormationRegionArray[GetForLoopIndexA()])
            call IssuePointOrderLocBJ( udg_CaravanUnitArray[GetForLoopIndexA()], "move", udg_TempPointA )
            call RemoveLocation( udg_TempPointA )
        else
        endif
        set bj_forLoopAIndex = bj_forLoopAIndex + 1
    endloop
    set bj_forLoopAIndex = udg_CaravanGuardFirst
    set bj_forLoopAIndexEnd = udg_CaravanGuardLast
    loop
        exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
        if ( Trig_Caravan_Orders_Func003Func001C() ) then
            if ( Trig_Caravan_Orders_Func003Func001Func001C() ) then
                set udg_TempPointA = GetRectCenter(udg_FormationRegionArray[GetForLoopIndexA()])
                call IssuePointOrderLocBJ( udg_CaravanUnitArray[GetForLoopIndexA()], "move", udg_TempPointA )
                call RemoveLocation( udg_TempPointA )
            else
                set udg_TempPointA = GetRectCenter(udg_FormationRegionArray[GetForLoopIndexA()])
                call IssuePointOrderLocBJ( udg_CaravanUnitArray[GetForLoopIndexA()], "attack", udg_TempPointA )
                call RemoveLocation( udg_TempPointA )
            endif
        else
        endif
        set bj_forLoopAIndex = bj_forLoopAIndex + 1
    endloop
endfunction

//===========================================================================
function InitTrig_Caravan_Orders takes nothing returns nothing
    set gg_trg_Caravan_Orders = CreateTrigger(  )
    call TriggerRegisterTimerExpireEventBJ( gg_trg_Caravan_Orders, udg_CaravanOrderPulse )
    call TriggerAddCondition( gg_trg_Caravan_Orders, Condition( function Trig_Caravan_Orders_Conditions ) )
    call TriggerAddAction( gg_trg_Caravan_Orders, function Trig_Caravan_Orders_Actions )
endfunction

//===========================================================================
// Trigger: Caravan Check Dist
//===========================================================================
function Trig_Caravan_Check_Dist_Conditions takes nothing returns boolean
    if ( not ( udg_GuardsCatchingUp == false ) ) then
        return false
    endif
    return true
endfunction

function Trig_Caravan_Check_Dist_Func003Func003C takes nothing returns boolean
    if ( not ( DistanceBetweenPoints(udg_TempPointA, udg_TempPointB) < udg_GuardLeftBehindRange ) ) then
        return false
    endif
    return true
endfunction

function Trig_Caravan_Check_Dist_Actions takes nothing returns nothing
    // Test each guar d to see if any of them are within range
    set udg_GuardsCatchingUp = true
    set bj_forLoopAIndex = udg_CaravanGuardFirst
    set bj_forLoopAIndexEnd = udg_CaravanGuardLast
    loop
        exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
        set udg_TempPointA = GetUnitLoc(udg_CaravanUnitArray[GetForLoopIndexA()])
        set udg_TempPointB = GetRectCenter(udg_FormationRegionArray[GetForLoopIndexA()])
        if ( Trig_Caravan_Check_Dist_Func003Func003C() ) then
            // If at least one guard is within range, consider the group sufficiently close
            set udg_GuardsCatchingUp = false
        else
        endif
        call RemoveLocation( udg_TempPointA )
        call RemoveLocation( udg_TempPointB )
        set bj_forLoopAIndex = bj_forLoopAIndex + 1
    endloop
endfunction

//===========================================================================
function InitTrig_Caravan_Check_Dist takes nothing returns nothing
    set gg_trg_Caravan_Check_Dist = CreateTrigger(  )
    call TriggerAddCondition( gg_trg_Caravan_Check_Dist, Condition( function Trig_Caravan_Check_Dist_Conditions ) )
    call TriggerAddAction( gg_trg_Caravan_Check_Dist, function Trig_Caravan_Check_Dist_Actions )
endfunction

//===========================================================================
// Trigger: Caravan Unit Dies
//===========================================================================
function Trig_Caravan_Unit_Dies_Conditions takes nothing returns boolean
    if ( not ( IsUnitInGroup(GetDyingUnit(), udg_CaravanGuardsGroup) == true ) ) then
        return false
    endif
    return true
endfunction

function Trig_Caravan_Unit_Dies_Func002Func001C takes nothing returns boolean
    if ( not ( GetDyingUnit() == udg_CaravanUnitArray[GetForLoopIndexA()] ) ) then
        return false
    endif
    return true
endfunction

function Trig_Caravan_Unit_Dies_Actions takes nothing returns nothing
    call GroupRemoveUnitSimple( GetDyingUnit(), udg_CaravanGuardsGroup )
    set bj_forLoopAIndex = 1
    set bj_forLoopAIndexEnd = udg_FormationTotal
    loop
        exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
        if ( Trig_Caravan_Unit_Dies_Func002Func001C() ) then
            set udg_CaravanUnitArray[GetForLoopIndexA()] = null
        else
        endif
        set bj_forLoopAIndex = bj_forLoopAIndex + 1
    endloop
endfunction

//===========================================================================
function InitTrig_Caravan_Unit_Dies takes nothing returns nothing
    set gg_trg_Caravan_Unit_Dies = CreateTrigger(  )
    call TriggerRegisterPlayerUnitEventSimple( gg_trg_Caravan_Unit_Dies, Player(4), EVENT_PLAYER_UNIT_DEATH )
    call TriggerAddCondition( gg_trg_Caravan_Unit_Dies, Condition( function Trig_Caravan_Unit_Dies_Conditions ) )
    call TriggerAddAction( gg_trg_Caravan_Unit_Dies, function Trig_Caravan_Unit_Dies_Actions )
endfunction

//===========================================================================
// Trigger: Guard Attacked
//===========================================================================
function Trig_Guard_Attacked_Conditions takes nothing returns boolean
    if ( not ( udg_GuardsCatchingUp == false ) ) then
        return false
    endif
    return true
endfunction

function Trig_Guard_Attacked_Func002Func003C takes nothing returns boolean
    if ( not ( DistanceBetweenPoints(udg_TempPointA, udg_TempPointB) <= udg_GuardCallForHelpDist ) ) then
        return false
    endif
    return true
endfunction

function Trig_Guard_Attacked_Actions takes nothing returns nothing
    call DisableTrigger( GetTriggeringTrigger() )
    set bj_forLoopAIndex = udg_CaravanGuardFirst
    set bj_forLoopAIndexEnd = udg_CaravanGuardLast
    loop
        exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
        set udg_TempPointA = GetUnitLoc(udg_CaravanUnitArray[GetForLoopIndexA()])
        set udg_TempPointB = GetUnitLoc(GetAttackedUnitBJ())
        if ( Trig_Guard_Attacked_Func002Func003C() ) then
            call SetUnitMoveSpeed( udg_CaravanUnitArray[GetForLoopIndexA()], GetUnitDefaultMoveSpeed(udg_CaravanUnitArray[GetForLoopIndexA()]) )
            call MoveRectToLoc( gg_rct_GuardCallForHelpArea, udg_TempPointB )
            set udg_TempPointC = GetRandomLocInRect(gg_rct_GuardCallForHelpArea)
            call IssuePointOrderLocBJ( udg_CaravanUnitArray[GetForLoopIndexA()], "attack", udg_TempPointC )
            call RemoveLocation( udg_TempPointC )
        else
        endif
        call RemoveLocation( udg_TempPointA )
        call RemoveLocation( udg_TempPointB )
        set bj_forLoopAIndex = bj_forLoopAIndex + 1
    endloop
    call StartTimerBJ( udg_CaravanAggroTimer, false, udg_GuardCallForHelpDuration )
    call TriggerSleepAction( udg_GuardCallForHelpFrequency )
    call EnableTrigger( GetTriggeringTrigger() )
endfunction

//===========================================================================
function InitTrig_Guard_Attacked takes nothing returns nothing
    set gg_trg_Guard_Attacked = CreateTrigger(  )
    call TriggerRegisterPlayerUnitEventSimple( gg_trg_Guard_Attacked, Player(4), EVENT_PLAYER_UNIT_ATTACKED )
    call TriggerAddCondition( gg_trg_Guard_Attacked, Condition( function Trig_Guard_Attacked_Conditions ) )
    call TriggerAddAction( gg_trg_Guard_Attacked, function Trig_Guard_Attacked_Actions )
endfunction

//===========================================================================
// Trigger: Guard Catches Up
//===========================================================================
function Trig_Guard_Catches_Up_Func001Func001C takes nothing returns boolean
    if ( not ( udg_CaravanUnitArray[GetForLoopIndexA()] != null ) ) then
        return false
    endif
    if ( not ( RectContainsUnit(udg_FormationRegionArray[GetForLoopIndexA()], udg_CaravanUnitArray[GetForLoopIndexA()]) == true ) ) then
        return false
    endif
    return true
endfunction

function Trig_Guard_Catches_Up_Actions takes nothing returns nothing
    set bj_forLoopAIndex = udg_CaravanGuardFirst
    set bj_forLoopAIndexEnd = udg_CaravanGuardLast
    loop
        exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
        if ( Trig_Guard_Catches_Up_Func001Func001C() ) then
            call SetUnitMoveSpeed( udg_CaravanUnitArray[GetForLoopIndexA()], udg_SpeedOfGuards )
            set udg_GuardsCatchingUp = false
        else
        endif
        set bj_forLoopAIndex = bj_forLoopAIndex + 1
    endloop
endfunction

//===========================================================================
function InitTrig_Guard_Catches_Up takes nothing returns nothing
    set gg_trg_Guard_Catches_Up = CreateTrigger(  )
    call TriggerRegisterTimerExpireEventBJ( gg_trg_Guard_Catches_Up, udg_CaravanTestPulse )
    call TriggerAddAction( gg_trg_Guard_Catches_Up, function Trig_Guard_Catches_Up_Actions )
endfunction

//===========================================================================
// Trigger: Wagons Reach Breadcrumb
//===========================================================================
function Trig_Wagons_Reach_Breadcrumb_Conditions takes nothing returns boolean
    if ( not ( RectContainsUnit(udg_FormationRegionArray[1], udg_CaravanUnitArray[1]) == true ) ) then
        return false
    endif
    return true
endfunction

function Trig_Wagons_Reach_Breadcrumb_Actions takes nothing returns nothing
    set udg_BreadcrumbReached = udg_BreadcrumbCurrent
    call ConditionalTriggerExecute( gg_trg_Target_Next_Breadcrumb )
endfunction

//===========================================================================
function InitTrig_Wagons_Reach_Breadcrumb takes nothing returns nothing
    set gg_trg_Wagons_Reach_Breadcrumb = CreateTrigger(  )
    call TriggerRegisterTimerExpireEventBJ( gg_trg_Wagons_Reach_Breadcrumb, udg_CaravanTestPulse )
    call TriggerAddCondition( gg_trg_Wagons_Reach_Breadcrumb, Condition( function Trig_Wagons_Reach_Breadcrumb_Conditions ) )
    call TriggerAddAction( gg_trg_Wagons_Reach_Breadcrumb, function Trig_Wagons_Reach_Breadcrumb_Actions )
endfunction

//===========================================================================
// Trigger: Target Next Breadcrumb
//===========================================================================
function Trig_Target_Next_Breadcrumb_Conditions takes nothing returns boolean
    if ( not ( udg_BreadcrumbCurrent < udg_BreadcrumbAllowed ) ) then
        return false
    endif
    return true
endfunction

function Trig_Target_Next_Breadcrumb_Actions takes nothing returns nothing
    // Calculate the next breadcrumb
    set udg_BreadcrumbCurrent = ( udg_BreadcrumbCurrent + 1 )
    set udg_zReorientTarget = udg_zBreadcrumbArray[udg_BreadcrumbCurrent]
    set udg_ReorientAngle = udg_BreadcrumbAngleArray[udg_BreadcrumbCurrent]
    // Recalculate the caravan's targets and start them on their way
    call ConditionalTriggerExecute( gg_trg_Reorient_Formation )
    call ConditionalTriggerExecute( gg_trg_Caravan_Orders )
endfunction

//===========================================================================
function InitTrig_Target_Next_Breadcrumb takes nothing returns nothing
    set gg_trg_Target_Next_Breadcrumb = CreateTrigger(  )
    call TriggerAddCondition( gg_trg_Target_Next_Breadcrumb, Condition( function Trig_Target_Next_Breadcrumb_Conditions ) )
    call TriggerAddAction( gg_trg_Target_Next_Breadcrumb, function Trig_Target_Next_Breadcrumb_Actions )
endfunction

//===========================================================================
// Trigger: Kael Dies
//===========================================================================
function Trig_Kael_Dies_Conditions takes nothing returns boolean
    if ( not ( udg_GameOver == false ) ) then
        return false
    endif
    if ( not ( GetDyingUnit() == udg_Kael ) ) then
        return false
    endif
    return true
endfunction

function Trig_Kael_Dies_Func003C takes nothing returns boolean
    if ( not ( udg_GameOver == false ) ) then
        return false
    endif
    return true
endfunction

function Trig_Kael_Dies_Actions takes nothing returns nothing
    call TriggerSleepAction( udg_PlayerHeroRespawnTime )
    if ( Trig_Kael_Dies_Func003C() ) then
        call ReviveHeroLoc( udg_Kael, GetRectCenter(gg_rct_RespawnKael), true )
        call QueuedTriggerAddBJ( gg_trg_Kael_Ready_Q, true )
        call QueuedTriggerAddBJ( gg_trg_Item_Shop_Usuable_Q, true )
    else
    endif
endfunction

//===========================================================================
function InitTrig_Kael_Dies takes nothing returns nothing
    set gg_trg_Kael_Dies = CreateTrigger(  )
    call TriggerRegisterPlayerUnitEventSimple( gg_trg_Kael_Dies, Player(0), EVENT_PLAYER_UNIT_DEATH )
    call TriggerAddCondition( gg_trg_Kael_Dies, Condition( function Trig_Kael_Dies_Conditions ) )
    call TriggerAddAction( gg_trg_Kael_Dies, function Trig_Kael_Dies_Actions )
endfunction

//===========================================================================
// Trigger: Vashj Dies
//===========================================================================
function Trig_Vashj_Dies_Conditions takes nothing returns boolean
    if ( not ( udg_GameOver == false ) ) then
        return false
    endif
    if ( not ( GetDyingUnit() == udg_Vashj ) ) then
        return false
    endif
    return true
endfunction

function Trig_Vashj_Dies_Func002C takes nothing returns boolean
    if ( not ( udg_GameOver == false ) ) then
        return false
    endif
    return true
endfunction

function Trig_Vashj_Dies_Actions takes nothing returns nothing
    call TriggerSleepAction( udg_PlayerHeroRespawnTime )
    if ( Trig_Vashj_Dies_Func002C() ) then
        call ReviveHeroLoc( udg_Vashj, GetRectCenter(gg_rct_RespawnVashj), true )
        call QueuedTriggerAddBJ( gg_trg_Vashj_Ready_Q, true )
        call QueuedTriggerAddBJ( gg_trg_Item_Shop_Usuable_Q, true )
    else
    endif
endfunction

//===========================================================================
function InitTrig_Vashj_Dies takes nothing returns nothing
    set gg_trg_Vashj_Dies = CreateTrigger(  )
    call TriggerRegisterPlayerUnitEventSimple( gg_trg_Vashj_Dies, Player(0), EVENT_PLAYER_UNIT_DEATH )
    call TriggerAddCondition( gg_trg_Vashj_Dies, Condition( function Trig_Vashj_Dies_Conditions ) )
    call TriggerAddAction( gg_trg_Vashj_Dies, function Trig_Vashj_Dies_Actions )
endfunction

//===========================================================================
// Trigger: Brewmaster Dies
//===========================================================================
function Trig_Brewmaster_Dies_Conditions takes nothing returns boolean
    if ( not ( udg_GameOver == false ) ) then
        return false
    endif
    if ( not ( udg_Brewmaster != null ) ) then
        return false
    endif
    if ( not ( GetDyingUnit() == udg_Brewmaster ) ) then
        return false
    endif
    return true
endfunction

function Trig_Brewmaster_Dies_Func002C takes nothing returns boolean
    if ( not ( udg_GameOver == false ) ) then
        return false
    endif
    return true
endfunction

function Trig_Brewmaster_Dies_Actions takes nothing returns nothing
    call TriggerSleepAction( udg_PlayerHeroRespawnTime )
    if ( Trig_Brewmaster_Dies_Func002C() ) then
        call ReviveHeroLoc( udg_Brewmaster, GetRectCenter(gg_rct_RespawnBrewmaster), true )
    else
    endif
endfunction

//===========================================================================
function InitTrig_Brewmaster_Dies takes nothing returns nothing
    set gg_trg_Brewmaster_Dies = CreateTrigger(  )
    call TriggerRegisterPlayerUnitEventSimple( gg_trg_Brewmaster_Dies, Player(0), EVENT_PLAYER_UNIT_DEATH )
    call TriggerAddCondition( gg_trg_Brewmaster_Dies, Condition( function Trig_Brewmaster_Dies_Conditions ) )
    call TriggerAddAction( gg_trg_Brewmaster_Dies, function Trig_Brewmaster_Dies_Actions )
endfunction

//===========================================================================
// Trigger: Maiev Dies
//===========================================================================
function Trig_Maiev_Dies_Conditions takes nothing returns boolean
    if ( not ( GetDyingUnit() == udg_Maiev ) ) then
        return false
    endif
    return true
endfunction

function Trig_Maiev_Dies_Func002C takes nothing returns boolean
    if ( not ( udg_MaievRespawnTime <= 5.00 ) ) then
        return false
    endif
    return true
endfunction

function Trig_Maiev_Dies_Func003C takes nothing returns boolean
    if ( not ( udg_DebugOn == true ) ) then
        return false
    endif
    return true
endfunction

function Trig_Maiev_Dies_Func008Func002C takes nothing returns boolean
    if ( not ( GetItemTypeId(UnitItemInSlotBJ(udg_Maiev, 2)) == GetItemTypeId(null) ) ) then
        return false
    endif
    return true
endfunction

function Trig_Maiev_Dies_Func008C takes nothing returns boolean
    if ( not ( GetGameDifficulty() == MAP_DIFFICULTY_HARD ) ) then
        return false
    endif
    return true
endfunction

function Trig_Maiev_Dies_Func009C takes nothing returns boolean
    if ( not ( GetOwningPlayer(udg_Wagon) == udg_P5_Maiev ) ) then
        return false
    endif
    return true
endfunction

function Trig_Maiev_Dies_Actions takes nothing returns nothing
    set udg_MaievRespawnTime = ( udg_BaseMaievRespawnTime + ( DistanceBetweenPoints(GetUnitLoc(udg_Wagon), GetRectCenter(gg_rct_BloodElfGoal)) / 180.00 ) )
    if ( Trig_Maiev_Dies_Func002C() ) then
        set udg_MaievRespawnTime = 5.00
    else
    endif
    if ( Trig_Maiev_Dies_Func003C() ) then
        call DisplayTimedTextToForce( GetPlayersAll(), 10.00, ( "M Respawn = " + R2S(udg_MaievRespawnTime) ) )
    else
    endif
    call TriggerSleepAction( udg_MaievRespawnTime )
    call ReviveHeroLoc( udg_Maiev, GetRectCenter(gg_rct_RespawnMaiev), true )
    call SetUnitMoveSpeed( udg_Maiev, GetUnitDefaultMoveSpeed(udg_Maiev) )
    call SetUnitManaPercentBJ( udg_Maiev, 80.00 )
    if ( Trig_Maiev_Dies_Func008C() ) then
        call SetUnitManaPercentBJ( udg_Maiev, 100.00 )
        if ( Trig_Maiev_Dies_Func008Func002C() ) then
            call UnitAddItemByIdSwapped( 'I001', udg_Maiev )
        else
        endif
    else
        call SetUnitManaPercentBJ( udg_Maiev, 80.00 )
    endif
    if ( Trig_Maiev_Dies_Func009C() ) then
        call GroupAddUnitSimple( udg_Maiev, udg_CaravanGuardsGroup )
        call ConditionalTriggerExecute( gg_trg_Init_09c_Caravan_Units )
    else
    endif
endfunction

//===========================================================================
function InitTrig_Maiev_Dies takes nothing returns nothing
    set gg_trg_Maiev_Dies = CreateTrigger(  )
    call TriggerRegisterPlayerUnitEventSimple( gg_trg_Maiev_Dies, Player(4), EVENT_PLAYER_UNIT_DEATH )
    call TriggerAddCondition( gg_trg_Maiev_Dies, Condition( function Trig_Maiev_Dies_Conditions ) )
    call TriggerAddAction( gg_trg_Maiev_Dies, function Trig_Maiev_Dies_Actions )
endfunction

//===========================================================================
// Trigger: Kael Ready Q
//===========================================================================
function Trig_Kael_Ready_Q_Actions takes nothing returns nothing
    call SetSpeechVolumeGroupsBJ(  )
    call TransmissionFromUnitWithNameBJ( GetPlayersAll(), udg_Kael, "TRIGSTR_251", null, "TRIGSTR_252", bj_TIMETYPE_ADD, 0, false )
    call PlaySoundBJ( gg_snd_KaelReady1_H04X )
    call WaitForSoundBJ( gg_snd_KaelReady1_H04X, 0 )
    call VolumeGroupResetBJ(  )
    call QueuedTriggerRemoveBJ( GetTriggeringTrigger() )
endfunction

//===========================================================================
function InitTrig_Kael_Ready_Q takes nothing returns nothing
    set gg_trg_Kael_Ready_Q = CreateTrigger(  )
    call TriggerAddAction( gg_trg_Kael_Ready_Q, function Trig_Kael_Ready_Q_Actions )
endfunction

//===========================================================================
// Trigger: Vashj Ready Q
//===========================================================================
function Trig_Vashj_Ready_Q_Actions takes nothing returns nothing
    call SetSpeechVolumeGroupsBJ(  )
    call TransmissionFromUnitWithNameBJ( GetPlayersAll(), udg_Vashj, "TRIGSTR_253", null, "TRIGSTR_254", bj_TIMETYPE_ADD, 0, false )
    call PlaySoundBJ( gg_snd_LadyVashjReady1_H04X )
    call WaitForSoundBJ( gg_snd_LadyVashjReady1_H04X, 0 )
    call VolumeGroupResetBJ(  )
    call QueuedTriggerRemoveBJ( GetTriggeringTrigger() )
endfunction

//===========================================================================
function InitTrig_Vashj_Ready_Q takes nothing returns nothing
    set gg_trg_Vashj_Ready_Q = CreateTrigger(  )
    call TriggerAddAction( gg_trg_Vashj_Ready_Q, function Trig_Vashj_Ready_Q_Actions )
endfunction

//===========================================================================
// Trigger: Maiev Attacks
//===========================================================================
function Trig_Maiev_Attacks_Conditions takes nothing returns boolean
    if ( not ( IsTriggerEnabled(GetTriggeringTrigger()) == true ) ) then
        return false
    endif
    if ( not ( GetAttacker() == udg_Maiev ) ) then
        return false
    endif
    return true
endfunction

function Trig_Maiev_Attacks_Actions takes nothing returns nothing
    call DisableTrigger( GetTriggeringTrigger() )
    call QueuedTriggerAddBJ( gg_trg_Maiev_Attacks_Q, true )
    set udg_RandomValue = GetRandomReal(30.00, 45.00)
    call TriggerSleepAction( udg_RandomValue )
    call EnableTrigger( GetTriggeringTrigger() )
endfunction

//===========================================================================
function InitTrig_Maiev_Attacks takes nothing returns nothing
    set gg_trg_Maiev_Attacks = CreateTrigger(  )
    call TriggerRegisterPlayerUnitEventSimple( gg_trg_Maiev_Attacks, Player(0), EVENT_PLAYER_UNIT_ATTACKED )
    call TriggerAddCondition( gg_trg_Maiev_Attacks, Condition( function Trig_Maiev_Attacks_Conditions ) )
    call TriggerAddAction( gg_trg_Maiev_Attacks, function Trig_Maiev_Attacks_Actions )
endfunction

//===========================================================================
// Trigger: Maiev Attacks Q
//===========================================================================
function Trig_Maiev_Attacks_Q_Conditions takes nothing returns boolean
    if ( not ( udg_GameOver == false ) ) then
        return false
    endif
    return true
endfunction

function Trig_Maiev_Attacks_Q_Func002Func006C takes nothing returns boolean
    if ( not ( udg_RandomValue <= 2.00 ) ) then
        return false
    endif
    return true
endfunction

function Trig_Maiev_Attacks_Q_Func002C takes nothing returns boolean
    if ( not ( udg_RandomValue <= 1.00 ) ) then
        return false
    endif
    return true
endfunction

function Trig_Maiev_Attacks_Q_Actions takes nothing returns nothing
    set udg_RandomValue = GetRandomReal(0.00, 3.00)
    if ( Trig_Maiev_Attacks_Q_Func002C() ) then
        call SetSpeechVolumeGroupsBJ(  )
        call TransmissionFromUnitWithNameBJ( GetPlayersAll(), udg_Maiev, "TRIGSTR_188", gg_snd_A05Maiev32, "TRIGSTR_189", bj_TIMETYPE_ADD, 0, false )
        call WaitForSoundBJ( gg_snd_A05Maiev32, 0 )
        call VolumeGroupResetBJ(  )
    else
        if ( Trig_Maiev_Attacks_Q_Func002Func006C() ) then
            call SetSpeechVolumeGroupsBJ(  )
            call TransmissionFromUnitWithNameBJ( GetPlayersAll(), udg_Maiev, "TRIGSTR_190", gg_snd_A05Maiev33, "TRIGSTR_191", bj_TIMETYPE_ADD, 0, false )
            call WaitForSoundBJ( gg_snd_A05Maiev33, 0 )
            call VolumeGroupResetBJ(  )
        else
            call SetSpeechVolumeGroupsBJ(  )
            call TransmissionFromUnitWithNameBJ( GetPlayersAll(), udg_Maiev, "TRIGSTR_192", gg_snd_A05Maiev34, "TRIGSTR_193", bj_TIMETYPE_ADD, 0, false )
            call WaitForSoundBJ( gg_snd_A05Maiev34, 0 )
            call VolumeGroupResetBJ(  )
        endif
    endif
    call QueuedTriggerRemoveBJ( GetTriggeringTrigger() )
endfunction

//===========================================================================
function InitTrig_Maiev_Attacks_Q takes nothing returns nothing
    set gg_trg_Maiev_Attacks_Q = CreateTrigger(  )
    call TriggerAddCondition( gg_trg_Maiev_Attacks_Q, Condition( function Trig_Maiev_Attacks_Q_Conditions ) )
    call TriggerAddAction( gg_trg_Maiev_Attacks_Q, function Trig_Maiev_Attacks_Q_Actions )
endfunction

//===========================================================================
// Trigger: Give Money to Player
//===========================================================================
function Trig_Give_Money_to_Player_Actions takes nothing returns nothing
    call AdjustPlayerStateBJ( 10, udg_AP1_Player, PLAYER_STATE_RESOURCE_GOLD )
endfunction

//===========================================================================
function InitTrig_Give_Money_to_Player takes nothing returns nothing
    set gg_trg_Give_Money_to_Player = CreateTrigger(  )
    call TriggerRegisterTimerEventPeriodic( gg_trg_Give_Money_to_Player, 2.00 )
    call TriggerAddAction( gg_trg_Give_Money_to_Player, function Trig_Give_Money_to_Player_Actions )
endfunction

//===========================================================================
// Trigger: PingTimerExpires
//===========================================================================
function Trig_PingTimerExpires_Conditions takes nothing returns boolean
    if ( not ( udg_InCinematic == false ) ) then
        return false
    endif
    if ( not ( udg_GameOver == false ) ) then
        return false
    endif
    return true
endfunction

function Trig_PingTimerExpires_Func005C takes nothing returns boolean
    if ( not ( GetOwningPlayer(udg_Wagon) == udg_P5_Maiev ) ) then
        return false
    endif
    return true
endfunction

function Trig_PingTimerExpires_Actions takes nothing returns nothing
    set udg_TempPingPoint = GetUnitLoc(udg_Wagon)
    if ( Trig_PingTimerExpires_Func005C() ) then
        call PingMinimapLocForForceEx( GetPlayersAll(), GetUnitLoc(udg_Wagon), 2.00, bj_MINIMAPPINGSTYLE_SIMPLE, 10.90, 90.00, 72.50 )
    else
        call PingMinimapLocForForceEx( GetPlayersAll(), GetUnitLoc(udg_Wagon), 2.00, bj_MINIMAPPINGSTYLE_SIMPLE, 99.60, 54.10, 5.50 )
    endif
    call RemoveLocation( udg_TempPingPoint )
endfunction

//===========================================================================
function InitTrig_PingTimerExpires takes nothing returns nothing
    set gg_trg_PingTimerExpires = CreateTrigger(  )
    call TriggerRegisterTimerExpireEventBJ( gg_trg_PingTimerExpires, udg_WagonPingTimer )
    call TriggerAddCondition( gg_trg_PingTimerExpires, Condition( function Trig_PingTimerExpires_Conditions ) )
    call TriggerAddAction( gg_trg_PingTimerExpires, function Trig_PingTimerExpires_Actions )
endfunction

//===========================================================================
// Trigger: BE Building dies
//===========================================================================
function Trig_BE_Building_dies_Func004001001002001 takes nothing returns boolean
    return ( IsUnitType(GetFilterUnit(), UNIT_TYPE_STRUCTURE) == true )
endfunction

function Trig_BE_Building_dies_Func004001001002002 takes nothing returns boolean
    return ( IsUnitAliveBJ(GetFilterUnit()) == true )
endfunction

function Trig_BE_Building_dies_Func004001001002 takes nothing returns boolean
    return GetBooleanAnd( Trig_BE_Building_dies_Func004001001002001(), Trig_BE_Building_dies_Func004001001002002() )
endfunction

function Trig_BE_Building_dies_Conditions takes nothing returns boolean
    if ( not ( CountUnitsInGroup(GetUnitsOfPlayerMatching(udg_P8_BloodElfBase, Condition(function Trig_BE_Building_dies_Func004001001002))) <= 3 ) ) then
        return false
    endif
    return true
endfunction

function Trig_BE_Building_dies_Actions takes nothing returns nothing
    call DisableTrigger( GetTriggeringTrigger() )
    call SetUnitInvulnerable( gg_unit_halt_0062, false )
    call SetUnitInvulnerable( gg_unit_nnad_0061, false )
endfunction

//===========================================================================
function InitTrig_BE_Building_dies takes nothing returns nothing
    set gg_trg_BE_Building_dies = CreateTrigger(  )
    call TriggerRegisterPlayerUnitEventSimple( gg_trg_BE_Building_dies, Player(7), EVENT_PLAYER_UNIT_DEATH )
    call TriggerAddCondition( gg_trg_BE_Building_dies, Condition( function Trig_BE_Building_dies_Conditions ) )
    call TriggerAddAction( gg_trg_BE_Building_dies, function Trig_BE_Building_dies_Actions )
endfunction

//===========================================================================
// Trigger: NE Building dies
//===========================================================================
function Trig_NE_Building_dies_Func003001001002001 takes nothing returns boolean
    return ( IsUnitType(GetFilterUnit(), UNIT_TYPE_STRUCTURE) == true )
endfunction

function Trig_NE_Building_dies_Func003001001002002 takes nothing returns boolean
    return ( IsUnitAliveBJ(GetFilterUnit()) == true )
endfunction

function Trig_NE_Building_dies_Func003001001002 takes nothing returns boolean
    return GetBooleanAnd( Trig_NE_Building_dies_Func003001001002001(), Trig_NE_Building_dies_Func003001001002002() )
endfunction

function Trig_NE_Building_dies_Conditions takes nothing returns boolean
    if ( not ( CountUnitsInGroup(GetUnitsOfPlayerMatching(udg_P2_Watchers, Condition(function Trig_NE_Building_dies_Func003001001002))) <= 2 ) ) then
        return false
    endif
    return true
endfunction

function Trig_NE_Building_dies_Actions takes nothing returns nothing
    call DisableTrigger( GetTriggeringTrigger() )
    call SetUnitInvulnerable( gg_unit_eate_0014, false )
endfunction

//===========================================================================
function InitTrig_NE_Building_dies takes nothing returns nothing
    set gg_trg_NE_Building_dies = CreateTrigger(  )
    call TriggerRegisterPlayerUnitEventSimple( gg_trg_NE_Building_dies, Player(1), EVENT_PLAYER_UNIT_DEATH )
    call TriggerAddCondition( gg_trg_NE_Building_dies, Condition( function Trig_NE_Building_dies_Conditions ) )
    call TriggerAddAction( gg_trg_NE_Building_dies, function Trig_NE_Building_dies_Actions )
endfunction

//===========================================================================
// Trigger: Start Suicide Scripts
//===========================================================================
function Trig_Start_Suicide_Scripts_Actions takes nothing returns nothing
    call StartCampaignAI( udg_P10_BloodElfAttack, "h04x10.ai" )
    call StartCampaignAI( udg_P11_NightElfAttack, "h04x11.ai" )
endfunction

//===========================================================================
function InitTrig_Start_Suicide_Scripts takes nothing returns nothing
    set gg_trg_Start_Suicide_Scripts = CreateTrigger(  )
    call TriggerAddAction( gg_trg_Start_Suicide_Scripts, function Trig_Start_Suicide_Scripts_Actions )
endfunction

//===========================================================================
// Trigger: AI Resources Maiev Gold
//===========================================================================
function Trig_AI_Resources_Maiev_Gold_Actions takes nothing returns nothing
    call AdjustPlayerStateBJ( 1351, udg_P2_Watchers, PLAYER_STATE_RESOURCE_GOLD )
endfunction

//===========================================================================
function InitTrig_AI_Resources_Maiev_Gold takes nothing returns nothing
    set gg_trg_AI_Resources_Maiev_Gold = CreateTrigger(  )
    call TriggerRegisterPlayerStateEvent( gg_trg_AI_Resources_Maiev_Gold, Player(1), PLAYER_STATE_RESOURCE_GOLD, LESS_THAN, 1000.00 )
    call TriggerAddAction( gg_trg_AI_Resources_Maiev_Gold, function Trig_AI_Resources_Maiev_Gold_Actions )
endfunction

//===========================================================================
// Trigger: AI Resources Maiev Lumber
//===========================================================================
function Trig_AI_Resources_Maiev_Lumber_Actions takes nothing returns nothing
    call AdjustPlayerStateBJ( 1273, udg_P2_Watchers, PLAYER_STATE_RESOURCE_LUMBER )
endfunction

//===========================================================================
function InitTrig_AI_Resources_Maiev_Lumber takes nothing returns nothing
    set gg_trg_AI_Resources_Maiev_Lumber = CreateTrigger(  )
    call TriggerRegisterPlayerStateEvent( gg_trg_AI_Resources_Maiev_Lumber, Player(1), PLAYER_STATE_RESOURCE_LUMBER, LESS_THAN, 1000.00 )
    call TriggerAddAction( gg_trg_AI_Resources_Maiev_Lumber, function Trig_AI_Resources_Maiev_Lumber_Actions )
endfunction

//===========================================================================
// Trigger: Quest Secure Wagon Create
//===========================================================================
function Trig_Quest_Secure_Wagon_Create_Conditions takes nothing returns boolean
    if ( not ( IsTriggerEnabled(GetTriggeringTrigger()) == true ) ) then
        return false
    endif
    return true
endfunction

function Trig_Quest_Secure_Wagon_Create_Actions takes nothing returns nothing
    call DisableTrigger( GetTriggeringTrigger() )
    // Create the quest objects
    call CreateQuestBJ( bj_QUESTTYPE_REQ_UNDISCOVERED, "TRIGSTR_151", "TRIGSTR_152", "ReplaceableTextures\\CommandButtons\\BTNEvilIllidan.tga" )
    set udg_QuestIllidan = GetLastCreatedQuestBJ()
    call CreateQuestItemBJ( udg_QuestIllidan, "TRIGSTR_153" )
    set udg_QuestIllidanRecapture = GetLastCreatedQuestItemBJ()
    call CreateQuestItemBJ( udg_QuestIllidan, "TRIGSTR_155" )
    set udg_QuestIllidanNoMaiev = GetLastCreatedQuestItemBJ()
endfunction

//===========================================================================
function InitTrig_Quest_Secure_Wagon_Create takes nothing returns nothing
    set gg_trg_Quest_Secure_Wagon_Create = CreateTrigger(  )
    call TriggerAddCondition( gg_trg_Quest_Secure_Wagon_Create, Condition( function Trig_Quest_Secure_Wagon_Create_Conditions ) )
    call TriggerAddAction( gg_trg_Quest_Secure_Wagon_Create, function Trig_Quest_Secure_Wagon_Create_Actions )
endfunction

//===========================================================================
// Trigger: Quest Secure Wagon Discover
//===========================================================================
function Trig_Quest_Secure_Wagon_Discover_Actions takes nothing returns nothing
    // Ensure that the quest exists
    call ConditionalTriggerExecute( gg_trg_Quest_Secure_Wagon_Create )
    // Update the quest
    call QuestSetDiscoveredBJ( udg_QuestIllidan, true )
    // Display a quest message.
    call QuestMessageBJ( GetPlayersAll(), bj_QUESTMESSAGE_DISCOVERED, "TRIGSTR_039" )
endfunction

//===========================================================================
function InitTrig_Quest_Secure_Wagon_Discover takes nothing returns nothing
    set gg_trg_Quest_Secure_Wagon_Discover = CreateTrigger(  )
    call TriggerAddAction( gg_trg_Quest_Secure_Wagon_Discover, function Trig_Quest_Secure_Wagon_Discover_Actions )
endfunction

//===========================================================================
// Trigger: Quest Secure Wagon Update Recapture
//===========================================================================
function Trig_Quest_Secure_Wagon_Update_Recapture_Actions takes nothing returns nothing
    // Ensure that the quest exists
    call ConditionalTriggerExecute( gg_trg_Quest_Secure_Wagon_Create )
    // Update the quest
    call QuestSetDiscoveredBJ( udg_QuestIllidan, true )
    call QuestItemSetCompletedBJ( udg_QuestIllidanRecapture, true )
    // Display a quest message.
    call QuestMessageBJ( GetPlayersAll(), bj_QUESTMESSAGE_UPDATED, "TRIGSTR_163" )
endfunction

//===========================================================================
function InitTrig_Quest_Secure_Wagon_Update_Recapture takes nothing returns nothing
    set gg_trg_Quest_Secure_Wagon_Update_Recapture = CreateTrigger(  )
    call TriggerAddAction( gg_trg_Quest_Secure_Wagon_Update_Recapture, function Trig_Quest_Secure_Wagon_Update_Recapture_Actions )
endfunction

//===========================================================================
// Trigger: Quest Secure Wagon Update Lost Wagon
//===========================================================================
function Trig_Quest_Secure_Wagon_Update_Lost_Wagon_Actions takes nothing returns nothing
    // Ensure that the quest exists
    call ConditionalTriggerExecute( gg_trg_Quest_Secure_Wagon_Create )
    // Update the quest
    call QuestSetDiscoveredBJ( udg_QuestIllidan, true )
    call QuestItemSetCompletedBJ( udg_QuestIllidanRecapture, false )
    // Display a quest message.
    call QuestMessageBJ( GetPlayersAll(), bj_QUESTMESSAGE_UPDATED, "TRIGSTR_244" )
endfunction

//===========================================================================
function InitTrig_Quest_Secure_Wagon_Update_Lost_Wagon takes nothing returns nothing
    set gg_trg_Quest_Secure_Wagon_Update_Lost_Wagon = CreateTrigger(  )
    call TriggerAddAction( gg_trg_Quest_Secure_Wagon_Update_Lost_Wagon, function Trig_Quest_Secure_Wagon_Update_Lost_Wagon_Actions )
endfunction

//===========================================================================
// Trigger: Quest Secure Wagon Completed
//===========================================================================
function Trig_Quest_Secure_Wagon_Completed_Actions takes nothing returns nothing
    // Ensure that the quest exists
    call ConditionalTriggerExecute( gg_trg_Quest_Secure_Wagon_Create )
    // Update the quest
    call QuestSetDiscoveredBJ( udg_QuestIllidan, true )
    call QuestItemSetCompletedBJ( udg_QuestIllidanRecapture, true )
    call QuestItemSetCompletedBJ( udg_QuestIllidanNoMaiev, true )
    call QuestSetCompletedBJ( udg_QuestIllidan, true )
endfunction

//===========================================================================
function InitTrig_Quest_Secure_Wagon_Completed takes nothing returns nothing
    set gg_trg_Quest_Secure_Wagon_Completed = CreateTrigger(  )
    call TriggerAddAction( gg_trg_Quest_Secure_Wagon_Completed, function Trig_Quest_Secure_Wagon_Completed_Actions )
endfunction

//===========================================================================
// Trigger: Quest Escort Wagon Create
//===========================================================================
function Trig_Quest_Escort_Wagon_Create_Conditions takes nothing returns boolean
    if ( not ( IsTriggerEnabled(GetTriggeringTrigger()) == true ) ) then
        return false
    endif
    return true
endfunction

function Trig_Quest_Escort_Wagon_Create_Actions takes nothing returns nothing
    call DisableTrigger( GetTriggeringTrigger() )
    // Create the quest objects
    call CreateQuestBJ( bj_QUESTTYPE_REQ_UNDISCOVERED, "TRIGSTR_012", "TRIGSTR_013", "ReplaceableTextures\\CommandButtons\\BTNBloodMage2.tga" )
    set udg_QuestEscort = GetLastCreatedQuestBJ()
    call CreateQuestItemBJ( udg_QuestEscort, "TRIGSTR_014" )
    set udg_QuestEscortToBloodElf = GetLastCreatedQuestItemBJ()
endfunction

//===========================================================================
function InitTrig_Quest_Escort_Wagon_Create takes nothing returns nothing
    set gg_trg_Quest_Escort_Wagon_Create = CreateTrigger(  )
    call TriggerAddCondition( gg_trg_Quest_Escort_Wagon_Create, Condition( function Trig_Quest_Escort_Wagon_Create_Conditions ) )
    call TriggerAddAction( gg_trg_Quest_Escort_Wagon_Create, function Trig_Quest_Escort_Wagon_Create_Actions )
endfunction

//===========================================================================
// Trigger: Quest Escort Wagon Discover
//===========================================================================
function Trig_Quest_Escort_Wagon_Discover_Actions takes nothing returns nothing
    // Ensure that the quest exists
    call ConditionalTriggerExecute( gg_trg_Quest_Escort_Wagon_Create )
    // Update the quest
    call QuestSetDiscoveredBJ( udg_QuestEscort, true )
    // Display a quest message.
    call QuestMessageBJ( GetPlayersAll(), bj_QUESTMESSAGE_DISCOVERED, "TRIGSTR_016" )
endfunction

//===========================================================================
function InitTrig_Quest_Escort_Wagon_Discover takes nothing returns nothing
    set gg_trg_Quest_Escort_Wagon_Discover = CreateTrigger(  )
    call TriggerAddAction( gg_trg_Quest_Escort_Wagon_Discover, function Trig_Quest_Escort_Wagon_Discover_Actions )
endfunction

//===========================================================================
// Trigger: Quest Escort Wagon Completed
//===========================================================================
function Trig_Quest_Escort_Wagon_Completed_Actions takes nothing returns nothing
    // Ensure that the quest exists
    call ConditionalTriggerExecute( gg_trg_Quest_Escort_Wagon_Create )
    // Update the quest
    call QuestSetDiscoveredBJ( udg_QuestEscort, true )
    call QuestItemSetCompletedBJ( udg_QuestEscortToBloodElf, true )
    call QuestSetCompletedBJ( udg_QuestEscort, true )
    // Display a quest message.
    call QuestMessageBJ( GetPlayersAll(), bj_QUESTMESSAGE_COMPLETED, "TRIGSTR_017" )
endfunction

//===========================================================================
function InitTrig_Quest_Escort_Wagon_Completed takes nothing returns nothing
    set gg_trg_Quest_Escort_Wagon_Completed = CreateTrigger(  )
    call TriggerAddAction( gg_trg_Quest_Escort_Wagon_Completed, function Trig_Quest_Escort_Wagon_Completed_Actions )
endfunction

//===========================================================================
// Trigger: Mission Failed Wagon at Maiev
//===========================================================================
function Trig_Mission_Failed_Wagon_at_Maiev_Actions takes nothing returns nothing
    call QuestMessageBJ( GetPlayersAll(), bj_QUESTMESSAGE_MISSIONFAILED, "TRIGSTR_019" )
endfunction

//===========================================================================
function InitTrig_Mission_Failed_Wagon_at_Maiev takes nothing returns nothing
    set gg_trg_Mission_Failed_Wagon_at_Maiev = CreateTrigger(  )
    call TriggerAddAction( gg_trg_Mission_Failed_Wagon_at_Maiev, function Trig_Mission_Failed_Wagon_at_Maiev_Actions )
endfunction

//===========================================================================
// Trigger: Mission Failed Base Defeated
//===========================================================================
function Trig_Mission_Failed_Base_Defeated_Actions takes nothing returns nothing
    call QuestMessageBJ( GetPlayersAll(), bj_QUESTMESSAGE_MISSIONFAILED, "TRIGSTR_256" )
endfunction

//===========================================================================
function InitTrig_Mission_Failed_Base_Defeated takes nothing returns nothing
    set gg_trg_Mission_Failed_Base_Defeated = CreateTrigger(  )
    call TriggerAddAction( gg_trg_Mission_Failed_Base_Defeated, function Trig_Mission_Failed_Base_Defeated_Actions )
endfunction

//===========================================================================
// Trigger: Get the Wagon Q
//===========================================================================
function Trig_Get_the_Wagon_Q_Conditions takes nothing returns boolean
    if ( not ( udg_GameOver == false ) ) then
        return false
    endif
    return true
endfunction

function Trig_Get_the_Wagon_Q_Actions takes nothing returns nothing
    call ConditionalTriggerExecute( gg_trg_Quest_Secure_Wagon_Discover )
    call TriggerSleepAction( bj_QUEUE_DELAY_QUEST )
    call QueuedTriggerRemoveBJ( GetTriggeringTrigger() )
endfunction

//===========================================================================
function InitTrig_Get_the_Wagon_Q takes nothing returns nothing
    set gg_trg_Get_the_Wagon_Q = CreateTrigger(  )
    call TriggerAddCondition( gg_trg_Get_the_Wagon_Q, Condition( function Trig_Get_the_Wagon_Q_Conditions ) )
    call TriggerAddAction( gg_trg_Get_the_Wagon_Q, function Trig_Get_the_Wagon_Q_Actions )
endfunction

//===========================================================================
// Trigger: Only Control Hero Notice Q
//===========================================================================
function Trig_Only_Control_Hero_Notice_Q_Conditions takes nothing returns boolean
    if ( not ( udg_GameOver == false ) ) then
        return false
    endif
    return true
endfunction

function Trig_Only_Control_Hero_Notice_Q_Actions takes nothing returns nothing
    call QuestMessageBJ( GetPlayersAll(), bj_QUESTMESSAGE_ALWAYSHINT, "TRIGSTR_228" )
    call TriggerSleepAction( bj_QUEUE_DELAY_HINT )
    call QueuedTriggerRemoveBJ( GetTriggeringTrigger() )
endfunction

//===========================================================================
function InitTrig_Only_Control_Hero_Notice_Q takes nothing returns nothing
    set gg_trg_Only_Control_Hero_Notice_Q = CreateTrigger(  )
    call TriggerAddCondition( gg_trg_Only_Control_Hero_Notice_Q, Condition( function Trig_Only_Control_Hero_Notice_Q_Conditions ) )
    call TriggerAddAction( gg_trg_Only_Control_Hero_Notice_Q, function Trig_Only_Control_Hero_Notice_Q_Actions )
endfunction

//===========================================================================
// Trigger: Hero Dies
//===========================================================================
function Trig_Hero_Dies_Func004C takes nothing returns boolean
    if ( ( GetDyingUnit() == udg_Kael ) ) then
        return true
    endif
    if ( ( GetDyingUnit() == udg_Vashj ) ) then
        return true
    endif
    if ( ( GetDyingUnit() == udg_Brewmaster ) ) then
        return true
    endif
    return false
endfunction

function Trig_Hero_Dies_Conditions takes nothing returns boolean
    if ( not ( IsTriggerEnabled(GetTriggeringTrigger()) == true ) ) then
        return false
    endif
    if ( not Trig_Hero_Dies_Func004C() ) then
        return false
    endif
    return true
endfunction

function Trig_Hero_Dies_Actions takes nothing returns nothing
    call DisableTrigger( GetTriggeringTrigger() )
    call QueuedTriggerAddBJ( gg_trg_Hero_Dies_Q, true )
endfunction

//===========================================================================
function InitTrig_Hero_Dies takes nothing returns nothing
    set gg_trg_Hero_Dies = CreateTrigger(  )
    call TriggerRegisterPlayerUnitEventSimple( gg_trg_Hero_Dies, Player(0), EVENT_PLAYER_UNIT_DEATH )
    call TriggerAddCondition( gg_trg_Hero_Dies, Condition( function Trig_Hero_Dies_Conditions ) )
    call TriggerAddAction( gg_trg_Hero_Dies, function Trig_Hero_Dies_Actions )
endfunction

//===========================================================================
// Trigger: Hero Dies Q
//===========================================================================
function Trig_Hero_Dies_Q_Conditions takes nothing returns boolean
    if ( not ( udg_GameOver == false ) ) then
        return false
    endif
    return true
endfunction

function Trig_Hero_Dies_Q_Actions takes nothing returns nothing
    call QuestMessageBJ( GetPlayersAll(), bj_QUESTMESSAGE_ALWAYSHINT, "TRIGSTR_221" )
    call TriggerSleepAction( bj_QUEUE_DELAY_HINT )
    call QueuedTriggerRemoveBJ( GetTriggeringTrigger() )
endfunction

//===========================================================================
function InitTrig_Hero_Dies_Q takes nothing returns nothing
    set gg_trg_Hero_Dies_Q = CreateTrigger(  )
    call TriggerAddCondition( gg_trg_Hero_Dies_Q, Condition( function Trig_Hero_Dies_Q_Conditions ) )
    call TriggerAddAction( gg_trg_Hero_Dies_Q, function Trig_Hero_Dies_Q_Actions )
endfunction

//===========================================================================
// Trigger: Item Shop Usuable Q
//===========================================================================
function Trig_Item_Shop_Usuable_Q_Conditions takes nothing returns boolean
    if ( not ( IsTriggerEnabled(GetTriggeringTrigger()) == true ) ) then
        return false
    endif
    if ( not ( udg_GameOver == false ) ) then
        return false
    endif
    return true
endfunction

function Trig_Item_Shop_Usuable_Q_Actions takes nothing returns nothing
    call DisableTrigger( GetTriggeringTrigger() )
    call QuestMessageBJ( GetPlayersAll(), bj_QUESTMESSAGE_ALWAYSHINT, "TRIGSTR_227" )
    call TriggerSleepAction( bj_QUEUE_DELAY_HINT )
    call QueuedTriggerRemoveBJ( GetTriggeringTrigger() )
endfunction

//===========================================================================
function InitTrig_Item_Shop_Usuable_Q takes nothing returns nothing
    set gg_trg_Item_Shop_Usuable_Q = CreateTrigger(  )
    call TriggerAddCondition( gg_trg_Item_Shop_Usuable_Q, Condition( function Trig_Item_Shop_Usuable_Q_Conditions ) )
    call TriggerAddAction( gg_trg_Item_Shop_Usuable_Q, function Trig_Item_Shop_Usuable_Q_Actions )
endfunction

//===========================================================================
// Trigger: Maiev Dies First Time
//===========================================================================
function Trig_Maiev_Dies_First_Time_Conditions takes nothing returns boolean
    if ( not ( GetDyingUnit() == udg_Maiev ) ) then
        return false
    endif
    if ( not ( GetOwningPlayer(udg_Wagon) == udg_P5_Maiev ) ) then
        return false
    endif
    if ( not ( IsTriggerEnabled(GetTriggeringTrigger()) == true ) ) then
        return false
    endif
    return true
endfunction

function Trig_Maiev_Dies_First_Time_Actions takes nothing returns nothing
    call DisableTrigger( GetTriggeringTrigger() )
    call QueuedTriggerAddBJ( gg_trg_Maiev_Dies_First_Time_Q, true )
endfunction

//===========================================================================
function InitTrig_Maiev_Dies_First_Time takes nothing returns nothing
    set gg_trg_Maiev_Dies_First_Time = CreateTrigger(  )
    call TriggerRegisterPlayerUnitEventSimple( gg_trg_Maiev_Dies_First_Time, Player(4), EVENT_PLAYER_UNIT_DEATH )
    call TriggerAddCondition( gg_trg_Maiev_Dies_First_Time, Condition( function Trig_Maiev_Dies_First_Time_Conditions ) )
    call TriggerAddAction( gg_trg_Maiev_Dies_First_Time, function Trig_Maiev_Dies_First_Time_Actions )
endfunction

//===========================================================================
// Trigger: Maiev Dies First Time Q
//===========================================================================
function Trig_Maiev_Dies_First_Time_Q_Conditions takes nothing returns boolean
    if ( not ( udg_GameOver == false ) ) then
        return false
    endif
    return true
endfunction

function Trig_Maiev_Dies_First_Time_Q_Actions takes nothing returns nothing
    call QuestMessageBJ( GetPlayersAll(), bj_QUESTMESSAGE_ALWAYSHINT, "TRIGSTR_245" )
    call TriggerSleepAction( bj_QUEUE_DELAY_HINT )
    call QueuedTriggerRemoveBJ( GetTriggeringTrigger() )
endfunction

//===========================================================================
function InitTrig_Maiev_Dies_First_Time_Q takes nothing returns nothing
    set gg_trg_Maiev_Dies_First_Time_Q = CreateTrigger(  )
    call TriggerAddCondition( gg_trg_Maiev_Dies_First_Time_Q, Condition( function Trig_Maiev_Dies_First_Time_Q_Conditions ) )
    call TriggerAddAction( gg_trg_Maiev_Dies_First_Time_Q, function Trig_Maiev_Dies_First_Time_Q_Actions )
endfunction

//===========================================================================
// Trigger: Brewmaster Available Q
//===========================================================================
function Trig_Brewmaster_Available_Q_Conditions takes nothing returns boolean
    if ( not ( udg_GameOver == false ) ) then
        return false
    endif
    return true
endfunction

function Trig_Brewmaster_Available_Q_Actions takes nothing returns nothing
    call QuestMessageBJ( GetPlayersAll(), bj_QUESTMESSAGE_UNITACQUIRED, "TRIGSTR_273" )
    call TriggerSleepAction( bj_QUEUE_DELAY_QUEST )
    call QueuedTriggerRemoveBJ( GetTriggeringTrigger() )
endfunction

//===========================================================================
function InitTrig_Brewmaster_Available_Q takes nothing returns nothing
    set gg_trg_Brewmaster_Available_Q = CreateTrigger(  )
    call TriggerAddCondition( gg_trg_Brewmaster_Available_Q, Condition( function Trig_Brewmaster_Available_Q_Conditions ) )
    call TriggerAddAction( gg_trg_Brewmaster_Available_Q, function Trig_Brewmaster_Available_Q_Actions )
endfunction

//===========================================================================
// Trigger: Next Level Prep
//===========================================================================
function Trig_Next_Level_Prep_Func005C takes nothing returns boolean
    if ( not ( udg_Brewmaster != null ) ) then
        return false
    endif
    return true
endfunction

function Trig_Next_Level_Prep_Actions takes nothing returns nothing
    // Save Heroes
    call InitGameCacheBJ( "Campaigns.w3v" )
    call StoreUnitBJ( udg_Vashj, "Vashj", "HumanX05", GetLastCreatedGameCacheBJ() )
    call StoreUnitBJ( udg_Kael, "Kael", "HumanX05", GetLastCreatedGameCacheBJ() )
    if ( Trig_Next_Level_Prep_Func005C() ) then
        call StoreUnitBJ( udg_Brewmaster, "Brewmaster", "FinalX", GetLastCreatedGameCacheBJ() )
    else
    endif
    call SaveGameCacheBJ( GetLastCreatedGameCacheBJ() )
    // Enable Missions, Campaigns, Cinematics
    call SetMissionAvailableBJ( true, bj_MISSION_INDEX_XH06 )
    call SetMissionAvailableBJ( true, bj_MISSION_INDEX_XH07 )
endfunction

//===========================================================================
function InitTrig_Next_Level_Prep takes nothing returns nothing
    set gg_trg_Next_Level_Prep = CreateTrigger(  )
    call TriggerAddAction( gg_trg_Next_Level_Prep, function Trig_Next_Level_Prep_Actions )
endfunction

//===========================================================================
// Trigger: Next Level Run
//===========================================================================
function Trig_Next_Level_Run_Actions takes nothing returns nothing
    // Set Next Level and Victory
    call SetNextLevelBJ( "Maps\\FrozenThrone\\Campaign\\HumanX04Interlude.w3x" )
    call CustomVictoryBJ( udg_AP1_Player, true, true )
endfunction

//===========================================================================
function InitTrig_Next_Level_Run takes nothing returns nothing
    set gg_trg_Next_Level_Run = CreateTrigger(  )
    call TriggerAddAction( gg_trg_Next_Level_Run, function Trig_Next_Level_Run_Actions )
endfunction

//===========================================================================
// Trigger: Victory Cheat
//===========================================================================
function Trig_Victory_Cheat_Conditions takes nothing returns boolean
    if ( not ( udg_GameOver == false ) ) then
        return false
    endif
    return true
endfunction

function Trig_Victory_Cheat_Actions takes nothing returns nothing
    set udg_GameOver = true
    call ConditionalTriggerExecute( gg_trg_Next_Level_Prep )
    call ConditionalTriggerExecute( gg_trg_Next_Level_Run )
endfunction

//===========================================================================
function InitTrig_Victory_Cheat takes nothing returns nothing
    set gg_trg_Victory_Cheat = CreateTrigger(  )
    call TriggerRegisterPlayerEventVictory( gg_trg_Victory_Cheat, Player(0) )
    call TriggerAddCondition( gg_trg_Victory_Cheat, Condition( function Trig_Victory_Cheat_Conditions ) )
    call TriggerAddAction( gg_trg_Victory_Cheat, function Trig_Victory_Cheat_Actions )
endfunction

//===========================================================================
// Trigger: Defeat Cheat
//===========================================================================
function Trig_Defeat_Cheat_Conditions takes nothing returns boolean
    if ( not ( udg_GameOver == false ) ) then
        return false
    endif
    return true
endfunction

function Trig_Defeat_Cheat_Actions takes nothing returns nothing
    set udg_GameOver = true
    call CustomDefeatBJ( udg_AP1_Player, "TRIGSTR_001" )
endfunction

//===========================================================================
function InitTrig_Defeat_Cheat takes nothing returns nothing
    set gg_trg_Defeat_Cheat = CreateTrigger(  )
    call TriggerRegisterPlayerEventDefeat( gg_trg_Defeat_Cheat, Player(0) )
    call TriggerAddCondition( gg_trg_Defeat_Cheat, Condition( function Trig_Defeat_Cheat_Conditions ) )
    call TriggerAddAction( gg_trg_Defeat_Cheat, function Trig_Defeat_Cheat_Actions )
endfunction

//===========================================================================
// Trigger: Victory Wagon at BE Base
//===========================================================================
function Trig_Victory_Wagon_at_BE_Base_Conditions takes nothing returns boolean
    if ( not ( GetEnteringUnit() == udg_Wagon ) ) then
        return false
    endif
    if ( not ( GetOwningPlayer(udg_Wagon) == udg_P3_IllidanCage ) ) then
        return false
    endif
    if ( not ( udg_GameOver == false ) ) then
        return false
    endif
    return true
endfunction

function Trig_Victory_Wagon_at_BE_Base_Actions takes nothing returns nothing
    call DisableTrigger( GetTriggeringTrigger() )
    call DisableTrigger( gg_trg_Give_Wagon_to_Maiev )
    set udg_GameOver = true
    call SetUnitInvulnerable( udg_Kael, true )
    call SetUnitInvulnerable( udg_Vashj, true )
    call QueuedTriggerAddBJ( gg_trg_Victory_Cinematic_Q, true )
endfunction

//===========================================================================
function InitTrig_Victory_Wagon_at_BE_Base takes nothing returns nothing
    set gg_trg_Victory_Wagon_at_BE_Base = CreateTrigger(  )
    call TriggerRegisterEnterRectSimple( gg_trg_Victory_Wagon_at_BE_Base, gg_rct_BloodElfGoal )
    call TriggerAddCondition( gg_trg_Victory_Wagon_at_BE_Base, Condition( function Trig_Victory_Wagon_at_BE_Base_Conditions ) )
    call TriggerAddAction( gg_trg_Victory_Wagon_at_BE_Base, function Trig_Victory_Wagon_at_BE_Base_Actions )
endfunction

//===========================================================================
// Trigger: Defeat Wagon at Maiev
//===========================================================================
function Trig_Defeat_Wagon_at_Maiev_Conditions takes nothing returns boolean
    if ( not ( GetEnteringUnit() == udg_Wagon ) ) then
        return false
    endif
    if ( not ( udg_GameOver == false ) ) then
        return false
    endif
    return true
endfunction

function Trig_Defeat_Wagon_at_Maiev_Actions takes nothing returns nothing
    call DisableTrigger( GetTriggeringTrigger() )
    set udg_GameOver = true
    call ConditionalTriggerExecute( gg_trg_Mission_Failed_Wagon_at_Maiev )
    call TriggerSleepAction( bj_QUEUE_DELAY_QUEST )
    call CustomDefeatBJ( udg_AP1_Player, "TRIGSTR_154" )
endfunction

//===========================================================================
function InitTrig_Defeat_Wagon_at_Maiev takes nothing returns nothing
    set gg_trg_Defeat_Wagon_at_Maiev = CreateTrigger(  )
    call TriggerRegisterEnterRectSimple( gg_trg_Defeat_Wagon_at_Maiev, gg_rct_MaievGoal )
    call TriggerAddCondition( gg_trg_Defeat_Wagon_at_Maiev, Condition( function Trig_Defeat_Wagon_at_Maiev_Conditions ) )
    call TriggerAddAction( gg_trg_Defeat_Wagon_at_Maiev, function Trig_Defeat_Wagon_at_Maiev_Actions )
endfunction

//===========================================================================
// Trigger: Defeat BE Buildings Dead
//===========================================================================
function Trig_Defeat_BE_Buildings_Dead_Func001001001002001 takes nothing returns boolean
    return ( IsUnitType(GetFilterUnit(), UNIT_TYPE_STRUCTURE) == true )
endfunction

function Trig_Defeat_BE_Buildings_Dead_Func001001001002002 takes nothing returns boolean
    return ( IsUnitAliveBJ(GetFilterUnit()) == true )
endfunction

function Trig_Defeat_BE_Buildings_Dead_Func001001001002 takes nothing returns boolean
    return GetBooleanAnd( Trig_Defeat_BE_Buildings_Dead_Func001001001002001(), Trig_Defeat_BE_Buildings_Dead_Func001001001002002() )
endfunction

function Trig_Defeat_BE_Buildings_Dead_Conditions takes nothing returns boolean
    if ( not ( CountUnitsInGroup(GetUnitsOfPlayerMatching(udg_P8_BloodElfBase, Condition(function Trig_Defeat_BE_Buildings_Dead_Func001001001002))) <= 1 ) ) then
        return false
    endif
    if ( not ( udg_GameOver == false ) ) then
        return false
    endif
    return true
endfunction

function Trig_Defeat_BE_Buildings_Dead_Actions takes nothing returns nothing
    call DisableTrigger( GetTriggeringTrigger() )
    set udg_GameOver = true
    call ConditionalTriggerExecute( gg_trg_Mission_Failed_Base_Defeated )
    call TriggerSleepAction( bj_QUEUE_DELAY_QUEST )
    call CustomDefeatBJ( udg_AP1_Player, "TRIGSTR_255" )
endfunction

//===========================================================================
function InitTrig_Defeat_BE_Buildings_Dead takes nothing returns nothing
    set gg_trg_Defeat_BE_Buildings_Dead = CreateTrigger(  )
    call TriggerRegisterTimerEventPeriodic( gg_trg_Defeat_BE_Buildings_Dead, 2 )
    call TriggerAddCondition( gg_trg_Defeat_BE_Buildings_Dead, Condition( function Trig_Defeat_BE_Buildings_Dead_Conditions ) )
    call TriggerAddAction( gg_trg_Defeat_BE_Buildings_Dead, function Trig_Defeat_BE_Buildings_Dead_Actions )
endfunction

//===========================================================================
// Trigger: Victory NE Base Dead
//===========================================================================
function Trig_Victory_NE_Base_Dead_Func001001001002001 takes nothing returns boolean
    return ( IsUnitType(GetFilterUnit(), UNIT_TYPE_STRUCTURE) == true )
endfunction

function Trig_Victory_NE_Base_Dead_Func001001001002002 takes nothing returns boolean
    return ( IsUnitAliveBJ(GetFilterUnit()) == true )
endfunction

function Trig_Victory_NE_Base_Dead_Func001001001002 takes nothing returns boolean
    return GetBooleanAnd( Trig_Victory_NE_Base_Dead_Func001001001002001(), Trig_Victory_NE_Base_Dead_Func001001001002002() )
endfunction

function Trig_Victory_NE_Base_Dead_Conditions takes nothing returns boolean
    if ( not ( CountUnitsInGroup(GetUnitsOfPlayerMatching(udg_P2_Watchers, Condition(function Trig_Victory_NE_Base_Dead_Func001001001002))) <= 1 ) ) then
        return false
    endif
    if ( not ( udg_GameOver == false ) ) then
        return false
    endif
    return true
endfunction

function Trig_Victory_NE_Base_Dead_Actions takes nothing returns nothing
    call DisableTrigger( GetTriggeringTrigger() )
    set udg_GameOver = true
    call SetUnitInvulnerable( udg_Kael, true )
    call SetUnitInvulnerable( udg_Vashj, true )
    call QueuedTriggerAddBJ( gg_trg_Victory_Cinematic_Q, true )
endfunction

//===========================================================================
function InitTrig_Victory_NE_Base_Dead takes nothing returns nothing
    set gg_trg_Victory_NE_Base_Dead = CreateTrigger(  )
    call TriggerRegisterTimerEventPeriodic( gg_trg_Victory_NE_Base_Dead, 2 )
    call TriggerAddCondition( gg_trg_Victory_NE_Base_Dead, Condition( function Trig_Victory_NE_Base_Dead_Conditions ) )
    call TriggerAddAction( gg_trg_Victory_NE_Base_Dead, function Trig_Victory_NE_Base_Dead_Actions )
endfunction

//===========================================================================
// Trigger: Combat Detected A
//
// To use combat detection, just disable these two triggers and check the "InCinematic" variable to determine whether or not the player is in combat.
//===========================================================================
function Trig_Combat_Detected_A_Conditions takes nothing returns boolean
    if ( not ( GetOwningPlayer(GetAttacker()) == udg_P2_Watchers ) ) then
        return false
    endif
    if ( not ( DistanceBetweenPoints(GetUnitLoc(GetAttackedUnitBJ()), GetUnitLoc(udg_Wagon)) <= 768.00 ) ) then
        return false
    endif
    if ( not ( udg_WagonOwner == udg_P2_Watchers ) ) then
        return false
    endif
    return true
endfunction

function Trig_Combat_Detected_A_Actions takes nothing returns nothing
    call IssueImmediateOrderBJ( udg_Wagon, "stop" )
    call StartTimerBJ( udg_CombatCheckTimer, false, 3.00 )
    set udg_InCombat = true
endfunction

//===========================================================================
function InitTrig_Combat_Detected_A takes nothing returns nothing
    set gg_trg_Combat_Detected_A = CreateTrigger(  )
    call TriggerRegisterPlayerUnitEventSimple( gg_trg_Combat_Detected_A, Player(0), EVENT_PLAYER_UNIT_ATTACKED )
    call TriggerAddCondition( gg_trg_Combat_Detected_A, Condition( function Trig_Combat_Detected_A_Conditions ) )
    call TriggerAddAction( gg_trg_Combat_Detected_A, function Trig_Combat_Detected_A_Actions )
endfunction

//===========================================================================
// Trigger: Combat Detected B
//
// To use combat detection, just disable these two triggers and check the "InCinematic" variable to determine whether or not the player is in combat.
//===========================================================================
function Trig_Combat_Detected_B_Conditions takes nothing returns boolean
    if ( not ( GetOwningPlayer(GetAttacker()) == udg_AP1_Player ) ) then
        return false
    endif
    if ( not ( DistanceBetweenPoints(GetUnitLoc(GetAttackedUnitBJ()), GetUnitLoc(udg_Wagon)) <= 768.00 ) ) then
        return false
    endif
    if ( not ( udg_WagonOwner == udg_P2_Watchers ) ) then
        return false
    endif
    return true
endfunction

function Trig_Combat_Detected_B_Actions takes nothing returns nothing
    call IssueImmediateOrderBJ( udg_Wagon, "stop" )
    call StartTimerBJ( udg_CombatCheckTimer, false, 3.00 )
    set udg_InCombat = true
endfunction

//===========================================================================
function InitTrig_Combat_Detected_B takes nothing returns nothing
    set gg_trg_Combat_Detected_B = CreateTrigger(  )
    call TriggerRegisterPlayerUnitEventSimple( gg_trg_Combat_Detected_B, Player(1), EVENT_PLAYER_UNIT_ATTACKED )
    call TriggerAddCondition( gg_trg_Combat_Detected_B, Condition( function Trig_Combat_Detected_B_Conditions ) )
    call TriggerAddAction( gg_trg_Combat_Detected_B, function Trig_Combat_Detected_B_Actions )
endfunction

//===========================================================================
// Trigger: Combat Resolved
//===========================================================================
function Trig_Combat_Resolved_Actions takes nothing returns nothing
    set udg_InCombat = false
endfunction

//===========================================================================
function InitTrig_Combat_Resolved takes nothing returns nothing
    set gg_trg_Combat_Resolved = CreateTrigger(  )
    call TriggerRegisterTimerExpireEventBJ( gg_trg_Combat_Resolved, udg_CombatCheckTimer )
    call TriggerAddAction( gg_trg_Combat_Resolved, function Trig_Combat_Resolved_Actions )
endfunction

//===========================================================================
function InitCustomTriggers takes nothing returns nothing
    call InitTrig_Initialization(  )
    call InitTrig_Init_01_Players(  )
    call InitTrig_Init_02_Units(  )
    call InitTrig_Init_03_Music(  )
    call InitTrig_Init_04_Environment(  )
    call InitTrig_Init_05_Quests(  )
    call InitTrig_Init_06a_Hard(  )
    call InitTrig_Init_06b_Normal(  )
    call InitTrig_Init_06c_Easy(  )
    call InitTrig_Init_07a_Caravan_Variables(  )
    call InitTrig_Init_07b_Army_Generation_Variables(  )
    call InitTrig_Init_08_Breadcrumbs(  )
    call InitTrig_Init_09a_Formations(  )
    call InitTrig_Init_09b_Caravan(  )
    call InitTrig_Init_09c_Caravan_Units(  )
    call InitTrig_Load_Heroes(  )
    call InitTrig_Load_Vashj(  )
    call InitTrig_Load_Kael(  )
    call InitTrig_Load_Brewmaster(  )
    call InitTrig_Experience_Cap_Vashj(  )
    call InitTrig_Experience_Cap_Kael(  )
    call InitTrig_Experience_Cap_Brewmaster(  )
    call InitTrig_Cinematic_Revival(  )
    call InitTrig_Intro_Cinematic_Q(  )
    call InitTrig_Intro_Skipped(  )
    call InitTrig_Intro_Setup(  )
    call InitTrig_Intro_Cleanup(  )
    call InitTrig_Gameplay(  )
    call InitTrig_Victory_Cinematic_Q(  )
    call InitTrig_Victory_Wagon_Explodes(  )
    call InitTrig_Victory_Skipped(  )
    call InitTrig_Victory_Setup(  )
    call InitTrig_Create_Path_Visibility(  )
    call InitTrig_Fire_it_Up(  )
    call InitTrig_Start_Build_Animations(  )
    call InitTrig_Start_Timers(  )
    call InitTrig_Initial_Production(  )
    call InitTrig_Put_Wisps_on_Gold(  )
    call InitTrig_BE_Timer_Expires(  )
    call InitTrig_NE_Timer_Expires(  )
    call InitTrig_BE_01(  )
    call InitTrig_BE_02(  )
    call InitTrig_BE_03(  )
    call InitTrig_NE_01(  )
    call InitTrig_NE_02(  )
    call InitTrig_Adjustment_Timer_Expires(  )
    call InitTrig_Adjust_by_Unit_Comparison_Count(  )
    call InitTrig_Adjust_by_Wagon_proximity_to_BE_Base(  )
    call InitTrig_Adjust_by_Wagon_proximity_to_NE_Base(  )
    call InitTrig_Adjust_by_Number_of_Units(  )
    call InitTrig_Limit_TimerLengths(  )
    call InitTrig_Sync_Timers_to_TimerLength(  )
    call InitTrig_BE_Base_Attacked(  )
    call InitTrig_BE_Base_Attacked_Reset(  )
    call InitTrig_Give_Wagon_to_Player(  )
    call InitTrig_Force_Wagon_Moves(  )
    call InitTrig_Player_gets_Wagon_First_Time(  )
    call InitTrig_Player_gets_Wagon_First_Time_Q(  )
    call InitTrig_Player_gets_Wagon_Subsequent_Times(  )
    call InitTrig_Player_gets_Wagon_Subsequent_Times_Q(  )
    call InitTrig_Give_Wagon_to_Maiev(  )
    call InitTrig_Player_Loses_Wagon_First_Time(  )
    call InitTrig_Player_Loses_Wagon_First_Time_Q(  )
    call InitTrig_Player_Loses_Wagon_Subsequent_Times(  )
    call InitTrig_Player_Loses_Wagon_Subsequent_Times_Q(  )
    call InitTrig_MaievOrderPulse_Expires(  )
    call InitTrig_Create_Initial_Board(  )
    call InitTrig_Change_Board_to_Player(  )
    call InitTrig_Change_Board_to_Maiev(  )
    call InitTrig_Caravan_Go(  )
    call InitTrig_Reorient_Formation(  )
    call InitTrig_Caravan_Orders_Pause(  )
    call InitTrig_Caravan_Orders_Resume(  )
    call InitTrig_Caravan_Orders(  )
    call InitTrig_Caravan_Check_Dist(  )
    call InitTrig_Caravan_Unit_Dies(  )
    call InitTrig_Guard_Attacked(  )
    call InitTrig_Guard_Catches_Up(  )
    call InitTrig_Wagons_Reach_Breadcrumb(  )
    call InitTrig_Target_Next_Breadcrumb(  )
    call InitTrig_Kael_Dies(  )
    call InitTrig_Vashj_Dies(  )
    call InitTrig_Brewmaster_Dies(  )
    call InitTrig_Maiev_Dies(  )
    call InitTrig_Kael_Ready_Q(  )
    call InitTrig_Vashj_Ready_Q(  )
    call InitTrig_Maiev_Attacks(  )
    call InitTrig_Maiev_Attacks_Q(  )
    call InitTrig_Give_Money_to_Player(  )
    call InitTrig_PingTimerExpires(  )
    call InitTrig_BE_Building_dies(  )
    call InitTrig_NE_Building_dies(  )
    call InitTrig_Start_Suicide_Scripts(  )
    call InitTrig_AI_Resources_Maiev_Gold(  )
    call InitTrig_AI_Resources_Maiev_Lumber(  )
    call InitTrig_Quest_Secure_Wagon_Create(  )
    call InitTrig_Quest_Secure_Wagon_Discover(  )
    call InitTrig_Quest_Secure_Wagon_Update_Recapture(  )
    call InitTrig_Quest_Secure_Wagon_Update_Lost_Wagon(  )
    call InitTrig_Quest_Secure_Wagon_Completed(  )
    call InitTrig_Quest_Escort_Wagon_Create(  )
    call InitTrig_Quest_Escort_Wagon_Discover(  )
    call InitTrig_Quest_Escort_Wagon_Completed(  )
    call InitTrig_Mission_Failed_Wagon_at_Maiev(  )
    call InitTrig_Mission_Failed_Base_Defeated(  )
    call InitTrig_Get_the_Wagon_Q(  )
    call InitTrig_Only_Control_Hero_Notice_Q(  )
    call InitTrig_Hero_Dies(  )
    call InitTrig_Hero_Dies_Q(  )
    call InitTrig_Item_Shop_Usuable_Q(  )
    call InitTrig_Maiev_Dies_First_Time(  )
    call InitTrig_Maiev_Dies_First_Time_Q(  )
    call InitTrig_Brewmaster_Available_Q(  )
    call InitTrig_Next_Level_Prep(  )
    call InitTrig_Next_Level_Run(  )
    call InitTrig_Victory_Cheat(  )
    call InitTrig_Defeat_Cheat(  )
    call InitTrig_Victory_Wagon_at_BE_Base(  )
    call InitTrig_Defeat_Wagon_at_Maiev(  )
    call InitTrig_Defeat_BE_Buildings_Dead(  )
    call InitTrig_Victory_NE_Base_Dead(  )
    call InitTrig_Combat_Detected_A(  )
    call InitTrig_Combat_Detected_B(  )
    call InitTrig_Combat_Resolved(  )
endfunction

//===========================================================================
function RunInitializationTriggers takes nothing returns nothing
    call ConditionalTriggerExecute( gg_trg_Initialization )
endfunction

//***************************************************************************
//*
//*  Upgrades
//*
//***************************************************************************

function InitUpgrades_Player0 takes nothing returns nothing
    call SetPlayerTechResearched( Player(0), 'Rhst', 2 )
    call SetPlayerTechResearched( Player(0), 'Rhpt', 2 )
    call SetPlayerTechResearched( Player(0), 'Rnsw', 2 )
    call SetPlayerTechResearched( Player(0), 'Rnen', 1 )
    call SetPlayerTechResearched( Player(0), 'Rnsi', 1 )
    call SetPlayerTechMaxAllowed( Player(0), 'Rhra', 0 )
    call SetPlayerTechMaxAllowed( Player(0), 'Rhgb', 0 )
    call SetPlayerTechMaxAllowed( Player(0), 'Rhan', 0 )
    call SetPlayerTechMaxAllowed( Player(0), 'Rhri', 0 )
    call SetPlayerTechMaxAllowed( Player(0), 'Rhfl', 0 )
    call SetPlayerTechMaxAllowed( Player(0), 'Rhrt', 0 )
    call SetPlayerTechMaxAllowed( Player(0), 'Rhfc', 0 )
    call SetPlayerTechMaxAllowed( Player(0), 'Rhfs', 0 )
    call SetPlayerTechMaxAllowed( Player(0), 'Rhcd', 0 )
    call SetPlayerTechMaxAllowed( Player(0), 'Rnsb', 0 )
    call SetPlayerTechMaxAllowed( Player(0), 'Rhhb', 0 )
    call SetPlayerTechResearched( Player(0), 'Rnat', 1 )
    call SetPlayerTechResearched( Player(0), 'Rnam', 1 )
    call SetPlayerTechResearched( Player(0), 'Rhlh', 2 )
    call SetPlayerTechResearched( Player(0), 'Rhse', 1 )
    call SetPlayerTechResearched( Player(0), 'Rhss', 1 )
    call SetPlayerTechResearched( Player(0), 'Rhac', 3 )
endfunction

function InitUpgrades_Player1 takes nothing returns nothing
    call SetPlayerTechResearched( Player(1), 'Rews', 1 )
endfunction

function InitUpgrades_Player4 takes nothing returns nothing
    call SetPlayerTechResearched( Player(4), 'Reib', 1 )
    call SetPlayerTechResearched( Player(4), 'Remk', 1 )
    call SetPlayerTechResearched( Player(4), 'Resm', 3 )
endfunction

function InitUpgrades_Player9 takes nothing returns nothing
    call SetPlayerTechResearched( Player(9), 'Rhst', 2 )
    call SetPlayerTechResearched( Player(9), 'Rhpt', 2 )
    call SetPlayerTechResearched( Player(9), 'Rnsw', 2 )
    call SetPlayerTechResearched( Player(9), 'Rnen', 1 )
    call SetPlayerTechResearched( Player(9), 'Rnat', 3 )
    call SetPlayerTechResearched( Player(9), 'Reib', 1 )
    call SetPlayerTechResearched( Player(9), 'Remk', 1 )
    call SetPlayerTechResearched( Player(9), 'Resm', 3 )
    call SetPlayerTechResearched( Player(9), 'Rhme', 3 )
    call SetPlayerTechResearched( Player(9), 'Rhra', 3 )
    call SetPlayerTechMaxAllowed( Player(9), 'Rhla', 0 )
    call SetPlayerTechMaxAllowed( Player(9), 'Rhar', 0 )
    call SetPlayerTechMaxAllowed( Player(9), 'Rnam', 0 )
endfunction

function InitUpgrades_Player10 takes nothing returns nothing
    call SetPlayerTechResearched( Player(10), 'Redt', 2 )
    call SetPlayerTechResearched( Player(10), 'Redc', 2 )
    call SetPlayerTechResearched( Player(10), 'Rers', 1 )
    call SetPlayerTechResearched( Player(10), 'Rehs', 1 )
    call SetPlayerTechResearched( Player(10), 'Reeb', 1 )
    call SetPlayerTechResearched( Player(10), 'Reec', 1 )
    call SetPlayerTechResearched( Player(10), 'Resi', 1 )
    call SetPlayerTechResearched( Player(10), 'Reib', 1 )
    call SetPlayerTechResearched( Player(10), 'Remk', 1 )
    call SetPlayerTechResearched( Player(10), 'Resm', 3 )
    call SetPlayerTechResearched( Player(10), 'Resw', 3 )
    call SetPlayerTechMaxAllowed( Player(10), 'Rerh', 0 )
    call SetPlayerTechMaxAllowed( Player(10), 'Rema', 0 )
endfunction

function InitUpgrades takes nothing returns nothing
    call InitUpgrades_Player0(  )
    call InitUpgrades_Player1(  )
    call InitUpgrades_Player4(  )
    call InitUpgrades_Player9(  )
    call InitUpgrades_Player10(  )
endfunction

//***************************************************************************
//*
//*  TechTree
//*
//***************************************************************************

function InitTechTree_Player0 takes nothing returns nothing
    call SetPlayerTechMaxAllowed( Player(0), 'Hamg', 0 )
    call SetPlayerTechMaxAllowed( Player(0), 'Hpal', 0 )
    call SetPlayerTechMaxAllowed( Player(0), 'Hmkg', 0 )
    call SetPlayerTechMaxAllowed( Player(0), 'Obla', 0 )
    call SetPlayerTechMaxAllowed( Player(0), 'Ofar', 0 )
    call SetPlayerTechMaxAllowed( Player(0), 'Otch', 0 )
    call SetPlayerTechMaxAllowed( Player(0), 'Udea', 0 )
    call SetPlayerTechMaxAllowed( Player(0), 'Ulic', 0 )
    call SetPlayerTechMaxAllowed( Player(0), 'Udre', 0 )
    call SetPlayerTechMaxAllowed( Player(0), 'Ekee', 0 )
    call SetPlayerTechMaxAllowed( Player(0), 'Emoo', 0 )
    call SetPlayerTechMaxAllowed( Player(0), 'Edem', 0 )
    call SetPlayerTechMaxAllowed( Player(0), 'Hblm', 0 )
    call SetPlayerTechMaxAllowed( Player(0), 'hfoo', 0 )
    call SetPlayerTechMaxAllowed( Player(0), 'hkni', 0 )
    call SetPlayerTechMaxAllowed( Player(0), 'hrif', 0 )
    call SetPlayerTechMaxAllowed( Player(0), 'hmtm', 0 )
    call SetPlayerTechMaxAllowed( Player(0), 'hgyr', 0 )
    call SetPlayerTechMaxAllowed( Player(0), 'hgry', 0 )
    call SetPlayerTechMaxAllowed( Player(0), 'hmtt', 0 )
    call SetPlayerTechMaxAllowed( Player(0), 'hdhw', 0 )
    call SetPlayerTechMaxAllowed( Player(0), 'nnmg', 0 )
    call SetPlayerTechMaxAllowed( Player(0), 'nwgs', 0 )
    call SetPlayerTechMaxAllowed( Player(0), 'nhyc', 0 )
    call SetPlayerTechMaxAllowed( Player(0), 'nmpe', 0 )
    call SetPlayerTechMaxAllowed( Player(0), 'nntg', 0 )
    call SetPlayerTechMaxAllowed( Player(0), 'nnfm', 0 )
    call SetPlayerTechMaxAllowed( Player(0), 'nntt', 0 )
    call SetPlayerTechMaxAllowed( Player(0), 'hwtw', 0 )
    call SetPlayerTechMaxAllowed( Player(0), 'hgtw', 0 )
    call SetPlayerTechMaxAllowed( Player(0), 'hctw', 0 )
    call SetPlayerTechMaxAllowed( Player(0), 'hatw', 0 )
    call SetPlayerTechMaxAllowed( Player(0), 'htow', 0 )
    call SetPlayerTechMaxAllowed( Player(0), 'hkee', 0 )
    call SetPlayerTechMaxAllowed( Player(0), 'hcas', 0 )
    call SetPlayerTechMaxAllowed( Player(0), 'hhou', 0 )
    call SetPlayerTechMaxAllowed( Player(0), 'halt', 0 )
    call SetPlayerTechMaxAllowed( Player(0), 'hlum', 0 )
    call SetPlayerTechMaxAllowed( Player(0), 'hbar', 0 )
    call SetPlayerTechMaxAllowed( Player(0), 'hbla', 0 )
    call SetPlayerTechMaxAllowed( Player(0), 'harm', 0 )
    call SetPlayerTechMaxAllowed( Player(0), 'hars', 0 )
    call SetPlayerTechMaxAllowed( Player(0), 'hgra', 0 )
    call SetPlayerTechMaxAllowed( Player(0), 'nnad', 0 )
    call SetPlayerTechMaxAllowed( Player(0), 'nnsa', 0 )
    call SetPlayerTechMaxAllowed( Player(0), 'nnsg', 0 )
    call SetPlayerTechMaxAllowed( Player(0), 'hvlt', 0 )
endfunction

function InitTechTree_Player1 takes nothing returns nothing
    call SetPlayerTechMaxAllowed( Player(1), 'Ekee', 0 )
    call SetPlayerTechMaxAllowed( Player(1), 'Emoo', 0 )
    call SetPlayerTechMaxAllowed( Player(1), 'Edem', 0 )
    call SetPlayerTechMaxAllowed( Player(1), 'Ewar', 0 )
endfunction

function InitTechTree_Player2 takes nothing returns nothing
    call SetPlayerTechMaxAllowed( Player(2), 'Hamg', 0 )
    call SetPlayerTechMaxAllowed( Player(2), 'Hpal', 0 )
    call SetPlayerTechMaxAllowed( Player(2), 'Hmkg', 0 )
    call SetPlayerTechMaxAllowed( Player(2), 'Hblm', 0 )
endfunction

function InitTechTree_Player4 takes nothing returns nothing
    call SetPlayerTechMaxAllowed( Player(4), 'Ekee', 0 )
    call SetPlayerTechMaxAllowed( Player(4), 'Emoo', 0 )
    call SetPlayerTechMaxAllowed( Player(4), 'Edem', 0 )
    call SetPlayerTechMaxAllowed( Player(4), 'Ewar', 0 )
endfunction

function InitTechTree_Player7 takes nothing returns nothing
    call SetPlayerAbilityAvailable( Player(7), 'Amic', false )
    call SetPlayerAbilityAvailable( Player(7), 'Amil', false )
    call SetPlayerTechMaxAllowed( Player(7), 'Hamg', 0 )
    call SetPlayerTechMaxAllowed( Player(7), 'Hpal', 0 )
    call SetPlayerTechMaxAllowed( Player(7), 'Hmkg', 0 )
    call SetPlayerTechMaxAllowed( Player(7), 'Hblm', 0 )
endfunction

function InitTechTree_Player9 takes nothing returns nothing
    call SetPlayerTechMaxAllowed( Player(9), 'Hamg', 0 )
    call SetPlayerTechMaxAllowed( Player(9), 'Hpal', 0 )
    call SetPlayerTechMaxAllowed( Player(9), 'Hmkg', 0 )
    call SetPlayerTechMaxAllowed( Player(9), 'Hblm', 0 )
endfunction

function InitTechTree_Player10 takes nothing returns nothing
    call SetPlayerTechMaxAllowed( Player(10), 'Ekee', 0 )
    call SetPlayerTechMaxAllowed( Player(10), 'Emoo', 0 )
    call SetPlayerTechMaxAllowed( Player(10), 'Edem', 0 )
    call SetPlayerTechMaxAllowed( Player(10), 'Ewar', 0 )
endfunction

function InitTechTree takes nothing returns nothing
    call InitTechTree_Player0(  )
    call InitTechTree_Player1(  )
    call InitTechTree_Player2(  )
    call InitTechTree_Player4(  )
    call InitTechTree_Player7(  )
    call InitTechTree_Player9(  )
    call InitTechTree_Player10(  )
endfunction

//***************************************************************************
//*
//*  Players
//*
//***************************************************************************

function InitCustomPlayerSlots takes nothing returns nothing

    // Player 0
    call SetPlayerStartLocation( Player(0), 0 )
    call ForcePlayerStartLocation( Player(0), 0 )
    call SetPlayerColor( Player(0), ConvertPlayerColor(0) )
    call SetPlayerRacePreference( Player(0), RACE_PREF_HUMAN )
    call SetPlayerRaceSelectable( Player(0), false )
    call SetPlayerController( Player(0), MAP_CONTROL_USER )

    // Player 1
    call SetPlayerStartLocation( Player(1), 1 )
    call ForcePlayerStartLocation( Player(1), 1 )
    call SetPlayerColor( Player(1), ConvertPlayerColor(1) )
    call SetPlayerRacePreference( Player(1), RACE_PREF_NIGHTELF )
    call SetPlayerRaceSelectable( Player(1), false )
    call SetPlayerController( Player(1), MAP_CONTROL_COMPUTER )

    // Player 2
    call SetPlayerStartLocation( Player(2), 2 )
    call ForcePlayerStartLocation( Player(2), 2 )
    call SetPlayerColor( Player(2), ConvertPlayerColor(2) )
    call SetPlayerRacePreference( Player(2), RACE_PREF_HUMAN )
    call SetPlayerRaceSelectable( Player(2), false )
    call SetPlayerController( Player(2), MAP_CONTROL_NEUTRAL )

    // Player 4
    call SetPlayerStartLocation( Player(4), 3 )
    call ForcePlayerStartLocation( Player(4), 3 )
    call SetPlayerColor( Player(4), ConvertPlayerColor(4) )
    call SetPlayerRacePreference( Player(4), RACE_PREF_NIGHTELF )
    call SetPlayerRaceSelectable( Player(4), false )
    call SetPlayerController( Player(4), MAP_CONTROL_COMPUTER )

    // Player 7
    call SetPlayerStartLocation( Player(7), 4 )
    call ForcePlayerStartLocation( Player(7), 4 )
    call SetPlayerColor( Player(7), ConvertPlayerColor(7) )
    call SetPlayerRacePreference( Player(7), RACE_PREF_HUMAN )
    call SetPlayerRaceSelectable( Player(7), false )
    call SetPlayerController( Player(7), MAP_CONTROL_COMPUTER )

    // Player 9
    call SetPlayerStartLocation( Player(9), 5 )
    call ForcePlayerStartLocation( Player(9), 5 )
    call SetPlayerColor( Player(9), ConvertPlayerColor(9) )
    call SetPlayerRacePreference( Player(9), RACE_PREF_HUMAN )
    call SetPlayerRaceSelectable( Player(9), false )
    call SetPlayerController( Player(9), MAP_CONTROL_COMPUTER )

    // Player 10
    call SetPlayerStartLocation( Player(10), 6 )
    call ForcePlayerStartLocation( Player(10), 6 )
    call SetPlayerColor( Player(10), ConvertPlayerColor(10) )
    call SetPlayerRacePreference( Player(10), RACE_PREF_NIGHTELF )
    call SetPlayerRaceSelectable( Player(10), false )
    call SetPlayerController( Player(10), MAP_CONTROL_COMPUTER )

endfunction

function InitCustomTeams takes nothing returns nothing
    // Force: TRIGSTR_149
    call SetPlayerTeam( Player(0), 0 )
    call SetPlayerTeam( Player(2), 0 )
    call SetPlayerTeam( Player(4), 0 )
    call SetPlayerTeam( Player(7), 0 )
    call SetPlayerTeam( Player(9), 0 )
    call SetPlayerTeam( Player(10), 0 )

    // Force: TRIGSTR_054
    call SetPlayerTeam( Player(1), 1 )

endfunction

function InitAllyPriorities takes nothing returns nothing

    call SetStartLocPrioCount( 1, 5 )
    call SetStartLocPrio( 1, 0, 2, MAP_LOC_PRIO_LOW )
    call SetStartLocPrio( 1, 1, 4, MAP_LOC_PRIO_LOW )
    call SetStartLocPrio( 1, 2, 5, MAP_LOC_PRIO_LOW )
    call SetStartLocPrio( 1, 3, 6, MAP_LOC_PRIO_LOW )

    call SetStartLocPrioCount( 2, 5 )
    call SetStartLocPrio( 2, 0, 1, MAP_LOC_PRIO_LOW )
    call SetStartLocPrio( 2, 1, 4, MAP_LOC_PRIO_LOW )
    call SetStartLocPrio( 2, 2, 5, MAP_LOC_PRIO_LOW )
    call SetStartLocPrio( 2, 3, 6, MAP_LOC_PRIO_LOW )

    call SetStartLocPrioCount( 3, 5 )
    call SetStartLocPrio( 3, 0, 1, MAP_LOC_PRIO_LOW )
    call SetStartLocPrio( 3, 1, 2, MAP_LOC_PRIO_LOW )
    call SetStartLocPrio( 3, 2, 4, MAP_LOC_PRIO_LOW )
    call SetStartLocPrio( 3, 3, 5, MAP_LOC_PRIO_LOW )
    call SetStartLocPrio( 3, 4, 6, MAP_LOC_PRIO_LOW )

    call SetStartLocPrioCount( 4, 5 )
    call SetStartLocPrio( 4, 0, 1, MAP_LOC_PRIO_LOW )
    call SetStartLocPrio( 4, 1, 2, MAP_LOC_PRIO_LOW )
    call SetStartLocPrio( 4, 2, 5, MAP_LOC_PRIO_LOW )
    call SetStartLocPrio( 4, 3, 6, MAP_LOC_PRIO_LOW )

    call SetStartLocPrioCount( 5, 5 )
    call SetStartLocPrio( 5, 0, 1, MAP_LOC_PRIO_LOW )
    call SetStartLocPrio( 5, 1, 2, MAP_LOC_PRIO_LOW )
    call SetStartLocPrio( 5, 2, 4, MAP_LOC_PRIO_LOW )
    call SetStartLocPrio( 5, 3, 6, MAP_LOC_PRIO_LOW )

    call SetStartLocPrioCount( 6, 5 )
    call SetStartLocPrio( 6, 0, 1, MAP_LOC_PRIO_LOW )
    call SetStartLocPrio( 6, 1, 2, MAP_LOC_PRIO_LOW )
    call SetStartLocPrio( 6, 2, 4, MAP_LOC_PRIO_LOW )
    call SetStartLocPrio( 6, 3, 5, MAP_LOC_PRIO_LOW )
endfunction

//***************************************************************************
//*
//*  Main Initialization
//*
//***************************************************************************

//===========================================================================
function main takes nothing returns nothing
    call SetCameraBounds( -5376.0 + GetCameraMargin(CAMERA_MARGIN_LEFT), 5632.0 + GetCameraMargin(CAMERA_MARGIN_BOTTOM), 13568.0 - GetCameraMargin(CAMERA_MARGIN_RIGHT), 16384.0 - GetCameraMargin(CAMERA_MARGIN_TOP), -5376.0 + GetCameraMargin(CAMERA_MARGIN_LEFT), 16384.0 - GetCameraMargin(CAMERA_MARGIN_TOP), 13568.0 - GetCameraMargin(CAMERA_MARGIN_RIGHT), 5632.0 + GetCameraMargin(CAMERA_MARGIN_BOTTOM) )
    call SetDayNightModels( "Environment\\DNC\\DNCLordaeron\\DNCLordaeronTerrain\\DNCLordaeronTerrain.mdl", "Environment\\DNC\\DNCLordaeron\\DNCLordaeronUnit\\DNCLordaeronUnit.mdl" )
    call SetTerrainFogEx( 0, 1000.0, 8000.0, 0.000, 0.502, 0.000, 0.000 )
    call NewSoundEnvironment( "Default" )
    call SetAmbientDaySound( "BlackCitadelDay" )
    call SetAmbientNightSound( "BlackCitadelNight" )
    call SetMapMusic( "Music", true, 0 )
    call InitSounds(  )
    call CreateRegions(  )
    call CreateCameras(  )
    call InitUpgrades(  )
    call InitTechTree(  )
    call CreateAllUnits(  )
    call InitBlizzard(  )
    call InitGlobals(  )
    call InitCustomTriggers(  )
    call RunInitializationTriggers(  )

endfunction

//***************************************************************************
//*
//*  Map Configuration
//*
//***************************************************************************

function config takes nothing returns nothing
    call SetMapName( "TRIGSTR_003" )
    call SetMapDescription( "TRIGSTR_005" )
    call SetPlayers( 7 )
    call SetTeams( 7 )
    call SetGamePlacement( MAP_PLACEMENT_USE_MAP_SETTINGS )

    call DefineStartLocation( 0, -1984.0, 11840.0 )
    call DefineStartLocation( 1, 11392.0, 7360.0 )
    call DefineStartLocation( 2, 3776.0, 6144.0 )
    call DefineStartLocation( 3, 3648.0, 5824.0 )
    call DefineStartLocation( 4, 4032.0, 6272.0 )
    call DefineStartLocation( 5, 3776.0, 6016.0 )
    call DefineStartLocation( 6, 3968.0, 5888.0 )

    // Player setup
    call InitCustomPlayerSlots(  )
    call InitCustomTeams(  )
    call InitAllyPriorities(  )
endfunction

