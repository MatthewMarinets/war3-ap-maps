//===========================================================================
// 
// Human04
// 
//   Warcraft III map script
//   Generated by the Warcraft III World Editor
//   Date: Fri May 31 17:26:15 2002
//   Map Author: Blizzard Entertainment
// 
//===========================================================================

//***************************************************************************
//*
//*  Global Variables
//*
//***************************************************************************

globals
    // User-defined
    boolean             udg_OpeningSkipped
    group               udg_Town01Group            = null
    group               udg_PeonGroup01            = null
    boolean             udg_JainaDiesSkipped
    boolean             udg_GranaryCancelled
    unit                udg_MedivhManForm          = null
    unit                udg_Jaina                  = null
    unit                udg_Arthas                 = null
    quest               udg_QuestNecromancer       = null
    quest               udg_QuestAndorhal          = null
    defeatcondition     udg_ArthasDies             = null
    defeatcondition     udg_JainaDies              = null
    group               udg_GolemsGroup            = null
    group               udg_ExpansionTown          = null
    group               udg_StartingNonHeroGroup   = null
    unit                udg_KelThuzad              = null
    unit                udg_HauntedGoldMine        = null
    group               udg_Ghoul01Group           = null
    group               udg_Ghoul02Group           = null
    unit                udg_PeasantFarm            = null
    unit                udg_PeasantBarracks        = null
    unit                udg_PeasantTownHall        = null
    group               udg_KelThuzadAttackGroup   = null
    unit                udg_MedivhRavenForm        = null
    unit                udg_Townhall               = null
    unit                udg_Farm                   = null
    unit                udg_Barracks               = null
    unit                udg_Timmy                  = null
    boolean             udg_MedivhCancelled
    boolean             udg_WaygateCancelled
    boolean             udg_ArthasDead
    questitem           udg_QuestAndorhalReq       = null
    questitem           udg_QuestKelThuzadReq      = null
    boolean             udg_EndingCancelled
    group               udg_EndCinematicMove       = null
    group               udg_SelectionGroup         = null
    timer               udg_GoldHintTimer          = null
    timer               udg_HeroDeadTimer          = null
    boolean             udg_GAMEOVER
    location            udg_ArthasPoint            = null
    rect                udg_CinematicRegionArthas  = null
    unit                udg_RevivalAltar           = null
    location            udg_JainaPoint             = null
    rect                udg_CinematicRegionJaina   = null
    unit                udg_GranaryEntranceGuy     = null

    // Generated
    rect                gg_rct_OpeningVisibility01 = null
    rect                gg_rct_OpeningArthas       = null
    rect                gg_rct_OpeningJaina        = null
    rect                gg_rct_OpeningFootman01    = null
    rect                gg_rct_OpeningFootman02    = null
    rect                gg_rct_OpeningFootman03    = null
    rect                gg_rct_OpeningFootman04    = null
    rect                gg_rct_Footmen01Attack     = null
    rect                gg_rct_OpeningPeonsDest    = null
    rect                gg_rct_OpeningPriest01     = null
    rect                gg_rct_WaygateJainaArea    = null
    rect                gg_rct_JainaMobile         = null
    rect                gg_rct_EmptyCrates         = null
    rect                gg_rct_AcolyteRange        = null
    rect                gg_rct_OpeningFootmanReposition = null
    rect                gg_rct_GnollRun            = null
    rect                gg_rct_GnollRunDest        = null
    rect                gg_rct_PatrolForestTroll02End = null
    rect                gg_rct_PatrolForestTroll02Start = null
    rect                gg_rct_GolemArea           = null
    rect                gg_rct_PatrolForestTroll01End = null
    rect                gg_rct_PatrolForestTroll01Start = null
    rect                gg_rct_ExpansionArea       = null
    rect                gg_rct_ArthasAttack        = null
    rect                gg_rct_AcolyteExit         = null
    rect                gg_rct_BuildTownHall       = null
    rect                gg_rct_BuildBarracks       = null
    rect                gg_rct_BuildFarm           = null
    rect                gg_rct_BuildLumberMill     = null
    rect                gg_rct_JainaAttack         = null
    rect                gg_rct_Footman02Attack     = null
    rect                gg_rct_Footman03Attack     = null
    rect                gg_rct_JainaMove           = null
    rect                gg_rct_ArthasMove          = null
    rect                gg_rct_KelThuzadWaygate    = null
    rect                gg_rct_RavenDest           = null
    rect                gg_rct_Acolyte01Post       = null
    rect                gg_rct_MortarAttack        = null
    rect                gg_rct_CageGhoul           = null
    rect                gg_rct_KelThuzadFinalPost  = null
    rect                gg_rct_TimmyRoam           = null
    rect                gg_rct_BarrackBlowUp       = null
    rect                gg_rct_BurntOutFarm        = null
    rect                gg_rct_BurntOutFarmGhoulsStart = null
    rect                gg_rct_TowerBlowUp         = null
    rect                gg_rct_KelThuzadFacing     = null
    rect                gg_rct_GranaryKelThuzadArea01 = null
    rect                gg_rct_Group01Exit         = null
    rect                gg_rct_Group02Exit         = null
    rect                gg_rct_KelThuzadExit       = null
    rect                gg_rct_WaygateRevealer     = null
    rect                gg_rct_JainaStart          = null
    rect                gg_rct_ArthasStart         = null
    rect                gg_rct_RevealerGoldmine    = null
    rect                gg_rct_PriestAttack        = null
    rect                gg_rct_PriestFacing        = null
    rect                gg_rct_Footman01Facing     = null
    rect                gg_rct_ArthasWarpGranary   = null
    rect                gg_rct_JainaWarpGranary    = null
    rect                gg_rct_ArthasPostGranary   = null
    rect                gg_rct_JainaPostGranary    = null
    rect                gg_rct_KelThuzadFinalFace  = null
    rect                gg_rct_OpeningCamReset     = null
    rect                gg_rct_GranaryCamReset     = null
    rect                gg_rct_Acolyte02Post       = null
    rect                gg_rct_ExtraGoldMine_Safety1 = null
    rect                gg_rct_ExtraGoldMine_Safety2 = null
    rect                gg_rct_StreamLoop01        = null
    rect                gg_rct_LakeLoop01          = null
    rect                gg_rct_LakeLoop02          = null
    rect                gg_rct_LakeLoop03          = null
    rect                gg_rct_LakeLoop04          = null
    rect                gg_rct_LakeLoop05          = null
    rect                gg_rct_LakeLoop06          = null
    rect                gg_rct_LakeLoop07          = null
    rect                gg_rct_LakeLoop08          = null
    rect                gg_rct_Goblin_Merchant_HINT = null
    rect                gg_rct_Arthas_End          = null
    rect                gg_rct_Jaina_End           = null
    rect                gg_rct_GranaryKelThuzadArea02 = null
    rect                gg_rct_TownArea            = null
    rect                gg_rct_ForestTroll66Initial = null
    rect                gg_rct_ForestBerseker10Initial = null
    rect                gg_rct_ForestTroll72Initial = null
    rect                gg_rct_ForestBerserker09Initial = null
    rect                gg_rct_ForestTroll73Initial = null
    rect                gg_rct_ForestTroll75Initial = null
    camerasetup         gg_cam_Opening02           = null
    camerasetup         gg_cam_Opening04           = null
    camerasetup         gg_cam_Opening01           = null
    camerasetup         gg_cam_Opening03           = null
    camerasetup         gg_cam_Opening05           = null
    camerasetup         gg_cam_OpeningTownHallShot = null
    camerasetup         gg_cam_OpeningFarmShot     = null
    camerasetup         gg_cam_OpeningBarracksShot = null
    camerasetup         gg_cam_FinalEnding         = null
    camerasetup         gg_cam_Granary02           = null
    camerasetup         gg_cam_Granery01Close      = null
    camerasetup         gg_cam_Granery01d          = null
    camerasetup         gg_cam_End                 = null
    sound               gg_snd_H04Acolyte03        = null
    sound               gg_snd_H04Arthas02         = null
    sound               gg_snd_H04Arthas04         = null
    sound               gg_snd_H04Arthas07         = null
    sound               gg_snd_H04Arthas09         = null
    sound               gg_snd_H04Arthas11         = null
    sound               gg_snd_H04Arthas15         = null
    sound               gg_snd_H04Arthas17         = null
    sound               gg_snd_H04Arthas18         = null
    sound               gg_snd_H04Arthas19         = null
    sound               gg_snd_H04Arthas21         = null
    sound               gg_snd_H04Arthas22         = null
    sound               gg_snd_H04Arthas26         = null
    sound               gg_snd_H04Jaina01          = null
    sound               gg_snd_H04Jaina05          = null
    sound               gg_snd_H04KelThuzad06      = null
    sound               gg_snd_H04KelThuzad23      = null
    sound               gg_snd_H04KelThuzad25      = null
    sound               gg_snd_H04KelThuzad27      = null
    sound               gg_snd_H04KelThuzad28      = null
    sound               gg_snd_H04Jaina24          = null
    sound               gg_snd_BanditWarcry1       = null
    sound               gg_snd_Hint                = null
    sound               gg_snd_WaterLakeLoop1      = null
    sound               gg_snd_WaterStreamLoop1    = null
    sound               gg_snd_NecromancerDeath    = null
    trigger             gg_trg_Map_Initialization  = null
    trigger             gg_trg_Difficulty_Easy     = null
    trigger             gg_trg_Difficulty_Normal   = null
    trigger             gg_trg_Difficulty_Hard     = null
    trigger             gg_trg_StartCampaignAI     = null
    trigger             gg_trg_SetupComputerResources = null
    trigger             gg_trg_SetupCreepsSleeping = null
    trigger             gg_trg_SetupNonHeroGroup   = null
    trigger             gg_trg_SetupPlayer         = null
    trigger             gg_trg_SetupHeroes         = null
    trigger             gg_trg_SetupPeasants       = null
    trigger             gg_trg_SetupKelThuzad      = null
    trigger             gg_trg_SetupQuests         = null
    trigger             gg_trg_AcolyteGroup        = null
    trigger             gg_trg_PeonGroup01         = null
    trigger             gg_trg_SetupGolemsGroup    = null
    trigger             gg_trg_SetupAlliances      = null
    trigger             gg_trg_SetupTimmy          = null
    trigger             gg_trg_SetupNeutral        = null
    trigger             gg_trg_SetupScoreScreen    = null
    trigger             gg_trg_AIHarrassment       = null
    trigger             gg_trg_ArthasLevelUp       = null
    trigger             gg_trg_JainaLevelup        = null
    trigger             gg_trg_GreenGold           = null
    trigger             gg_trg_GreenLumber         = null
    trigger             gg_trg_GoldmineHint        = null
    trigger             gg_trg_MilitiaHint         = null
    trigger             gg_trg_GoldmineHint_Safeties = null
    trigger             gg_trg_PowerBuildingHint   = null
    trigger             gg_trg_Merchant_Hint       = null
    trigger             gg_trg_Hero_Died           = null
    trigger             gg_trg_Hero_Revive_Hint    = null
    trigger             gg_trg_Hero_Revive_Hint_With_Altar = null
    trigger             gg_trg_Hero_Revive_Hint_No_Altar = null
    trigger             gg_trg_Load_Heroes         = null
    trigger             gg_trg_Load_Arthas         = null
    trigger             gg_trg_Load_Jaina          = null
    trigger             gg_trg_Next_Level_Prep     = null
    trigger             gg_trg_Next_Level_Run      = null
    trigger             gg_trg_Victory_Cheat       = null
    trigger             gg_trg_DefeatCheat         = null
    trigger             gg_trg_OpeningCancelled    = null
    trigger             gg_trg_Opening01           = null
    trigger             gg_trg_Opening02           = null
    trigger             gg_trg_Opening03           = null
    trigger             gg_trg_Opening04           = null
    trigger             gg_trg_Opening05           = null
    trigger             gg_trg_Opening06           = null
    trigger             gg_trg_PeasantMoving       = null
    trigger             gg_trg_PeasantFarm         = null
    trigger             gg_trg_PeasantBarracks     = null
    trigger             gg_trg_PeasantTownhall     = null
    trigger             gg_trg_Footman01Facing     = null
    trigger             gg_trg_PriestFacing        = null
    trigger             gg_trg_AcolytesRun         = null
    trigger             gg_trg_AcolyteDeath        = null
    trigger             gg_trg_ConstructingHauntedMine = null
    trigger             gg_trg_ConstructingTownhall = null
    trigger             gg_trg_ConstructingFarm    = null
    trigger             gg_trg_ConstructingBarracks = null
    trigger             gg_trg_FarmDone            = null
    trigger             gg_trg_BarracksDone        = null
    trigger             gg_trg_GranaryCancelled    = null
    trigger             gg_trg_Granary01           = null
    trigger             gg_trg_Granary02           = null
    trigger             gg_trg_GranaryDialog       = null
    trigger             gg_trg_GranaryGhouls       = null
    trigger             gg_trg_EndingCancelled     = null
    trigger             gg_trg_Ending              = null
    trigger             gg_trg_Timmy               = null
    trigger             gg_trg_TimmyDies           = null
    trigger             gg_trg_TimmyRoam           = null
    trigger             gg_trg_GhoulsAttack        = null
    trigger             gg_trg_BarracksBlowUp      = null
    trigger             gg_trg_TowerBlowUp         = null
    trigger             gg_trg_ArthasEmptyCrates   = null
    trigger             gg_trg_GnollRun            = null
    trigger             gg_trg_GolemBirth          = null
    trigger             gg_trg_ForestTroll         = null
    trigger             gg_trg_ForestTroll_Patrol_Restart = null
    trigger             gg_trg_Golems              = null
    trigger             gg_trg_Bandits             = null
    trigger             gg_trg_ArthasCinematicRevive = null
    trigger             gg_trg_JainaCinematicRevive = null
    trigger             gg_trg_Victory             = null
    trigger             gg_trg_ArthasDeadSpeech    = null
    trigger             gg_trg_TownIsDestroyed     = null
    unit                gg_unit_ngna_0095          = null
    unit                gg_unit_hwtw_0081          = null
    unit                gg_unit_uaco_0006          = null
    unit                gg_unit_uaco_0005          = null
    unit                gg_unit_uaco_0011          = null
    unit                gg_unit_hpea_0023          = null
    unit                gg_unit_nvlw_0085          = null
    unit                gg_unit_hfoo_0016          = null
    unit                gg_unit_hfoo_0017          = null
    unit                gg_unit_hfoo_0018          = null
    unit                gg_unit_hmtm_0055          = null
    unit                gg_unit_hpea_0020          = null
    unit                gg_unit_hpea_0021          = null
    unit                gg_unit_nftr_0073          = null
    unit                gg_unit_nftr_0072          = null
    unit                gg_unit_nftr_0066          = null
    unit                gg_unit_hbar_0080          = null
    unit                gg_unit_nenf_0069          = null
    unit                gg_unit_uktn_0133          = null
    unit                gg_unit_hmpr_0070          = null
    unit                gg_unit_nftb_0010          = null
    unit                gg_unit_ugho_0047          = null
    unit                gg_unit_ngol_0008          = null
    unit                gg_unit_nftr_0075          = null
    unit                gg_unit_nftb_0009          = null
    unit                gg_unit_ugho_0043          = null
    unit                gg_unit_uabo_0065          = null
    unit                gg_unit_uabo_0071          = null
    unit                gg_unit_ugho_0074          = null
    unit                gg_unit_ugho_0082          = null
    unit                gg_unit_ugho_0083          = null
    unit                gg_unit_ugho_0086          = null
    unit                gg_unit_usep_0087          = null
    destructable        gg_dest_LTlt_2058          = null
    destructable        gg_dest_LTg1_2150          = null
    destructable        gg_dest_LOcg_2148          = null
endglobals

function InitGlobals takes nothing returns nothing
    set udg_OpeningSkipped                         = false
    set udg_Town01Group                            = CreateGroup()
    set udg_PeonGroup01                            = CreateGroup()
    set udg_JainaDiesSkipped                       = false
    set udg_GranaryCancelled                       = false
    set udg_GolemsGroup                            = CreateGroup()
    set udg_ExpansionTown                          = CreateGroup()
    set udg_StartingNonHeroGroup                   = CreateGroup()
    set udg_Ghoul01Group                           = CreateGroup()
    set udg_Ghoul02Group                           = CreateGroup()
    set udg_KelThuzadAttackGroup                   = CreateGroup()
    set udg_MedivhCancelled                        = false
    set udg_WaygateCancelled                       = false
    set udg_ArthasDead                             = false
    set udg_EndingCancelled                        = false
    set udg_EndCinematicMove                       = CreateGroup()
    set udg_SelectionGroup                         = CreateGroup()
    set udg_GoldHintTimer                          = CreateTimer()
    set udg_HeroDeadTimer                          = CreateTimer()
    set udg_GAMEOVER                               = false
    set udg_CinematicRegionArthas                  = null
    set udg_RevivalAltar                           = null
    set udg_CinematicRegionJaina                   = null
endfunction

//***************************************************************************
//*
//*  Sounds
//*
//***************************************************************************

function InitSounds takes nothing returns nothing
    set gg_snd_H04Acolyte03 = CreateSound( "Sound\\Dialogue\\HumanCampaign\\Human04\\H04Acolyte03.mp3", false, false, false, 10, 10, "" )
    call SetSoundParamsFromLabel( gg_snd_H04Acolyte03, "H04Acolyte03" )
    call SetSoundDuration( gg_snd_H04Acolyte03, 4728 )
    set gg_snd_H04Arthas02 = CreateSound( "Sound\\Dialogue\\HumanCampaign\\Human04\\H04Arthas02.mp3", false, false, false, 10, 10, "DefaultEAXON" )
    call SetSoundParamsFromLabel( gg_snd_H04Arthas02, "H04Arthas02" )
    call SetSoundDuration( gg_snd_H04Arthas02, 2612 )
    set gg_snd_H04Arthas04 = CreateSound( "Sound\\Dialogue\\HumanCampaign\\Human04\\H04Arthas04.mp3", false, false, false, 10, 10, "" )
    call SetSoundParamsFromLabel( gg_snd_H04Arthas04, "H04Arthas04" )
    call SetSoundDuration( gg_snd_H04Arthas04, 5355 )
    set gg_snd_H04Arthas07 = CreateSound( "Sound\\Dialogue\\HumanCampaign\\Human04\\H04Arthas07.mp3", false, false, false, 10, 10, "" )
    call SetSoundParamsFromLabel( gg_snd_H04Arthas07, "H04Arthas07" )
    call SetSoundDuration( gg_snd_H04Arthas07, 1750 )
    set gg_snd_H04Arthas09 = CreateSound( "Sound\\Dialogue\\HumanCampaign\\Human04\\H04Arthas09.mp3", false, false, false, 10, 10, "" )
    call SetSoundParamsFromLabel( gg_snd_H04Arthas09, "H04Arthas09" )
    call SetSoundDuration( gg_snd_H04Arthas09, 5381 )
    set gg_snd_H04Arthas11 = CreateSound( "Sound\\Dialogue\\HumanCampaign\\Human04\\H04Arthas11.mp3", false, false, false, 10, 10, "" )
    call SetSoundParamsFromLabel( gg_snd_H04Arthas11, "H04Arthas11" )
    call SetSoundDuration( gg_snd_H04Arthas11, 2926 )
    set gg_snd_H04Arthas15 = CreateSound( "Sound\\Dialogue\\HumanCampaign\\Human04\\H04Arthas15.mp3", false, false, false, 10, 10, "" )
    call SetSoundParamsFromLabel( gg_snd_H04Arthas15, "H04Arthas15" )
    call SetSoundDuration( gg_snd_H04Arthas15, 1829 )
    set gg_snd_H04Arthas17 = CreateSound( "Sound\\Dialogue\\HumanCampaign\\Human04\\H04Arthas17.mp3", false, false, false, 10, 10, "" )
    call SetSoundParamsFromLabel( gg_snd_H04Arthas17, "H04Arthas17" )
    call SetSoundDuration( gg_snd_H04Arthas17, 1515 )
    set gg_snd_H04Arthas18 = CreateSound( "Sound\\Dialogue\\HumanCampaign\\Human04\\H04Arthas18.mp3", false, false, false, 10, 10, "" )
    call SetSoundParamsFromLabel( gg_snd_H04Arthas18, "H04Arthas18" )
    call SetSoundDuration( gg_snd_H04Arthas18, 5878 )
    set gg_snd_H04Arthas19 = CreateSound( "Sound\\Dialogue\\HumanCampaign\\Human04\\H04Arthas19.mp3", false, false, false, 10, 10, "DefaultEAXON" )
    call SetSoundParamsFromLabel( gg_snd_H04Arthas19, "H04Arthas19" )
    call SetSoundDuration( gg_snd_H04Arthas19, 4441 )
    set gg_snd_H04Arthas21 = CreateSound( "Sound\\Dialogue\\HumanCampaign\\Human04\\H04Arthas21.mp3", false, false, false, 10, 10, "" )
    call SetSoundParamsFromLabel( gg_snd_H04Arthas21, "H04Arthas21" )
    call SetSoundDuration( gg_snd_H04Arthas21, 2534 )
    set gg_snd_H04Arthas22 = CreateSound( "Sound\\Dialogue\\HumanCampaign\\Human04\\H04Arthas22.mp3", false, false, false, 10, 10, "" )
    call SetSoundParamsFromLabel( gg_snd_H04Arthas22, "H04Arthas22" )
    call SetSoundDuration( gg_snd_H04Arthas22, 5251 )
    set gg_snd_H04Arthas26 = CreateSound( "Sound\\Dialogue\\HumanCampaign\\Human04\\H04Arthas26.mp3", false, false, false, 10, 10, "" )
    call SetSoundParamsFromLabel( gg_snd_H04Arthas26, "H04Arthas26" )
    call SetSoundDuration( gg_snd_H04Arthas26, 3187 )
    set gg_snd_H04Jaina01 = CreateSound( "Sound\\Dialogue\\HumanCampaign\\Human04\\H04Jaina01.mp3", false, false, false, 10, 10, "DefaultEAXON" )
    call SetSoundParamsFromLabel( gg_snd_H04Jaina01, "H04Jaina01" )
    call SetSoundDuration( gg_snd_H04Jaina01, 5329 )
    set gg_snd_H04Jaina05 = CreateSound( "Sound\\Dialogue\\HumanCampaign\\Human04\\H04Jaina05.mp3", false, false, false, 10, 10, "" )
    call SetSoundParamsFromLabel( gg_snd_H04Jaina05, "H04Jaina05" )
    call SetSoundDuration( gg_snd_H04Jaina05, 1332 )
    set gg_snd_H04KelThuzad06 = CreateSound( "Sound\\Dialogue\\HumanCampaign\\Human04\\H04KelThuzad06.mp3", false, false, false, 10, 10, "DefaultEAXON" )
    call SetSoundParamsFromLabel( gg_snd_H04KelThuzad06, "H04KelThuzad06" )
    call SetSoundDuration( gg_snd_H04KelThuzad06, 13114 )
    set gg_snd_H04KelThuzad23 = CreateSound( "Sound\\Dialogue\\HumanCampaign\\Human04\\H04KelThuzad23.mp3", false, false, false, 10, 10, "DefaultEAXON" )
    call SetSoundParamsFromLabel( gg_snd_H04KelThuzad23, "H04KelThuzad23" )
    call SetSoundDuration( gg_snd_H04KelThuzad23, 8751 )
    set gg_snd_H04KelThuzad25 = CreateSound( "Sound\\Dialogue\\HumanCampaign\\Human04\\H04KelThuzad25.mp3", false, false, false, 10, 10, "DefaultEAXON" )
    call SetSoundParamsFromLabel( gg_snd_H04KelThuzad25, "H04KelThuzad25" )
    call SetSoundDuration( gg_snd_H04KelThuzad25, 10867 )
    set gg_snd_H04KelThuzad27 = CreateSound( "Sound\\Dialogue\\HumanCampaign\\Human04\\H04KelThuzad27.mp3", false, false, false, 10, 10, "" )
    call SetSoundParamsFromLabel( gg_snd_H04KelThuzad27, "H04KelThuzad27" )
    call SetSoundDuration( gg_snd_H04KelThuzad27, 9352 )
    set gg_snd_H04KelThuzad28 = CreateSound( "Sound\\Dialogue\\HumanCampaign\\Human04\\H04KelThuzad28.mp3", false, false, false, 10, 10, "" )
    call SetSoundParamsFromLabel( gg_snd_H04KelThuzad28, "H04KelThuzad28" )
    call SetSoundDuration( gg_snd_H04KelThuzad28, 12356 )
    set gg_snd_H04Jaina24 = CreateSound( "Sound\\Dialogue\\HumanCampaign\\Human04\\H04Jaina24.mp3", false, false, false, 10, 10, "" )
    call SetSoundParamsFromLabel( gg_snd_H04Jaina24, "H04Jaina24" )
    call SetSoundDuration( gg_snd_H04Jaina24, 966 )
    set gg_snd_BanditWarcry1 = CreateSound( "Units\\Creeps\\Bandit\\BanditWarcry1.wav", false, true, true, 10, 10, "DefaultEAXON" )
    call SetSoundParamsFromLabel( gg_snd_BanditWarcry1, "BanditWarcry" )
    call SetSoundDuration( gg_snd_BanditWarcry1, 795 )
    set gg_snd_Hint = CreateSound( "Sound\\Interface\\Hint.wav", false, false, false, 10, 10, "" )
    call SetSoundParamsFromLabel( gg_snd_Hint, "Hint" )
    call SetSoundDuration( gg_snd_Hint, 2006 )
    set gg_snd_WaterLakeLoop1 = CreateSound( "Sound\\Ambient\\DoodadEffects\\WaterLakeLoop1.wav", true, true, true, 10, 10, "DoodadsEAX" )
    call SetSoundParamsFromLabel( gg_snd_WaterLakeLoop1, "LakeLoop" )
    call SetSoundDuration( gg_snd_WaterLakeLoop1, 3297 )
    set gg_snd_WaterStreamLoop1 = CreateSound( "Sound\\Ambient\\DoodadEffects\\WaterStreamLoop1.wav", true, true, true, 10, 10, "DoodadsEAX" )
    call SetSoundParamsFromLabel( gg_snd_WaterStreamLoop1, "StreamLoop" )
    call SetSoundDuration( gg_snd_WaterStreamLoop1, 2009 )
    set gg_snd_NecromancerDeath = CreateSound( "Units\\Undead\\Necromancer\\NecromancerDeath.wav", false, true, true, 10, 10, "DefaultEAXON" )
    call SetSoundParamsFromLabel( gg_snd_NecromancerDeath, "NecromancerDeath" )
    call SetSoundDuration( gg_snd_NecromancerDeath, 2003 )
endfunction

//***************************************************************************
//*
//*  Destructable Objects
//*
//***************************************************************************

function CreateAllDestructables takes nothing returns nothing
    local real life
    set gg_dest_LOcg_2148 = CreateDestructable( 'LOcg', -1280.0, 2048.0, 269.000, 1.194, 0 )
    set gg_dest_LTg1_2150 = CreateDestructable( 'LTg1', -1408.0, 3968.0, 270.000, 0.900, 0 )
    set gg_dest_LTlt_2058 = CreateDestructable( 'LTlt', -2752.0, -4608.0, 270.000, 0.863, 8 )
endfunction

//***************************************************************************
//*
//*  Dropped Unit Items
//*
//***************************************************************************

function Unit000001_DropItems takes nothing returns nothing
    local unit trigUnit
    local integer itemID

    set trigUnit = GetTriggerUnit()
    if (not IsUnitHidden(trigUnit)) then
        // Item set 0
        call RandomDistReset(  )
        call RandomDistAddItem( 'phea', 100 )
        set itemID = RandomDistChoose(  )
        call UnitDropItem( trigUnit, itemID )

    endif

    call DestroyTrigger(GetTriggeringTrigger())
endfunction

function Unit000032_DropItems takes nothing returns nothing
    local unit trigUnit
    local integer itemID

    set trigUnit = GetTriggerUnit()
    if (not IsUnitHidden(trigUnit)) then
        // Item set 0
        call RandomDistReset(  )
        call RandomDistAddItem( 'rde1', 100 )
        set itemID = RandomDistChoose(  )
        call UnitDropItem( trigUnit, itemID )

    endif

    call DestroyTrigger(GetTriggeringTrigger())
endfunction

function Unit000043_DropItems takes nothing returns nothing
    local unit trigUnit
    local integer itemID

    set trigUnit = GetTriggerUnit()
    if (not IsUnitHidden(trigUnit)) then
        // Item set 0
        call RandomDistReset(  )
        call RandomDistAddItem( 'pman', 100 )
        set itemID = RandomDistChoose(  )
        call UnitDropItem( trigUnit, itemID )

    endif

    call DestroyTrigger(GetTriggeringTrigger())
endfunction

function Unit000048_DropItems takes nothing returns nothing
    local unit trigUnit
    local integer itemID

    set trigUnit = GetTriggerUnit()
    if (not IsUnitHidden(trigUnit)) then
        // Item set 0
        call RandomDistReset(  )
        call RandomDistAddItem( 'pman', 100 )
        set itemID = RandomDistChoose(  )
        call UnitDropItem( trigUnit, itemID )

    endif

    call DestroyTrigger(GetTriggeringTrigger())
endfunction

function Unit000066_DropItems takes nothing returns nothing
    local unit trigUnit
    local integer itemID

    set trigUnit = GetTriggerUnit()
    if (not IsUnitHidden(trigUnit)) then
        // Item set 0
        call RandomDistReset(  )
        call RandomDistAddItem( 'rat6', 100 )
        set itemID = RandomDistChoose(  )
        call UnitDropItem( trigUnit, itemID )

    endif

    call DestroyTrigger(GetTriggeringTrigger())
endfunction

function Unit000073_DropItems takes nothing returns nothing
    local unit trigUnit
    local integer itemID

    set trigUnit = GetTriggerUnit()
    if (not IsUnitHidden(trigUnit)) then
        // Item set 0
        call RandomDistReset(  )
        call RandomDistAddItem( 'spro', 100 )
        set itemID = RandomDistChoose(  )
        call UnitDropItem( trigUnit, itemID )

    endif

    call DestroyTrigger(GetTriggeringTrigger())
endfunction


//***************************************************************************
//*
//*  Unit Creation
//*
//***************************************************************************

//===========================================================================
function CreateUnitsForPlayer1 takes nothing returns nothing
    local player p = Player(1)
    local unit u
    local integer unitID
    local trigger t
    local real life

    set gg_unit_hfoo_0016 = CreateUnit( p, 'hfoo', -3331.1, -5965.0, 252.452 )
    set gg_unit_hfoo_0017 = CreateUnit( p, 'hfoo', -3427.0, -6076.9, 351.002 )
    set gg_unit_hfoo_0018 = CreateUnit( p, 'hfoo', -3472.0, -6005.7, 51.198 )
    set gg_unit_hpea_0020 = CreateUnit( p, 'hpea', -3709.8, -6104.5, 309.675 )
    set gg_unit_hpea_0021 = CreateUnit( p, 'hpea', -3814.2, -6050.2, 314.247 )
    set gg_unit_hpea_0023 = CreateUnit( p, 'hpea', -3692.6, -5993.4, 322.944 )
    set gg_unit_hmtm_0055 = CreateUnit( p, 'hmtm', -3576.8, -6028.9, 274.128 )
    set gg_unit_hmpr_0070 = CreateUnit( p, 'hmpr', -3595.2, -6108.3, 155.033 )
endfunction

//===========================================================================
function CreateBuildingsForPlayer5 takes nothing returns nothing
    local player p = Player(5)
    local unit u
    local integer unitID
    local trigger t
    local real life

    set u = CreateUnit( p, 'uslh', 1792.0, 4160.0, 270.000 )
endfunction

//===========================================================================
function CreateUnitsForPlayer5 takes nothing returns nothing
    local player p = Player(5)
    local unit u
    local integer unitID
    local trigger t
    local real life

    set u = CreateUnit( p, 'ugho', -266.1, 4819.4, 176.355 )
    set u = CreateUnit( p, 'ugho', -176.4, 4413.3, 132.492 )
    set gg_unit_ugho_0043 = CreateUnit( p, 'ugho', -2115.0, 2386.0, 56.548 )
    set gg_unit_ugho_0047 = CreateUnit( p, 'ugho', -2226.2, 2684.0, 333.634 )
    set u = CreateUnit( p, 'ugho', 1866.7, 3436.1, 141.346 )
    set u = CreateUnit( p, 'uabo', 1484.3, 4082.1, 314.537 )
    set u = CreateUnit( p, 'uabo', 1567.8, 3784.9, 132.148 )
    set u = CreateUnit( p, 'uabo', 1490.3, 3377.6, 171.864 )
    set u = CreateUnit( p, 'uabo', 1147.8, 3778.8, 324.887 )
    set u = CreateUnit( p, 'uabo', 1887.8, 3201.5, 62.963 )
    set gg_unit_uabo_0065 = CreateUnit( p, 'uabo', 2085.9, 3961.7, 132.148 )
    set gg_unit_uabo_0071 = CreateUnit( p, 'uabo', 1270.7, 3485.3, 132.148 )
endfunction

//===========================================================================
function CreateBuildingsForPlayer6 takes nothing returns nothing
    local player p = Player(6)
    local unit u
    local integer unitID
    local trigger t
    local real life

    set u = CreateUnit( p, 'uzig', -5024.0, 32.0, 270.000 )
    set u = CreateUnit( p, 'ugrv', -4736.0, -640.0, 270.000 )
    set u = CreateUnit( p, 'usep', -4864.0, 1024.0, 270.000 )
    set u = CreateUnit( p, 'unp1', -5120.0, 512.0, 270.000 )
    set u = CreateUnit( p, 'utod', -4224.0, 128.0, 270.000 )
    set u = CreateUnit( p, 'uzig', -4320.0, 800.0, 270.000 )
    set u = CreateBlightedGoldmine( p, -5440.0, 1024.0, 270.000 )
    call SetResourceAmount( u, 12500 )
    set u = CreateUnit( p, 'uzig', -4960.0, 1504.0, 270.000 )
    set u = CreateUnit( p, 'uzg1', -4512.0, 1376.0, 270.000 )
    set u = CreateUnit( p, 'uzig', -3744.0, 32.0, 270.000 )
    set u = CreateUnit( p, 'uzig', -4576.0, -224.0, 270.000 )
    set gg_unit_usep_0087 = CreateUnit( p, 'usep', -4096.0, -448.0, 270.000 )
endfunction

//===========================================================================
function CreateUnitsForPlayer6 takes nothing returns nothing
    local player p = Player(6)
    local unit u
    local integer unitID
    local trigger t
    local real life

    set u = CreateUnit( p, 'uaco', -4082.8, 477.2, 151.539 )
    set gg_unit_uaco_0005 = CreateUnit( p, 'uaco', -2090.4, -3550.0, 266.119 )
    set gg_unit_uaco_0006 = CreateUnit( p, 'uaco', -1893.9, -3599.7, 196.969 )
    set gg_unit_uaco_0011 = CreateUnit( p, 'uaco', -2045.4, -3734.8, 231.961 )
    set u = CreateUnit( p, 'uaco', -4000.6, 346.4, 261.406 )
    set u = CreateUnit( p, 'uaco', -4208.1, 355.7, 148.617 )
    set u = CreateUnit( p, 'uaco', -4242.1, 565.5, 190.531 )
    set u = CreateUnit( p, 'unec', -4523.7, 115.5, 62.141 )
    set gg_unit_ugho_0074 = CreateUnit( p, 'ugho', -4819.0, -130.7, 287.521 )
    set gg_unit_ugho_0082 = CreateUnit( p, 'ugho', -4573.6, 337.9, 31.795 )
    set gg_unit_ugho_0083 = CreateUnit( p, 'ugho', -4616.7, 671.5, 282.786 )
    set gg_unit_ugho_0086 = CreateUnit( p, 'ugho', -4711.7, 158.9, 322.821 )
    set gg_unit_uktn_0133 = CreateUnit( p, 'uktn', -2270.3, 2539.6, 48.174 )
endfunction

//===========================================================================
function CreateBuildingsForPlayer7 takes nothing returns nothing
    local player p = Player(7)
    local unit u
    local integer unitID
    local trigger t
    local real life

    set u = CreateUnit( p, 'hwtw', -448.0, 704.0, 270.000 )
    set life = GetUnitState( u, UNIT_STATE_LIFE )
    call SetUnitState( u, UNIT_STATE_LIFE, 0.15 * life )
    set u = CreateUnit( p, 'hwtw', -3904.0, 2560.0, 270.000 )
    set life = GetUnitState( u, UNIT_STATE_LIFE )
    call SetUnitState( u, UNIT_STATE_LIFE, 0.17 * life )
    set gg_unit_hbar_0080 = CreateUnit( p, 'hbar', -256.0, 2816.0, 270.000 )
    set life = GetUnitState( gg_unit_hbar_0080, UNIT_STATE_LIFE )
    call SetUnitState( gg_unit_hbar_0080, UNIT_STATE_LIFE, 0.10 * life )
    set gg_unit_hwtw_0081 = CreateUnit( p, 'hwtw', -1856.0, 3456.0, 270.000 )
    set life = GetUnitState( gg_unit_hwtw_0081, UNIT_STATE_LIFE )
    call SetUnitState( gg_unit_hwtw_0081, UNIT_STATE_LIFE, 0.15 * life )
endfunction

//===========================================================================
function CreateNeutralHostileBuildings takes nothing returns nothing
    local player p = Player(PLAYER_NEUTRAL_AGGRESSIVE)
    local unit u
    local integer unitID
    local trigger t
    local real life

    set u = CreateUnit( p, 'ngni', -1824.0, 2784.0, 270.000 )
    set life = GetUnitState( u, UNIT_STATE_LIFE )
    call SetUnitState( u, UNIT_STATE_LIFE, 0.20 * life )
    set u = CreateUnit( p, 'ngni', -2208.0, 2848.0, 270.000 )
    set life = GetUnitState( u, UNIT_STATE_LIFE )
    call SetUnitState( u, UNIT_STATE_LIFE, 0.35 * life )
    set u = CreateUnit( p, 'ngni', -1952.0, 2336.0, 270.000 )
    set life = GetUnitState( u, UNIT_STATE_LIFE )
    call SetUnitState( u, UNIT_STATE_LIFE, 0.10 * life )
endfunction

//===========================================================================
function CreateNeutralHostile takes nothing returns nothing
    local player p = Player(PLAYER_NEUTRAL_AGGRESSIVE)
    local unit u
    local integer unitID
    local trigger t
    local real life

    set u = CreateUnit( p, 'nmrr', 1606.9, -5935.1, 308.637 )
    set gg_unit_nftb_0009 = CreateUnit( p, 'nftb', 4324.5, -5497.8, 264.880 )
    set t = CreateTrigger(  )
    call TriggerRegisterUnitEvent( t, gg_unit_nftb_0009, EVENT_UNIT_DEATH )
    call TriggerAddAction( t, function Unit000066_DropItems )
    set gg_unit_nftb_0010 = CreateUnit( p, 'nftb', -62.3, -1554.8, 318.470 )
    set u = CreateUnit( p, 'ngns', 2497.5, -2040.6, 313.109 )
    set u = CreateUnit( p, 'ngst', 3687.8, -152.5, 338.020 )
    set t = CreateTrigger(  )
    call TriggerRegisterUnitEvent( t, u, EVENT_UNIT_DEATH )
    call TriggerAddAction( t, function Unit000032_DropItems )
    set u = CreateUnit( p, 'ngrk', 3492.5, -753.7, 163.196 )
    set u = CreateUnit( p, 'ngrk', 3917.5, -1171.1, 163.196 )
    set u = CreateUnit( p, 'nmrr', 1377.7, -5845.0, 16.854 )
    set u = CreateUnit( p, 'ngna', 2605.1, -2224.2, 140.201 )
    set u = CreateUnit( p, 'ngna', 2699.9, -2037.3, 327.556 )
    set u = CreateUnit( p, 'nmrm', -1340.2, -548.5, 351.810 )
    set t = CreateTrigger(  )
    call TriggerRegisterUnitEvent( t, u, EVENT_UNIT_DEATH )
    call TriggerAddAction( t, function Unit000043_DropItems )
    set u = CreateUnit( p, 'nmrm', -1708.2, -596.1, 293.739 )
    set u = CreateUnit( p, 'nmrm', -1539.3, -697.0, 24.907 )
    set u = CreateUnit( p, 'ngst', 4299.5, -630.9, 86.150 )
    set gg_unit_nftr_0066 = CreateUnit( p, 'nftr', -195.6, -1377.8, 0.879 )
    set u = CreateUnit( p, 'nenf', -4808.5, -4945.4, 34.770 )
    set t = CreateTrigger(  )
    call TriggerRegisterUnitEvent( t, u, EVENT_UNIT_DEATH )
    call TriggerAddAction( t, function Unit000048_DropItems )
    set u = CreateUnit( p, 'nenf', -4542.3, -4996.5, 169.953 )
    set gg_unit_nenf_0069 = CreateUnit( p, 'nenf', -4706.6, -4694.5, 299.288 )
    set gg_unit_nftr_0072 = CreateUnit( p, 'nftr', 108.1, -1454.9, 59.075 )
    set gg_unit_nftr_0073 = CreateUnit( p, 'nftr', 4508.2, -5406.0, 143.332 )
    set gg_unit_nftr_0075 = CreateUnit( p, 'nftr', 4331.1, -5707.1, 231.819 )
    set gg_unit_ngna_0095 = CreateUnit( p, 'ngna', 2337.3, -3879.7, 195.674 )
endfunction

//===========================================================================
function CreateNeutralPassiveBuildings takes nothing returns nothing
    local player p = Player(PLAYER_NEUTRAL_PASSIVE)
    local unit u
    local integer unitID
    local trigger t
    local real life

    set u = CreateUnit( p, 'ngol', 3840.0, -3328.0, 270.000 )
    call SetResourceAmount( u, 11258 )
    set u = CreateUnit( p, 'nC03', -2624.0, 5440.0, 270.000 )
    set gg_unit_ngol_0008 = CreateUnit( p, 'ngol', -1408.0, -4096.0, 270.000 )
    call SetResourceAmount( gg_unit_ngol_0008, 10000 )
    set u = CreateUnit( p, 'nfh1', 4768.0, -5536.0, 270.000 )
    set t = CreateTrigger(  )
    call TriggerRegisterUnitEvent( t, u, EVENT_UNIT_DEATH )
    call TriggerAddAction( t, function Unit000073_DropItems )
    set u = CreateUnit( p, 'nten', -4192.0, -4832.0, 270.000 )
    set u = CreateUnit( p, 'ngnh', 2656.0, -1824.0, 270.000 )
    set t = CreateTrigger(  )
    call TriggerRegisterUnitEvent( t, u, EVENT_UNIT_DEATH )
    call TriggerAddAction( t, function Unit000001_DropItems )
    set u = CreateUnit( p, 'nten', -4320.0, -4640.0, 270.000 )
    set u = CreateUnit( p, 'nC02', 1152.0, -1536.0, 270.000 )
endfunction

//===========================================================================
function CreateNeutralPassive takes nothing returns nothing
    local player p = Player(PLAYER_NEUTRAL_PASSIVE)
    local unit u
    local integer unitID
    local trigger t
    local real life

    set gg_unit_nvlw_0085 = CreateUnit( p, 'nvlw', -5472.0, -2540.8, 49.286 )
endfunction

//===========================================================================
function CreatePlayerBuildings takes nothing returns nothing
    call CreateBuildingsForPlayer5(  )
    call CreateBuildingsForPlayer6(  )
    call CreateBuildingsForPlayer7(  )
endfunction

//===========================================================================
function CreatePlayerUnits takes nothing returns nothing
    call CreateUnitsForPlayer1(  )
    call CreateUnitsForPlayer5(  )
    call CreateUnitsForPlayer6(  )
endfunction

//===========================================================================
function CreateAllUnits takes nothing returns nothing
    call CreateNeutralHostileBuildings(  )
    call CreateNeutralPassiveBuildings(  )
    call CreatePlayerBuildings(  )
    call CreateNeutralHostile(  )
    call CreateNeutralPassive(  )
    call CreatePlayerUnits(  )
endfunction

//***************************************************************************
//*
//*  Regions
//*
//***************************************************************************

function CreateRegions takes nothing returns nothing
    local weathereffect we

    set gg_rct_OpeningVisibility01 = Rect( -2080.0, -4704.0, -992.0, -3584.0 )
    set gg_rct_OpeningArthas = Rect( -2400.0, -5472.0, -2336.0, -5312.0 )
    set gg_rct_OpeningJaina = Rect( -2592.0, -5312.0, -2528.0, -5248.0 )
    set gg_rct_OpeningFootman01 = Rect( -2624.0, -5536.0, -2560.0, -5472.0 )
    set gg_rct_OpeningFootman02 = Rect( -2496.0, -5632.0, -2464.0, -5536.0 )
    set gg_rct_OpeningFootman03 = Rect( -2752.0, -5568.0, -2688.0, -5472.0 )
    set gg_rct_OpeningFootman04 = Rect( -2560.0, -5728.0, -2496.0, -5664.0 )
    set gg_rct_Footmen01Attack = Rect( -2752.0, -3904.0, -2560.0, -3712.0 )
    set gg_rct_OpeningPeonsDest = Rect( -2400.0, -4960.0, -2208.0, -4768.0 )
    set gg_rct_OpeningPriest01 = Rect( -2848.0, -5824.0, -2752.0, -5728.0 )
    set gg_rct_WaygateJainaArea = Rect( -2720.0, 4704.0, -1696.0, 5568.0 )
    set gg_rct_JainaMobile = Rect( -3840.0, -6592.0, -3424.0, -6240.0 )
    set gg_rct_EmptyCrates = Rect( -2656.0, 2048.0, -1856.0, 3392.0 )
    set gg_rct_AcolyteRange = Rect( -2016.0, -4640.0, -1056.0, -3680.0 )
    set gg_rct_OpeningFootmanReposition = Rect( -2592.0, -5856.0, -2560.0, -5760.0 )
    set gg_rct_GnollRun = Rect( 1600.0, -4352.0, 2528.0, -3232.0 )
    set gg_rct_GnollRunDest = Rect( 2272.0, -1984.0, 2400.0, -1856.0 )
    set gg_rct_PatrolForestTroll02End = Rect( 3360.0, -4576.0, 3680.0, -4224.0 )
    set gg_rct_PatrolForestTroll02Start = Rect( 4096.0, -5824.0, 4704.0, -5248.0 )
    set gg_rct_GolemArea = Rect( 3008.0, -1696.0, 3808.0, -832.0 )
    set gg_rct_PatrolForestTroll01End = Rect( 1184.0, -384.0, 1472.0, 0.0 )
    set gg_rct_PatrolForestTroll01Start = Rect( -352.0, -1728.0, 320.0, -1216.0 )
    set gg_rct_ExpansionArea = Rect( -5248.0, -704.0, -3648.0, 960.0 )
    set gg_rct_ArthasAttack = Rect( -2048.0, -4384.0, -1824.0, -4096.0 )
    set gg_rct_AcolyteExit = Rect( -4608.0, -384.0, -3904.0, 224.0 )
    set gg_rct_BuildTownHall = Rect( -2336.0, -4192.0, -2080.0, -3904.0 )
    set gg_rct_BuildBarracks = Rect( -1856.0, -3648.0, -1632.0, -3424.0 )
    set gg_rct_BuildFarm = Rect( -1440.0, -4768.0, -1280.0, -4448.0 )
    set gg_rct_BuildLumberMill = Rect( -2784.0, -4448.0, -2560.0, -4192.0 )
    set gg_rct_JainaAttack = Rect( -2240.0, -4416.0, -2016.0, -4224.0 )
    set gg_rct_Footman02Attack = Rect( -2688.0, -3520.0, -2496.0, -3296.0 )
    set gg_rct_Footman03Attack = Rect( -2752.0, -3712.0, -2592.0, -3520.0 )
    set gg_rct_JainaMove = Rect( -2720.0, -4096.0, -2464.0, -3840.0 )
    set gg_rct_ArthasMove = Rect( -2368.0, -3680.0, -2176.0, -3488.0 )
    set gg_rct_KelThuzadWaygate = Rect( -2400.0, 4800.0, -2112.0, 5024.0 )
    set gg_rct_RavenDest = Rect( -224.0, -2560.0, 384.0, -1952.0 )
    set gg_rct_Acolyte01Post = Rect( -1600.0, -4320.0, -1408.0, -4128.0 )
    set gg_rct_MortarAttack = Rect( -2592.0, -3904.0, -2400.0, -3744.0 )
    set gg_rct_CageGhoul = Rect( -1312.0, 1952.0, -1184.0, 2112.0 )
    set gg_rct_KelThuzadFinalPost = Rect( 2400.0, 3520.0, 2656.0, 3776.0 )
    set gg_rct_TimmyRoam = Rect( -2496.0, 1472.0, -384.0, 3232.0 )
    set gg_rct_BarrackBlowUp = Rect( -928.0, 2144.0, 256.0, 3488.0 )
    set gg_rct_BurntOutFarm = Rect( -5696.0, -3072.0, -4896.0, -2016.0 )
    set gg_rct_BurntOutFarmGhoulsStart = Rect( -5728.0, -2784.0, -5408.0, -2464.0 )
    set gg_rct_TowerBlowUp = Rect( -1824.0, 2752.0, -1408.0, 3936.0 )
    set gg_rct_KelThuzadFacing = Rect( -3008.0, 2304.0, -2816.0, 2464.0 )
    set gg_rct_GranaryKelThuzadArea01 = Rect( -4896.0, 2432.0, -3296.0, 2752.0 )
    set gg_rct_Group01Exit = Rect( -4736.0, -352.0, -4320.0, 0.0 )
    set gg_rct_Group02Exit = Rect( -4416.0, -288.0, -4032.0, 64.0 )
    set gg_rct_KelThuzadExit = Rect( -4288.0, 0.0, -4064.0, 224.0 )
    set gg_rct_WaygateRevealer = Rect( -2304.0, 4928.0, -2112.0, 5152.0 )
    set gg_rct_JainaStart = Rect( -3296.0, -5888.0, -3168.0, -5728.0 )
    set gg_rct_ArthasStart = Rect( -3168.0, -6080.0, -3040.0, -5952.0 )
    set gg_rct_RevealerGoldmine = Rect( 3488.0, -3616.0, 4128.0, -3008.0 )
    set gg_rct_PriestAttack = Rect( -2592.0, -3712.0, -2368.0, -3520.0 )
    set gg_rct_PriestFacing = Rect( -3008.0, -3488.0, -2848.0, -3296.0 )
    set gg_rct_Footman01Facing = Rect( -1120.0, -4832.0, -928.0, -4672.0 )
    set gg_rct_ArthasWarpGranary = Rect( -3296.0, 2560.0, -3040.0, 2848.0 )
    set gg_rct_JainaWarpGranary = Rect( -3296.0, 2304.0, -3040.0, 2560.0 )
    set gg_rct_ArthasPostGranary = Rect( -2816.0, 2624.0, -2592.0, 2880.0 )
    set gg_rct_JainaPostGranary = Rect( -2784.0, 2336.0, -2592.0, 2624.0 )
    set gg_rct_KelThuzadFinalFace = Rect( 2208.0, 3552.0, 2336.0, 3712.0 )
    set gg_rct_OpeningCamReset = Rect( -2112.0, -4288.0, -1888.0, -4128.0 )
    set gg_rct_GranaryCamReset = Rect( -2528.0, 2336.0, -2304.0, 2560.0 )
    set gg_rct_Acolyte02Post = Rect( -1344.0, -4352.0, -1184.0, -4160.0 )
    set gg_rct_ExtraGoldMine_Safety1 = Rect( -7168.0, -1376.0, -2656.0, -1120.0 )
    set gg_rct_ExtraGoldMine_Safety2 = Rect( 3808.0, -1888.0, 5152.0, -1696.0 )
    set gg_rct_StreamLoop01 = Rect( -320.0, -224.0, 1344.0, 1088.0 )
    set gg_rct_LakeLoop01 = Rect( -2144.0, -2016.0, -992.0, -448.0 )
    set gg_rct_LakeLoop02 = Rect( -5792.0, 1792.0, -4384.0, 2784.0 )
    set gg_rct_LakeLoop03 = Rect( -4192.0, 576.0, -3264.0, 1504.0 )
    set gg_rct_LakeLoop04 = Rect( -3008.0, 4544.0, -1920.0, 5440.0 )
    set gg_rct_LakeLoop05 = Rect( 2816.0, -1344.0, 4480.0, 64.0 )
    set gg_rct_LakeLoop06 = Rect( 416.0, -6016.0, 2176.0, -4576.0 )
    set gg_rct_LakeLoop07 = Rect( 3008.0, -5376.0, 4288.0, -4192.0 )
    set gg_rct_LakeLoop08 = Rect( -1152.0, -4256.0, 384.0, -2912.0 )
    set gg_rct_Goblin_Merchant_HINT = Rect( 832.0, -1952.0, 1536.0, -1248.0 )
    set gg_rct_Arthas_End = Rect( 2304.0, 3264.0, 2464.0, 3392.0 )
    set gg_rct_Jaina_End = Rect( 2208.0, 3840.0, 2368.0, 3968.0 )
    set gg_rct_GranaryKelThuzadArea02 = Rect( -3552.0, 1344.0, -3296.0, 2624.0 )
    set gg_rct_TownArea = Rect( -2720.0, -5120.0, -864.0, -3008.0 )
    set gg_rct_ForestTroll66Initial = Rect( -256.0, -1408.0, -160.0, -1312.0 )
    set gg_rct_ForestBerseker10Initial = Rect( -96.0, -1632.0, 0.0, -1536.0 )
    set gg_rct_ForestTroll72Initial = Rect( 64.0, -1504.0, 160.0, -1408.0 )
    set gg_rct_ForestBerserker09Initial = Rect( 4288.0, -5536.0, 4384.0, -5440.0 )
    set gg_rct_ForestTroll73Initial = Rect( 4448.0, -5472.0, 4544.0, -5376.0 )
    set gg_rct_ForestTroll75Initial = Rect( 4288.0, -5760.0, 4384.0, -5664.0 )
endfunction

//***************************************************************************
//*
//*  Cameras
//*
//***************************************************************************

function CreateCameras takes nothing returns nothing

    set gg_cam_Opening02 = CreateCameraSetup(  )
    call CameraSetupSetField( gg_cam_Opening02, CAMERA_FIELD_ZOFFSET, 200.0, 0.0 )
    call CameraSetupSetField( gg_cam_Opening02, CAMERA_FIELD_ROTATION, 49.5, 0.0 )
    call CameraSetupSetField( gg_cam_Opening02, CAMERA_FIELD_ANGLE_OF_ATTACK, 330.8, 0.0 )
    call CameraSetupSetField( gg_cam_Opening02, CAMERA_FIELD_TARGET_DISTANCE, 1369.0, 0.0 )
    call CameraSetupSetField( gg_cam_Opening02, CAMERA_FIELD_ROLL, 0.0, 0.0 )
    call CameraSetupSetField( gg_cam_Opening02, CAMERA_FIELD_FIELD_OF_VIEW, 50.0, 0.0 )
    call CameraSetupSetField( gg_cam_Opening02, CAMERA_FIELD_FARZ, 5000.0, 0.0 )
    call CameraSetupSetDestPosition( gg_cam_Opening02, -2163.8, -5114.4, 0.0 )

    set gg_cam_Opening04 = CreateCameraSetup(  )
    call CameraSetupSetField( gg_cam_Opening04, CAMERA_FIELD_ZOFFSET, 0.0, 0.0 )
    call CameraSetupSetField( gg_cam_Opening04, CAMERA_FIELD_ROTATION, 114.7, 0.0 )
    call CameraSetupSetField( gg_cam_Opening04, CAMERA_FIELD_ANGLE_OF_ATTACK, 318.3, 0.0 )
    call CameraSetupSetField( gg_cam_Opening04, CAMERA_FIELD_TARGET_DISTANCE, 1679.6, 0.0 )
    call CameraSetupSetField( gg_cam_Opening04, CAMERA_FIELD_ROLL, 0.0, 0.0 )
    call CameraSetupSetField( gg_cam_Opening04, CAMERA_FIELD_FIELD_OF_VIEW, 70.0, 0.0 )
    call CameraSetupSetField( gg_cam_Opening04, CAMERA_FIELD_FARZ, 5000.0, 0.0 )
    call CameraSetupSetDestPosition( gg_cam_Opening04, -1906.2, -4304.7, 0.0 )

    set gg_cam_Opening01 = CreateCameraSetup(  )
    call CameraSetupSetField( gg_cam_Opening01, CAMERA_FIELD_ZOFFSET, 140.0, 0.0 )
    call CameraSetupSetField( gg_cam_Opening01, CAMERA_FIELD_ROTATION, 13.2, 0.0 )
    call CameraSetupSetField( gg_cam_Opening01, CAMERA_FIELD_ANGLE_OF_ATTACK, 330.1, 0.0 )
    call CameraSetupSetField( gg_cam_Opening01, CAMERA_FIELD_TARGET_DISTANCE, 1075.2, 0.0 )
    call CameraSetupSetField( gg_cam_Opening01, CAMERA_FIELD_ROLL, 0.0, 0.0 )
    call CameraSetupSetField( gg_cam_Opening01, CAMERA_FIELD_FIELD_OF_VIEW, 70.0, 0.0 )
    call CameraSetupSetField( gg_cam_Opening01, CAMERA_FIELD_FARZ, 5000.0, 0.0 )
    call CameraSetupSetDestPosition( gg_cam_Opening01, -2830.9, -5477.8, 0.0 )

    set gg_cam_Opening03 = CreateCameraSetup(  )
    call CameraSetupSetField( gg_cam_Opening03, CAMERA_FIELD_ZOFFSET, 0.0, 0.0 )
    call CameraSetupSetField( gg_cam_Opening03, CAMERA_FIELD_ROTATION, 38.4, 0.0 )
    call CameraSetupSetField( gg_cam_Opening03, CAMERA_FIELD_ANGLE_OF_ATTACK, 327.1, 0.0 )
    call CameraSetupSetField( gg_cam_Opening03, CAMERA_FIELD_TARGET_DISTANCE, 1505.9, 0.0 )
    call CameraSetupSetField( gg_cam_Opening03, CAMERA_FIELD_ROLL, 0.0, 0.0 )
    call CameraSetupSetField( gg_cam_Opening03, CAMERA_FIELD_FIELD_OF_VIEW, 70.0, 0.0 )
    call CameraSetupSetField( gg_cam_Opening03, CAMERA_FIELD_FARZ, 5000.0, 0.0 )
    call CameraSetupSetDestPosition( gg_cam_Opening03, -2357.6, -4861.4, 0.0 )

    set gg_cam_Opening05 = CreateCameraSetup(  )
    call CameraSetupSetField( gg_cam_Opening05, CAMERA_FIELD_ZOFFSET, 0.0, 0.0 )
    call CameraSetupSetField( gg_cam_Opening05, CAMERA_FIELD_ROTATION, 112.5, 0.0 )
    call CameraSetupSetField( gg_cam_Opening05, CAMERA_FIELD_ANGLE_OF_ATTACK, 316.9, 0.0 )
    call CameraSetupSetField( gg_cam_Opening05, CAMERA_FIELD_TARGET_DISTANCE, 1566.1, 0.0 )
    call CameraSetupSetField( gg_cam_Opening05, CAMERA_FIELD_ROLL, 0.0, 0.0 )
    call CameraSetupSetField( gg_cam_Opening05, CAMERA_FIELD_FIELD_OF_VIEW, 70.0, 0.0 )
    call CameraSetupSetField( gg_cam_Opening05, CAMERA_FIELD_FARZ, 5000.0, 0.0 )
    call CameraSetupSetDestPosition( gg_cam_Opening05, -1851.7, -4100.8, 0.0 )

    set gg_cam_OpeningTownHallShot = CreateCameraSetup(  )
    call CameraSetupSetField( gg_cam_OpeningTownHallShot, CAMERA_FIELD_ZOFFSET, 0.0, 0.0 )
    call CameraSetupSetField( gg_cam_OpeningTownHallShot, CAMERA_FIELD_ROTATION, 116.7, 0.0 )
    call CameraSetupSetField( gg_cam_OpeningTownHallShot, CAMERA_FIELD_ANGLE_OF_ATTACK, 318.3, 0.0 )
    call CameraSetupSetField( gg_cam_OpeningTownHallShot, CAMERA_FIELD_TARGET_DISTANCE, 1070.8, 0.0 )
    call CameraSetupSetField( gg_cam_OpeningTownHallShot, CAMERA_FIELD_ROLL, 0.0, 0.0 )
    call CameraSetupSetField( gg_cam_OpeningTownHallShot, CAMERA_FIELD_FIELD_OF_VIEW, 70.0, 0.0 )
    call CameraSetupSetField( gg_cam_OpeningTownHallShot, CAMERA_FIELD_FARZ, 5000.0, 0.0 )
    call CameraSetupSetDestPosition( gg_cam_OpeningTownHallShot, -2191.7, -4058.6, 0.0 )

    set gg_cam_OpeningFarmShot = CreateCameraSetup(  )
    call CameraSetupSetField( gg_cam_OpeningFarmShot, CAMERA_FIELD_ZOFFSET, 0.0, 0.0 )
    call CameraSetupSetField( gg_cam_OpeningFarmShot, CAMERA_FIELD_ROTATION, 87.8, 0.0 )
    call CameraSetupSetField( gg_cam_OpeningFarmShot, CAMERA_FIELD_ANGLE_OF_ATTACK, 320.4, 0.0 )
    call CameraSetupSetField( gg_cam_OpeningFarmShot, CAMERA_FIELD_TARGET_DISTANCE, 971.4, 0.0 )
    call CameraSetupSetField( gg_cam_OpeningFarmShot, CAMERA_FIELD_ROLL, 0.0, 0.0 )
    call CameraSetupSetField( gg_cam_OpeningFarmShot, CAMERA_FIELD_FIELD_OF_VIEW, 70.0, 0.0 )
    call CameraSetupSetField( gg_cam_OpeningFarmShot, CAMERA_FIELD_FARZ, 5000.0, 0.0 )
    call CameraSetupSetDestPosition( gg_cam_OpeningFarmShot, -1369.8, -4516.8, 0.0 )

    set gg_cam_OpeningBarracksShot = CreateCameraSetup(  )
    call CameraSetupSetField( gg_cam_OpeningBarracksShot, CAMERA_FIELD_ZOFFSET, 0.0, 0.0 )
    call CameraSetupSetField( gg_cam_OpeningBarracksShot, CAMERA_FIELD_ROTATION, 104.0, 0.0 )
    call CameraSetupSetField( gg_cam_OpeningBarracksShot, CAMERA_FIELD_ANGLE_OF_ATTACK, 313.6, 0.0 )
    call CameraSetupSetField( gg_cam_OpeningBarracksShot, CAMERA_FIELD_TARGET_DISTANCE, 1032.4, 0.0 )
    call CameraSetupSetField( gg_cam_OpeningBarracksShot, CAMERA_FIELD_ROLL, 0.0, 0.0 )
    call CameraSetupSetField( gg_cam_OpeningBarracksShot, CAMERA_FIELD_FIELD_OF_VIEW, 70.0, 0.0 )
    call CameraSetupSetField( gg_cam_OpeningBarracksShot, CAMERA_FIELD_FARZ, 5000.0, 0.0 )
    call CameraSetupSetDestPosition( gg_cam_OpeningBarracksShot, -1779.5, -3497.0, 0.0 )

    set gg_cam_FinalEnding = CreateCameraSetup(  )
    call CameraSetupSetField( gg_cam_FinalEnding, CAMERA_FIELD_ZOFFSET, 0.0, 0.0 )
    call CameraSetupSetField( gg_cam_FinalEnding, CAMERA_FIELD_ROTATION, 90.5, 0.0 )
    call CameraSetupSetField( gg_cam_FinalEnding, CAMERA_FIELD_ANGLE_OF_ATTACK, 318.8, 0.0 )
    call CameraSetupSetField( gg_cam_FinalEnding, CAMERA_FIELD_TARGET_DISTANCE, 1084.1, 0.0 )
    call CameraSetupSetField( gg_cam_FinalEnding, CAMERA_FIELD_ROLL, 0.0, 0.0 )
    call CameraSetupSetField( gg_cam_FinalEnding, CAMERA_FIELD_FIELD_OF_VIEW, 70.0, 0.0 )
    call CameraSetupSetField( gg_cam_FinalEnding, CAMERA_FIELD_FARZ, 5000.0, 0.0 )
    call CameraSetupSetDestPosition( gg_cam_FinalEnding, 4811.7, 4865.1, 0.0 )

    set gg_cam_Granary02 = CreateCameraSetup(  )
    call CameraSetupSetField( gg_cam_Granary02, CAMERA_FIELD_ZOFFSET, 0.0, 0.0 )
    call CameraSetupSetField( gg_cam_Granary02, CAMERA_FIELD_ROTATION, 110.2, 0.0 )
    call CameraSetupSetField( gg_cam_Granary02, CAMERA_FIELD_ANGLE_OF_ATTACK, 345.7, 0.0 )
    call CameraSetupSetField( gg_cam_Granary02, CAMERA_FIELD_TARGET_DISTANCE, 912.9, 0.0 )
    call CameraSetupSetField( gg_cam_Granary02, CAMERA_FIELD_ROLL, 0.0, 0.0 )
    call CameraSetupSetField( gg_cam_Granary02, CAMERA_FIELD_FIELD_OF_VIEW, 80.0, 0.0 )
    call CameraSetupSetField( gg_cam_Granary02, CAMERA_FIELD_FARZ, 4000.0, 0.0 )
    call CameraSetupSetDestPosition( gg_cam_Granary02, -2446.9, 2864.8, 0.0 )

    set gg_cam_Granery01Close = CreateCameraSetup(  )
    call CameraSetupSetField( gg_cam_Granery01Close, CAMERA_FIELD_ZOFFSET, 0.0, 0.0 )
    call CameraSetupSetField( gg_cam_Granery01Close, CAMERA_FIELD_ROTATION, 18.2, 0.0 )
    call CameraSetupSetField( gg_cam_Granery01Close, CAMERA_FIELD_ANGLE_OF_ATTACK, 354.9, 0.0 )
    call CameraSetupSetField( gg_cam_Granery01Close, CAMERA_FIELD_TARGET_DISTANCE, 1489.7, 0.0 )
    call CameraSetupSetField( gg_cam_Granery01Close, CAMERA_FIELD_ROLL, 0.0, 0.0 )
    call CameraSetupSetField( gg_cam_Granery01Close, CAMERA_FIELD_FIELD_OF_VIEW, 70.0, 0.0 )
    call CameraSetupSetField( gg_cam_Granery01Close, CAMERA_FIELD_FARZ, 4000.0, 0.0 )
    call CameraSetupSetDestPosition( gg_cam_Granery01Close, -1374.1, 2864.9, 0.0 )

    set gg_cam_Granery01d = CreateCameraSetup(  )
    call CameraSetupSetField( gg_cam_Granery01d, CAMERA_FIELD_ZOFFSET, 0.0, 0.0 )
    call CameraSetupSetField( gg_cam_Granery01d, CAMERA_FIELD_ROTATION, 25.5, 0.0 )
    call CameraSetupSetField( gg_cam_Granery01d, CAMERA_FIELD_ANGLE_OF_ATTACK, 339.9, 0.0 )
    call CameraSetupSetField( gg_cam_Granery01d, CAMERA_FIELD_TARGET_DISTANCE, 1160.7, 0.0 )
    call CameraSetupSetField( gg_cam_Granery01d, CAMERA_FIELD_ROLL, 0.0, 0.0 )
    call CameraSetupSetField( gg_cam_Granery01d, CAMERA_FIELD_FIELD_OF_VIEW, 70.0, 0.0 )
    call CameraSetupSetField( gg_cam_Granery01d, CAMERA_FIELD_FARZ, 4000.0, 0.0 )
    call CameraSetupSetDestPosition( gg_cam_Granery01d, -1964.1, 2664.0, 0.0 )

    set gg_cam_End = CreateCameraSetup(  )
    call CameraSetupSetField( gg_cam_End, CAMERA_FIELD_ZOFFSET, 0.0, 0.0 )
    call CameraSetupSetField( gg_cam_End, CAMERA_FIELD_ROTATION, 52.0, 0.0 )
    call CameraSetupSetField( gg_cam_End, CAMERA_FIELD_ANGLE_OF_ATTACK, 330.2, 0.0 )
    call CameraSetupSetField( gg_cam_End, CAMERA_FIELD_TARGET_DISTANCE, 865.5, 0.0 )
    call CameraSetupSetField( gg_cam_End, CAMERA_FIELD_ROLL, 0.0, 0.0 )
    call CameraSetupSetField( gg_cam_End, CAMERA_FIELD_FIELD_OF_VIEW, 70.0, 0.0 )
    call CameraSetupSetField( gg_cam_End, CAMERA_FIELD_FARZ, 4000.0, 0.0 )
    call CameraSetupSetDestPosition( gg_cam_End, 2514.0, 3601.8, 0.0 )

endfunction

//***************************************************************************
//*
//*  Triggers
//*
//***************************************************************************

//===========================================================================
// Trigger: Map Initialization
//
// 
//===========================================================================
function Trig_Map_Initialization_Actions takes nothing returns nothing
    call SetCampaignMenuRaceBJ( bj_CAMPAIGN_INDEX_H )
    call CommentString( "************" )
    call SetSkyModel( "Environment\\Sky\\Sky\\SkyLight.mdl" )
    call SetTerrainFogExBJ( 0, 1000, 5000.00, 0, 20.00, 30.00, 40.00 )
    call SetTimeOfDay( 12.00 )
    call CommentString( "Difficulty" )
    call ConditionalTriggerExecute( gg_trg_Difficulty_Easy )
    call ConditionalTriggerExecute( gg_trg_Difficulty_Normal )
    call ConditionalTriggerExecute( gg_trg_Difficulty_Hard )
    call CommentString( "***********" )
    call ConditionalTriggerExecute( gg_trg_Load_Heroes )
    call ConditionalTriggerExecute( gg_trg_Opening01 )
    call ConditionalTriggerExecute( gg_trg_SetupCreepsSleeping )
    call ConditionalTriggerExecute( gg_trg_SetupNonHeroGroup )
    call ConditionalTriggerExecute( gg_trg_SetupPlayer )
    call ConditionalTriggerExecute( gg_trg_SetupHeroes )
    call ConditionalTriggerExecute( gg_trg_SetupPeasants )
    call ConditionalTriggerExecute( gg_trg_SetupKelThuzad )
    call ConditionalTriggerExecute( gg_trg_SetupAlliances )
    call ConditionalTriggerExecute( gg_trg_SetupQuests )
    call ConditionalTriggerExecute( gg_trg_AcolyteGroup )
    call ConditionalTriggerExecute( gg_trg_SetupGolemsGroup )
    call ConditionalTriggerExecute( gg_trg_SetupComputerResources )
    call ConditionalTriggerExecute( gg_trg_PeonGroup01 )
    call ConditionalTriggerExecute( gg_trg_ForestTroll )
    call ConditionalTriggerExecute( gg_trg_SetupNeutral )
    call ConditionalTriggerExecute( gg_trg_SetupScoreScreen )
    call CommentString( "NO AURAS FOR ENEMIES" )
    call SetPlayerAllianceBJ( Player(1), ALLIANCE_SHARED_SPELLS, false, Player(6) )
    call SetPlayerAllianceBJ( Player(1), ALLIANCE_SHARED_SPELLS, false, Player(5) )
    call SetPlayerAllianceBJ( Player(1), ALLIANCE_SHARED_SPELLS, false, Player(PLAYER_NEUTRAL_AGGRESSIVE) )
endfunction

//===========================================================================
function InitTrig_Map_Initialization takes nothing returns nothing
    set gg_trg_Map_Initialization = CreateTrigger(  )
    call TriggerAddAction( gg_trg_Map_Initialization, function Trig_Map_Initialization_Actions )
endfunction

//===========================================================================
// Trigger: Difficulty Easy
//===========================================================================
function Trig_Difficulty_Easy_Conditions takes nothing returns boolean
    if ( not ( GetGameDifficulty() == MAP_DIFFICULTY_EASY ) ) then
        return false
    endif
    return true
endfunction

function Trig_Difficulty_Easy_Actions takes nothing returns nothing
    call SetPlayerHandicapBJ( Player(6), bj_HANDICAP_EASY )
    call SetPlayerHandicapBJ( Player(5), bj_HANDICAP_EASY )
    call SetPlayerHandicapBJ( Player(PLAYER_NEUTRAL_AGGRESSIVE), bj_HANDICAP_EASY )
    call CommentString( "From Normal" )
    call RemoveUnit( gg_unit_uabo_0065 )
    call RemoveUnit( gg_unit_uabo_0071 )
    call RemoveUnit( gg_unit_ugho_0074 )
    call RemoveUnit( gg_unit_ugho_0086 )
    call RemoveUnit( gg_unit_ugho_0082 )
    call RemoveUnit( gg_unit_ugho_0083 )
    call RemoveUnit( gg_unit_usep_0087 )
endfunction

//===========================================================================
function InitTrig_Difficulty_Easy takes nothing returns nothing
    set gg_trg_Difficulty_Easy = CreateTrigger(  )
    call TriggerAddCondition( gg_trg_Difficulty_Easy, Condition( function Trig_Difficulty_Easy_Conditions ) )
    call TriggerAddAction( gg_trg_Difficulty_Easy, function Trig_Difficulty_Easy_Actions )
endfunction

//===========================================================================
// Trigger: Difficulty Normal
//===========================================================================
function Trig_Difficulty_Normal_Conditions takes nothing returns boolean
    if ( not ( GetGameDifficulty() == MAP_DIFFICULTY_NORMAL ) ) then
        return false
    endif
    return true
endfunction

function Trig_Difficulty_Normal_Actions takes nothing returns nothing
    call RemoveUnit( gg_unit_uabo_0065 )
    call RemoveUnit( gg_unit_uabo_0071 )
    call RemoveUnit( gg_unit_ugho_0074 )
    call RemoveUnit( gg_unit_ugho_0086 )
    call RemoveUnit( gg_unit_ugho_0082 )
    call RemoveUnit( gg_unit_ugho_0083 )
    call RemoveUnit( gg_unit_usep_0087 )
endfunction

//===========================================================================
function InitTrig_Difficulty_Normal takes nothing returns nothing
    set gg_trg_Difficulty_Normal = CreateTrigger(  )
    call TriggerAddCondition( gg_trg_Difficulty_Normal, Condition( function Trig_Difficulty_Normal_Conditions ) )
    call TriggerAddAction( gg_trg_Difficulty_Normal, function Trig_Difficulty_Normal_Actions )
endfunction

//===========================================================================
// Trigger: Difficulty Hard
//===========================================================================
function Trig_Difficulty_Hard_Conditions takes nothing returns boolean
    if ( not ( GetGameDifficulty() == MAP_DIFFICULTY_HARD ) ) then
        return false
    endif
    return true
endfunction

function Trig_Difficulty_Hard_Actions takes nothing returns nothing
endfunction

//===========================================================================
function InitTrig_Difficulty_Hard takes nothing returns nothing
    set gg_trg_Difficulty_Hard = CreateTrigger(  )
    call TriggerAddCondition( gg_trg_Difficulty_Hard, Condition( function Trig_Difficulty_Hard_Conditions ) )
    call TriggerAddAction( gg_trg_Difficulty_Hard, function Trig_Difficulty_Hard_Actions )
endfunction

//===========================================================================
// Trigger: StartCampaignAI
//
// Run from Opening07 and OpeningCancelled
//===========================================================================
function Trig_StartCampaignAI_Actions takes nothing returns nothing
    call StartCampaignAI( Player(6), "h04_green.ai" )
    call CommandAI( Player(6), 0, 0 )
    call CommentString( "***********************" )
    call RemoveGuardPosition( gg_unit_ugho_0047 )
    call RemoveGuardPosition( gg_unit_ugho_0043 )
endfunction

//===========================================================================
function InitTrig_StartCampaignAI takes nothing returns nothing
    set gg_trg_StartCampaignAI = CreateTrigger(  )
    call TriggerAddAction( gg_trg_StartCampaignAI, function Trig_StartCampaignAI_Actions )
endfunction

//===========================================================================
// Trigger: SetupComputerResources
//===========================================================================
function Trig_SetupComputerResources_Actions takes nothing returns nothing
    call SetPlayerStateBJ( Player(6), PLAYER_STATE_RESOURCE_GOLD, 1000 )
    call SetPlayerStateBJ( Player(6), PLAYER_STATE_RESOURCE_LUMBER, 1000 )
endfunction

//===========================================================================
function InitTrig_SetupComputerResources takes nothing returns nothing
    set gg_trg_SetupComputerResources = CreateTrigger(  )
    call TriggerAddAction( gg_trg_SetupComputerResources, function Trig_SetupComputerResources_Actions )
endfunction

//===========================================================================
// Trigger: SetupCreepsSleeping
//===========================================================================
function Trig_SetupCreepsSleeping_Func002002 takes nothing returns nothing
    call UnitSetCanSleepBJ( GetEnumUnit(), false )
endfunction

function Trig_SetupCreepsSleeping_Func003002 takes nothing returns nothing
    call UnitSetCanSleepBJ( GetEnumUnit(), false )
endfunction

function Trig_SetupCreepsSleeping_Func004002 takes nothing returns nothing
    call UnitSetCanSleepBJ( GetEnumUnit(), false )
endfunction

function Trig_SetupCreepsSleeping_Actions takes nothing returns nothing
    call DisableTrigger( GetTriggeringTrigger() )
    call ForGroup( GetUnitsInRectAll(gg_rct_PatrolForestTroll01Start), function Trig_SetupCreepsSleeping_Func002002 )
    call ForGroup( GetUnitsInRectAll(gg_rct_PatrolForestTroll02Start), function Trig_SetupCreepsSleeping_Func003002 )
    call ForGroup( GetUnitsInRectAll(gg_rct_GnollRun), function Trig_SetupCreepsSleeping_Func004002 )
endfunction

//===========================================================================
function InitTrig_SetupCreepsSleeping takes nothing returns nothing
    set gg_trg_SetupCreepsSleeping = CreateTrigger(  )
    call TriggerAddAction( gg_trg_SetupCreepsSleeping, function Trig_SetupCreepsSleeping_Actions )
endfunction

//===========================================================================
// Trigger: SetupNonHeroGroup
//===========================================================================
function Trig_SetupNonHeroGroup_Actions takes nothing returns nothing
    call GroupAddUnitSimple( gg_unit_hfoo_0016, udg_StartingNonHeroGroup )
    call GroupAddUnitSimple( gg_unit_hfoo_0017, udg_StartingNonHeroGroup )
    call GroupAddUnitSimple( gg_unit_hfoo_0018, udg_StartingNonHeroGroup )
    call GroupAddUnitSimple( gg_unit_hmpr_0070, udg_StartingNonHeroGroup )
    call GroupAddUnitSimple( gg_unit_hmtm_0055, udg_StartingNonHeroGroup )
    call GroupAddUnitSimple( gg_unit_hpea_0020, udg_StartingNonHeroGroup )
    call GroupAddUnitSimple( gg_unit_hpea_0021, udg_StartingNonHeroGroup )
    call GroupAddUnitSimple( gg_unit_hpea_0023, udg_StartingNonHeroGroup )
endfunction

//===========================================================================
function InitTrig_SetupNonHeroGroup takes nothing returns nothing
    set gg_trg_SetupNonHeroGroup = CreateTrigger(  )
    call TriggerAddAction( gg_trg_SetupNonHeroGroup, function Trig_SetupNonHeroGroup_Actions )
endfunction

//===========================================================================
// Trigger: SetupPlayer
//===========================================================================
function Trig_SetupPlayer_Actions takes nothing returns nothing
    call SetPlayerStateBJ( Player(1), PLAYER_STATE_RESOURCE_GOLD, 1400 )
    call SetPlayerStateBJ( Player(1), PLAYER_STATE_RESOURCE_LUMBER, 500 )
endfunction

//===========================================================================
function InitTrig_SetupPlayer takes nothing returns nothing
    set gg_trg_SetupPlayer = CreateTrigger(  )
    call TriggerAddAction( gg_trg_SetupPlayer, function Trig_SetupPlayer_Actions )
endfunction

//===========================================================================
// Trigger: SetupHeroes
//===========================================================================
function Trig_SetupHeroes_Actions takes nothing returns nothing
    call EnableTrigger( gg_trg_ArthasLevelUp )
    call EnableTrigger( gg_trg_JainaLevelup )
    call CommentString( "****************" )
    call SetPlayerHandicapXPBJ( Player(1), 75.00 )
endfunction

//===========================================================================
function InitTrig_SetupHeroes takes nothing returns nothing
    set gg_trg_SetupHeroes = CreateTrigger(  )
    call TriggerAddAction( gg_trg_SetupHeroes, function Trig_SetupHeroes_Actions )
endfunction

//===========================================================================
// Trigger: SetupPeasants
//===========================================================================
function Trig_SetupPeasants_Actions takes nothing returns nothing
    set udg_PeasantFarm = gg_unit_hpea_0020
    set udg_PeasantTownHall = gg_unit_hpea_0023
    set udg_PeasantBarracks = gg_unit_hpea_0021
endfunction

//===========================================================================
function InitTrig_SetupPeasants takes nothing returns nothing
    set gg_trg_SetupPeasants = CreateTrigger(  )
    call TriggerAddAction( gg_trg_SetupPeasants, function Trig_SetupPeasants_Actions )
endfunction

//===========================================================================
// Trigger: SetupKelThuzad
//===========================================================================
function Trig_SetupKelThuzad_Actions takes nothing returns nothing
    set udg_KelThuzad = gg_unit_uktn_0133
    call RemoveGuardPosition( gg_unit_uktn_0133 )
endfunction

//===========================================================================
function InitTrig_SetupKelThuzad takes nothing returns nothing
    set gg_trg_SetupKelThuzad = CreateTrigger(  )
    call TriggerAddAction( gg_trg_SetupKelThuzad, function Trig_SetupKelThuzad_Actions )
endfunction

//===========================================================================
// Trigger: SetupQuests
//===========================================================================
function Trig_SetupQuests_Actions takes nothing returns nothing
    call CommentString( "Quest Investigate Andorhal" )
    call CreateQuestBJ( bj_QUESTTYPE_REQ_UNDISCOVERED, "TRIGSTR_054", "TRIGSTR_055", "ReplaceableTextures\\CommandButtons\\BTNJaina.tga" )
    set udg_QuestAndorhal = GetLastCreatedQuestBJ()
    call CreateQuestItemBJ( udg_QuestAndorhal, "TRIGSTR_041" )
    set udg_QuestAndorhalReq = GetLastCreatedQuestItemBJ()
    call CommentString( "Quest Confront Kel'Thuzad" )
    call CreateQuestBJ( bj_QUESTTYPE_REQ_UNDISCOVERED, "TRIGSTR_056", "TRIGSTR_057", "ReplaceableTextures\\CommandButtons\\BTNNecromancer.tga" )
    set udg_QuestNecromancer = GetLastCreatedQuestBJ()
    call CreateQuestItemBJ( udg_QuestNecromancer, "TRIGSTR_044" )
    set udg_QuestKelThuzadReq = GetLastCreatedQuestItemBJ()
endfunction

//===========================================================================
function InitTrig_SetupQuests takes nothing returns nothing
    set gg_trg_SetupQuests = CreateTrigger(  )
    call TriggerAddAction( gg_trg_SetupQuests, function Trig_SetupQuests_Actions )
endfunction

//===========================================================================
// Trigger: AcolyteGroup
//===========================================================================
function Trig_AcolyteGroup_Actions takes nothing returns nothing
    call GroupAddUnitSimple( gg_unit_uaco_0011, udg_Town01Group )
    call GroupAddUnitSimple( gg_unit_uaco_0006, udg_Town01Group )
    call GroupAddUnitSimple( gg_unit_uaco_0005, udg_Town01Group )
endfunction

//===========================================================================
function InitTrig_AcolyteGroup takes nothing returns nothing
    set gg_trg_AcolyteGroup = CreateTrigger(  )
    call TriggerAddAction( gg_trg_AcolyteGroup, function Trig_AcolyteGroup_Actions )
endfunction

//===========================================================================
// Trigger: PeonGroup01
//===========================================================================
function Trig_PeonGroup01_Actions takes nothing returns nothing
    call GroupAddUnitSimple( gg_unit_hpea_0020, udg_PeonGroup01 )
    call GroupAddUnitSimple( gg_unit_hpea_0021, udg_PeonGroup01 )
    call GroupAddUnitSimple( gg_unit_hpea_0023, udg_PeonGroup01 )
endfunction

//===========================================================================
function InitTrig_PeonGroup01 takes nothing returns nothing
    set gg_trg_PeonGroup01 = CreateTrigger(  )
    call TriggerAddAction( gg_trg_PeonGroup01, function Trig_PeonGroup01_Actions )
endfunction

//===========================================================================
// Trigger: SetupGolemsGroup
//===========================================================================
function Trig_SetupGolemsGroup_Actions takes nothing returns nothing
    call DisableTrigger( GetTriggeringTrigger() )
    set udg_GolemsGroup = GetUnitsInRectAll(gg_rct_GolemArea)
endfunction

//===========================================================================
function InitTrig_SetupGolemsGroup takes nothing returns nothing
    set gg_trg_SetupGolemsGroup = CreateTrigger(  )
    call TriggerAddAction( gg_trg_SetupGolemsGroup, function Trig_SetupGolemsGroup_Actions )
endfunction

//===========================================================================
// Trigger: SetupAlliances
//===========================================================================
function Trig_SetupAlliances_Actions takes nothing returns nothing
    call SetPlayerAllianceStateBJ( Player(PLAYER_NEUTRAL_AGGRESSIVE), Player(6), bj_ALLIANCE_ALLIED )
    call SetPlayerAllianceStateBJ( Player(6), Player(PLAYER_NEUTRAL_AGGRESSIVE), bj_ALLIANCE_ALLIED )
    call CommentString( "***********************" )
    call SetPlayerAllianceStateBJ( Player(PLAYER_NEUTRAL_AGGRESSIVE), Player(5), bj_ALLIANCE_ALLIED )
    call SetPlayerAllianceStateBJ( Player(5), Player(PLAYER_NEUTRAL_AGGRESSIVE), bj_ALLIANCE_ALLIED )
    call CommentString( "***********************" )
    call SetPlayerAllianceStateBJ( Player(7), Player(6), bj_ALLIANCE_ALLIED )
    call SetPlayerAllianceStateBJ( Player(6), Player(7), bj_ALLIANCE_NEUTRAL )
    call SetPlayerAllianceStateBJ( Player(1), Player(7), bj_ALLIANCE_ALLIED )
    call SetPlayerAllianceStateBJ( Player(7), Player(1), bj_ALLIANCE_ALLIED )
    call CommentString( "***********************" )
    call SetPlayerAllianceStateBJ( Player(PLAYER_NEUTRAL_AGGRESSIVE), Player(3), bj_ALLIANCE_ALLIED )
    call SetPlayerAllianceStateBJ( Player(5), Player(3), bj_ALLIANCE_ALLIED )
    call SetPlayerAllianceStateBJ( Player(6), Player(3), bj_ALLIANCE_ALLIED )
    call SetPlayerAllianceStateBJ( Player(3), Player(PLAYER_NEUTRAL_AGGRESSIVE), bj_ALLIANCE_ALLIED )
    call SetPlayerAllianceStateBJ( Player(3), Player(5), bj_ALLIANCE_ALLIED )
    call SetPlayerAllianceStateBJ( Player(3), Player(6), bj_ALLIANCE_ALLIED )
    call CommentString( "***********************" )
    call SetPlayerAllianceStateBJ( Player(6), Player(5), bj_ALLIANCE_ALLIED )
    call SetPlayerAllianceStateBJ( Player(5), Player(6), bj_ALLIANCE_ALLIED )
    call SetPlayerColorBJ( Player(5), PLAYER_COLOR_GREEN, true )
endfunction

//===========================================================================
function InitTrig_SetupAlliances takes nothing returns nothing
    set gg_trg_SetupAlliances = CreateTrigger(  )
    call TriggerAddAction( gg_trg_SetupAlliances, function Trig_SetupAlliances_Actions )
endfunction

//===========================================================================
// Trigger: SetupTimmy
//===========================================================================
function Trig_SetupTimmy_Actions takes nothing returns nothing
endfunction

//===========================================================================
function InitTrig_SetupTimmy takes nothing returns nothing
    set gg_trg_SetupTimmy = CreateTrigger(  )
    call TriggerAddAction( gg_trg_SetupTimmy, function Trig_SetupTimmy_Actions )
endfunction

//===========================================================================
// Trigger: SetupNeutral
//===========================================================================
function Trig_SetupNeutral_Actions takes nothing returns nothing
    call SetPlayerColorBJ( Player(7), PLAYER_COLOR_BLUE, true )
    call KillDestructable( gg_dest_LTg1_2150 )
endfunction

//===========================================================================
function InitTrig_SetupNeutral takes nothing returns nothing
    set gg_trg_SetupNeutral = CreateTrigger(  )
    call TriggerAddAction( gg_trg_SetupNeutral, function Trig_SetupNeutral_Actions )
endfunction

//===========================================================================
// Trigger: SetupScoreScreen
//===========================================================================
function Trig_SetupScoreScreen_Actions takes nothing returns nothing
    call SetPlayerOnScoreScreenBJ( false, Player(0) )
    call SetPlayerOnScoreScreenBJ( false, Player(5) )
    call SetPlayerOnScoreScreenBJ( false, Player(7) )
endfunction

//===========================================================================
function InitTrig_SetupScoreScreen takes nothing returns nothing
    set gg_trg_SetupScoreScreen = CreateTrigger(  )
    call TriggerAddAction( gg_trg_SetupScoreScreen, function Trig_SetupScoreScreen_Actions )
endfunction

//===========================================================================
// Trigger: AIHarrassment
//
// Not currently run
//===========================================================================
function Trig_AIHarrassment_Actions takes nothing returns nothing
    call DisableTrigger( GetTriggeringTrigger() )
    call CommandAI( Player(6), 0, 0 )
endfunction

//===========================================================================
function InitTrig_AIHarrassment takes nothing returns nothing
    set gg_trg_AIHarrassment = CreateTrigger(  )
    call TriggerAddAction( gg_trg_AIHarrassment, function Trig_AIHarrassment_Actions )
endfunction

//===========================================================================
// Trigger: ArthasLevelUp
//
// Turned on from 'SetupArthas'
//===========================================================================
function Trig_ArthasLevelUp_Conditions takes nothing returns boolean
    if ( not ( GetTriggerUnit() == udg_Arthas ) ) then
        return false
    endif
    return true
endfunction

function Trig_ArthasLevelUp_Actions takes nothing returns nothing
    call SuspendHeroXPBJ( false, udg_Arthas )
endfunction

//===========================================================================
function InitTrig_ArthasLevelUp takes nothing returns nothing
    set gg_trg_ArthasLevelUp = CreateTrigger(  )
    call DisableTrigger( gg_trg_ArthasLevelUp )
    call TriggerRegisterPlayerUnitEventSimple( gg_trg_ArthasLevelUp, Player(1), EVENT_PLAYER_HERO_LEVEL )
    call TriggerAddCondition( gg_trg_ArthasLevelUp, Condition( function Trig_ArthasLevelUp_Conditions ) )
    call TriggerAddAction( gg_trg_ArthasLevelUp, function Trig_ArthasLevelUp_Actions )
endfunction

//===========================================================================
// Trigger: JainaLevelup
//
// Turned on from 'SetupJaina'
//===========================================================================
function Trig_JainaLevelup_Conditions takes nothing returns boolean
    if ( not ( GetTriggerUnit() == udg_Jaina ) ) then
        return false
    endif
    return true
endfunction

function Trig_JainaLevelup_Actions takes nothing returns nothing
    call SuspendHeroXPBJ( false, udg_Jaina )
endfunction

//===========================================================================
function InitTrig_JainaLevelup takes nothing returns nothing
    set gg_trg_JainaLevelup = CreateTrigger(  )
    call DisableTrigger( gg_trg_JainaLevelup )
    call TriggerRegisterPlayerUnitEventSimple( gg_trg_JainaLevelup, Player(1), EVENT_PLAYER_HERO_LEVEL )
    call TriggerAddCondition( gg_trg_JainaLevelup, Condition( function Trig_JainaLevelup_Conditions ) )
    call TriggerAddAction( gg_trg_JainaLevelup, function Trig_JainaLevelup_Actions )
endfunction

//===========================================================================
// Trigger: GreenGold
//===========================================================================
function Trig_GreenGold_Actions takes nothing returns nothing
    call AdjustPlayerStateBJ( 1000, Player(6), PLAYER_STATE_RESOURCE_GOLD )
endfunction

//===========================================================================
function InitTrig_GreenGold takes nothing returns nothing
    set gg_trg_GreenGold = CreateTrigger(  )
    call TriggerRegisterPlayerStateEvent( gg_trg_GreenGold, Player(6), PLAYER_STATE_RESOURCE_GOLD, LESS_THAN_OR_EQUAL, 1000.00 )
    call TriggerAddAction( gg_trg_GreenGold, function Trig_GreenGold_Actions )
endfunction

//===========================================================================
// Trigger: GreenLumber
//===========================================================================
function Trig_GreenLumber_Actions takes nothing returns nothing
    call AdjustPlayerStateBJ( 500, Player(6), PLAYER_STATE_RESOURCE_LUMBER )
endfunction

//===========================================================================
function InitTrig_GreenLumber takes nothing returns nothing
    set gg_trg_GreenLumber = CreateTrigger(  )
    call TriggerRegisterPlayerStateEvent( gg_trg_GreenLumber, Player(6), PLAYER_STATE_RESOURCE_LUMBER, LESS_THAN_OR_EQUAL, 500.00 )
    call TriggerAddAction( gg_trg_GreenLumber, function Trig_GreenLumber_Actions )
endfunction

//===========================================================================
// Trigger: GoldmineHint
//===========================================================================
function Trig_GoldmineHint_Conditions takes nothing returns boolean
    if ( not ( udg_GAMEOVER == false ) ) then
        return false
    endif
    return true
endfunction

function Trig_GoldmineHint_Actions takes nothing returns nothing
    call DisableTrigger( GetTriggeringTrigger() )
    call DisableTrigger( gg_trg_GoldmineHint_Safeties )
    call CreateFogModifierRectBJ( true, Player(1), FOG_OF_WAR_VISIBLE, gg_rct_RevealerGoldmine )
    call QuestMessageBJ( GetPlayersAll(), bj_QUESTMESSAGE_HINT, "TRIGSTR_011" )
    call PingMinimapLocForForce( GetPlayersAll(), GetRectCenter(gg_rct_RevealerGoldmine), 10.00 )
    call SetCameraQuickPositionLocForPlayer( Player(1), GetRectCenter(gg_rct_RevealerGoldmine) )
endfunction

//===========================================================================
function InitTrig_GoldmineHint takes nothing returns nothing
    set gg_trg_GoldmineHint = CreateTrigger(  )
    call TriggerRegisterTimerExpireEventBJ( gg_trg_GoldmineHint, udg_GoldHintTimer )
    call TriggerAddCondition( gg_trg_GoldmineHint, Condition( function Trig_GoldmineHint_Conditions ) )
    call TriggerAddAction( gg_trg_GoldmineHint, function Trig_GoldmineHint_Actions )
endfunction

//===========================================================================
// Trigger: MilitiaHint
//===========================================================================
function Trig_MilitiaHint_Conditions takes nothing returns boolean
    if ( not ( GetUnitTypeId(GetEnteringUnit()) == 'ugho' ) ) then
        return false
    endif
    return true
endfunction

function Trig_MilitiaHint_Actions takes nothing returns nothing
    call DisableTrigger( GetTriggeringTrigger() )
    call TriggerSleepAction( 2 )
    call QuestMessageBJ( GetPlayersAll(), bj_QUESTMESSAGE_HINT, "TRIGSTR_159" )
endfunction

//===========================================================================
function InitTrig_MilitiaHint takes nothing returns nothing
    set gg_trg_MilitiaHint = CreateTrigger(  )
    call TriggerRegisterEnterRectSimple( gg_trg_MilitiaHint, gg_rct_TownArea )
    call TriggerAddCondition( gg_trg_MilitiaHint, Condition( function Trig_MilitiaHint_Conditions ) )
    call TriggerAddAction( gg_trg_MilitiaHint, function Trig_MilitiaHint_Actions )
endfunction

//===========================================================================
// Trigger: GoldmineHint Safeties
//===========================================================================
function Trig_GoldmineHint_Safeties_Conditions takes nothing returns boolean
    if ( not ( GetOwningPlayer(GetEnteringUnit()) == Player(1) ) ) then
        return false
    endif
    if ( not ( udg_GAMEOVER == false ) ) then
        return false
    endif
    return true
endfunction

function Trig_GoldmineHint_Safeties_Actions takes nothing returns nothing
    call DisableTrigger( GetTriggeringTrigger() )
    call ConditionalTriggerExecute( gg_trg_GoldmineHint )
endfunction

//===========================================================================
function InitTrig_GoldmineHint_Safeties takes nothing returns nothing
    set gg_trg_GoldmineHint_Safeties = CreateTrigger(  )
    call TriggerRegisterEnterRectSimple( gg_trg_GoldmineHint_Safeties, gg_rct_ExtraGoldMine_Safety1 )
    call TriggerRegisterEnterRectSimple( gg_trg_GoldmineHint_Safeties, gg_rct_ExtraGoldMine_Safety2 )
    call TriggerAddCondition( gg_trg_GoldmineHint_Safeties, Condition( function Trig_GoldmineHint_Safeties_Conditions ) )
    call TriggerAddAction( gg_trg_GoldmineHint_Safeties, function Trig_GoldmineHint_Safeties_Actions )
endfunction

//===========================================================================
// Trigger: PowerBuildingHint
//
// Run from 'FarmDone'
//===========================================================================
function Trig_PowerBuildingHint_Conditions takes nothing returns boolean
    if ( not ( udg_GAMEOVER == false ) ) then
        return false
    endif
    return true
endfunction

function Trig_PowerBuildingHint_Actions takes nothing returns nothing
    call TriggerSleepAction( 2 )
    call QuestMessageBJ( GetPlayersAll(), bj_QUESTMESSAGE_HINT, "TRIGSTR_012" )
endfunction

//===========================================================================
function InitTrig_PowerBuildingHint takes nothing returns nothing
    set gg_trg_PowerBuildingHint = CreateTrigger(  )
    call TriggerAddCondition( gg_trg_PowerBuildingHint, Condition( function Trig_PowerBuildingHint_Conditions ) )
    call TriggerAddAction( gg_trg_PowerBuildingHint, function Trig_PowerBuildingHint_Actions )
endfunction

//===========================================================================
// Trigger: Merchant Hint
//===========================================================================
function Trig_Merchant_Hint_Conditions takes nothing returns boolean
    if ( not ( GetOwningPlayer(GetEnteringUnit()) == Player(1) ) ) then
        return false
    endif
    if ( not ( udg_GAMEOVER == false ) ) then
        return false
    endif
    return true
endfunction

function Trig_Merchant_Hint_Actions takes nothing returns nothing
    call DisableTrigger( GetTriggeringTrigger() )
    call QuestMessageBJ( GetPlayersAll(), bj_QUESTMESSAGE_HINT, "TRIGSTR_154" )
endfunction

//===========================================================================
function InitTrig_Merchant_Hint takes nothing returns nothing
    set gg_trg_Merchant_Hint = CreateTrigger(  )
    call TriggerRegisterEnterRectSimple( gg_trg_Merchant_Hint, gg_rct_Goblin_Merchant_HINT )
    call TriggerAddCondition( gg_trg_Merchant_Hint, Condition( function Trig_Merchant_Hint_Conditions ) )
    call TriggerAddAction( gg_trg_Merchant_Hint, function Trig_Merchant_Hint_Actions )
endfunction

//===========================================================================
// Trigger: Hero Died
//===========================================================================
function Trig_Hero_Died_Conditions takes nothing returns boolean
    if ( not ( IsUnitType(GetDyingUnit(), UNIT_TYPE_HERO) == true ) ) then
        return false
    endif
    if ( not ( GetOwningPlayer(GetDyingUnit()) == Player(1) ) ) then
        return false
    endif
    return true
endfunction

function Trig_Hero_Died_Actions takes nothing returns nothing
    call DisableTrigger( GetTriggeringTrigger() )
    call StartTimerBJ( udg_HeroDeadTimer, false, 5.00 )
endfunction

//===========================================================================
function InitTrig_Hero_Died takes nothing returns nothing
    set gg_trg_Hero_Died = CreateTrigger(  )
    call TriggerRegisterPlayerUnitEventSimple( gg_trg_Hero_Died, Player(1), EVENT_PLAYER_UNIT_DEATH )
    call TriggerAddCondition( gg_trg_Hero_Died, Condition( function Trig_Hero_Died_Conditions ) )
    call TriggerAddAction( gg_trg_Hero_Died, function Trig_Hero_Died_Actions )
endfunction

//===========================================================================
// Trigger: Hero Revive Hint
//===========================================================================
function Trig_Hero_Revive_Hint_Conditions takes nothing returns boolean
    if ( not ( udg_GAMEOVER == false ) ) then
        return false
    endif
    return true
endfunction

function Trig_Hero_Revive_Hint_Func002001 takes nothing returns boolean
    return ( CountUnitsInGroup(GetUnitsOfPlayerAndTypeId(Player(1), 'halt')) > 0 )
endfunction

function Trig_Hero_Revive_Hint_Actions takes nothing returns nothing
    call DisableTrigger( GetTriggeringTrigger() )
    if ( Trig_Hero_Revive_Hint_Func002001() ) then
        call ConditionalTriggerExecute( gg_trg_Hero_Revive_Hint_With_Altar )
    else
        call ConditionalTriggerExecute( gg_trg_Hero_Revive_Hint_No_Altar )
    endif
endfunction

//===========================================================================
function InitTrig_Hero_Revive_Hint takes nothing returns nothing
    set gg_trg_Hero_Revive_Hint = CreateTrigger(  )
    call TriggerRegisterTimerExpireEventBJ( gg_trg_Hero_Revive_Hint, udg_HeroDeadTimer )
    call TriggerAddCondition( gg_trg_Hero_Revive_Hint, Condition( function Trig_Hero_Revive_Hint_Conditions ) )
    call TriggerAddAction( gg_trg_Hero_Revive_Hint, function Trig_Hero_Revive_Hint_Actions )
endfunction

//===========================================================================
// Trigger: Hero Revive Hint With Altar
//===========================================================================
function Trig_Hero_Revive_Hint_With_Altar_Func002001002001 takes nothing returns boolean
    return ( GetUnitTypeId(GetFilterUnit()) == 'halt' )
endfunction

function Trig_Hero_Revive_Hint_With_Altar_Func002001002002 takes nothing returns boolean
    return ( IsUnitAliveBJ(GetFilterUnit()) == true )
endfunction

function Trig_Hero_Revive_Hint_With_Altar_Func002001002 takes nothing returns boolean
    return GetBooleanAnd( Trig_Hero_Revive_Hint_With_Altar_Func002001002001(), Trig_Hero_Revive_Hint_With_Altar_Func002001002002() )
endfunction

function Trig_Hero_Revive_Hint_With_Altar_Func002002 takes nothing returns nothing
    call PingMinimapLocForForce( bj_FORCE_PLAYER[1], GetUnitLoc(GetEnumUnit()), 7.00 )
endfunction

function Trig_Hero_Revive_Hint_With_Altar_Func003001002001 takes nothing returns boolean
    return ( GetUnitTypeId(GetFilterUnit()) == 'halt' )
endfunction

function Trig_Hero_Revive_Hint_With_Altar_Func003001002002 takes nothing returns boolean
    return ( IsUnitAliveBJ(GetFilterUnit()) == true )
endfunction

function Trig_Hero_Revive_Hint_With_Altar_Func003001002 takes nothing returns boolean
    return GetBooleanAnd( Trig_Hero_Revive_Hint_With_Altar_Func003001002001(), Trig_Hero_Revive_Hint_With_Altar_Func003001002002() )
endfunction

function Trig_Hero_Revive_Hint_With_Altar_Func003002 takes nothing returns nothing
    call SetCameraQuickPositionLocForPlayer( Player(1), GetUnitLoc(GetEnumUnit()) )
endfunction

function Trig_Hero_Revive_Hint_With_Altar_Actions takes nothing returns nothing
    call QuestMessageBJ( GetPlayersAll(), bj_QUESTMESSAGE_ALWAYSHINT, "TRIGSTR_161" )
    call ForGroup( GetUnitsOfPlayerMatching(Player(1), Condition(function Trig_Hero_Revive_Hint_With_Altar_Func002001002)), function Trig_Hero_Revive_Hint_With_Altar_Func002002 )
    call ForGroup( GetUnitsOfPlayerMatching(Player(1), Condition(function Trig_Hero_Revive_Hint_With_Altar_Func003001002)), function Trig_Hero_Revive_Hint_With_Altar_Func003002 )
endfunction

//===========================================================================
function InitTrig_Hero_Revive_Hint_With_Altar takes nothing returns nothing
    set gg_trg_Hero_Revive_Hint_With_Altar = CreateTrigger(  )
    call TriggerAddAction( gg_trg_Hero_Revive_Hint_With_Altar, function Trig_Hero_Revive_Hint_With_Altar_Actions )
endfunction

//===========================================================================
// Trigger: Hero Revive Hint No Altar
//===========================================================================
function Trig_Hero_Revive_Hint_No_Altar_Actions takes nothing returns nothing
    call QuestMessageBJ( GetPlayersAll(), bj_QUESTMESSAGE_ALWAYSHINT, "TRIGSTR_163" )
endfunction

//===========================================================================
function InitTrig_Hero_Revive_Hint_No_Altar takes nothing returns nothing
    set gg_trg_Hero_Revive_Hint_No_Altar = CreateTrigger(  )
    call TriggerAddAction( gg_trg_Hero_Revive_Hint_No_Altar, function Trig_Hero_Revive_Hint_No_Altar_Actions )
endfunction

//===========================================================================
// Trigger: Load Heroes
//
// Run from Map Init
//===========================================================================
function Trig_Load_Heroes_Actions takes nothing returns nothing
    call InitGameCacheBJ( "Campaigns.w3v" )
    call ConditionalTriggerExecute( gg_trg_Load_Arthas )
    call ConditionalTriggerExecute( gg_trg_Load_Jaina )
endfunction

//===========================================================================
function InitTrig_Load_Heroes takes nothing returns nothing
    set gg_trg_Load_Heroes = CreateTrigger(  )
    call TriggerAddAction( gg_trg_Load_Heroes, function Trig_Load_Heroes_Actions )
endfunction

//===========================================================================
// Trigger: Load Arthas
//===========================================================================
function Trig_Load_Arthas_Func004001 takes nothing returns boolean
    return ( udg_Arthas != null )
endfunction

function Trig_Load_Arthas_Actions takes nothing returns nothing
    call CommentString( "Load the hero data Arthas" )
    call RestoreUnitLocFacingAngleBJ( "Arthas", "Human04", GetLastCreatedGameCacheBJ(), Player(1), GetRectCenter(gg_rct_ArthasStart), 300.00 )
    set udg_Arthas = GetLastRestoredUnitBJ()
    if ( Trig_Load_Arthas_Func004001() ) then
        return
    else
        call DoNothing(  )
    endif
    call CommentString( "If the hero data wasn't found, create a default hero" )
    call CreateNUnitsAtLoc( 1, 'Hart', Player(1), GetRectCenter(gg_rct_ArthasStart), 300.00 )
    set udg_Arthas = GetLastCreatedUnit()
    call SetHeroLevel( udg_Arthas, 4, false )
    call SelectHeroSkill( udg_Arthas, 'AHhb' )
    call SelectHeroSkill( udg_Arthas, 'AHhb' )
    call SelectHeroSkill( udg_Arthas, 'AHad' )
    call SelectHeroSkill( udg_Arthas, 'AHds' )
endfunction

//===========================================================================
function InitTrig_Load_Arthas takes nothing returns nothing
    set gg_trg_Load_Arthas = CreateTrigger(  )
    call TriggerAddAction( gg_trg_Load_Arthas, function Trig_Load_Arthas_Actions )
endfunction

//===========================================================================
// Trigger: Load Jaina
//===========================================================================
function Trig_Load_Jaina_Func004001 takes nothing returns boolean
    return ( udg_Jaina != null )
endfunction

function Trig_Load_Jaina_Actions takes nothing returns nothing
    call CommentString( "Load the hero data Jaina" )
    call RestoreUnitLocFacingAngleBJ( "Jaina", "Human04", GetLastCreatedGameCacheBJ(), Player(1), GetRectCenter(gg_rct_JainaStart), 300.00 )
    set udg_Jaina = GetLastRestoredUnitBJ()
    if ( Trig_Load_Jaina_Func004001() ) then
        return
    else
        call DoNothing(  )
    endif
    call CommentString( "If the hero data wasn't found, create a default hero" )
    call CreateNUnitsAtLoc( 1, 'Hjai', Player(1), GetRectCenter(gg_rct_JainaStart), 300.00 )
    set udg_Jaina = GetLastCreatedUnit()
    call SetHeroLevel( udg_Jaina, 2, false )
    call SelectHeroSkill( udg_Jaina, 'AHwe' )
    call SelectHeroSkill( udg_Jaina, 'AHab' )
endfunction

//===========================================================================
function InitTrig_Load_Jaina takes nothing returns nothing
    set gg_trg_Load_Jaina = CreateTrigger(  )
    call TriggerAddAction( gg_trg_Load_Jaina, function Trig_Load_Jaina_Actions )
endfunction

//===========================================================================
// Trigger: Next Level Prep
//===========================================================================
function Trig_Next_Level_Prep_Actions takes nothing returns nothing
    call CommentString( "Store hero data for the next level(s)" )
    call StoreUnitBJ( udg_Arthas, "Arthas", "Human05", GetLastCreatedGameCacheBJ() )
    call StoreUnitBJ( udg_Jaina, "Jaina", "Human05", GetLastCreatedGameCacheBJ() )
    call SaveGameCacheBJ( GetLastCreatedGameCacheBJ() )
    call CommentString( "Enable the next level in the glue screens" )
    call SetMissionAvailableBJ( true, bj_MISSION_INDEX_H05 )
endfunction

//===========================================================================
function InitTrig_Next_Level_Prep takes nothing returns nothing
    set gg_trg_Next_Level_Prep = CreateTrigger(  )
    call TriggerAddAction( gg_trg_Next_Level_Prep, function Trig_Next_Level_Prep_Actions )
endfunction

//===========================================================================
// Trigger: Next Level Run
//===========================================================================
function Trig_Next_Level_Run_Actions takes nothing returns nothing
    call CommentString( "Run the next level" )
    call SetNextLevelBJ( "Maps\\Campaign\\Human05.w3m" )
    call CustomVictoryBJ( Player(1), true, true )
endfunction

//===========================================================================
function InitTrig_Next_Level_Run takes nothing returns nothing
    set gg_trg_Next_Level_Run = CreateTrigger(  )
    call TriggerAddAction( gg_trg_Next_Level_Run, function Trig_Next_Level_Run_Actions )
endfunction

//===========================================================================
// Trigger: Victory Cheat
//===========================================================================
function Trig_Victory_Cheat_Actions takes nothing returns nothing
    call ConditionalTriggerExecute( gg_trg_Next_Level_Prep )
    call ConditionalTriggerExecute( gg_trg_Next_Level_Run )
endfunction

//===========================================================================
function InitTrig_Victory_Cheat takes nothing returns nothing
    set gg_trg_Victory_Cheat = CreateTrigger(  )
    call TriggerRegisterPlayerEventVictory( gg_trg_Victory_Cheat, Player(1) )
    call TriggerAddAction( gg_trg_Victory_Cheat, function Trig_Victory_Cheat_Actions )
endfunction

//===========================================================================
// Trigger: DefeatCheat
//===========================================================================
function Trig_DefeatCheat_Actions takes nothing returns nothing
    call CustomDefeatBJ( Player(1), "TRIGSTR_136" )
endfunction

//===========================================================================
function InitTrig_DefeatCheat takes nothing returns nothing
    set gg_trg_DefeatCheat = CreateTrigger(  )
    call TriggerRegisterPlayerEventDefeat( gg_trg_DefeatCheat, Player(1) )
    call TriggerAddAction( gg_trg_DefeatCheat, function Trig_DefeatCheat_Actions )
endfunction

//===========================================================================
// Trigger: OpeningCancelled
//===========================================================================
function Trig_OpeningCancelled_Conditions takes nothing returns boolean
    if ( not ( udg_OpeningSkipped == false ) ) then
        return false
    endif
    return true
endfunction

function Trig_OpeningCancelled_Actions takes nothing returns nothing
    call DisableTrigger( GetTriggeringTrigger() )
    set udg_OpeningSkipped = true
    call UseTimeOfDayBJ( true )
    call StopSoundBJ( GetLastPlayedSound(), false )
    call EndThematicMusicBJ(  )
    call CinematicFadeBJ( bj_CINEFADETYPE_FADEOUT, 0.50, "ReplaceableTextures\\CameraMasks\\White_mask.tga", 0, 0, 0, 0 )
    call TriggerSleepAction( 0.50 )
    call KillUnit( udg_HauntedGoldMine )
    call RemoveUnit( gg_unit_uaco_0011 )
    call RemoveUnit( gg_unit_uaco_0006 )
    call RemoveUnit( gg_unit_uaco_0005 )
    call RemoveUnit( udg_Farm )
    call RemoveUnit( udg_Townhall )
    call RemoveUnit( udg_Barracks )
    call SetUnitPositionLoc( gg_unit_hfoo_0016, GetRectCenter(gg_rct_Footmen01Attack) )
    call SetUnitPositionLoc( gg_unit_hfoo_0017, GetRectCenter(gg_rct_Footman02Attack) )
    call SetUnitPositionLoc( gg_unit_hfoo_0018, GetRectCenter(gg_rct_Footman03Attack) )
    call SetUnitPositionLoc( gg_unit_hmpr_0070, GetRectCenter(gg_rct_PriestAttack) )
    call SetUnitPositionLoc( gg_unit_hmtm_0055, GetRectCenter(gg_rct_MortarAttack) )
    call SetUnitAcquireRangeBJ( udg_Jaina, GetUnitDefaultAcquireRange(udg_Jaina) )
    call SetUnitPositionLoc( udg_Arthas, GetRectCenter(gg_rct_ArthasMove) )
    call SetUnitPositionLoc( udg_Jaina, GetRectCenter(gg_rct_JainaMove) )
    call SetUnitFacingToFaceLocTimed( udg_Arthas, GetRectCenter(gg_rct_AcolyteExit), 0 )
    call SetUnitPositionLoc( gg_unit_hpea_0023, GetRectCenter(gg_rct_JainaStart) )
    call SetUnitPositionLoc( gg_unit_hpea_0020, GetRectCenter(gg_rct_JainaStart) )
    call SetUnitPositionLoc( gg_unit_hpea_0021, GetRectCenter(gg_rct_JainaStart) )
    call IssueImmediateOrderBJ( gg_unit_hpea_0020, "stop" )
    call IssueImmediateOrderBJ( gg_unit_hpea_0021, "stop" )
    call IssueImmediateOrderBJ( gg_unit_hpea_0023, "stop" )
    call SetSkyModel( null )
    call ResetTerrainFogBJ(  )
    call TriggerSleepAction( 0.05 )
    call ConditionalTriggerExecute( gg_trg_StartCampaignAI )
    call SetPlayerStateBJ( Player(1), PLAYER_STATE_RESOURCE_GOLD, 570 )
    call SetPlayerStateBJ( Player(1), PLAYER_STATE_RESOURCE_LUMBER, 250 )
    call CreateNUnitsAtLoc( 1, 'htow', Player(1), GetRectCenter(gg_rct_BuildTownHall), bj_UNIT_FACING )
    call CreateNUnitsAtLoc( 1, 'hhou', Player(1), GetRectCenter(gg_rct_BuildFarm), bj_UNIT_FACING )
    call CreateNUnitsAtLoc( 1, 'hbar', Player(1), GetRectCenter(gg_rct_BuildBarracks), bj_UNIT_FACING )
    call TriggerSleepAction( 0.05 )
    call SetUnitPositionLoc( gg_unit_hpea_0023, GetRectCenter(gg_rct_BuildTownHall) )
    call SetUnitPositionLoc( gg_unit_hpea_0020, GetRectCenter(gg_rct_BuildFarm) )
    call SetUnitPositionLoc( gg_unit_hpea_0021, GetRectCenter(gg_rct_BuildBarracks) )
    call IssueImmediateOrderBJ( gg_unit_hpea_0020, "stop" )
    call IssueImmediateOrderBJ( gg_unit_hpea_0021, "stop" )
    call IssueImmediateOrderBJ( gg_unit_hpea_0023, "stop" )
    call IssueTargetDestructableOrder( gg_unit_hpea_0023, "harvest", gg_dest_LTlt_2058 )
    call IssueTargetOrderBJ( gg_unit_hpea_0021, "harvest", gg_unit_ngol_0008 )
    call IssueTargetOrderBJ( gg_unit_hpea_0020, "harvest", gg_unit_ngol_0008 )
    call SetUnitFacingToFaceLocTimed( udg_Arthas, GetRectCenter(gg_rct_ArthasAttack), 0.00 )
    call CinematicFadeBJ( bj_CINEFADETYPE_FADEIN, 0.50, "ReplaceableTextures\\CameraMasks\\White_mask.tga", 0, 0, 0, 0 )
    call ResetToGameCameraForPlayer( Player(1), 0.00 )
    call PanCameraToTimedLocForPlayer( Player(1), GetRectCenter(gg_rct_OpeningCamReset), 0 )
    call CinematicModeBJ( false, GetPlayersAll() )
    call SelectUnitSingle( udg_Arthas )
    call DestroyFogModifier( GetLastCreatedFogModifier() )
    call EnableTrigger( gg_trg_TownIsDestroyed )
    call TriggerSleepAction( 5.00 )
    call StartTimerBJ( udg_GoldHintTimer, false, 60.00 )
    call QuestSetDiscoveredBJ( udg_QuestAndorhal, true )
    call QuestMessageBJ( GetPlayersAll(), bj_QUESTMESSAGE_DISCOVERED, "TRIGSTR_010" )
    call TriggerSleepAction( bj_QUEUE_DELAY_QUEST )
endfunction

//===========================================================================
function InitTrig_OpeningCancelled takes nothing returns nothing
    set gg_trg_OpeningCancelled = CreateTrigger(  )
    call DisableTrigger( gg_trg_OpeningCancelled )
    call TriggerRegisterPlayerEventEndCinematic( gg_trg_OpeningCancelled, Player(1) )
    call TriggerAddCondition( gg_trg_OpeningCancelled, Condition( function Trig_OpeningCancelled_Conditions ) )
    call TriggerAddAction( gg_trg_OpeningCancelled, function Trig_OpeningCancelled_Actions )
endfunction

//===========================================================================
// Trigger: Opening01
//
// Gold given to player 7 no necros can build a haunted mine.
//===========================================================================
function Trig_Opening01_Conditions takes nothing returns boolean
    if ( not ( udg_OpeningSkipped == false ) ) then
        return false
    endif
    return true
endfunction

function Trig_Opening01_Actions takes nothing returns nothing
    call DisableTrigger( GetTriggeringTrigger() )
    call UseTimeOfDayBJ( false )
    call CreateFogModifierRadiusLocBJ( true, Player(1), FOG_OF_WAR_VISIBLE, GetRectCenter(gg_rct_OpeningVisibility01), 1800.00 )
    call CommentString( "***********************" )
    call SetStackedSoundBJ( true, gg_snd_WaterLakeLoop1, gg_rct_LakeLoop01 )
    call SetStackedSoundBJ( true, gg_snd_WaterLakeLoop1, gg_rct_LakeLoop02 )
    call SetStackedSoundBJ( true, gg_snd_WaterLakeLoop1, gg_rct_LakeLoop03 )
    call SetStackedSoundBJ( true, gg_snd_WaterLakeLoop1, gg_rct_LakeLoop04 )
    call SetStackedSoundBJ( true, gg_snd_WaterLakeLoop1, gg_rct_LakeLoop05 )
    call SetStackedSoundBJ( true, gg_snd_WaterLakeLoop1, gg_rct_LakeLoop06 )
    call SetStackedSoundBJ( true, gg_snd_WaterLakeLoop1, gg_rct_LakeLoop07 )
    call SetStackedSoundBJ( true, gg_snd_WaterLakeLoop1, gg_rct_LakeLoop08 )
    call SetStackedSoundBJ( true, gg_snd_WaterStreamLoop1, gg_rct_StreamLoop01 )
    call SetUnitAcquireRangeBJ( udg_Jaina, 100.00 )
    call CommentString( "***********************" )
    call CameraSetupApplyForPlayer( true, gg_cam_Opening01, Player(1), 0.00 )
    call CinematicFadeBJ( bj_CINEFADETYPE_FADEIN, 2, "ReplaceableTextures\\CameraMasks\\White_mask.tga", 0, 0, 0, 0 )
    call CinematicModeBJ( true, GetPlayersAll() )
    call CommentString( "Music" )
    call ClearMapMusicBJ(  )
    call TriggerSleepAction( 0.01 )
    call PlayThematicMusicBJ( "Sound\\Music\\mp3Music\\DarkAgents.mp3" )
    call SetMapMusicIndexedBJ( "music", 0 )
    call CommentString( "***********************" )
    call ConditionalTriggerExecute( gg_trg_Opening02 )
endfunction

//===========================================================================
function InitTrig_Opening01 takes nothing returns nothing
    set gg_trg_Opening01 = CreateTrigger(  )
    call TriggerAddCondition( gg_trg_Opening01, Condition( function Trig_Opening01_Conditions ) )
    call TriggerAddAction( gg_trg_Opening01, function Trig_Opening01_Actions )
endfunction

//===========================================================================
// Trigger: Opening02
//===========================================================================
function Trig_Opening02_Conditions takes nothing returns boolean
    if ( not ( udg_OpeningSkipped == false ) ) then
        return false
    endif
    return true
endfunction

function Trig_Opening02_Func009001 takes nothing returns boolean
    return ( udg_OpeningSkipped == true )
endfunction

function Trig_Opening02_Func016001 takes nothing returns boolean
    return ( udg_OpeningSkipped == true )
endfunction

function Trig_Opening02_Func021001 takes nothing returns boolean
    return ( udg_OpeningSkipped == true )
endfunction

function Trig_Opening02_Actions takes nothing returns nothing
    call DisableTrigger( GetTriggeringTrigger() )
    call CommentString( "Cinematic Can Now Be Skipped" )
    call EnableTrigger( gg_trg_OpeningCancelled )
    call CommentString( "***********************" )
    call IssuePointOrderLocBJ( udg_Arthas, "move", GetRectCenter(gg_rct_OpeningArthas) )
    call IssuePointOrderLocBJ( udg_Jaina, "move", GetRectCenter(gg_rct_OpeningJaina) )
    call TriggerSleepAction( 0.75 )
    if ( Trig_Opening02_Func009001() ) then
        return
    else
        call DoNothing(  )
    endif
    call IssuePointOrderLocBJ( gg_unit_hfoo_0016, "move", GetRectCenter(gg_rct_OpeningFootman01) )
    call IssuePointOrderLocBJ( gg_unit_hfoo_0017, "move", GetRectCenter(gg_rct_OpeningFootman02) )
    call IssuePointOrderLocBJ( gg_unit_hmtm_0055, "move", GetRectCenter(gg_rct_OpeningFootman03) )
    call IssuePointOrderLocBJ( gg_unit_hfoo_0018, "move", GetRectCenter(gg_rct_OpeningFootman04) )
    call IssuePointOrderLocBJ( gg_unit_hmpr_0070, "move", GetRectCenter(gg_rct_OpeningPriest01) )
    call TriggerSleepAction( 2.00 )
    if ( Trig_Opening02_Func016001() ) then
        return
    else
        call DoNothing(  )
    endif
    call IssueBuildOrderByIdLocBJ( gg_unit_uaco_0005, 'ugol', GetUnitLoc(gg_unit_ngol_0008) )
    call IssuePointOrderLocBJ( gg_unit_uaco_0011, "move", GetRectCenter(gg_rct_Acolyte02Post) )
    call IssuePointOrderLocBJ( gg_unit_uaco_0006, "move", GetRectCenter(gg_rct_Acolyte01Post) )
    call TriggerSleepAction( 0.20 )
    if ( Trig_Opening02_Func021001() ) then
        return
    else
        call DoNothing(  )
    endif
    call ConditionalTriggerExecute( gg_trg_Opening03 )
endfunction

//===========================================================================
function InitTrig_Opening02 takes nothing returns nothing
    set gg_trg_Opening02 = CreateTrigger(  )
    call TriggerAddCondition( gg_trg_Opening02, Condition( function Trig_Opening02_Conditions ) )
    call TriggerAddAction( gg_trg_Opening02, function Trig_Opening02_Actions )
endfunction

//===========================================================================
// Trigger: Opening03
//===========================================================================
function Trig_Opening03_Conditions takes nothing returns boolean
    if ( not ( udg_OpeningSkipped == false ) ) then
        return false
    endif
    return true
endfunction

function Trig_Opening03_Func004001 takes nothing returns boolean
    return ( udg_OpeningSkipped == true )
endfunction

function Trig_Opening03_Func008001 takes nothing returns boolean
    return ( udg_OpeningSkipped == true )
endfunction

function Trig_Opening03_Func011001 takes nothing returns boolean
    return ( udg_OpeningSkipped == true )
endfunction

function Trig_Opening03_Func015001 takes nothing returns boolean
    return ( udg_OpeningSkipped == true )
endfunction

function Trig_Opening03_Func018001 takes nothing returns boolean
    return ( udg_OpeningSkipped == true )
endfunction

function Trig_Opening03_Func020001 takes nothing returns boolean
    return ( udg_OpeningSkipped == true )
endfunction

function Trig_Opening03_Func024001 takes nothing returns boolean
    return ( udg_OpeningSkipped == true )
endfunction

function Trig_Opening03_Func027001 takes nothing returns boolean
    return ( udg_OpeningSkipped == true )
endfunction

function Trig_Opening03_Func029001 takes nothing returns boolean
    return ( udg_OpeningSkipped == true )
endfunction

function Trig_Opening03_Actions takes nothing returns nothing
    call DisableTrigger( GetTriggeringTrigger() )
    call TriggerSleepAction( 1.25 )
    if ( Trig_Opening03_Func004001() ) then
        return
    else
        call DoNothing(  )
    endif
    call CameraSetupApplyForPlayer( true, gg_cam_Opening02, Player(1), 0.00 )
    call CameraSetupApplyForPlayer( true, gg_cam_Opening03, Player(1), 11.40 )
    call TriggerSleepAction( 0.50 )
    if ( Trig_Opening03_Func008001() ) then
        return
    else
        call DoNothing(  )
    endif
    call TransmissionFromUnitWithNameBJ( GetPlayersAll(), udg_Jaina, "TRIGSTR_013", gg_snd_H04Jaina01, "TRIGSTR_014", bj_TIMETYPE_ADD, 0.00, false )
    call TriggerSleepAction( 2.31 )
    if ( Trig_Opening03_Func011001() ) then
        return
    else
        call DoNothing(  )
    endif
    call SetUnitFacingToFaceUnitTimed( gg_unit_uaco_0005, udg_HauntedGoldMine, 0 )
    call SetUnitFacingToFaceUnitTimed( gg_unit_uaco_0006, udg_HauntedGoldMine, 0 )
    call TriggerSleepAction( 1.00 )
    if ( Trig_Opening03_Func015001() ) then
        return
    else
        call DoNothing(  )
    endif
    call SetUnitFacingToFaceUnitTimed( gg_unit_uaco_0011, udg_HauntedGoldMine, 0 )
    call TriggerSleepAction( 2.00 )
    if ( Trig_Opening03_Func018001() ) then
        return
    else
        call DoNothing(  )
    endif
    call WaitForSoundBJ( gg_snd_H04Jaina01, 0 )
    if ( Trig_Opening03_Func020001() ) then
        return
    else
        call DoNothing(  )
    endif
    call IssuePointOrderLocBJ( gg_unit_hfoo_0016, "move", GetRectCenter(gg_rct_OpeningFootmanReposition) )
    call TransmissionFromUnitWithNameBJ( GetPlayersAll(), udg_Arthas, "TRIGSTR_037", gg_snd_H04Arthas02, "TRIGSTR_038", bj_TIMETYPE_ADD, 0.00, false )
    call TriggerSleepAction( 2.00 )
    if ( Trig_Opening03_Func024001() ) then
        return
    else
        call DoNothing(  )
    endif
    call IssuePointOrderLocBJ( udg_Arthas, "attack", GetRectCenter(gg_rct_ArthasAttack) )
    call TriggerSleepAction( 0.61 )
    if ( Trig_Opening03_Func027001() ) then
        return
    else
        call DoNothing(  )
    endif
    call WaitForSoundBJ( gg_snd_H04Arthas02, 0 )
    if ( Trig_Opening03_Func029001() ) then
        return
    else
        call DoNothing(  )
    endif
    call ConditionalTriggerExecute( gg_trg_Opening04 )
endfunction

//===========================================================================
function InitTrig_Opening03 takes nothing returns nothing
    set gg_trg_Opening03 = CreateTrigger(  )
    call TriggerAddCondition( gg_trg_Opening03, Condition( function Trig_Opening03_Conditions ) )
    call TriggerAddAction( gg_trg_Opening03, function Trig_Opening03_Actions )
endfunction

//===========================================================================
// Trigger: Opening04
//===========================================================================
function Trig_Opening04_Conditions takes nothing returns boolean
    if ( not ( udg_OpeningSkipped == false ) ) then
        return false
    endif
    return true
endfunction

function Trig_Opening04_Func004001 takes nothing returns boolean
    return ( udg_OpeningSkipped == true )
endfunction

function Trig_Opening04_Func007001 takes nothing returns boolean
    return ( udg_OpeningSkipped == true )
endfunction

function Trig_Opening04_Func013001 takes nothing returns boolean
    return ( udg_OpeningSkipped == true )
endfunction

function Trig_Opening04_Func017001 takes nothing returns boolean
    return ( udg_OpeningSkipped == true )
endfunction

function Trig_Opening04_Func025001 takes nothing returns boolean
    return ( udg_OpeningSkipped == true )
endfunction

function Trig_Opening04_Func027001 takes nothing returns boolean
    return ( udg_OpeningSkipped == true )
endfunction

function Trig_Opening04_Actions takes nothing returns nothing
    call DisableTrigger( GetTriggeringTrigger() )
    call TriggerSleepAction( 0.40 )
    if ( Trig_Opening04_Func004001() ) then
        return
    else
        call DoNothing(  )
    endif
    call IssuePointOrderLocBJ( udg_Jaina, "attack", GetRectCenter(gg_rct_JainaAttack) )
    call TriggerSleepAction( 0.50 )
    if ( Trig_Opening04_Func007001() ) then
        return
    else
        call DoNothing(  )
    endif
    call IssuePointOrderLocBJ( gg_unit_hfoo_0016, "attack", GetRectCenter(gg_rct_Footmen01Attack) )
    call IssuePointOrderLocBJ( gg_unit_hfoo_0017, "attack", GetRectCenter(gg_rct_Footman02Attack) )
    call IssuePointOrderLocBJ( gg_unit_hfoo_0018, "attack", GetRectCenter(gg_rct_Footman03Attack) )
    call IssuePointOrderLocBJ( gg_unit_hmtm_0055, "attack", GetRectCenter(gg_rct_MortarAttack) )
    call IssuePointOrderLocBJ( gg_unit_hmpr_0070, "attack", GetRectCenter(gg_rct_PriestAttack) )
    if ( Trig_Opening04_Func013001() ) then
        return
    else
        call DoNothing(  )
    endif
    call CameraSetupApplyForPlayer( true, gg_cam_Opening04, Player(1), 0.00 )
    call ConditionalTriggerExecute( gg_trg_PeasantMoving )
    call TriggerSleepAction( 0.50 )
    if ( Trig_Opening04_Func017001() ) then
        return
    else
        call DoNothing(  )
    endif
    call DestroyFogModifier( GetLastCreatedFogModifier() )
    call TransmissionFromUnitWithNameBJ( GetPlayersAll(), gg_unit_uaco_0006, "TRIGSTR_021", gg_snd_H04Acolyte03, "TRIGSTR_022", bj_TIMETYPE_ADD, 0.00, false )
    call KillUnit( udg_HauntedGoldMine )
    call ConditionalTriggerExecute( gg_trg_AcolytesRun )
    call SetUnitInvulnerable( gg_unit_uaco_0011, false )
    call IssueTargetOrderBJ( udg_Arthas, "attack", gg_unit_uaco_0011 )
    call TriggerSleepAction( 5.00 )
    if ( Trig_Opening04_Func025001() ) then
        return
    else
        call DoNothing(  )
    endif
    call WaitForSoundBJ( gg_snd_H04Acolyte03, 0 )
    if ( Trig_Opening04_Func027001() ) then
        return
    else
        call DoNothing(  )
    endif
    call ConditionalTriggerExecute( gg_trg_Opening05 )
endfunction

//===========================================================================
function InitTrig_Opening04 takes nothing returns nothing
    set gg_trg_Opening04 = CreateTrigger(  )
    call TriggerAddCondition( gg_trg_Opening04, Condition( function Trig_Opening04_Conditions ) )
    call TriggerAddAction( gg_trg_Opening04, function Trig_Opening04_Actions )
endfunction

//===========================================================================
// Trigger: Opening05
//===========================================================================
function Trig_Opening05_Conditions takes nothing returns boolean
    if ( not ( udg_OpeningSkipped == false ) ) then
        return false
    endif
    return true
endfunction

function Trig_Opening05_Func005001 takes nothing returns boolean
    return ( udg_OpeningSkipped == true )
endfunction

function Trig_Opening05_Func009001 takes nothing returns boolean
    return ( udg_OpeningSkipped == true )
endfunction

function Trig_Opening05_Func013001 takes nothing returns boolean
    return ( udg_OpeningSkipped == true )
endfunction

function Trig_Opening05_Func016001 takes nothing returns boolean
    return ( udg_OpeningSkipped == true )
endfunction

function Trig_Opening05_Func018001 takes nothing returns boolean
    return ( udg_OpeningSkipped == true )
endfunction

function Trig_Opening05_Func022001 takes nothing returns boolean
    return ( udg_OpeningSkipped == true )
endfunction

function Trig_Opening05_Func025001 takes nothing returns boolean
    return ( udg_OpeningSkipped == true )
endfunction

function Trig_Opening05_Func027001 takes nothing returns boolean
    return ( udg_OpeningSkipped == true )
endfunction

function Trig_Opening05_Actions takes nothing returns nothing
    call DisableTrigger( GetTriggeringTrigger() )
    call TransmissionFromUnitWithNameBJ( GetPlayersAll(), udg_Arthas, "TRIGSTR_002", gg_snd_H04Arthas04, "TRIGSTR_003", bj_TIMETYPE_ADD, 0.00, false )
    call TriggerSleepAction( 0.50 )
    if ( Trig_Opening05_Func005001() ) then
        return
    else
        call DoNothing(  )
    endif
    call IssuePointOrderLocBJ( udg_Arthas, "attack", GetRectCenter(gg_rct_ArthasMove) )
    call CameraSetupApplyForPlayer( true, gg_cam_Opening05, Player(1), 5.00 )
    call TriggerSleepAction( 0.70 )
    if ( Trig_Opening05_Func009001() ) then
        return
    else
        call DoNothing(  )
    endif
    call FogModifierStop( GetLastCreatedFogModifier() )
    call IssuePointOrderLocBJ( udg_Jaina, "attack", GetRectCenter(gg_rct_JainaMove) )
    call TriggerSleepAction( 2.00 )
    if ( Trig_Opening05_Func013001() ) then
        return
    else
        call DoNothing(  )
    endif
    call SetUnitFacingToFaceLocTimed( udg_Arthas, GetRectCenter(gg_rct_ArthasAttack), 0.15 )
    call TriggerSleepAction( 2.00 )
    if ( Trig_Opening05_Func016001() ) then
        return
    else
        call DoNothing(  )
    endif
    call WaitForSoundBJ( gg_snd_H04Arthas04, 0 )
    if ( Trig_Opening05_Func018001() ) then
        return
    else
        call DoNothing(  )
    endif
    call TransmissionFromUnitWithNameBJ( GetPlayersAll(), udg_Jaina, "TRIGSTR_005", gg_snd_H04Jaina05, "TRIGSTR_007", bj_TIMETYPE_ADD, 0.00, false )
    call VolumeGroupResetBJ(  )
    call TriggerSleepAction( 0.50 )
    if ( Trig_Opening05_Func022001() ) then
        return
    else
        call DoNothing(  )
    endif
    call SetUnitFacingToFaceLocTimed( udg_Jaina, GetRectCenter(gg_rct_OpeningVisibility01), 0.15 )
    call TriggerSleepAction( 2.00 )
    if ( Trig_Opening05_Func025001() ) then
        return
    else
        call DoNothing(  )
    endif
    call WaitForSoundBJ( gg_snd_H04Jaina05, 0 )
    if ( Trig_Opening05_Func027001() ) then
        return
    else
        call DoNothing(  )
    endif
    call ConditionalTriggerExecute( gg_trg_Opening06 )
endfunction

//===========================================================================
function InitTrig_Opening05 takes nothing returns nothing
    set gg_trg_Opening05 = CreateTrigger(  )
    call TriggerAddCondition( gg_trg_Opening05, Condition( function Trig_Opening05_Conditions ) )
    call TriggerAddAction( gg_trg_Opening05, function Trig_Opening05_Actions )
endfunction

//===========================================================================
// Trigger: Opening06
//===========================================================================
function Trig_Opening06_Conditions takes nothing returns boolean
    if ( not ( udg_OpeningSkipped == false ) ) then
        return false
    endif
    return true
endfunction

function Trig_Opening06_Func005001 takes nothing returns boolean
    return ( udg_OpeningSkipped == true )
endfunction

function Trig_Opening06_Func008001 takes nothing returns boolean
    return ( udg_OpeningSkipped == true )
endfunction

function Trig_Opening06_Func011001 takes nothing returns boolean
    return ( udg_OpeningSkipped == true )
endfunction

function Trig_Opening06_Func024002 takes nothing returns nothing
    call RemoveUnit( GetEnumUnit() )
endfunction

function Trig_Opening06_Func025001002 takes nothing returns boolean
    return ( IsUnitType(GetEnumUnit(), UNIT_TYPE_MELEE_ATTACKER) == true )
endfunction

function Trig_Opening06_Func025002 takes nothing returns nothing
    call RemoveUnit( GetEnumUnit() )
endfunction

function Trig_Opening06_Actions takes nothing returns nothing
    call DisableTrigger( GetTriggeringTrigger() )
    call CameraSetupApplyForPlayer( true, gg_cam_OpeningTownHallShot, Player(1), 0 )
    call TriggerSleepAction( 3.00 )
    if ( Trig_Opening06_Func005001() ) then
        return
    else
        call DoNothing(  )
    endif
    call CameraSetupApplyForPlayer( true, gg_cam_OpeningFarmShot, Player(1), 0 )
    call TriggerSleepAction( 4.00 )
    if ( Trig_Opening06_Func008001() ) then
        return
    else
        call DoNothing(  )
    endif
    call CameraSetupApplyForPlayer( true, gg_cam_OpeningBarracksShot, Player(1), 0 )
    call TriggerSleepAction( 3.00 )
    if ( Trig_Opening06_Func011001() ) then
        return
    else
        call DoNothing(  )
    endif
    call EndThematicMusicBJ(  )
    call CommentString( "***********************" )
    call CommentString( "NO LONGER SKIPPABLE" )
    call DisableTrigger( gg_trg_OpeningCancelled )
    call UseTimeOfDayBJ( true )
    call SetSkyModel( null )
    call ResetTerrainFogBJ(  )
    call SetUnitAcquireRangeBJ( udg_Jaina, GetUnitDefaultAcquireRange(udg_Jaina) )
    call ResetToGameCameraForPlayer( Player(1), 2.00 )
    call CinematicModeBJ( false, GetPlayersAll() )
    call SelectUnitSingle( udg_Arthas )
    call PanCameraToTimedLocForPlayer( Player(1), GetRectCenter(gg_rct_OpeningCamReset), 0 )
    call ForGroup( udg_Town01Group, function Trig_Opening06_Func024002 )
    call ForGroup( GetUnitsInRectMatching(gg_rct_AcolyteExit, Condition(function Trig_Opening06_Func025001002)), function Trig_Opening06_Func025002 )
    call ConditionalTriggerExecute( gg_trg_StartCampaignAI )
    call DestroyFogModifier( GetLastCreatedFogModifier() )
    call EnableTrigger( gg_trg_TownIsDestroyed )
    call QuestSetDiscoveredBJ( udg_QuestAndorhal, true )
    call QuestMessageBJ( GetPlayersAll(), bj_QUESTMESSAGE_DISCOVERED, "TRIGSTR_008" )
    call StartTimerBJ( udg_GoldHintTimer, false, 60.00 )
    call TriggerSleepAction( bj_QUEUE_DELAY_QUEST )
    set udg_OpeningSkipped = true
endfunction

//===========================================================================
function InitTrig_Opening06 takes nothing returns nothing
    set gg_trg_Opening06 = CreateTrigger(  )
    call TriggerAddCondition( gg_trg_Opening06, Condition( function Trig_Opening06_Conditions ) )
    call TriggerAddAction( gg_trg_Opening06, function Trig_Opening06_Actions )
endfunction

//===========================================================================
// Trigger: PeasantMoving
//===========================================================================
function Trig_PeasantMoving_Actions takes nothing returns nothing
    call IssuePointOrderLocBJ( udg_PeasantBarracks, "move", GetRectCenter(gg_rct_BuildBarracks) )
    call IssuePointOrderLocBJ( udg_PeasantFarm, "move", GetRectCenter(gg_rct_BuildFarm) )
    call IssuePointOrderLocBJ( udg_PeasantTownHall, "move", GetRectCenter(gg_rct_BuildTownHall) )
endfunction

//===========================================================================
function InitTrig_PeasantMoving takes nothing returns nothing
    set gg_trg_PeasantMoving = CreateTrigger(  )
    call TriggerAddAction( gg_trg_PeasantMoving, function Trig_PeasantMoving_Actions )
endfunction

//===========================================================================
// Trigger: PeasantFarm
//===========================================================================
function Trig_PeasantFarm_Conditions takes nothing returns boolean
    if ( not ( GetTriggerUnit() == udg_PeasantFarm ) ) then
        return false
    endif
    return true
endfunction

function Trig_PeasantFarm_Actions takes nothing returns nothing
    call DisableTrigger( GetTriggeringTrigger() )
    call IssueBuildOrderByIdLocBJ( udg_PeasantFarm, 'hhou', GetRectCenter(gg_rct_BuildFarm) )
endfunction

//===========================================================================
function InitTrig_PeasantFarm takes nothing returns nothing
    set gg_trg_PeasantFarm = CreateTrigger(  )
    call TriggerRegisterEnterRectSimple( gg_trg_PeasantFarm, gg_rct_BuildFarm )
    call TriggerAddCondition( gg_trg_PeasantFarm, Condition( function Trig_PeasantFarm_Conditions ) )
    call TriggerAddAction( gg_trg_PeasantFarm, function Trig_PeasantFarm_Actions )
endfunction

//===========================================================================
// Trigger: PeasantBarracks
//===========================================================================
function Trig_PeasantBarracks_Conditions takes nothing returns boolean
    if ( not ( GetTriggerUnit() == udg_PeasantBarracks ) ) then
        return false
    endif
    return true
endfunction

function Trig_PeasantBarracks_Actions takes nothing returns nothing
    call DisableTrigger( GetTriggeringTrigger() )
    call IssueBuildOrderByIdLocBJ( udg_PeasantBarracks, 'hbar', GetRectCenter(gg_rct_BuildBarracks) )
endfunction

//===========================================================================
function InitTrig_PeasantBarracks takes nothing returns nothing
    set gg_trg_PeasantBarracks = CreateTrigger(  )
    call TriggerRegisterEnterRectSimple( gg_trg_PeasantBarracks, gg_rct_BuildBarracks )
    call TriggerAddCondition( gg_trg_PeasantBarracks, Condition( function Trig_PeasantBarracks_Conditions ) )
    call TriggerAddAction( gg_trg_PeasantBarracks, function Trig_PeasantBarracks_Actions )
endfunction

//===========================================================================
// Trigger: PeasantTownhall
//===========================================================================
function Trig_PeasantTownhall_Conditions takes nothing returns boolean
    if ( not ( GetTriggerUnit() == udg_PeasantTownHall ) ) then
        return false
    endif
    return true
endfunction

function Trig_PeasantTownhall_Actions takes nothing returns nothing
    call DisableTrigger( GetTriggeringTrigger() )
    call IssueBuildOrderByIdLocBJ( udg_PeasantTownHall, 'htow', GetRectCenter(gg_rct_BuildTownHall) )
endfunction

//===========================================================================
function InitTrig_PeasantTownhall takes nothing returns nothing
    set gg_trg_PeasantTownhall = CreateTrigger(  )
    call TriggerRegisterEnterRectSimple( gg_trg_PeasantTownhall, gg_rct_BuildTownHall )
    call TriggerAddCondition( gg_trg_PeasantTownhall, Condition( function Trig_PeasantTownhall_Conditions ) )
    call TriggerAddAction( gg_trg_PeasantTownhall, function Trig_PeasantTownhall_Actions )
endfunction

//===========================================================================
// Trigger: Footman01Facing
//===========================================================================
function Trig_Footman01Facing_Conditions takes nothing returns boolean
    if ( not ( GetEnteringUnit() == gg_unit_hfoo_0016 ) ) then
        return false
    endif
    return true
endfunction

function Trig_Footman01Facing_Actions takes nothing returns nothing
    call TriggerSleepAction( 0.20 )
    call SetUnitFacingToFaceLocTimed( gg_unit_hfoo_0016, GetRectCenter(gg_rct_Footman01Facing), 0.20 )
endfunction

//===========================================================================
function InitTrig_Footman01Facing takes nothing returns nothing
    set gg_trg_Footman01Facing = CreateTrigger(  )
    call TriggerRegisterEnterRectSimple( gg_trg_Footman01Facing, gg_rct_Footmen01Attack )
    call TriggerAddCondition( gg_trg_Footman01Facing, Condition( function Trig_Footman01Facing_Conditions ) )
    call TriggerAddAction( gg_trg_Footman01Facing, function Trig_Footman01Facing_Actions )
endfunction

//===========================================================================
// Trigger: PriestFacing
//===========================================================================
function Trig_PriestFacing_Conditions takes nothing returns boolean
    if ( not ( GetEnteringUnit() == gg_unit_hmpr_0070 ) ) then
        return false
    endif
    return true
endfunction

function Trig_PriestFacing_Actions takes nothing returns nothing
    call TriggerSleepAction( 0.20 )
    call SetUnitFacingToFaceLocTimed( gg_unit_hmpr_0070, GetRectCenter(gg_rct_PriestFacing), 0.20 )
endfunction

//===========================================================================
function InitTrig_PriestFacing takes nothing returns nothing
    set gg_trg_PriestFacing = CreateTrigger(  )
    call TriggerRegisterEnterRectSimple( gg_trg_PriestFacing, gg_rct_PriestAttack )
    call TriggerAddCondition( gg_trg_PriestFacing, Condition( function Trig_PriestFacing_Conditions ) )
    call TriggerAddAction( gg_trg_PriestFacing, function Trig_PriestFacing_Actions )
endfunction

//===========================================================================
// Trigger: AcolytesRun
//===========================================================================
function Trig_AcolytesRun_Actions takes nothing returns nothing
    call SetUnitInvulnerable( gg_unit_uaco_0005, true )
    call SetUnitInvulnerable( gg_unit_uaco_0006, true )
    call SetUnitInvulnerable( gg_unit_uaco_0011, true )
    call IssuePointOrderLocBJ( gg_unit_uaco_0005, "move", GetRectCenter(gg_rct_AcolyteExit) )
    call IssuePointOrderLocBJ( gg_unit_uaco_0006, "move", GetRectCenter(gg_rct_AcolyteExit) )
    call IssuePointOrderLocBJ( gg_unit_uaco_0011, "move", GetRectCenter(gg_rct_AcolyteExit) )
    call TriggerSleepAction( 2 )
endfunction

//===========================================================================
function InitTrig_AcolytesRun takes nothing returns nothing
    set gg_trg_AcolytesRun = CreateTrigger(  )
    call TriggerAddAction( gg_trg_AcolytesRun, function Trig_AcolytesRun_Actions )
endfunction

//===========================================================================
// Trigger: AcolyteDeath
//===========================================================================
function Trig_AcolyteDeath_Conditions takes nothing returns boolean
    if ( not ( GetAttackedUnitBJ() == gg_unit_uaco_0011 ) ) then
        return false
    endif
    return true
endfunction

function Trig_AcolyteDeath_Actions takes nothing returns nothing
    call TriggerSleepAction( 0.20 )
    call KillUnit( GetAttackedUnitBJ() )
endfunction

//===========================================================================
function InitTrig_AcolyteDeath takes nothing returns nothing
    set gg_trg_AcolyteDeath = CreateTrigger(  )
    call TriggerRegisterPlayerUnitEventSimple( gg_trg_AcolyteDeath, Player(6), EVENT_PLAYER_UNIT_ATTACKED )
    call TriggerAddCondition( gg_trg_AcolyteDeath, Condition( function Trig_AcolyteDeath_Conditions ) )
    call TriggerAddAction( gg_trg_AcolyteDeath, function Trig_AcolyteDeath_Actions )
endfunction

//===========================================================================
// Trigger: ConstructingHauntedMine
//===========================================================================
function Trig_ConstructingHauntedMine_Actions takes nothing returns nothing
    set udg_HauntedGoldMine = GetConstructingStructure()
endfunction

//===========================================================================
function InitTrig_ConstructingHauntedMine takes nothing returns nothing
    set gg_trg_ConstructingHauntedMine = CreateTrigger(  )
    call TriggerRegisterPlayerUnitEventSimple( gg_trg_ConstructingHauntedMine, Player(6), EVENT_PLAYER_UNIT_CONSTRUCT_START )
    call TriggerAddAction( gg_trg_ConstructingHauntedMine, function Trig_ConstructingHauntedMine_Actions )
endfunction

//===========================================================================
// Trigger: ConstructingTownhall
//===========================================================================
function Trig_ConstructingTownhall_Conditions takes nothing returns boolean
    if ( not ( GetUnitTypeId(GetTriggerUnit()) == 'htow' ) ) then
        return false
    endif
    return true
endfunction

function Trig_ConstructingTownhall_Actions takes nothing returns nothing
    set udg_Townhall = GetConstructingStructure()
endfunction

//===========================================================================
function InitTrig_ConstructingTownhall takes nothing returns nothing
    set gg_trg_ConstructingTownhall = CreateTrigger(  )
    call TriggerRegisterPlayerUnitEventSimple( gg_trg_ConstructingTownhall, Player(1), EVENT_PLAYER_UNIT_CONSTRUCT_START )
    call TriggerAddCondition( gg_trg_ConstructingTownhall, Condition( function Trig_ConstructingTownhall_Conditions ) )
    call TriggerAddAction( gg_trg_ConstructingTownhall, function Trig_ConstructingTownhall_Actions )
endfunction

//===========================================================================
// Trigger: ConstructingFarm
//===========================================================================
function Trig_ConstructingFarm_Conditions takes nothing returns boolean
    if ( not ( GetUnitTypeId(GetTriggerUnit()) == 'hhou' ) ) then
        return false
    endif
    return true
endfunction

function Trig_ConstructingFarm_Actions takes nothing returns nothing
    set udg_Farm = GetConstructingStructure()
endfunction

//===========================================================================
function InitTrig_ConstructingFarm takes nothing returns nothing
    set gg_trg_ConstructingFarm = CreateTrigger(  )
    call TriggerRegisterPlayerUnitEventSimple( gg_trg_ConstructingFarm, Player(1), EVENT_PLAYER_UNIT_CONSTRUCT_START )
    call TriggerAddCondition( gg_trg_ConstructingFarm, Condition( function Trig_ConstructingFarm_Conditions ) )
    call TriggerAddAction( gg_trg_ConstructingFarm, function Trig_ConstructingFarm_Actions )
endfunction

//===========================================================================
// Trigger: ConstructingBarracks
//===========================================================================
function Trig_ConstructingBarracks_Conditions takes nothing returns boolean
    if ( not ( GetUnitTypeId(GetTriggerUnit()) == 'hbar' ) ) then
        return false
    endif
    return true
endfunction

function Trig_ConstructingBarracks_Actions takes nothing returns nothing
    set udg_Barracks = GetConstructingStructure()
endfunction

//===========================================================================
function InitTrig_ConstructingBarracks takes nothing returns nothing
    set gg_trg_ConstructingBarracks = CreateTrigger(  )
    call TriggerRegisterPlayerUnitEventSimple( gg_trg_ConstructingBarracks, Player(1), EVENT_PLAYER_UNIT_CONSTRUCT_START )
    call TriggerAddCondition( gg_trg_ConstructingBarracks, Condition( function Trig_ConstructingBarracks_Conditions ) )
    call TriggerAddAction( gg_trg_ConstructingBarracks, function Trig_ConstructingBarracks_Actions )
endfunction

//===========================================================================
// Trigger: FarmDone
//===========================================================================
function Trig_FarmDone_Conditions takes nothing returns boolean
    if ( not ( GetUnitTypeId(GetTriggerUnit()) == 'hhou' ) ) then
        return false
    endif
    return true
endfunction

function Trig_FarmDone_Actions takes nothing returns nothing
    call DisableTrigger( GetTriggeringTrigger() )
    call TriggerSleepAction( 0.10 )
    call IssueTargetOrderBJ( udg_PeasantFarm, "repair", udg_Townhall )
    call ConditionalTriggerExecute( gg_trg_PowerBuildingHint )
endfunction

//===========================================================================
function InitTrig_FarmDone takes nothing returns nothing
    set gg_trg_FarmDone = CreateTrigger(  )
    call TriggerRegisterPlayerUnitEventSimple( gg_trg_FarmDone, Player(1), EVENT_PLAYER_UNIT_CONSTRUCT_FINISH )
    call TriggerAddCondition( gg_trg_FarmDone, Condition( function Trig_FarmDone_Conditions ) )
    call TriggerAddAction( gg_trg_FarmDone, function Trig_FarmDone_Actions )
endfunction

//===========================================================================
// Trigger: BarracksDone
//===========================================================================
function Trig_BarracksDone_Conditions takes nothing returns boolean
    if ( not ( GetUnitTypeId(GetTriggerUnit()) == 'hbar' ) ) then
        return false
    endif
    return true
endfunction

function Trig_BarracksDone_Actions takes nothing returns nothing
    call DisableTrigger( GetTriggeringTrigger() )
    call TriggerSleepAction( 0.10 )
    call IssueTargetOrderBJ( udg_PeasantBarracks, "repair", udg_Townhall )
endfunction

//===========================================================================
function InitTrig_BarracksDone takes nothing returns nothing
    set gg_trg_BarracksDone = CreateTrigger(  )
    call TriggerRegisterPlayerUnitEventSimple( gg_trg_BarracksDone, Player(1), EVENT_PLAYER_UNIT_CONSTRUCT_FINISH )
    call TriggerAddCondition( gg_trg_BarracksDone, Condition( function Trig_BarracksDone_Conditions ) )
    call TriggerAddAction( gg_trg_BarracksDone, function Trig_BarracksDone_Actions )
endfunction

//===========================================================================
// Trigger: GranaryCancelled
//===========================================================================
function Trig_GranaryCancelled_Conditions takes nothing returns boolean
    if ( not ( udg_GranaryCancelled == false ) ) then
        return false
    endif
    return true
endfunction

function Trig_GranaryCancelled_Func007002 takes nothing returns nothing
    call ShowUnitShow( GetEnumUnit() )
endfunction

function Trig_GranaryCancelled_Func023001 takes nothing returns boolean
    return ( IsUnitDeadBJ(udg_Arthas) == true )
endfunction

function Trig_GranaryCancelled_Func024001 takes nothing returns boolean
    return ( IsUnitDeadBJ(udg_Jaina) == true )
endfunction

function Trig_GranaryCancelled_Actions takes nothing returns nothing
    call DisableTrigger( GetTriggeringTrigger() )
    set udg_GranaryCancelled = true
    call UseTimeOfDayBJ( true )
    call StopSoundBJ( GetLastPlayedSound(), false )
    call EndThematicMusicBJ(  )
    call CinematicFadeBJ( bj_CINEFADETYPE_FADEOUT, 0.00, "ReplaceableTextures\\CameraMasks\\Black_mask.tga", 0, 0, 0, 0 )
    call ForGroup( GetUnitsOfPlayerAll(Player(6)), function Trig_GranaryCancelled_Func007002 )
    call CinematicFadeBJ( bj_CINEFADETYPE_FADEIN, 1.00, "ReplaceableTextures\\CameraMasks\\White_mask.tga", 0, 0, 0, 0 )
    call PauseAllUnitsBJ( false )
    call SetPlayerAllianceStateBJ( Player(6), Player(1), bj_ALLIANCE_UNALLIED )
    call SetPlayerAllianceStateBJ( Player(6), Player(3), bj_ALLIANCE_UNALLIED )
    call SetPlayerAllianceStateBJ( Player(1), Player(6), bj_ALLIANCE_UNALLIED )
    call SetPlayerAllianceStateBJ( Player(1), Player(PLAYER_NEUTRAL_AGGRESSIVE), bj_ALLIANCE_UNALLIED )
    call SetPlayerAllianceStateBJ( Player(5), Player(1), bj_ALLIANCE_UNALLIED )
    call SetPlayerAllianceStateBJ( Player(1), Player(5), bj_ALLIANCE_UNALLIED )
    call SetUnitPositionLoc( udg_KelThuzad, GetRectCenter(gg_rct_KelThuzadFinalPost) )
    call SetUnitFacingToFaceLocTimed( udg_KelThuzad, GetRectCenter(gg_rct_KelThuzadFinalFace), 0 )
    call SetUnitInvulnerable( udg_KelThuzad, false )
    call SetUnitPositionLoc( udg_Arthas, udg_ArthasPoint )
    call SetUnitPositionLoc( udg_Jaina, udg_JainaPoint )
    call SetUnitInvulnerable( udg_Arthas, false )
    call SetUnitInvulnerable( udg_Jaina, false )
    if ( Trig_GranaryCancelled_Func023001() ) then
        call ReviveHeroLoc( udg_Arthas, GetRectCenter(gg_rct_ArthasWarpGranary), false )
    else
        call DoNothing(  )
    endif
    if ( Trig_GranaryCancelled_Func024001() ) then
        call ReviveHeroLoc( udg_Arthas, GetRectCenter(gg_rct_JainaWarpGranary), false )
    else
        call DoNothing(  )
    endif
    call ResetToGameCameraForPlayer( Player(1), 0.00 )
    call PanCameraToTimedLocForPlayer( Player(1), GetRectCenter(gg_rct_GranaryCamReset), 0 )
    call CinematicModeBJ( false, GetPlayersAll() )
    call ConditionalTriggerExecute( gg_trg_ForestTroll_Patrol_Restart )
    call SelectGroupBJ( udg_SelectionGroup )
    call SetSkyModel( null )
    call ResetTerrainFogBJ(  )
    call CommentString( "Quests" )
    call TriggerSleepAction( 5.00 )
    call QuestMessageBJ( GetPlayersAll(), bj_QUESTMESSAGE_COMPLETED, "TRIGSTR_000" )
    call QuestSetCompletedBJ( udg_QuestAndorhal, true )
    call QuestItemSetCompletedBJ( udg_QuestAndorhalReq, true )
    call TriggerSleepAction( bj_QUEUE_DELAY_QUEST )
    call QuestMessageBJ( GetPlayersAll(), bj_QUESTMESSAGE_DISCOVERED, "TRIGSTR_009" )
    call QuestSetDiscoveredBJ( udg_QuestNecromancer, true )
endfunction

//===========================================================================
function InitTrig_GranaryCancelled takes nothing returns nothing
    set gg_trg_GranaryCancelled = CreateTrigger(  )
    call DisableTrigger( gg_trg_GranaryCancelled )
    call TriggerRegisterPlayerEventEndCinematic( gg_trg_GranaryCancelled, Player(1) )
    call TriggerAddCondition( gg_trg_GranaryCancelled, Condition( function Trig_GranaryCancelled_Conditions ) )
    call TriggerAddAction( gg_trg_GranaryCancelled, function Trig_GranaryCancelled_Actions )
endfunction

//===========================================================================
// Trigger: Granary01
//===========================================================================
function Trig_Granary01_Conditions takes nothing returns boolean
    if ( not ( GetOwningPlayer(GetEnteringUnit()) == Player(1) ) ) then
        return false
    endif
    if ( not ( udg_GranaryCancelled == false ) ) then
        return false
    endif
    if ( not ( udg_GAMEOVER == false ) ) then
        return false
    endif
    return true
endfunction

function Trig_Granary01_Func007001 takes nothing returns boolean
    return ( udg_GAMEOVER == true )
endfunction

function Trig_Granary01_Func008002 takes nothing returns nothing
    call ShowUnitHide( GetEnumUnit() )
endfunction

function Trig_Granary01_Func015002 takes nothing returns nothing
    call UnitRemoveBuffsBJ( bj_REMOVEBUFFS_ALL, GetEnumUnit() )
endfunction

function Trig_Granary01_Func044001 takes nothing returns boolean
    return ( udg_GAMEOVER == true )
endfunction

function Trig_Granary01_Func045001 takes nothing returns boolean
    return ( udg_GranaryCancelled == true )
endfunction

function Trig_Granary01_Func051001 takes nothing returns boolean
    return ( udg_GAMEOVER == true )
endfunction

function Trig_Granary01_Func052001 takes nothing returns boolean
    return ( udg_GranaryCancelled == true )
endfunction

function Trig_Granary01_Actions takes nothing returns nothing
    call DisableTrigger( GetTriggeringTrigger() )
    set udg_GranaryEntranceGuy = GetEnteringUnit()
    call UseTimeOfDayBJ( false )
    call CinematicFadeBJ( bj_CINEFADETYPE_FADEOUT, 1.00, "ReplaceableTextures\\CameraMasks\\White_mask.tga", 0, 0.00, 0, 0 )
    call PauseAllUnitsBJ( true )
    call TriggerSleepAction( 1.00 )
    if ( Trig_Granary01_Func007001() ) then
        return
    else
        call DoNothing(  )
    endif
    call ForGroup( GetUnitsOfPlayerAll(Player(6)), function Trig_Granary01_Func008002 )
    call SetPlayerAllianceStateBJ( Player(1), Player(6), bj_ALLIANCE_NEUTRAL )
    call SetPlayerAllianceStateBJ( Player(1), Player(PLAYER_NEUTRAL_AGGRESSIVE), bj_ALLIANCE_NEUTRAL )
    call SetPlayerAllianceStateBJ( Player(5), Player(1), bj_ALLIANCE_NEUTRAL )
    call SetPlayerAllianceStateBJ( Player(1), Player(5), bj_ALLIANCE_NEUTRAL )
    set udg_SelectionGroup = GetUnitsSelectedAll(Player(1))
    call ClearSelection(  )
    call ForGroup( GetUnitsInRectAll(GetPlayableMapRect()), function Trig_Granary01_Func015002 )
    call CommentString( "Music" )
    call PlayThematicMusicBJ( "Sound\\Music\\mp3Music\\SadMystery.mp3" )
    call CommentString( "***********************" )
    call CinematicModeBJ( true, GetPlayersAll() )
    call SetSkyModel( "Environment\\Sky\\FelwoodSky\\FelwoodSky.mdl" )
    call SetTerrainFogExBJ( 0, 800.00, 5000.00, 0, 30.00, 30.00, 10.00 )
    call ShowUnitShow( udg_KelThuzad )
    call PauseUnitBJ( false, udg_KelThuzad )
    call SetUnitInvulnerable( gg_unit_uktn_0133, true )
    call PauseUnitBJ( false, gg_unit_ugho_0043 )
    call PauseUnitBJ( false, gg_unit_ugho_0047 )
    set udg_CinematicRegionArthas = gg_rct_ArthasWarpGranary
    call ConditionalTriggerExecute( gg_trg_ArthasCinematicRevive )
    set udg_CinematicRegionJaina = gg_rct_JainaWarpGranary
    call ConditionalTriggerExecute( gg_trg_JainaCinematicRevive )
    call PauseUnitBJ( false, udg_Arthas )
    call PauseUnitBJ( false, udg_Jaina )
    call SetUnitInvulnerable( udg_Arthas, true )
    call SetUnitInvulnerable( udg_Jaina, true )
    call CameraSetupApplyForPlayer( true, gg_cam_Granery01Close, Player(1), 0.00 )
    call CameraSetupApplyForPlayer( true, gg_cam_Granery01d, Player(1), 11.60 )
    call CinematicFadeBJ( bj_CINEFADETYPE_FADEIN, 1.00, "ReplaceableTextures\\CameraMasks\\White_mask.tga", 0, 0.00, 0, 0 )
    call CommentString( "NOW SKIPPABLE" )
    call EnableTrigger( gg_trg_GranaryCancelled )
    call TriggerSleepAction( 0.10 )
    if ( Trig_Granary01_Func044001() ) then
        return
    else
        call DoNothing(  )
    endif
    if ( Trig_Granary01_Func045001() ) then
        return
    else
        call DoNothing(  )
    endif
    call ConditionalTriggerExecute( gg_trg_GranaryGhouls )
    call PauseUnitBJ( false, udg_Arthas )
    call PauseUnitBJ( false, udg_Jaina )
    call PauseUnitBJ( false, udg_KelThuzad )
    call TriggerSleepAction( 2.00 )
    if ( Trig_Granary01_Func051001() ) then
        return
    else
        call DoNothing(  )
    endif
    if ( Trig_Granary01_Func052001() ) then
        return
    else
        call DoNothing(  )
    endif
    call CommentString( "***********************" )
    call TriggerExecute( gg_trg_Granary02 )
endfunction

//===========================================================================
function InitTrig_Granary01 takes nothing returns nothing
    set gg_trg_Granary01 = CreateTrigger(  )
    call TriggerRegisterEnterRectSimple( gg_trg_Granary01, gg_rct_GranaryKelThuzadArea01 )
    call TriggerRegisterEnterRectSimple( gg_trg_Granary01, gg_rct_GranaryKelThuzadArea02 )
    call TriggerAddCondition( gg_trg_Granary01, Condition( function Trig_Granary01_Conditions ) )
    call TriggerAddAction( gg_trg_Granary01, function Trig_Granary01_Actions )
endfunction

//===========================================================================
// Trigger: Granary02
//===========================================================================
function Trig_Granary02_Conditions takes nothing returns boolean
    if ( not ( udg_GranaryCancelled == false ) ) then
        return false
    endif
    return true
endfunction

function Trig_Granary02_Func005001 takes nothing returns boolean
    return ( udg_GAMEOVER == true )
endfunction

function Trig_Granary02_Func006001 takes nothing returns boolean
    return ( udg_GranaryCancelled == true )
endfunction

function Trig_Granary02_Func010001 takes nothing returns boolean
    return ( udg_GAMEOVER == true )
endfunction

function Trig_Granary02_Func011001 takes nothing returns boolean
    return ( udg_GranaryCancelled == true )
endfunction

function Trig_Granary02_Func012001 takes nothing returns boolean
    return ( IsUnitDeadBJ(udg_Arthas) == true )
endfunction

function Trig_Granary02_Func014001 takes nothing returns boolean
    return ( IsUnitDeadBJ(udg_Jaina) == true )
endfunction

function Trig_Granary02_Func020001 takes nothing returns boolean
    return ( udg_GAMEOVER == true )
endfunction

function Trig_Granary02_Func021001 takes nothing returns boolean
    return ( udg_GranaryCancelled == true )
endfunction

function Trig_Granary02_Func023001 takes nothing returns boolean
    return ( udg_GAMEOVER == true )
endfunction

function Trig_Granary02_Func024001 takes nothing returns boolean
    return ( udg_GranaryCancelled == true )
endfunction

function Trig_Granary02_Func028001 takes nothing returns boolean
    return ( udg_GAMEOVER == true )
endfunction

function Trig_Granary02_Func029001 takes nothing returns boolean
    return ( udg_GranaryCancelled == true )
endfunction

function Trig_Granary02_Func031001 takes nothing returns boolean
    return ( udg_GAMEOVER == true )
endfunction

function Trig_Granary02_Func032001 takes nothing returns boolean
    return ( udg_GranaryCancelled == true )
endfunction

function Trig_Granary02_Func034001 takes nothing returns boolean
    return ( udg_GAMEOVER == true )
endfunction

function Trig_Granary02_Func035001 takes nothing returns boolean
    return ( udg_GranaryCancelled == true )
endfunction

function Trig_Granary02_Func038001 takes nothing returns boolean
    return ( udg_GAMEOVER == true )
endfunction

function Trig_Granary02_Func039001 takes nothing returns boolean
    return ( udg_GranaryCancelled == true )
endfunction

function Trig_Granary02_Func041001 takes nothing returns boolean
    return ( udg_GAMEOVER == true )
endfunction

function Trig_Granary02_Func042001 takes nothing returns boolean
    return ( udg_GranaryCancelled == true )
endfunction

function Trig_Granary02_Func046001 takes nothing returns boolean
    return ( udg_GAMEOVER == true )
endfunction

function Trig_Granary02_Func047001 takes nothing returns boolean
    return ( udg_GranaryCancelled == true )
endfunction

function Trig_Granary02_Func052001 takes nothing returns boolean
    return ( udg_GAMEOVER == true )
endfunction

function Trig_Granary02_Func053001 takes nothing returns boolean
    return ( udg_GranaryCancelled == true )
endfunction

function Trig_Granary02_Func067002 takes nothing returns nothing
    call ShowUnitShow( GetEnumUnit() )
endfunction

function Trig_Granary02_Func079001 takes nothing returns boolean
    return ( udg_GAMEOVER == true )
endfunction

function Trig_Granary02_Func086001 takes nothing returns boolean
    return ( udg_GAMEOVER == true )
endfunction

function Trig_Granary02_Actions takes nothing returns nothing
    call DisableTrigger( GetTriggeringTrigger() )
    call SetUnitFacingToFaceLocTimed( udg_KelThuzad, GetRectCenter(gg_rct_KelThuzadFacing), 0.10 )
    call TriggerSleepAction( 0.50 )
    if ( Trig_Granary02_Func005001() ) then
        return
    else
        call DoNothing(  )
    endif
    if ( Trig_Granary02_Func006001() ) then
        return
    else
        call DoNothing(  )
    endif
    call TransmissionFromUnitWithNameBJ( GetPlayersAll(), udg_KelThuzad, "TRIGSTR_023", gg_snd_H04KelThuzad06, "TRIGSTR_024", bj_TIMETYPE_ADD, 0.00, false )
    call SetUnitAnimation( gg_unit_uktn_0133, "stand victory" )
    call TriggerSleepAction( 7.00 )
    if ( Trig_Granary02_Func010001() ) then
        return
    else
        call DoNothing(  )
    endif
    if ( Trig_Granary02_Func011001() ) then
        return
    else
        call DoNothing(  )
    endif
    if ( Trig_Granary02_Func012001() ) then
        call ReviveHeroLoc( udg_Arthas, GetRectCenter(gg_rct_ArthasWarpGranary), false )
    else
        call DoNothing(  )
    endif
    call SetUnitPositionLoc( udg_Arthas, GetRectCenter(gg_rct_ArthasWarpGranary) )
    if ( Trig_Granary02_Func014001() ) then
        call ReviveHeroLoc( udg_Arthas, GetRectCenter(gg_rct_JainaWarpGranary), false )
    else
        call DoNothing(  )
    endif
    call SetUnitPositionLoc( udg_Jaina, GetRectCenter(gg_rct_JainaWarpGranary) )
    call IssuePointOrderLocBJ( udg_Arthas, "move", GetRectCenter(gg_rct_ArthasPostGranary) )
    call IssuePointOrderLocBJ( udg_Jaina, "move", GetRectCenter(gg_rct_JainaPostGranary) )
    call CameraSetupApplyForPlayer( true, gg_cam_Granary02, Player(1), 0.00 )
    call TriggerSleepAction( 2.00 )
    if ( Trig_Granary02_Func020001() ) then
        return
    else
        call DoNothing(  )
    endif
    if ( Trig_Granary02_Func021001() ) then
        return
    else
        call DoNothing(  )
    endif
    call WaitForSoundBJ( gg_snd_H04KelThuzad06, 0 )
    if ( Trig_Granary02_Func023001() ) then
        return
    else
        call DoNothing(  )
    endif
    if ( Trig_Granary02_Func024001() ) then
        return
    else
        call DoNothing(  )
    endif
    call SetUnitFacingToFaceUnitTimed( udg_Arthas, gg_unit_uktn_0133, 0.20 )
    call SetUnitAnimation( gg_unit_uktn_0133, "stand" )
    call TransmissionFromUnitWithNameBJ( GetPlayersAll(), udg_Arthas, "TRIGSTR_072", gg_snd_H04Arthas22, "TRIGSTR_073", bj_TIMETYPE_ADD, 0.00, true )
    if ( Trig_Granary02_Func028001() ) then
        return
    else
        call DoNothing(  )
    endif
    if ( Trig_Granary02_Func029001() ) then
        return
    else
        call DoNothing(  )
    endif
    call TransmissionFromUnitWithNameBJ( GetPlayersAll(), udg_KelThuzad, "TRIGSTR_074", gg_snd_H04KelThuzad23, "TRIGSTR_075", bj_TIMETYPE_ADD, 0.00, true )
    if ( Trig_Granary02_Func031001() ) then
        return
    else
        call DoNothing(  )
    endif
    if ( Trig_Granary02_Func032001() ) then
        return
    else
        call DoNothing(  )
    endif
    call TransmissionFromUnitWithNameBJ( GetPlayersAll(), udg_Jaina, "TRIGSTR_017", gg_snd_H04Jaina24, "TRIGSTR_018", bj_TIMETYPE_ADD, 0.00, true )
    if ( Trig_Granary02_Func034001() ) then
        return
    else
        call DoNothing(  )
    endif
    if ( Trig_Granary02_Func035001() ) then
        return
    else
        call DoNothing(  )
    endif
    call SetUnitFacingToFaceUnitTimed( gg_unit_ugho_0043, udg_Jaina, 0.40 )
    call TransmissionFromUnitWithNameBJ( GetPlayersAll(), udg_KelThuzad, "TRIGSTR_076", gg_snd_H04KelThuzad25, "TRIGSTR_077", bj_TIMETYPE_ADD, 0.00, true )
    if ( Trig_Granary02_Func038001() ) then
        return
    else
        call DoNothing(  )
    endif
    if ( Trig_Granary02_Func039001() ) then
        return
    else
        call DoNothing(  )
    endif
    call TransmissionFromUnitWithNameBJ( GetPlayersAll(), udg_Arthas, "TRIGSTR_078", gg_snd_H04Arthas26, "TRIGSTR_079", bj_TIMETYPE_ADD, 0.00, true )
    if ( Trig_Granary02_Func041001() ) then
        return
    else
        call DoNothing(  )
    endif
    if ( Trig_Granary02_Func042001() ) then
        return
    else
        call DoNothing(  )
    endif
    call SetUnitFacingToFaceUnitTimed( gg_unit_ugho_0047, udg_Jaina, 0.40 )
    call SetUnitAnimation( gg_unit_uktn_0133, "stand channel" )
    call TransmissionFromUnitWithNameBJ( GetPlayersAll(), udg_KelThuzad, "TRIGSTR_080", gg_snd_H04KelThuzad27, "TRIGSTR_081", bj_TIMETYPE_ADD, 0.00, true )
    if ( Trig_Granary02_Func046001() ) then
        return
    else
        call DoNothing(  )
    endif
    if ( Trig_Granary02_Func047001() ) then
        return
    else
        call DoNothing(  )
    endif
    call SetUnitInvulnerable( udg_Arthas, false )
    call SetUnitInvulnerable( udg_Jaina, false )
    call IssuePointOrderLocBJ( udg_KelThuzad, "move", GetRectCenter(gg_rct_KelThuzadFinalPost) )
    call TriggerSleepAction( 2.00 )
    if ( Trig_Granary02_Func052001() ) then
        return
    else
        call DoNothing(  )
    endif
    if ( Trig_Granary02_Func053001() ) then
        return
    else
        call DoNothing(  )
    endif
    call CommentString( "NO LONGER SKIPPABLE" )
    call DisableTrigger( gg_trg_GranaryCancelled )
    call SetPlayerAllianceStateBJ( Player(6), Player(1), bj_ALLIANCE_UNALLIED )
    call SetPlayerAllianceStateBJ( Player(6), Player(3), bj_ALLIANCE_UNALLIED )
    call SetPlayerAllianceStateBJ( Player(1), Player(6), bj_ALLIANCE_UNALLIED )
    call SetPlayerAllianceStateBJ( Player(1), Player(PLAYER_NEUTRAL_AGGRESSIVE), bj_ALLIANCE_UNALLIED )
    call SetPlayerAllianceStateBJ( Player(5), Player(1), bj_ALLIANCE_UNALLIED )
    call SetPlayerAllianceStateBJ( Player(1), Player(5), bj_ALLIANCE_UNALLIED )
    call UseTimeOfDayBJ( true )
    call SetUnitPositionLoc( udg_Arthas, udg_ArthasPoint )
    call SetUnitPositionLoc( udg_Jaina, udg_JainaPoint )
    call IssuePointOrderLocBJ( gg_unit_ugho_0047, "attack", GetUnitLoc(udg_GranaryEntranceGuy) )
    call IssuePointOrderLocBJ( gg_unit_ugho_0043, "attack", GetUnitLoc(udg_GranaryEntranceGuy) )
    call ForGroup( GetUnitsOfPlayerAll(Player(6)), function Trig_Granary02_Func067002 )
    call SetUnitPositionLoc( udg_KelThuzad, GetRectCenter(gg_rct_KelThuzadFinalPost) )
    call SetUnitFacingToFaceLocTimed( udg_KelThuzad, GetRectCenter(gg_rct_KelThuzadFinalFace), 0 )
    call SetUnitInvulnerable( udg_KelThuzad, false )
    call PauseAllUnitsBJ( false )
    call CinematicModeBJ( false, GetPlayersAll() )
    call ConditionalTriggerExecute( gg_trg_ForestTroll_Patrol_Restart )
    call SelectGroupBJ( udg_SelectionGroup )
    call ResetToGameCameraForPlayer( Player(1), 1.00 )
    call PanCameraToTimedLocForPlayer( Player(1), GetRectCenter(gg_rct_GranaryCamReset), 0 )
    call SetSkyModel( null )
    call ResetTerrainFogBJ(  )
    if ( Trig_Granary02_Func079001() ) then
        return
    else
        call DoNothing(  )
    endif
    call TriggerSleepAction( 5.00 )
    call CommentString( "Quests" )
    call QuestMessageBJ( GetPlayersAll(), bj_QUESTMESSAGE_COMPLETED, "TRIGSTR_042" )
    call QuestSetCompletedBJ( udg_QuestAndorhal, true )
    call QuestItemSetCompletedBJ( udg_QuestAndorhalReq, true )
    call TriggerSleepAction( bj_QUEUE_DELAY_QUEST )
    if ( Trig_Granary02_Func086001() ) then
        return
    else
        call DoNothing(  )
    endif
    call QuestMessageBJ( GetPlayersAll(), bj_QUESTMESSAGE_DISCOVERED, "TRIGSTR_043" )
    call QuestSetDiscoveredBJ( udg_QuestNecromancer, true )
endfunction

//===========================================================================
function InitTrig_Granary02 takes nothing returns nothing
    set gg_trg_Granary02 = CreateTrigger(  )
    call TriggerAddCondition( gg_trg_Granary02, Condition( function Trig_Granary02_Conditions ) )
    call TriggerAddAction( gg_trg_Granary02, function Trig_Granary02_Actions )
endfunction

//===========================================================================
// Trigger: GranaryDialog
//===========================================================================
function Trig_GranaryDialog_Conditions takes nothing returns boolean
    if ( not ( GetUnitTypeId(GetTriggerUnit()) == 'ngni' ) ) then
        return false
    endif
    if ( not ( udg_GAMEOVER == false ) ) then
        return false
    endif
    return true
endfunction

function Trig_GranaryDialog_Func003001 takes nothing returns boolean
    return ( udg_GAMEOVER == true )
endfunction

function Trig_GranaryDialog_Func005001 takes nothing returns boolean
    return ( IsUnitAliveBJ(udg_Arthas) == true )
endfunction

function Trig_GranaryDialog_Actions takes nothing returns nothing
    call DisableTrigger( GetTriggeringTrigger() )
    call TriggerSleepAction( 2 )
    if ( Trig_GranaryDialog_Func003001() ) then
        return
    else
        call DoNothing(  )
    endif
    call SetSpeechVolumeGroupsBJ(  )
    if ( Trig_GranaryDialog_Func005001() ) then
        call TransmissionFromUnitWithNameBJ( GetPlayersAll(), udg_Arthas, "TRIGSTR_146", gg_snd_H04Arthas18, "TRIGSTR_147", bj_TIMETYPE_ADD, 0, true )
    else
        call TriggerSleepAction( 0.10 )
    endif
    call VolumeGroupResetBJ(  )
endfunction

//===========================================================================
function InitTrig_GranaryDialog takes nothing returns nothing
    set gg_trg_GranaryDialog = CreateTrigger(  )
    call TriggerRegisterPlayerUnitEventSimple( gg_trg_GranaryDialog, Player(PLAYER_NEUTRAL_AGGRESSIVE), EVENT_PLAYER_UNIT_DEATH )
    call TriggerAddCondition( gg_trg_GranaryDialog, Condition( function Trig_GranaryDialog_Conditions ) )
    call TriggerAddAction( gg_trg_GranaryDialog, function Trig_GranaryDialog_Actions )
endfunction

//===========================================================================
// Trigger: GranaryGhouls
//===========================================================================
function Trig_GranaryGhouls_Func003001 takes nothing returns boolean
    return ( udg_GranaryCancelled == true )
endfunction

function Trig_GranaryGhouls_Func006001 takes nothing returns boolean
    return ( udg_GranaryCancelled == true )
endfunction

function Trig_GranaryGhouls_Func009001 takes nothing returns boolean
    return ( udg_GranaryCancelled == true )
endfunction

function Trig_GranaryGhouls_Func012001 takes nothing returns boolean
    return ( udg_GranaryCancelled == true )
endfunction

function Trig_GranaryGhouls_Func015001 takes nothing returns boolean
    return ( udg_GranaryCancelled == true )
endfunction

function Trig_GranaryGhouls_Func018001 takes nothing returns boolean
    return ( udg_GranaryCancelled == true )
endfunction

function Trig_GranaryGhouls_Func021001 takes nothing returns boolean
    return ( udg_GranaryCancelled == true )
endfunction

function Trig_GranaryGhouls_Func024001 takes nothing returns boolean
    return ( udg_GranaryCancelled == true )
endfunction

function Trig_GranaryGhouls_Func027001 takes nothing returns boolean
    return ( udg_GranaryCancelled == true )
endfunction

function Trig_GranaryGhouls_Func030001 takes nothing returns boolean
    return ( udg_GranaryCancelled == true )
endfunction

function Trig_GranaryGhouls_Func034001 takes nothing returns boolean
    return ( udg_GranaryCancelled == true )
endfunction

function Trig_GranaryGhouls_Func037001 takes nothing returns boolean
    return ( udg_GranaryCancelled == true )
endfunction

function Trig_GranaryGhouls_Func040001 takes nothing returns boolean
    return ( udg_GranaryCancelled == true )
endfunction

function Trig_GranaryGhouls_Func043001 takes nothing returns boolean
    return ( udg_GranaryCancelled == true )
endfunction

function Trig_GranaryGhouls_Func046001 takes nothing returns boolean
    return ( udg_GranaryCancelled == true )
endfunction

function Trig_GranaryGhouls_Func049001 takes nothing returns boolean
    return ( udg_GranaryCancelled == true )
endfunction

function Trig_GranaryGhouls_Func052001 takes nothing returns boolean
    return ( udg_GranaryCancelled == true )
endfunction

function Trig_GranaryGhouls_Func056001 takes nothing returns boolean
    return ( udg_GranaryCancelled == true )
endfunction

function Trig_GranaryGhouls_Func059001 takes nothing returns boolean
    return ( udg_GranaryCancelled == true )
endfunction

function Trig_GranaryGhouls_Func062001 takes nothing returns boolean
    return ( udg_GranaryCancelled == true )
endfunction

function Trig_GranaryGhouls_Func065001 takes nothing returns boolean
    return ( udg_GranaryCancelled == true )
endfunction

function Trig_GranaryGhouls_Actions takes nothing returns nothing
    call SetUnitAnimation( gg_unit_ugho_0047, "stand channel" )
    call TriggerSleepAction( 0.20 )
    if ( Trig_GranaryGhouls_Func003001() ) then
        return
    else
        call DoNothing(  )
    endif
    call SetUnitAnimation( gg_unit_ugho_0043, "stand channel" )
    call TriggerSleepAction( 2 )
    if ( Trig_GranaryGhouls_Func006001() ) then
        return
    else
        call DoNothing(  )
    endif
    call SetUnitAnimation( gg_unit_ugho_0047, "stand" )
    call TriggerSleepAction( 0.50 )
    if ( Trig_GranaryGhouls_Func009001() ) then
        return
    else
        call DoNothing(  )
    endif
    call SetUnitAnimation( gg_unit_ugho_0043, "stand" )
    call TriggerSleepAction( 2 )
    if ( Trig_GranaryGhouls_Func012001() ) then
        return
    else
        call DoNothing(  )
    endif
    call SetUnitAnimation( gg_unit_ugho_0047, "stand channel" )
    call TriggerSleepAction( 0.20 )
    if ( Trig_GranaryGhouls_Func015001() ) then
        return
    else
        call DoNothing(  )
    endif
    call SetUnitAnimation( gg_unit_ugho_0043, "stand channel" )
    call TriggerSleepAction( 2 )
    if ( Trig_GranaryGhouls_Func018001() ) then
        return
    else
        call DoNothing(  )
    endif
    call SetUnitAnimation( gg_unit_ugho_0043, "stand" )
    call TriggerSleepAction( 0.50 )
    if ( Trig_GranaryGhouls_Func021001() ) then
        return
    else
        call DoNothing(  )
    endif
    call SetUnitAnimation( gg_unit_ugho_0047, "stand" )
    call TriggerSleepAction( 2 )
    if ( Trig_GranaryGhouls_Func024001() ) then
        return
    else
        call DoNothing(  )
    endif
    call SetUnitAnimation( gg_unit_ugho_0043, "stand channel" )
    call TriggerSleepAction( 0.20 )
    if ( Trig_GranaryGhouls_Func027001() ) then
        return
    else
        call DoNothing(  )
    endif
    call SetUnitAnimation( gg_unit_ugho_0047, "stand channel" )
    call TriggerSleepAction( 1.20 )
    if ( Trig_GranaryGhouls_Func030001() ) then
        return
    else
        call DoNothing(  )
    endif
    call SetUnitAnimation( gg_unit_ugho_0047, "stand" )
    call SetUnitAnimation( gg_unit_ugho_0043, "stand" )
    call TriggerSleepAction( 2 )
    if ( Trig_GranaryGhouls_Func034001() ) then
        return
    else
        call DoNothing(  )
    endif
    call SetUnitAnimation( gg_unit_ugho_0047, "stand channel" )
    call TriggerSleepAction( 0.50 )
    if ( Trig_GranaryGhouls_Func037001() ) then
        return
    else
        call DoNothing(  )
    endif
    call SetUnitAnimation( gg_unit_ugho_0043, "stand channel" )
    call TriggerSleepAction( 2 )
    if ( Trig_GranaryGhouls_Func040001() ) then
        return
    else
        call DoNothing(  )
    endif
    call SetUnitAnimation( gg_unit_ugho_0047, "stand" )
    call TriggerSleepAction( 0.20 )
    if ( Trig_GranaryGhouls_Func043001() ) then
        return
    else
        call DoNothing(  )
    endif
    call SetUnitAnimation( gg_unit_ugho_0043, "stand" )
    call TriggerSleepAction( 2 )
    if ( Trig_GranaryGhouls_Func046001() ) then
        return
    else
        call DoNothing(  )
    endif
    call SetUnitAnimation( gg_unit_ugho_0047, "stand channel" )
    call TriggerSleepAction( 0.20 )
    if ( Trig_GranaryGhouls_Func049001() ) then
        return
    else
        call DoNothing(  )
    endif
    call SetUnitAnimation( gg_unit_ugho_0043, "stand channel" )
    call TriggerSleepAction( 2 )
    if ( Trig_GranaryGhouls_Func052001() ) then
        return
    else
        call DoNothing(  )
    endif
    call SetUnitAnimation( gg_unit_ugho_0047, "stand" )
    call SetUnitAnimation( gg_unit_ugho_0043, "stand" )
    call TriggerSleepAction( 2 )
    if ( Trig_GranaryGhouls_Func056001() ) then
        return
    else
        call DoNothing(  )
    endif
    call SetUnitAnimation( gg_unit_ugho_0047, "stand channel" )
    call TriggerSleepAction( 0.50 )
    if ( Trig_GranaryGhouls_Func059001() ) then
        return
    else
        call DoNothing(  )
    endif
    call SetUnitAnimation( gg_unit_ugho_0043, "stand channel" )
    call TriggerSleepAction( 1.00 )
    if ( Trig_GranaryGhouls_Func062001() ) then
        return
    else
        call DoNothing(  )
    endif
    call SetUnitAnimation( gg_unit_ugho_0043, "stand" )
    call TriggerSleepAction( 0.50 )
    if ( Trig_GranaryGhouls_Func065001() ) then
        return
    else
        call DoNothing(  )
    endif
    call SetUnitAnimation( gg_unit_ugho_0047, "stand" )
endfunction

//===========================================================================
function InitTrig_GranaryGhouls takes nothing returns nothing
    set gg_trg_GranaryGhouls = CreateTrigger(  )
    call TriggerAddAction( gg_trg_GranaryGhouls, function Trig_GranaryGhouls_Actions )
endfunction

//===========================================================================
// Trigger: EndingCancelled
//===========================================================================
function Trig_EndingCancelled_Conditions takes nothing returns boolean
    if ( not ( udg_EndingCancelled == false ) ) then
        return false
    endif
    return true
endfunction

function Trig_EndingCancelled_Actions takes nothing returns nothing
    set udg_EndingCancelled = true
    call StopSoundBJ( GetLastPlayedSound(), false )
    call KillUnit( udg_KelThuzad )
    call ConditionalTriggerExecute( gg_trg_Victory )
endfunction

//===========================================================================
function InitTrig_EndingCancelled takes nothing returns nothing
    set gg_trg_EndingCancelled = CreateTrigger(  )
    call DisableTrigger( gg_trg_EndingCancelled )
    call TriggerRegisterPlayerEventEndCinematic( gg_trg_EndingCancelled, Player(1) )
    call TriggerAddCondition( gg_trg_EndingCancelled, Condition( function Trig_EndingCancelled_Conditions ) )
    call TriggerAddAction( gg_trg_EndingCancelled, function Trig_EndingCancelled_Actions )
endfunction

//===========================================================================
// Trigger: Ending
//===========================================================================
function Trig_Ending_Conditions takes nothing returns boolean
    if ( not ( udg_GAMEOVER == false ) ) then
        return false
    endif
    return true
endfunction

function Trig_Ending_Func021001 takes nothing returns boolean
    return ( udg_EndingCancelled == true )
endfunction

function Trig_Ending_Func026002 takes nothing returns nothing
    call ShowUnitHide( GetEnumUnit() )
endfunction

function Trig_Ending_Func027002 takes nothing returns nothing
    call ShowUnitHide( GetEnumUnit() )
endfunction

function Trig_Ending_Func028002 takes nothing returns nothing
    call ShowUnitHide( GetEnumUnit() )
endfunction

function Trig_Ending_Func032002 takes nothing returns nothing
    call SetUnitPositionLocFacingLocBJ( GetEnumUnit(), GetRandomLocInRect(GetPlayableMapRect()), GetRectCenter(gg_rct_KelThuzadFinalPost) )
endfunction

function Trig_Ending_Func040001 takes nothing returns boolean
    return ( udg_EndingCancelled == true )
endfunction

function Trig_Ending_Func046001 takes nothing returns boolean
    return ( udg_EndingCancelled == true )
endfunction

function Trig_Ending_Func055001 takes nothing returns boolean
    return ( udg_EndingCancelled == true )
endfunction

function Trig_Ending_Func059001 takes nothing returns boolean
    return ( udg_EndingCancelled == true )
endfunction

function Trig_Ending_Func062001 takes nothing returns boolean
    return ( udg_EndingCancelled == true )
endfunction

function Trig_Ending_Func065001 takes nothing returns boolean
    return ( udg_EndingCancelled == true )
endfunction

function Trig_Ending_Func073001 takes nothing returns boolean
    return ( udg_EndingCancelled == true )
endfunction

function Trig_Ending_Func085001 takes nothing returns boolean
    return ( udg_EndingCancelled == true )
endfunction

function Trig_Ending_Actions takes nothing returns nothing
    set udg_GAMEOVER = true
    call DisableTrigger( GetTriggeringTrigger() )
    call DisableTrigger( gg_trg_TownIsDestroyed )
    call ReplaceUnitBJ( GetDyingUnit(), 'uktn', bj_UNIT_STATE_METHOD_DEFAULTS )
    set udg_KelThuzad = GetLastReplacedUnitBJ()
    call SetUnitInvulnerable( udg_KelThuzad, true )
    call SetUnitLifePercentBJ( udg_KelThuzad, 1.00 )
    call PauseAllUnitsBJ( true )
    call QuestMessageBJ( GetPlayersAll(), bj_QUESTMESSAGE_COMPLETED, "TRIGSTR_137" )
    call TriggerSleepAction( bj_QUEUE_DELAY_QUEST )
    call UseTimeOfDayBJ( false )
    call CinematicModeBJ( true, GetPlayersAll() )
    call CinematicFadeBJ( bj_CINEFADETYPE_FADEOUT, 1.00, "ReplaceableTextures\\CameraMasks\\White_mask.tga", 0, 0, 0, 0 )
    call TriggerSleepAction( 1.00 )
    call ClearSelection(  )
    call ConditionalTriggerExecute( gg_trg_Next_Level_Prep )
    call CommentString( "NOW SKIPPABLE" )
    call EnableTrigger( gg_trg_EndingCancelled )
    if ( Trig_Ending_Func021001() ) then
        return
    else
        call DoNothing(  )
    endif
    call CommentString( "Music" )
    call PlayThematicMusicBJ( "Sound\\Music\\mp3Music\\TragicConfrontation.mp3" )
    call CommentString( "***********************" )
    set udg_EndCinematicMove = GetUnitsInRectAll(gg_rct_KelThuzadFinalPost)
    call ForGroup( GetUnitsOfPlayerAll(Player(5)), function Trig_Ending_Func026002 )
    call ForGroup( GetUnitsOfPlayerAll(Player(6)), function Trig_Ending_Func027002 )
    call ForGroup( GetUnitsOfPlayerAll(Player(1)), function Trig_Ending_Func028002 )
    call ShowUnitShow( udg_KelThuzad )
    call ShowUnitShow( udg_Arthas )
    call ShowUnitShow( udg_Jaina )
    call ForGroup( udg_EndCinematicMove, function Trig_Ending_Func032002 )
    set udg_CinematicRegionArthas = gg_rct_Arthas_End
    call ConditionalTriggerExecute( gg_trg_ArthasCinematicRevive )
    set udg_CinematicRegionJaina = gg_rct_Jaina_End
    call ConditionalTriggerExecute( gg_trg_JainaCinematicRevive )
    call SetUnitFacingToFaceLocTimed( udg_Arthas, GetRectCenter(gg_rct_KelThuzadFinalPost), 0 )
    call SetUnitFacingToFaceLocTimed( udg_Jaina, GetRectCenter(gg_rct_KelThuzadFinalPost), 0 )
    call TriggerSleepAction( 0.10 )
    if ( Trig_Ending_Func040001() ) then
        return
    else
        call DoNothing(  )
    endif
    call SetUnitPositionLocFacingLocBJ( udg_KelThuzad, GetRectCenter(gg_rct_KelThuzadFinalPost), GetRectCenter(gg_rct_KelThuzadFinalFace) )
    call PauseAllUnitsBJ( true )
    call CameraSetupApplyForPlayer( true, gg_cam_End, Player(1), 0 )
    call CinematicFadeBJ( bj_CINEFADETYPE_FADEIN, 1.00, "ReplaceableTextures\\CameraMasks\\White_mask.tga", 0, 0, 0, 0 )
    call TriggerSleepAction( 1.00 )
    if ( Trig_Ending_Func046001() ) then
        return
    else
        call DoNothing(  )
    endif
    call CommentString( "Experimental Death" )
    call TransmissionFromUnitWithNameBJ( GetPlayersAll(), udg_KelThuzad, "TRIGSTR_032", gg_snd_H04KelThuzad28, "TRIGSTR_033", bj_TIMETYPE_ADD, 0, false )
    call SetUnitBlendTimeBJ( udg_KelThuzad, 0.00 )
    call SetUnitInvulnerable( udg_KelThuzad, true )
    call SetUnitLifeBJ( udg_KelThuzad, 1.00 )
    call SetUnitAnimationWithRarity( udg_KelThuzad, "stand", RARITY_FREQUENT )
    call VolumeGroupSetVolumeBJ( SOUND_VOLUMEGROUP_SPELLS, 0.00 )
    call TriggerSleepAction( 1.00 )
    if ( Trig_Ending_Func055001() ) then
        return
    else
        call DoNothing(  )
    endif
    call SetUnitTimeScalePercent( udg_KelThuzad, 10.00 )
    call SetUnitAnimationWithRarity( udg_KelThuzad, "death", RARITY_FREQUENT )
    call TriggerSleepAction( 2.50 )
    if ( Trig_Ending_Func059001() ) then
        return
    else
        call DoNothing(  )
    endif
    call SetUnitBlendTimeBJ( udg_KelThuzad, 0.15 )
    call TriggerSleepAction( 2.50 )
    if ( Trig_Ending_Func062001() ) then
        return
    else
        call DoNothing(  )
    endif
    call SetUnitAnimationWithRarity( udg_KelThuzad, "death", RARITY_FREQUENT )
    call WaitForSoundBJ( gg_snd_H04KelThuzad28, 0 )
    if ( Trig_Ending_Func065001() ) then
        return
    else
        call DoNothing(  )
    endif
    call VolumeGroupSetVolumeBJ( SOUND_VOLUMEGROUP_SPELLS, 100.00 )
    call SetUnitTimeScalePercent( udg_KelThuzad, 60.00 )
    call KillUnit( udg_KelThuzad )
    call AttachSoundToUnitBJ( gg_snd_NecromancerDeath, udg_KelThuzad )
    call PlaySoundBJ( gg_snd_NecromancerDeath )
    call TriggerSleepAction( 2 )
    call CommentString( "Experimental Death" )
    if ( Trig_Ending_Func073001() ) then
        return
    else
        call DoNothing(  )
    endif
    call SetStackedSoundBJ( false, gg_snd_WaterLakeLoop1, gg_rct_LakeLoop01 )
    call SetStackedSoundBJ( false, gg_snd_WaterLakeLoop1, gg_rct_LakeLoop02 )
    call SetStackedSoundBJ( false, gg_snd_WaterLakeLoop1, gg_rct_LakeLoop03 )
    call SetStackedSoundBJ( false, gg_snd_WaterLakeLoop1, gg_rct_LakeLoop04 )
    call SetStackedSoundBJ( false, gg_snd_WaterLakeLoop1, gg_rct_LakeLoop05 )
    call SetStackedSoundBJ( false, gg_snd_WaterLakeLoop1, gg_rct_LakeLoop06 )
    call SetStackedSoundBJ( false, gg_snd_WaterLakeLoop1, gg_rct_LakeLoop07 )
    call SetStackedSoundBJ( false, gg_snd_WaterLakeLoop1, gg_rct_LakeLoop08 )
    call SetStackedSoundBJ( false, gg_snd_WaterStreamLoop1, gg_rct_StreamLoop01 )
    call EndThematicMusicBJ(  )
    call TriggerSleepAction( 1.00 )
    if ( Trig_Ending_Func085001() ) then
        return
    else
        call DoNothing(  )
    endif
    call ConditionalTriggerExecute( gg_trg_Victory )
endfunction

//===========================================================================
function InitTrig_Ending takes nothing returns nothing
    set gg_trg_Ending = CreateTrigger(  )
    call TriggerRegisterUnitEvent( gg_trg_Ending, gg_unit_uktn_0133, EVENT_UNIT_DEATH )
    call TriggerAddCondition( gg_trg_Ending, Condition( function Trig_Ending_Conditions ) )
    call TriggerAddAction( gg_trg_Ending, function Trig_Ending_Actions )
endfunction

//===========================================================================
// Trigger: Timmy
//===========================================================================
function Trig_Timmy_Actions takes nothing returns nothing
    call DisableTrigger( GetTriggeringTrigger() )
    call CreateNUnitsAtLoc( 1, 'uC01', Player(0), GetRectCenter(gg_rct_CageGhoul), 24.00 )
    set udg_Timmy = GetLastCreatedUnit()
    call SetPlayerColorBJ( Player(0), PLAYER_COLOR_GREEN, true )
    call SetPlayerAllianceStateBJ( Player(0), Player(1), bj_ALLIANCE_ALLIED )
    call SetPlayerAllianceStateBJ( Player(0), Player(6), bj_ALLIANCE_ALLIED )
    call SetPlayerAllianceStateBJ( Player(0), Player(PLAYER_NEUTRAL_AGGRESSIVE), bj_ALLIANCE_ALLIED )
    call SetPlayerAllianceStateBJ( Player(0), Player(7), bj_ALLIANCE_ALLIED )
    call IssuePointOrderLocBJ( udg_Timmy, "move", GetRandomLocInRect(gg_rct_TimmyRoam) )
    call EnableTrigger( gg_trg_TimmyRoam )
endfunction

//===========================================================================
function InitTrig_Timmy takes nothing returns nothing
    set gg_trg_Timmy = CreateTrigger(  )
    call TriggerRegisterDeathEvent( gg_trg_Timmy, gg_dest_LOcg_2148 )
    call TriggerAddAction( gg_trg_Timmy, function Trig_Timmy_Actions )
endfunction

//===========================================================================
// Trigger: TimmyDies
//===========================================================================
function Trig_TimmyDies_Conditions takes nothing returns boolean
    if ( not ( GetDyingUnit() == udg_Timmy ) ) then
        return false
    endif
    return true
endfunction

function Trig_TimmyDies_Actions takes nothing returns nothing
    call CreateItemLoc( 'rnsp', GetUnitLoc(GetDyingUnit()) )
endfunction

//===========================================================================
function InitTrig_TimmyDies takes nothing returns nothing
    set gg_trg_TimmyDies = CreateTrigger(  )
    call TriggerRegisterPlayerUnitEventSimple( gg_trg_TimmyDies, Player(0), EVENT_PLAYER_UNIT_DEATH )
    call TriggerAddCondition( gg_trg_TimmyDies, Condition( function Trig_TimmyDies_Conditions ) )
    call TriggerAddAction( gg_trg_TimmyDies, function Trig_TimmyDies_Actions )
endfunction

//===========================================================================
// Trigger: TimmyRoam
//===========================================================================
function Trig_TimmyRoam_Actions takes nothing returns nothing
    call IssuePointOrderLocBJ( udg_Timmy, "move", GetRandomLocInRect(gg_rct_TimmyRoam) )
endfunction

//===========================================================================
function InitTrig_TimmyRoam takes nothing returns nothing
    set gg_trg_TimmyRoam = CreateTrigger(  )
    call DisableTrigger( gg_trg_TimmyRoam )
    call TriggerRegisterTimerEventPeriodic( gg_trg_TimmyRoam, 8.00 )
    call TriggerAddAction( gg_trg_TimmyRoam, function Trig_TimmyRoam_Actions )
endfunction

//===========================================================================
// Trigger: GhoulsAttack
//===========================================================================
function Trig_GhoulsAttack_Conditions takes nothing returns boolean
    if ( not ( GetOwningPlayer(GetTriggerUnit()) == Player(1) ) ) then
        return false
    endif
    return true
endfunction

function Trig_GhoulsAttack_Actions takes nothing returns nothing
    call DisableTrigger( GetTriggeringTrigger() )
    call KillUnit( gg_unit_nvlw_0085 )
    call TriggerSleepAction( 0.50 )
    call CreateNUnitsAtLoc( 2, 'ugho', Player(6), GetRectCenter(gg_rct_BurntOutFarmGhoulsStart), 0 )
    call IssuePointOrderLocBJ( GetLastCreatedUnit(), "attack", GetRectCenter(gg_rct_BurntOutFarm) )
endfunction

//===========================================================================
function InitTrig_GhoulsAttack takes nothing returns nothing
    set gg_trg_GhoulsAttack = CreateTrigger(  )
    call TriggerRegisterEnterRectSimple( gg_trg_GhoulsAttack, gg_rct_BurntOutFarm )
    call TriggerAddCondition( gg_trg_GhoulsAttack, Condition( function Trig_GhoulsAttack_Conditions ) )
    call TriggerAddAction( gg_trg_GhoulsAttack, function Trig_GhoulsAttack_Actions )
endfunction

//===========================================================================
// Trigger: BarracksBlowUp
//===========================================================================
function Trig_BarracksBlowUp_Conditions takes nothing returns boolean
    if ( not ( GetOwningPlayer(GetTriggerUnit()) == Player(1) ) ) then
        return false
    endif
    return true
endfunction

function Trig_BarracksBlowUp_Actions takes nothing returns nothing
    call DisableTrigger( GetTriggeringTrigger() )
    call CreateNUnitsAtLoc( 2, 'ugho', Player(6), GetRectCenter(gg_rct_BarrackBlowUp), 0 )
    call KillUnit( gg_unit_hbar_0080 )
endfunction

//===========================================================================
function InitTrig_BarracksBlowUp takes nothing returns nothing
    set gg_trg_BarracksBlowUp = CreateTrigger(  )
    call TriggerRegisterEnterRectSimple( gg_trg_BarracksBlowUp, gg_rct_BarrackBlowUp )
    call TriggerAddCondition( gg_trg_BarracksBlowUp, Condition( function Trig_BarracksBlowUp_Conditions ) )
    call TriggerAddAction( gg_trg_BarracksBlowUp, function Trig_BarracksBlowUp_Actions )
endfunction

//===========================================================================
// Trigger: TowerBlowUp
//===========================================================================
function Trig_TowerBlowUp_Conditions takes nothing returns boolean
    if ( not ( GetOwningPlayer(GetTriggerUnit()) == Player(1) ) ) then
        return false
    endif
    return true
endfunction

function Trig_TowerBlowUp_Actions takes nothing returns nothing
    call DisableTrigger( GetTriggeringTrigger() )
    call TriggerSleepAction( 2 )
    call KillUnit( gg_unit_hwtw_0081 )
endfunction

//===========================================================================
function InitTrig_TowerBlowUp takes nothing returns nothing
    set gg_trg_TowerBlowUp = CreateTrigger(  )
    call TriggerRegisterEnterRectSimple( gg_trg_TowerBlowUp, gg_rct_TowerBlowUp )
    call TriggerAddCondition( gg_trg_TowerBlowUp, Condition( function Trig_TowerBlowUp_Conditions ) )
    call TriggerAddAction( gg_trg_TowerBlowUp, function Trig_TowerBlowUp_Actions )
endfunction

//===========================================================================
// Trigger: ArthasEmptyCrates
//===========================================================================
function Trig_ArthasEmptyCrates_Actions takes nothing returns nothing
    call DisableTrigger( GetTriggeringTrigger() )
    call SetSpeechVolumeGroupsBJ(  )
    call TransmissionFromUnitWithNameBJ( GetPlayersAll(), udg_Arthas, "TRIGSTR_046", gg_snd_H04Arthas18, "TRIGSTR_047", bj_TIMETYPE_ADD, 0.00, true )
    call VolumeGroupResetBJ(  )
endfunction

//===========================================================================
function InitTrig_ArthasEmptyCrates takes nothing returns nothing
    set gg_trg_ArthasEmptyCrates = CreateTrigger(  )
    call TriggerAddAction( gg_trg_ArthasEmptyCrates, function Trig_ArthasEmptyCrates_Actions )
endfunction

//===========================================================================
// Trigger: GnollRun
//===========================================================================
function Trig_GnollRun_Conditions takes nothing returns boolean
    if ( not ( GetOwningPlayer(GetTriggerUnit()) == Player(1) ) ) then
        return false
    endif
    return true
endfunction

function Trig_GnollRun_Actions takes nothing returns nothing
    call IssuePointOrderLocBJ( gg_unit_ngna_0095, "move", GetRectCenter(gg_rct_GnollRunDest) )
endfunction

//===========================================================================
function InitTrig_GnollRun takes nothing returns nothing
    set gg_trg_GnollRun = CreateTrigger(  )
    call TriggerRegisterEnterRectSimple( gg_trg_GnollRun, gg_rct_GnollRun )
    call TriggerAddCondition( gg_trg_GnollRun, Condition( function Trig_GnollRun_Conditions ) )
    call TriggerAddAction( gg_trg_GnollRun, function Trig_GnollRun_Actions )
endfunction

//===========================================================================
// Trigger: GolemBirth
//===========================================================================
function Trig_GolemBirth_Conditions takes nothing returns boolean
    if ( not ( GetOwningPlayer(GetTriggerUnit()) == Player(1) ) ) then
        return false
    endif
    return true
endfunction

function Trig_GolemBirth_Actions takes nothing returns nothing
    call DisableTrigger( GetTriggeringTrigger() )
    call SetUnitAnimation( GetLastCreatedUnit(), "birth" )
endfunction

//===========================================================================
function InitTrig_GolemBirth takes nothing returns nothing
    set gg_trg_GolemBirth = CreateTrigger(  )
    call TriggerAddCondition( gg_trg_GolemBirth, Condition( function Trig_GolemBirth_Conditions ) )
    call TriggerAddAction( gg_trg_GolemBirth, function Trig_GolemBirth_Actions )
endfunction

//===========================================================================
// Trigger: ForestTroll
//===========================================================================
function Trig_ForestTroll_Func002002 takes nothing returns nothing
    call IssuePointOrderLocBJ( GetEnumUnit(), "patrol", GetRandomLocInRect(gg_rct_PatrolForestTroll01End) )
endfunction

function Trig_ForestTroll_Func003002 takes nothing returns nothing
    call IssuePointOrderLocBJ( GetEnumUnit(), "patrol", GetRandomLocInRect(gg_rct_PatrolForestTroll02End) )
endfunction

function Trig_ForestTroll_Actions takes nothing returns nothing
    call DisableTrigger( GetTriggeringTrigger() )
    call ForGroup( GetUnitsInRectAll(gg_rct_PatrolForestTroll01Start), function Trig_ForestTroll_Func002002 )
    call ForGroup( GetUnitsInRectAll(gg_rct_PatrolForestTroll02Start), function Trig_ForestTroll_Func003002 )
endfunction

//===========================================================================
function InitTrig_ForestTroll takes nothing returns nothing
    set gg_trg_ForestTroll = CreateTrigger(  )
    call TriggerAddAction( gg_trg_ForestTroll, function Trig_ForestTroll_Actions )
endfunction

//===========================================================================
// Trigger: ForestTroll Patrol Restart
//===========================================================================
function Trig_ForestTroll_Patrol_Restart_Func001001 takes nothing returns boolean
    return ( IsUnitAliveBJ(gg_unit_nftr_0066) == true )
endfunction

function Trig_ForestTroll_Patrol_Restart_Func002001 takes nothing returns boolean
    return ( IsUnitAliveBJ(gg_unit_nftr_0066) == true )
endfunction

function Trig_ForestTroll_Patrol_Restart_Func003001 takes nothing returns boolean
    return ( IsUnitAliveBJ(gg_unit_nftb_0010) == true )
endfunction

function Trig_ForestTroll_Patrol_Restart_Func004001 takes nothing returns boolean
    return ( IsUnitAliveBJ(gg_unit_nftb_0010) == true )
endfunction

function Trig_ForestTroll_Patrol_Restart_Func005001 takes nothing returns boolean
    return ( IsUnitAliveBJ(gg_unit_nftr_0072) == true )
endfunction

function Trig_ForestTroll_Patrol_Restart_Func006001 takes nothing returns boolean
    return ( IsUnitAliveBJ(gg_unit_nftr_0072) == true )
endfunction

function Trig_ForestTroll_Patrol_Restart_Func007001 takes nothing returns boolean
    return ( IsUnitAliveBJ(gg_unit_nftr_0073) == true )
endfunction

function Trig_ForestTroll_Patrol_Restart_Func008001 takes nothing returns boolean
    return ( IsUnitAliveBJ(gg_unit_nftr_0073) == true )
endfunction

function Trig_ForestTroll_Patrol_Restart_Func009001 takes nothing returns boolean
    return ( IsUnitAliveBJ(gg_unit_nftb_0009) == true )
endfunction

function Trig_ForestTroll_Patrol_Restart_Func010001 takes nothing returns boolean
    return ( IsUnitAliveBJ(gg_unit_nftb_0009) == true )
endfunction

function Trig_ForestTroll_Patrol_Restart_Func011001 takes nothing returns boolean
    return ( IsUnitAliveBJ(gg_unit_nftr_0075) == true )
endfunction

function Trig_ForestTroll_Patrol_Restart_Func012001 takes nothing returns boolean
    return ( IsUnitAliveBJ(gg_unit_nftr_0075) == true )
endfunction

function Trig_ForestTroll_Patrol_Restart_Actions takes nothing returns nothing
    if ( Trig_ForestTroll_Patrol_Restart_Func001001() ) then
        call SetUnitPositionLoc( gg_unit_nftr_0066, GetRectCenter(gg_rct_ForestTroll66Initial) )
    else
        call DoNothing(  )
    endif
    if ( Trig_ForestTroll_Patrol_Restart_Func002001() ) then
        call IssuePointOrderLocBJ( gg_unit_nftr_0066, "patrol", GetRandomLocInRect(gg_rct_PatrolForestTroll01End) )
    else
        call DoNothing(  )
    endif
    if ( Trig_ForestTroll_Patrol_Restart_Func003001() ) then
        call SetUnitPositionLoc( gg_unit_nftb_0010, GetRectCenter(gg_rct_ForestBerseker10Initial) )
    else
        call DoNothing(  )
    endif
    if ( Trig_ForestTroll_Patrol_Restart_Func004001() ) then
        call IssuePointOrderLocBJ( gg_unit_nftb_0010, "patrol", GetRandomLocInRect(gg_rct_PatrolForestTroll01End) )
    else
        call DoNothing(  )
    endif
    if ( Trig_ForestTroll_Patrol_Restart_Func005001() ) then
        call SetUnitPositionLoc( gg_unit_nftr_0072, GetRectCenter(gg_rct_ForestTroll72Initial) )
    else
        call DoNothing(  )
    endif
    if ( Trig_ForestTroll_Patrol_Restart_Func006001() ) then
        call IssuePointOrderLocBJ( gg_unit_nftr_0072, "patrol", GetRandomLocInRect(gg_rct_PatrolForestTroll01End) )
    else
        call DoNothing(  )
    endif
    if ( Trig_ForestTroll_Patrol_Restart_Func007001() ) then
        call SetUnitPositionLoc( gg_unit_nftr_0073, GetRectCenter(gg_rct_ForestTroll73Initial) )
    else
        call DoNothing(  )
    endif
    if ( Trig_ForestTroll_Patrol_Restart_Func008001() ) then
        call IssuePointOrderLocBJ( gg_unit_nftr_0073, "patrol", GetRandomLocInRect(gg_rct_PatrolForestTroll02End) )
    else
        call DoNothing(  )
    endif
    if ( Trig_ForestTroll_Patrol_Restart_Func009001() ) then
        call SetUnitPositionLoc( gg_unit_nftb_0009, GetRectCenter(gg_rct_ForestBerserker09Initial) )
    else
        call DoNothing(  )
    endif
    if ( Trig_ForestTroll_Patrol_Restart_Func010001() ) then
        call IssuePointOrderLocBJ( gg_unit_nftb_0009, "patrol", GetRandomLocInRect(gg_rct_PatrolForestTroll02End) )
    else
        call DoNothing(  )
    endif
    if ( Trig_ForestTroll_Patrol_Restart_Func011001() ) then
        call SetUnitPositionLoc( gg_unit_nftr_0075, GetRectCenter(gg_rct_ForestTroll75Initial) )
    else
        call DoNothing(  )
    endif
    if ( Trig_ForestTroll_Patrol_Restart_Func012001() ) then
        call IssuePointOrderLocBJ( gg_unit_nftr_0075, "patrol", GetRandomLocInRect(gg_rct_PatrolForestTroll02End) )
    else
        call DoNothing(  )
    endif
endfunction

//===========================================================================
function InitTrig_ForestTroll_Patrol_Restart takes nothing returns nothing
    set gg_trg_ForestTroll_Patrol_Restart = CreateTrigger(  )
    call TriggerAddAction( gg_trg_ForestTroll_Patrol_Restart, function Trig_ForestTroll_Patrol_Restart_Actions )
endfunction

//===========================================================================
// Trigger: Golems
//===========================================================================
function Trig_Golems_Func002002 takes nothing returns nothing
    call IssuePointOrderLocBJ( GetEnumUnit(), "attack", GetRandomLocInRect(gg_rct_GolemArea) )
endfunction

function Trig_Golems_Actions takes nothing returns nothing
    call ForGroup( udg_GolemsGroup, function Trig_Golems_Func002002 )
endfunction

//===========================================================================
function InitTrig_Golems takes nothing returns nothing
    set gg_trg_Golems = CreateTrigger(  )
    call TriggerRegisterTimerEventPeriodic( gg_trg_Golems, 2.00 )
    call TriggerAddAction( gg_trg_Golems, function Trig_Golems_Actions )
endfunction

//===========================================================================
// Trigger: Bandits
//===========================================================================
function Trig_Bandits_Actions takes nothing returns nothing
    call DisableTrigger( GetTriggeringTrigger() )
    call AttachSoundToUnitBJ( gg_snd_BanditWarcry1, gg_unit_nenf_0069 )
    call PlaySoundBJ( gg_snd_BanditWarcry1 )
endfunction

//===========================================================================
function InitTrig_Bandits takes nothing returns nothing
    set gg_trg_Bandits = CreateTrigger(  )
    call TriggerRegisterUnitEvent( gg_trg_Bandits, gg_unit_nenf_0069, EVENT_UNIT_ACQUIRED_TARGET )
    call TriggerAddAction( gg_trg_Bandits, function Trig_Bandits_Actions )
endfunction

//===========================================================================
// Trigger: ArthasCinematicRevive
//===========================================================================
function Trig_ArthasCinematicRevive_Func003001 takes nothing returns boolean
    return ( IsUnitAliveBJ(udg_Arthas) == true )
endfunction

function Trig_ArthasCinematicRevive_Func006002001002001 takes nothing returns boolean
    return ( GetUnitTypeId(GetFilterUnit()) == 'halt' )
endfunction

function Trig_ArthasCinematicRevive_Func006002001002002 takes nothing returns boolean
    return ( IsUnitAliveBJ(GetFilterUnit()) == true )
endfunction

function Trig_ArthasCinematicRevive_Func006002001002 takes nothing returns boolean
    return GetBooleanAnd( Trig_ArthasCinematicRevive_Func006002001002001(), Trig_ArthasCinematicRevive_Func006002001002002() )
endfunction

function Trig_ArthasCinematicRevive_Func007001 takes nothing returns boolean
    return ( udg_RevivalAltar != null )
endfunction

function Trig_ArthasCinematicRevive_Actions takes nothing returns nothing
    set udg_ArthasPoint = GetUnitLoc(udg_Arthas)
    call SetUnitPositionLoc( udg_Arthas, GetRectCenter(udg_CinematicRegionArthas) )
    if ( Trig_ArthasCinematicRevive_Func003001() ) then
        return
    else
        call DoNothing(  )
    endif
    call ReviveHeroLoc( udg_Arthas, GetRectCenter(udg_CinematicRegionArthas), false )
    set udg_ArthasPoint = GetRectCenter(udg_CinematicRegionArthas)
    set udg_RevivalAltar = GroupPickRandomUnit(GetUnitsOfPlayerMatching(Player(1), Condition(function Trig_ArthasCinematicRevive_Func006002001002)))
    if ( Trig_ArthasCinematicRevive_Func007001() ) then
        set udg_ArthasPoint = OffsetLocation(GetUnitLoc(udg_RevivalAltar), 0, -128.00)
    else
        call DoNothing(  )
    endif
endfunction

//===========================================================================
function InitTrig_ArthasCinematicRevive takes nothing returns nothing
    set gg_trg_ArthasCinematicRevive = CreateTrigger(  )
    call TriggerAddAction( gg_trg_ArthasCinematicRevive, function Trig_ArthasCinematicRevive_Actions )
endfunction

//===========================================================================
// Trigger: JainaCinematicRevive
//===========================================================================
function Trig_JainaCinematicRevive_Func003001 takes nothing returns boolean
    return ( IsUnitAliveBJ(udg_Jaina) == true )
endfunction

function Trig_JainaCinematicRevive_Func006002001002001 takes nothing returns boolean
    return ( GetUnitTypeId(GetFilterUnit()) == 'halt' )
endfunction

function Trig_JainaCinematicRevive_Func006002001002002 takes nothing returns boolean
    return ( IsUnitAliveBJ(GetFilterUnit()) == true )
endfunction

function Trig_JainaCinematicRevive_Func006002001002 takes nothing returns boolean
    return GetBooleanAnd( Trig_JainaCinematicRevive_Func006002001002001(), Trig_JainaCinematicRevive_Func006002001002002() )
endfunction

function Trig_JainaCinematicRevive_Func007001 takes nothing returns boolean
    return ( udg_RevivalAltar != null )
endfunction

function Trig_JainaCinematicRevive_Actions takes nothing returns nothing
    set udg_JainaPoint = GetUnitLoc(udg_Jaina)
    call SetUnitPositionLoc( udg_Jaina, GetRectCenter(udg_CinematicRegionJaina) )
    if ( Trig_JainaCinematicRevive_Func003001() ) then
        return
    else
        call DoNothing(  )
    endif
    call ReviveHeroLoc( udg_Jaina, GetRectCenter(udg_CinematicRegionJaina), false )
    set udg_JainaPoint = GetRectCenter(udg_CinematicRegionJaina)
    set udg_RevivalAltar = GroupPickRandomUnit(GetUnitsOfPlayerMatching(Player(1), Condition(function Trig_JainaCinematicRevive_Func006002001002)))
    if ( Trig_JainaCinematicRevive_Func007001() ) then
        set udg_JainaPoint = OffsetLocation(GetUnitLoc(udg_RevivalAltar), 0, -128.00)
    else
        call DoNothing(  )
    endif
endfunction

//===========================================================================
function InitTrig_JainaCinematicRevive takes nothing returns nothing
    set gg_trg_JainaCinematicRevive = CreateTrigger(  )
    call TriggerAddAction( gg_trg_JainaCinematicRevive, function Trig_JainaCinematicRevive_Actions )
endfunction

//===========================================================================
// Trigger: Victory
//
// Save all heroes.
// Save the campaign game cache.
// Enable the next level.
// Start the next level.
//===========================================================================
function Trig_Victory_Actions takes nothing returns nothing
    call CommentString( "Start the next level" )
    call CinematicFadeBJ( bj_CINEFADETYPE_FADEOUT, 2, "ReplaceableTextures\\CameraMasks\\White_mask.tga", 0, 0, 0, 0 )
    call TriggerSleepAction( 2 )
    call ConditionalTriggerExecute( gg_trg_Next_Level_Run )
endfunction

//===========================================================================
function InitTrig_Victory takes nothing returns nothing
    set gg_trg_Victory = CreateTrigger(  )
    call TriggerRegisterPlayerEventVictory( gg_trg_Victory, Player(1) )
    call TriggerAddAction( gg_trg_Victory, function Trig_Victory_Actions )
endfunction

//===========================================================================
// Trigger: ArthasDeadSpeech
//===========================================================================
function Trig_ArthasDeadSpeech_Conditions takes nothing returns boolean
    if ( not ( GetTriggerUnit() == udg_Arthas ) ) then
        return false
    endif
    return true
endfunction

function Trig_ArthasDeadSpeech_Actions takes nothing returns nothing
    set udg_ArthasDead = true
    call StopSoundBJ( gg_snd_H04Arthas07, false )
    call StopSoundBJ( gg_snd_H04Arthas09, false )
    call StopSoundBJ( gg_snd_H04Arthas11, false )
    call StopSoundBJ( gg_snd_H04Arthas15, false )
    call StopSoundBJ( gg_snd_H04Arthas17, false )
    call StopSoundBJ( gg_snd_H04Arthas18, false )
    call StopSoundBJ( gg_snd_H04Arthas19, false )
    call StopSoundBJ( gg_snd_H04Arthas21, false )
endfunction

//===========================================================================
function InitTrig_ArthasDeadSpeech takes nothing returns nothing
    set gg_trg_ArthasDeadSpeech = CreateTrigger(  )
    call TriggerRegisterPlayerUnitEventSimple( gg_trg_ArthasDeadSpeech, Player(1), EVENT_PLAYER_UNIT_DEATH )
    call TriggerAddCondition( gg_trg_ArthasDeadSpeech, Condition( function Trig_ArthasDeadSpeech_Conditions ) )
    call TriggerAddAction( gg_trg_ArthasDeadSpeech, function Trig_ArthasDeadSpeech_Actions )
endfunction

//===========================================================================
// Trigger: TownIsDestroyed
//
// Turned on from 'AltarOfKings'
// DefeatedDon'tPlay should be in all the cinematics to stop them from playing once you've defeated.
//===========================================================================
function Trig_TownIsDestroyed_Func005001001002001 takes nothing returns boolean
    return ( IsUnitType(GetFilterUnit(), UNIT_TYPE_STRUCTURE) == true )
endfunction

function Trig_TownIsDestroyed_Func005001001002002 takes nothing returns boolean
    return ( IsUnitAliveBJ(GetFilterUnit()) == true )
endfunction

function Trig_TownIsDestroyed_Func005001001002 takes nothing returns boolean
    return GetBooleanAnd( Trig_TownIsDestroyed_Func005001001002001(), Trig_TownIsDestroyed_Func005001001002002() )
endfunction

function Trig_TownIsDestroyed_Conditions takes nothing returns boolean
    if ( not ( CountUnitsInGroup(GetUnitsOfPlayerMatching(Player(1), Condition(function Trig_TownIsDestroyed_Func005001001002))) <= 0 ) ) then
        return false
    endif
    return true
endfunction

function Trig_TownIsDestroyed_Actions takes nothing returns nothing
    set udg_GAMEOVER = true
    call QuestMessageBJ( GetPlayersAll(), bj_QUESTMESSAGE_MISSIONFAILED, "TRIGSTR_152" )
    call TriggerSleepAction( bj_QUEUE_DELAY_QUEST )
    call CustomDefeatBJ( Player(1), "TRIGSTR_153" )
endfunction

//===========================================================================
function InitTrig_TownIsDestroyed takes nothing returns nothing
    set gg_trg_TownIsDestroyed = CreateTrigger(  )
    call DisableTrigger( gg_trg_TownIsDestroyed )
    call TriggerRegisterPlayerUnitEventSimple( gg_trg_TownIsDestroyed, Player(1), EVENT_PLAYER_UNIT_DEATH )
    call TriggerRegisterPlayerUnitEventSimple( gg_trg_TownIsDestroyed, Player(1), EVENT_PLAYER_UNIT_CONSTRUCT_CANCEL )
    call TriggerAddCondition( gg_trg_TownIsDestroyed, Condition( function Trig_TownIsDestroyed_Conditions ) )
    call TriggerAddAction( gg_trg_TownIsDestroyed, function Trig_TownIsDestroyed_Actions )
endfunction

//===========================================================================
function InitCustomTriggers takes nothing returns nothing
    call InitTrig_Map_Initialization(  )
    call InitTrig_Difficulty_Easy(  )
    call InitTrig_Difficulty_Normal(  )
    call InitTrig_Difficulty_Hard(  )
    call InitTrig_StartCampaignAI(  )
    call InitTrig_SetupComputerResources(  )
    call InitTrig_SetupCreepsSleeping(  )
    call InitTrig_SetupNonHeroGroup(  )
    call InitTrig_SetupPlayer(  )
    call InitTrig_SetupHeroes(  )
    call InitTrig_SetupPeasants(  )
    call InitTrig_SetupKelThuzad(  )
    call InitTrig_SetupQuests(  )
    call InitTrig_AcolyteGroup(  )
    call InitTrig_PeonGroup01(  )
    call InitTrig_SetupGolemsGroup(  )
    call InitTrig_SetupAlliances(  )
    call InitTrig_SetupTimmy(  )
    call InitTrig_SetupNeutral(  )
    call InitTrig_SetupScoreScreen(  )
    call InitTrig_AIHarrassment(  )
    call InitTrig_ArthasLevelUp(  )
    call InitTrig_JainaLevelup(  )
    call InitTrig_GreenGold(  )
    call InitTrig_GreenLumber(  )
    call InitTrig_GoldmineHint(  )
    call InitTrig_MilitiaHint(  )
    call InitTrig_GoldmineHint_Safeties(  )
    call InitTrig_PowerBuildingHint(  )
    call InitTrig_Merchant_Hint(  )
    call InitTrig_Hero_Died(  )
    call InitTrig_Hero_Revive_Hint(  )
    call InitTrig_Hero_Revive_Hint_With_Altar(  )
    call InitTrig_Hero_Revive_Hint_No_Altar(  )
    call InitTrig_Load_Heroes(  )
    call InitTrig_Load_Arthas(  )
    call InitTrig_Load_Jaina(  )
    call InitTrig_Next_Level_Prep(  )
    call InitTrig_Next_Level_Run(  )
    call InitTrig_Victory_Cheat(  )
    call InitTrig_DefeatCheat(  )
    call InitTrig_OpeningCancelled(  )
    call InitTrig_Opening01(  )
    call InitTrig_Opening02(  )
    call InitTrig_Opening03(  )
    call InitTrig_Opening04(  )
    call InitTrig_Opening05(  )
    call InitTrig_Opening06(  )
    call InitTrig_PeasantMoving(  )
    call InitTrig_PeasantFarm(  )
    call InitTrig_PeasantBarracks(  )
    call InitTrig_PeasantTownhall(  )
    call InitTrig_Footman01Facing(  )
    call InitTrig_PriestFacing(  )
    call InitTrig_AcolytesRun(  )
    call InitTrig_AcolyteDeath(  )
    call InitTrig_ConstructingHauntedMine(  )
    call InitTrig_ConstructingTownhall(  )
    call InitTrig_ConstructingFarm(  )
    call InitTrig_ConstructingBarracks(  )
    call InitTrig_FarmDone(  )
    call InitTrig_BarracksDone(  )
    call InitTrig_GranaryCancelled(  )
    call InitTrig_Granary01(  )
    call InitTrig_Granary02(  )
    call InitTrig_GranaryDialog(  )
    call InitTrig_GranaryGhouls(  )
    call InitTrig_EndingCancelled(  )
    call InitTrig_Ending(  )
    call InitTrig_Timmy(  )
    call InitTrig_TimmyDies(  )
    call InitTrig_TimmyRoam(  )
    call InitTrig_GhoulsAttack(  )
    call InitTrig_BarracksBlowUp(  )
    call InitTrig_TowerBlowUp(  )
    call InitTrig_ArthasEmptyCrates(  )
    call InitTrig_GnollRun(  )
    call InitTrig_GolemBirth(  )
    call InitTrig_ForestTroll(  )
    call InitTrig_ForestTroll_Patrol_Restart(  )
    call InitTrig_Golems(  )
    call InitTrig_Bandits(  )
    call InitTrig_ArthasCinematicRevive(  )
    call InitTrig_JainaCinematicRevive(  )
    call InitTrig_Victory(  )
    call InitTrig_ArthasDeadSpeech(  )
    call InitTrig_TownIsDestroyed(  )
endfunction

//===========================================================================
function RunInitializationTriggers takes nothing returns nothing
    call ConditionalTriggerExecute( gg_trg_Map_Initialization )
endfunction

//***************************************************************************
//*
//*  Upgrades
//*
//***************************************************************************

function InitUpgrades_Player1 takes nothing returns nothing
    call SetPlayerTechMaxAllowed( Player(1), 'Rhme', 1 )
    call SetPlayerTechMaxAllowed( Player(1), 'Rhra', 1 )
    call SetPlayerTechMaxAllowed( Player(1), 'Rhaa', 1 )
    call SetPlayerTechMaxAllowed( Player(1), 'Rhar', 1 )
    call SetPlayerTechMaxAllowed( Player(1), 'Rhmi', 1 )
    call SetPlayerTechMaxAllowed( Player(1), 'Rhac', 1 )
    call SetPlayerTechMaxAllowed( Player(1), 'Rhss', 1 )
    call SetPlayerTechMaxAllowed( Player(1), 'Rhan', 0 )
    call SetPlayerTechMaxAllowed( Player(1), 'Rhpt', 1 )
    call SetPlayerTechMaxAllowed( Player(1), 'Rhst', 0 )
    call SetPlayerTechMaxAllowed( Player(1), 'Rhla', 1 )
    call SetPlayerTechMaxAllowed( Player(1), 'Rhlh', 1 )
    call SetPlayerTechMaxAllowed( Player(1), 'Rhse', 0 )
    call SetPlayerTechMaxAllowed( Player(1), 'Rhsr', 0 )
    call SetPlayerTechMaxAllowed( Player(1), 'Rhfl', 0 )
    call SetPlayerTechMaxAllowed( Player(1), 'Rhgb', 0 )
endfunction

function InitUpgrades takes nothing returns nothing
    call InitUpgrades_Player1(  )
endfunction

//***************************************************************************
//*
//*  TechTree
//*
//***************************************************************************

function InitTechTree_Player1 takes nothing returns nothing
    call SetPlayerAbilityAvailable( Player(1), 'Stpr', false )
    call SetPlayerAbilityAvailable( Player(1), 'Stpm', false )
    call SetPlayerTechMaxAllowed( Player(1), 'hkni', 0 )
    call SetPlayerTechMaxAllowed( Player(1), 'hgyr', 0 )
    call SetPlayerTechMaxAllowed( Player(1), 'hgry', 0 )
    call SetPlayerTechMaxAllowed( Player(1), 'hsor', 0 )
    call SetPlayerTechMaxAllowed( Player(1), 'Hamg', 0 )
    call SetPlayerTechMaxAllowed( Player(1), 'Hmkg', 0 )
    call SetPlayerTechMaxAllowed( Player(1), 'Hpal', 0 )
    call SetPlayerTechMaxAllowed( Player(1), 'hcas', 0 )
    call SetPlayerTechMaxAllowed( Player(1), 'hgra', 0 )
    call SetPlayerTechMaxAllowed( Player(1), 'hctw', 0 )
    call SetPlayerTechMaxAllowed( Player(1), 'hmtt', 0 )
    call SetPlayerTechMaxAllowed( Player(1), 'hstt', 0 )
endfunction

function InitTechTree takes nothing returns nothing
    call InitTechTree_Player1(  )
endfunction

//***************************************************************************
//*
//*  Players
//*
//***************************************************************************

function InitCustomPlayerSlots takes nothing returns nothing

    // Player 0
    call SetPlayerStartLocation( Player(0), 0 )
    call ForcePlayerStartLocation( Player(0), 0 )
    call SetPlayerColor( Player(0), ConvertPlayerColor(0) )
    call SetPlayerRacePreference( Player(0), RACE_PREF_HUMAN )
    call SetPlayerRaceSelectable( Player(0), true )
    call SetPlayerController( Player(0), MAP_CONTROL_NEUTRAL )

    // Player 1
    call SetPlayerStartLocation( Player(1), 1 )
    call ForcePlayerStartLocation( Player(1), 1 )
    call SetPlayerColor( Player(1), ConvertPlayerColor(1) )
    call SetPlayerRacePreference( Player(1), RACE_PREF_HUMAN )
    call SetPlayerRaceSelectable( Player(1), true )
    call SetPlayerController( Player(1), MAP_CONTROL_USER )

    // Player 5
    call SetPlayerStartLocation( Player(5), 2 )
    call ForcePlayerStartLocation( Player(5), 2 )
    call SetPlayerColor( Player(5), ConvertPlayerColor(5) )
    call SetPlayerRacePreference( Player(5), RACE_PREF_ORC )
    call SetPlayerRaceSelectable( Player(5), true )
    call SetPlayerController( Player(5), MAP_CONTROL_COMPUTER )

    // Player 6
    call SetPlayerStartLocation( Player(6), 3 )
    call ForcePlayerStartLocation( Player(6), 3 )
    call SetPlayerColor( Player(6), ConvertPlayerColor(6) )
    call SetPlayerRacePreference( Player(6), RACE_PREF_UNDEAD )
    call SetPlayerRaceSelectable( Player(6), true )
    call SetPlayerController( Player(6), MAP_CONTROL_COMPUTER )

    // Player 7
    call SetPlayerStartLocation( Player(7), 4 )
    call ForcePlayerStartLocation( Player(7), 4 )
    call SetPlayerColor( Player(7), ConvertPlayerColor(7) )
    call SetPlayerRacePreference( Player(7), RACE_PREF_HUMAN )
    call SetPlayerRaceSelectable( Player(7), true )
    call SetPlayerController( Player(7), MAP_CONTROL_NEUTRAL )

endfunction

function InitCustomTeams takes nothing returns nothing
    // Force: TRIGSTR_135
    call SetPlayerTeam( Player(1), 0 )
    call SetPlayerTeam( Player(7), 0 )

    // Force: TRIGSTR_036
    call SetPlayerTeam( Player(0), 1 )
    call SetPlayerTeam( Player(5), 1 )
    call SetPlayerTeam( Player(6), 1 )

endfunction

//***************************************************************************
//*
//*  Main Initialization
//*
//***************************************************************************

//===========================================================================
function main takes nothing returns nothing
    call SetCameraBounds( -6144.0 + GetCameraMargin(CAMERA_MARGIN_LEFT), -6400.0 + GetCameraMargin(CAMERA_MARGIN_BOTTOM), 5120.0 - GetCameraMargin(CAMERA_MARGIN_RIGHT), 5888.0 - GetCameraMargin(CAMERA_MARGIN_TOP), -6144.0 + GetCameraMargin(CAMERA_MARGIN_LEFT), 5888.0 - GetCameraMargin(CAMERA_MARGIN_TOP), 5120.0 - GetCameraMargin(CAMERA_MARGIN_RIGHT), -6400.0 + GetCameraMargin(CAMERA_MARGIN_BOTTOM) )
    call SetDayNightModels( "Environment\\DNC\\DNCLordaeron\\DNCLordaeronTerrain\\DNCLordaeronTerrain.mdl", "Environment\\DNC\\DNCLordaeron\\DNCLordaeronUnit\\DNCLordaeronUnit.mdl" )
    call SetAmbientDaySound( "VillageDay" )
    call SetAmbientNightSound( "VillageNight" )
    call SetMapMusic( "Music", true, 0 )
    call InitSounds(  )
    call CreateRegions(  )
    call CreateCameras(  )
    call InitUpgrades(  )
    call InitTechTree(  )
    call CreateAllDestructables(  )
    call CreateAllUnits(  )
    call InitBlizzard(  )
    call InitGlobals(  )
    call InitCustomTriggers(  )
    call RunInitializationTriggers(  )

endfunction

//***************************************************************************
//*
//*  Map Configuration
//*
//***************************************************************************

function config takes nothing returns nothing
    call SetMapName( "TRIGSTR_004" )
    call SetMapDescription( "TRIGSTR_156" )
    call SetPlayers( 5 )
    call SetTeams( 5 )
    call SetGamePlacement( MAP_PLACEMENT_USE_MAP_SETTINGS )

    call DefineStartLocation( 0, -1280.0, 1984.0 )
    call DefineStartLocation( 1, -2048.0, -4288.0 )
    call DefineStartLocation( 2, 3072.0, 3008.0 )
    call DefineStartLocation( 3, -4928.0, 576.0 )
    call DefineStartLocation( 4, -256.0, 2752.0 )

    // Player setup
    call InitCustomPlayerSlots(  )
    call InitCustomTeams(  )
endfunction

