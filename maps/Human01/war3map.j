globals
    // User-defined
unit udg_Arthas= null
unit udg_StartingFootman01= null
unit udg_StartingFootman02= null
group udg_StartingForces= null
unit udg_Uther= null
group udg_UthersForcesA= null
unit udg_ChasingGrunt01= null
unit udg_ChasingGrunt02= null
unit udg_FleeingVillager01= null
fogmodifier udg_PusuitVisibility= null
fogmodifier udg_InitialVisibilityRegion= null
group udg_UthersForcesB= null
group udg_RescuableFootmen= null
fogmodifier udg_TownVisibility= null
fogmodifier udg_BanditVisibility= null
unit udg_WolfRider01= null
unit udg_EndBoss= null
unit udg_SlaveMaster= null
unit udg_Wagon01= null
unit udg_Wagon02= null
unit udg_Wagon03= null
fogmodifier udg_EndVision= null
unit udg_EndChild= null
unit udg_EndWoman= null
unit udg_EndMan= null
unit udg_EndKnight= null
unit udg_LittleTimmy= null
destructable udg_LittleTimmysCage= null
group udg_GnollCamp= null
boolean udg_IsTimmyFree= false
boolean udg_IsTimmyDead= false
boolean udg_IsLittleTimmyReturned= false
unit udg_Alicia= null
unit udg_Footman01= null
unit udg_Footman02= null
unit udg_Footman03= null
unit udg_Footman04= null
unit udg_Footman05= null
unit udg_Footman06= null
unit udg_Footman07= null
unit udg_Footman08= null
boolean udg_HasArthasArrived= false
quest udg_QuestLedger= null
quest udg_QuestTimmy= null
quest udg_QuestVillage= null
questitem udg_RequirementLedgerSlay= null
questitem udg_RequirementLedgerReturn= null
questitem udg_RequirementTimmyRescue= null
questitem udg_RequirementVillageTravel= null
unit udg_Horse01= null
unit udg_Horse02= null
unit udg_Horse03= null
unit udg_FarmerJerrett= null
unit udg_FarmerTed= null
unit udg_Menag= null
unit udg_Bandit01= null
unit udg_Bandit02= null
unit udg_Bandit03= null
unit udg_Bandit04= null
unit udg_Matilda= null
unit udg_Gerard= null
unit udg_Hannah= null
unit udg_Stephanie= null
unit udg_Maria= null
boolean udg_IsLedgerReturned= false
boolean udg_IsGerardDead= false
unit udg_Ambusher01= null
unit udg_Ambusher02= null
unit udg_Ambusher03= null
unit udg_Ambusher04= null
unit udg_Ambusher05= null
unit udg_AmbushTarget= null
unit udg_StartingFootman03= null
unit udg_StartingFootman04= null
destructable udg_CityGate= null
unit udg_Recruit01= null
unit udg_Recruit02= null
unit udg_Garth= null
unit udg_Thornby= null
boolean udg_IsHorse01Removed= false
boolean udg_IsHorse02Removed= false
boolean udg_IsHorse03Removed= false
boolean udg_IsUtherRemoved= false
boolean udg_IsFootman01Removed= false
boolean udg_IsFootman02Removed= false
boolean udg_IsFootman03Removed= false
boolean udg_IsFootman04Removed= false
boolean udg_IsFootman07Removed= false
boolean udg_IsFootman08Removed= false
boolean udg_IntroSkipped= false
unit udg_Kidnapped01= null
unit udg_Kidnapped02= null
unit udg_Kidnapped03= null
unit udg_Kidnapped04= null
unit udg_Kidnapped05= null
unit udg_Kidnapped06= null
unit udg_Escort01= null
unit udg_Escort02= null
quest udg_QuestOrcs= null
questitem udg_RequirementVillageSlay= null
unit udg_Patrol01= null
unit udg_Patrol02= null
unit udg_Patrol03= null
unit udg_Patrol04= null
unit udg_Patrol05= null
unit udg_Villager01= null
unit udg_Villager02= null
unit udg_Villager03= null
unit udg_Villager04= null
unit udg_Villager05= null
unit udg_Villager06= null
unit udg_Villager07= null
unit udg_Villager08= null
unit udg_Villager09= null
effect udg_SpecialEffect01= null
effect udg_SpecialEffect02= null
effect udg_SpecialEffect03= null
effect udg_SpecialEffect04= null
effect udg_SpecialEffect05= null
unit udg_Villager10= null
unit udg_Villager11= null
unit udg_Villager12= null
unit udg_Coward= null
unit udg_Ensnarer= null
unit udg_HouseKiller01= null
unit udg_HouseKiller02= null
unit udg_HouseInhabitant01= null
unit udg_HouseInhabitant02= null
unit udg_HouseInhabitant03= null
unit udg_CityHorse01= null
unit udg_CityHorse02= null
unit udg_GruntSurprise= null
unit udg_Ensnaree= null
group udg_Slavers= null
group udg_KidnappedVillagers= null
unit udg_Blake= null
unit udg_Ryan= null
boolean udg_BlakeDies= false
boolean udg_RyanDies= false
boolean udg_GarthDies= false
boolean udg_ThornbyDies= false
location udg_LastCameraPosition= null
boolean udg_EndSkipped= false
boolean udg_IsSlave01Removed= false
boolean udg_IsSlave02Removed= false
boolean udg_IsSlave03Removed= false
boolean udg_IsSlave04Removed= false
boolean udg_IsSlave05Removed= false
boolean udg_IsSlave06Removed= false
boolean udg_IsGrunt01Removed= false
boolean udg_IsGrunt02Removed= false
boolean udg_VictorySkipped= false
effect udg_TalkAlicia= null
effect udg_TalkGerard= null
effect udg_TalkThornby= null
effect udg_TalkBenedict= null
effect udg_TalkGerard2= null
fogmodifier udg_CageVisibility= null
unit udg_AmyDiane= null
integer array udg_VillagersArray
unit array udg_GhostArray
player udg_AAAP_Arthas= null
group udg_WarlordAndCrewGroup= null
force udg_AAAPG_Arthas= null
player udg_P_Uther= null
player udg_P_Orcs= null
rect array udg_GhostRegionArray
boolean udg_TimmyQuestFailed= false
group udg_TimmyQuestRequiredUnits= null
boolean udg_OrcQuestGiven= false
fogmodifier udg_VisibilityBenedict= null
sound udg_WaterLoop01= null
questitem udg_RequirementVillageArthas= null
boolean udg_BanditQuestFailed= false
boolean udg_GAMEOVER= false
fogmodifier udg_AliciaVisModifier= null
group udg_MenagBanditsGroup= null
trigger array udg_VillagerSpeechArray
boolean udg_IntroObjectiveGiven= false
group udg_SelectedUnits= null
boolean udg_LedgerQuestGiven= false
fogmodifier udg_WaterfallVis= null
boolean udg_WaterfallBoolean= false

    // Generated
rect gg_rct_Alicia= null
rect gg_rct_Amy_Diane= null
rect gg_rct_Armor01= null
rect gg_rct_Armor02= null
rect gg_rct_Arthas_End= null
rect gg_rct_Bandit_Camp_Trigger= null
rect gg_rct_Bandit_Facing= null
rect gg_rct_Bandit01_End= null
rect gg_rct_Bandit02_End= null
rect gg_rct_Bandit03_End= null
rect gg_rct_Bandit04_End= null
rect gg_rct_BanditScene= null
rect gg_rct_BanditScene_ACTION= null
rect gg_rct_Benedict= null
rect gg_rct_Blake01= null
rect gg_rct_Blake02= null
rect gg_rct_CaravanLeader02= null
rect gg_rct_Center_of_Village= null
rect gg_rct_ChildFlee= null
rect gg_rct_Coward_Dest_01= null
rect gg_rct_Coward_Dest_02= null
rect gg_rct_Coward_Dest_03= null
rect gg_rct_Crate01= null
rect gg_rct_Crate02= null
rect gg_rct_CreateKnight= null
rect gg_rct_End_Pan= null
rect gg_rct_EndArthas= null
rect gg_rct_EndBoss= null
rect gg_rct_EndChild= null
rect gg_rct_EndMan= null
rect gg_rct_EndWoman= null
rect gg_rct_Ensnaree_Dest_01= null
rect gg_rct_Ensnaree_Dest_02= null
rect gg_rct_Ensnaree_Escapes= null
rect gg_rct_Ensnarer_Dest= null
rect gg_rct_FarmerBob= null
rect gg_rct_FarmerTed= null
rect gg_rct_FinalFootman01= null
rect gg_rct_FinalFootman02= null
rect gg_rct_FinalFootman03= null
rect gg_rct_FinalFootman04= null
rect gg_rct_FleeingVillagerStart= null
rect gg_rct_Footman_01_End= null
rect gg_rct_Footman_02_End= null
rect gg_rct_Footman01= null
rect gg_rct_Footman02= null
rect gg_rct_Footman03= null
rect gg_rct_Footman04= null
rect gg_rct_Footman05= null
rect gg_rct_Footman06= null
rect gg_rct_Footman07= null
rect gg_rct_Footman08= null
rect gg_rct_Ghost_Facing= null
rect gg_rct_Ghost01= null
rect gg_rct_Ghost02= null
rect gg_rct_Ghost03= null
rect gg_rct_Ghost04= null
rect gg_rct_Ghost05= null
rect gg_rct_Ghost06= null
rect gg_rct_Ghost07= null
rect gg_rct_GnollCamp= null
rect gg_rct_Grunt01Start= null
rect gg_rct_Grunt02Start= null
rect gg_rct_GruntSurprise_Dest= null
rect gg_rct_House_Escape_01= null
rect gg_rct_House_Escape_02= null
rect gg_rct_House_Escape_03= null
rect gg_rct_House_Inhabitant_Dest_01= null
rect gg_rct_House_Inhabitant_Dest_02= null
rect gg_rct_House_Inhabitant_Dest_03= null
rect gg_rct_House_Inhabitants_Spawn= null
rect gg_rct_House_Killer_01= null
rect gg_rct_House_Killer_02= null
rect gg_rct_Invader01= null
rect gg_rct_Invader02= null
rect gg_rct_Knight_Destination= null
rect gg_rct_LedgerCenter= null
rect gg_rct_LedgerTrigger01= null
rect gg_rct_Little_Timmys_Cage_Pan= null
rect gg_rct_Little_Timmys_Home= null
rect gg_rct_LittleTimmysSpawnPoint= null
rect gg_rct_Margaret= null
rect gg_rct_Menag= null
rect gg_rct_Menag_End= null
rect gg_rct_OrcAmbusher02= null
rect gg_rct_Patrol01= null
rect gg_rct_Patrol03= null
rect gg_rct_Patrol04= null
rect gg_rct_Pursuit_Center= null
rect gg_rct_PursuitTarget= null
rect gg_rct_Recruit_01_End= null
rect gg_rct_Recruit_02_End= null
rect gg_rct_Recruit_Pan= null
rect gg_rct_Recruit_Trigger= null
rect gg_rct_RemoveCaravan= null
rect gg_rct_RescuableFootmen= null
rect gg_rct_RescueFootmen01= null
rect gg_rct_RiverLoop01= null
rect gg_rct_RiverLoop02= null
rect gg_rct_RiverLoop03= null
rect gg_rct_RiverLoop04= null
rect gg_rct_RiverLoop05= null
rect gg_rct_Ryan01= null
rect gg_rct_Ryan02= null
rect gg_rct_Slave_Collisions= null
rect gg_rct_Starting_Forces= null
rect gg_rct_Stephanie= null
rect gg_rct_Surprise_Attack_Center= null
rect gg_rct_Surprise_Attack_Target= null
rect gg_rct_Surprise_Attack_Trigger_01= null
rect gg_rct_Surprise_Attack_Trigger_02= null
rect gg_rct_Timmy_Go_Home= null
rect gg_rct_TimmyFreeCin_Alicia= null
rect gg_rct_TimmyFreeCin_Arthas= null
rect gg_rct_TimmyFreeCin_ArthasGuys= null
rect gg_rct_TimmyQuestRequiredUnits= null
rect gg_rct_TownCenter= null
rect gg_rct_Trash= null
rect gg_rct_Trigger_House_Collapse= null
rect gg_rct_TriggerAmbush= null
rect gg_rct_TriggerEndCinematic_01= null
rect gg_rct_TriggerEndCinematic_02= null
rect gg_rct_TriggerGnollCamp01= null
rect gg_rct_TriggerGnollCamp02= null
rect gg_rct_TriggerLedger02= null
rect gg_rct_TriggerPursuit01= null
rect gg_rct_Uther_01= null
rect gg_rct_UtherDelete= null
rect gg_rct_Warlord_1= null
rect gg_rct_Warlord_2_Kill_Villager= null
rect gg_rct_Warlord_3_Kill_Villager= null
rect gg_rct_Warlord_4_Kill_Villager= null
rect gg_rct_Warlord_5_Run_Here= null
rect gg_rct_WarlordAndCrew= null
rect gg_rct_WaterLoop01= null
rect gg_rct_WaterLoop02= null
rect gg_rct_Crate03= null
rect gg_rct_TimmyIsFreePan= null
rect gg_rct_LedgerQuest= null
rect gg_rct_Region_141= null
rect gg_rct_Waterfall= null
rect gg_rct_WaterfallVis= null
camerasetup gg_cam_Close_Arthas= null
camerasetup gg_cam_Strahnbrad01= null
camerasetup gg_cam_Strahnbrad02= null
camerasetup gg_cam_Strahnbrad03= null
camerasetup gg_cam_Strahnbrad04= null
camerasetup gg_cam_Start01= null
camerasetup gg_cam_Final01= null
camerasetup gg_cam_Final02= null
camerasetup gg_cam_Victory01= null
camerasetup gg_cam_Victory02= null
camerasetup gg_cam_Cam1Panstart= null
camerasetup gg_cam_Cam2PanEnd= null
camerasetup gg_cam_Cam3UtherArthasMeet= null
camerasetup gg_cam_CamArthasIntroPanEnd= null
camerasetup gg_cam_CamArthasIntroPanStart= null
camerasetup gg_cam_CamEndCounterAngle= null
camerasetup gg_cam_Start01a= null
camerasetup gg_cam_TimmyFreeCin1= null
sound gg_snd_BanditYesAttack2= null
sound gg_snd_BanditYesAttack3= null
sound gg_snd_DefendCaster= null
sound gg_snd_FootmanYesAttack2= null
sound gg_snd_H01Arthas02= null
sound gg_snd_H01Arthas04= null
sound gg_snd_H01Arthas06= null
sound gg_snd_H01Arthas08= null
sound gg_snd_H01Arthas10= null
sound gg_snd_H01Arthas18= null
sound gg_snd_H01Arthas24= null
sound gg_snd_H01Arthas26= null
sound gg_snd_H01Bandit32= null
sound gg_snd_H01BanditB14= null
sound gg_snd_H01Grunt17= null
sound gg_snd_H01Grunt21= null
sound gg_snd_H01Knight25= null
sound gg_snd_H01Uther01= null
sound gg_snd_H01Uther03= null
sound gg_snd_H01Uther05= null
sound gg_snd_H01Uther07= null
sound gg_snd_H01Uther09= null
sound gg_snd_H01Uther11= null
sound gg_snd_H01VillagerC23= null
sound gg_snd_H01VillagerC3501= null
sound gg_snd_H01VillagerC36= null
sound gg_snd_H01VillagerC37= null
sound gg_snd_H01VillagerC38= null
sound gg_snd_H01VillagerF22= null
sound gg_snd_H01VillagerF27= null
sound gg_snd_H01VillagerM28= null
sound gg_snd_H01VillagerM33= null
sound gg_snd_H01WolfRider19= null
sound gg_snd_H03Footman47= null
sound gg_snd_H03VillagerM43= null
sound gg_snd_H03VillagerM44= null
sound gg_snd_H03VillagerM50= null
sound gg_snd_HeroPaladinYesAttack1= null
sound gg_snd_KnightNoRiderWarcry1= null
sound gg_snd_KnightNoRiderWhat1= null
sound gg_snd_KnightNoRiderWhat2= null
sound gg_snd_PickUpItem= null
sound gg_snd_VillagerF1= null
sound gg_snd_VillagerF2= null
sound gg_snd_VillagerF3= null
sound gg_snd_VillagerM1= null
sound gg_snd_VillagerM2= null
sound gg_snd_H01VillagerF42= null
sound gg_snd_H01VillagerM43= null
sound gg_snd_Rescue= null
sound gg_snd_WaterLakeLoop1= null
sound gg_snd_WaterStreamLoop1= null
sound gg_snd_WaterWaterFallLoop1= null
sound gg_snd_KnightNoRiderYesAttack1= null
sound gg_snd_KnightNoRiderWhat3= null
sound gg_snd_HorseLoop2= null
sound gg_snd_HorseLoop1= null
sound gg_snd_DoorSlam1= null
trigger gg_trg_fileio= null
trigger gg_trg_map_config= null
trigger gg_trg_status= null
trigger gg_trg_heroes= null
trigger gg_trg_item_locations= null
trigger gg_trg_debug= null
trigger gg_trg_zoom= null
trigger gg_trg_AP_Load_Arthas= null
trigger gg_trg_Map_Initialization= null
trigger gg_trg_Not_Hard_Difficulty= null
trigger gg_trg_Handicap= null
trigger gg_trg_Setup_Scorescreen= null
trigger gg_trg_Intro_Cancel= null
trigger gg_trg_Intro_Cinematic= null
trigger gg_trg_Holy_Light_Hint_Queue= null
trigger gg_trg_Footman_Acquired= null
trigger gg_trg___Defend= null
trigger gg_trg___Footman01_End_Movement= null
trigger gg_trg___Footman02_End_Movement= null
trigger gg_trg___Villagers= null
trigger gg_trg_Delete_Uther= null
trigger gg_trg_Call_for_help= null
trigger gg_trg_Call_for_help_Queue= null
trigger gg_trg_Surprise_Attack= null
trigger gg_trg_Surprise_Attack_Queue= null
trigger gg_trg_Recruit= null
trigger gg_trg_Recruit_Queue= null
trigger gg_trg_Abort_Recruit_Queue= null
trigger gg_trg_GarthDies= null
trigger gg_trg_ThornbyDies= null
trigger gg_trg_Destroy_TalkThornby= null
trigger gg_trg_Crate01= null
trigger gg_trg_Crate02= null
trigger gg_trg_Crate03= null
trigger gg_trg_FarmerJerrett= null
trigger gg_trg_AproachesJerrett= null
trigger gg_trg_FarmerTed= null
trigger gg_trg_AproachesTed= null
trigger gg_trg_Maria= null
trigger gg_trg_AproachesMaria= null
trigger gg_trg_Stephanie= null
trigger gg_trg_AproachesStephanie= null
trigger gg_trg_Amy_Diane= null
trigger gg_trg_AproachesAmy_Diane= null
trigger gg_trg_AproachesBlake= null
trigger gg_trg_AproachesRyan= null
trigger gg_trg_Villager_Speech_Array= null
trigger gg_trg_Villager_Speech_Array_Loop_OFF= null
trigger gg_trg_Coward_Scene= null
trigger gg_trg___Coward_Turns_Corner= null
trigger gg_trg___Coward_Meets_Grunt= null
trigger gg_trg___GruntSurprise_Attacked= null
trigger gg_trg___Ensnaree_Runs= null
trigger gg_trg___Ensnaree_Escapes= null
trigger gg_trg___Ensnarer_Attacked= null
trigger gg_trg_House_Collapse= null
trigger gg_trg___House_Collapsed= null
trigger gg_trg___Inhabitant_01_Escapes= null
trigger gg_trg___Inhabitant_02_Escapes= null
trigger gg_trg___Inhabitant_03_Escapes= null
trigger gg_trg_Pursuit_Scene= null
trigger gg_trg_Sound_Pursuit= null
trigger gg_trg_Sound_Pursuit2= null
trigger gg_trg_AbortPursuit= null
trigger gg_trg_VillagerDies= null
trigger gg_trg_Rescue_Footmen= null
trigger gg_trg_Remove_Footmen_Who_Die= null
trigger gg_trg_Timmy_Quest= null
trigger gg_trg_Timmy_Quest_Queue= null
trigger gg_trg_Player_Enters_Camp= null
trigger gg_trg_When_A_Gnoll_Dies= null
trigger gg_trg_Gnolls_are_defeated= null
trigger gg_trg_Abort_Gnolls_defeated= null
trigger gg_trg_If_Timmy_Dies= null
trigger gg_trg_If_Timmy_Dies_Queue= null
trigger gg_trg_If_Alicia_or_Children_Die= null
trigger gg_trg_If_Alicia_or_Children_Die_Queue= null
trigger gg_trg_Alicia_Dies_Stop_Sound= null
trigger gg_trg_Bandit_Scene= null
trigger gg_trg_Bandit_Scene_Queue= null
trigger gg_trg_Ledger_Quest= null
trigger gg_trg_Ledger_Quest_Queue= null
trigger gg_trg_Bandit01_End= null
trigger gg_trg_Bandit02_End= null
trigger gg_trg_Bandit03_End= null
trigger gg_trg_Bandit04_End= null
trigger gg_trg_Menag_End= null
trigger gg_trg_Menag_Region= null
trigger gg_trg_Camp_is_entered= null
trigger gg_trg_Menag_Dies= null
trigger gg_trg_Menag_Dies_Queue= null
trigger gg_trg_Ledger_Is_Picked_Up= null
trigger gg_trg_Return_Ledger= null
trigger gg_trg_Return_Ledger_Queue= null
trigger gg_trg_Abort_Return_Ledger= null
trigger gg_trg_If_Gerard_Dies= null
trigger gg_trg_Trigger_Orc_Cinematic= null
trigger gg_trg_Orc_Cinematic_Queue= null
trigger gg_trg_Orc_Cinematic_Cancel= null
trigger gg_trg_Stop_EndBoss_Animation= null
trigger gg_trg_DisableSlaveCollision= null
trigger gg_trg_DisableGruntCollision= null
trigger gg_trg_RemoveSlaves= null
trigger gg_trg_Show_Orc_Cinematic_Units= null
trigger gg_trg_Burn_the_Buildings= null
trigger gg_trg_Tag1= null
trigger gg_trg_Tag2= null
trigger gg_trg_Tag3= null
trigger gg_trg_Tag4= null
trigger gg_trg_Tag5= null
trigger gg_trg_RyanKilledRunBlakeRun= null
trigger gg_trg_BlakeKilledRunRyanRun= null
trigger gg_trg_Remove_Running_Child= null
trigger gg_trg_Initialize_Array= null
trigger gg_trg_Kill_Villager_Put_In_Array= null
trigger gg_trg_Remove_Villagers_During_Day= null
trigger gg_trg_Remove_Villagers_During_Day_Cycle_Unit= null
trigger gg_trg_Remove_Villagers_During_Day_Cycle_Type= null
trigger gg_trg_Ghosts_At_Night= null
trigger gg_trg_Ghosts_At_Night_Cycle= null
trigger gg_trg_AP_Graveyard_Location= null
trigger gg_trg_Waterfall_Sight= null
trigger gg_trg_Waterfall_Sight_Go_ByeBye= null
trigger gg_trg_Warlord_Driveby= null
trigger gg_trg_Warlord_Driveby2= null
trigger gg_trg_Warlord_Driveby3= null
trigger gg_trg_Warlord_Driveby4= null
trigger gg_trg_Warlord_Driveby5_Go_Home= null
trigger gg_trg_Warlord_Quest_Queue= null
trigger gg_trg_Warlord_Goes_Home= null
trigger gg_trg_Trigger_Victory= null
trigger gg_trg_Turn_off_quests= null
trigger gg_trg_Victory= null
trigger gg_trg_Victory_Cancel= null
trigger gg_trg_Defeat= null
trigger gg_trg_Next_Level_Run= null
trigger gg_trg_Victory_Cheat= null
trigger gg_trg_Defeat_Cheat= null
unit gg_unit_hfoo_0001= null
unit gg_unit_hfoo_0002= null
unit gg_unit_hfoo_0003= null
unit gg_unit_hfoo_0004= null
unit gg_unit_hC01_0032= null
unit gg_unit_hC01_0033= null
unit gg_unit_hfoo_0005= null
unit gg_unit_hfoo_0006= null
unit gg_unit_Huth_0024= null
unit gg_unit_nvlw_0147= null
unit gg_unit_ogru_0145= null
unit gg_unit_nban_0095= null
unit gg_unit_nban_0109= null
unit gg_unit_nban_0092= null
unit gg_unit_nban_0168= null
unit gg_unit_nC26_0166= null
unit gg_unit_nban_0079= null
unit gg_unit_nC04_0106= null
unit gg_unit_ncba_0135= null
unit gg_unit_nban_0167= null
unit gg_unit_nban_0094= null
unit gg_unit_ogru_0144= null
unit gg_unit_hfoo_0041= null
unit gg_unit_hfoo_0054= null
unit gg_unit_ncb0_0139= null
unit gg_unit_ncbb_0136= null
unit gg_unit_ncb3_0140= null
unit gg_unit_oC16_0157= null
unit gg_unit_ncbb_0141= null
unit gg_unit_ncb2_0137= null
unit gg_unit_hfoo_0053= null
unit gg_unit_hhou_0044= null
unit gg_unit_hhou_0055= null
unit gg_unit_hhou_0058= null
unit gg_unit_nC03_0063= null
unit gg_unit_nC02_0098= null
unit gg_unit_nC08_0078= null
unit gg_unit_nC09_0061= null
unit gg_unit_hhdl_0057= null
unit gg_unit_hhdl_0056= null
unit gg_unit_ncb6_0114= null
unit gg_unit_nC10_0065= null
unit gg_unit_ogru_0146= null
unit gg_unit_nvlw_0151= null
unit gg_unit_nC14_0096= null
unit gg_unit_nvlw_0152= null
unit gg_unit_nvil_0149= null
unit gg_unit_nC13_0159= null
unit gg_unit_ncb3_0138= null
unit gg_unit_nvil_0150= null
unit gg_unit_nvil_0148= null
unit gg_unit_hhdl_0034= null
unit gg_unit_hhou_0059= null
unit gg_unit_nC07_0093= null
unit gg_unit_nC18_0163= null
unit gg_unit_nC06_0110= null
unit gg_unit_nC05_0112= null
unit gg_unit_nbrg_0071= null
unit gg_unit_nbrg_0070= null
unit gg_unit_nC11_0158= null
unit gg_unit_nban_0017= null
unit gg_unit_ncba_0016= null
unit gg_unit_ncbb_0025= null
unit gg_unit_ncb5_0027= null
unit gg_unit_ncb3_0088= null
unit gg_unit_ncba_0111= null
unit gg_unit_ncb5_0104= null
unit gg_unit_ncb8_0105= null
unit gg_unit_ncbb_0097= null
unit gg_unit_ncb3_0113= null
unit gg_unit_ncbb_0115= null
unit gg_unit_ncba_0116= null
unit gg_unit_ncb6_0117= null
unit gg_unit_ncb7_0118= null
unit gg_unit_ncba_0119= null
unit gg_unit_ncba_0120= null
unit gg_unit_ncb3_0121= null
unit gg_unit_ncb7_0122= null
unit gg_unit_ncb3_0123= null
unit gg_unit_nC27_0165= null
unit gg_unit_nC25_0164= null
unit gg_unit_ncb3_0126= null
unit gg_unit_ncb5_0127= null
unit gg_unit_ncbb_0128= null
unit gg_unit_ncb5_0013= null
unit gg_unit_ncba_0014= null
unit gg_unit_ncb3_0018= null
unit gg_unit_ncb5_0019= null
unit gg_unit_ncb3_0020= null
unit gg_unit_nbrg_0064= null
unit gg_unit_nvil_0022= null
unit gg_unit_nvil_0026= null
unit gg_unit_nvlw_0036= null
unit gg_unit_nvlw_0040= null
unit gg_unit_nvil_0045= null
unit gg_unit_nvlw_0051= null
unit gg_unit_nvlk_0047= null
unit gg_unit_nvlk_0048= null
unit gg_unit_nvlk_0049= null
unit gg_unit_nvlw_0085= null
unit gg_unit_nvlw_0086= null
unit gg_unit_nvlk_0050= null
unit gg_unit_orai_0046= null
unit gg_unit_nvil_0052= null
unit gg_unit_ogru_0083= null
unit gg_unit_nvil_0084= null
unit gg_unit_nC17_0155= null
destructable gg_dest_LTcr_1991= null
destructable gg_dest_LTg1_1823= null
destructable gg_dest_LTcr_0287= null
destructable gg_dest_LOcg_1482= null
destructable gg_dest_LTcr_0730= null
string array p_original_names
string array io_lines
constant integer NUM_FILE_LINES= 10
string last_filename= ""
constant integer MISSION_ID= 101
integer NUM_HEROES= 1
constant player USER_PLAYER= Player(1)
integer array hero_global_slots
constant integer item_channel_1= 1
constant integer item_channel_2= - 1
constant integer item_channel_2_hero_slot= - 1
constant integer HERO_ID_ALL= - 1
constant integer HERO_ID_NONE= 0
constant integer HERO_ID_PALADIN_ARTHAS= 1
constant integer HERO_ID_JAINA= 2
constant integer HERO_ID_MURADIN_BRONZEBEARD= 3
constant integer HERO_ID_THRALL= 4
constant integer HERO_ID_CAIRNE_BLOODHOOF= 5
constant integer HERO_ID_GROM_HELLSCREAM= 6
constant integer HERO_ID_DEATH_KNIGHT_ARTHAS= 7
constant integer HERO_ID_KEL_THUZAD= 8
constant integer HERO_ID_ARTHAS_TFT= 9
constant integer HERO_ID_SYLVANAS= 10
constant integer HERO_ID_VARIMATHRAS= 11
constant integer HERO_ID_ANUB_ARAK= 12
constant integer HERO_ID_TYRANDE= 13
constant integer HERO_ID_FURION= 14
constant integer HERO_ID_ILLIDAN= 15
constant integer HERO_ID_TYRANDE_TFT= 16
constant integer HERO_ID_MALFURION= 17
constant integer HERO_ID_MAIEV= 18
constant integer HERO_ID_KAEL_THAS= 19
constant integer HERO_ID_DEMON_ILLIDAN= 20
constant integer HERO_ID_LADY_VASHJ= 21
constant integer HERO_ID_AKAMA= 22
constant integer HERO_ID_LORD_GARITHOS= 23
constant string COMM_VERSION= "1.0"
constant integer MAX_UPDATE_ID= 100000
integer error_state= 0
integer world_id= - 1
integer last_unlock_packet= - 1
integer last_location_packet= - 1
integer last_message_packet= - 1
integer last_hero_packet= - 1
integer last_item_packet= - 1
integer last_item_channel_packet= - 1
integer checks_before_timeout= 2
boolean array locations_checked
constant integer MAX_LOCATIONS= 30
constant integer MAX_ITEMS_PER_PACKET= 12
integer update_index= - 1
integer hero_status_index= - 1
integer num_channel_1_items_received= 0
integer num_channel_2_items_received= 0
timer status_ack_ping_timer
trigger t_captain_promoted
unit item_channel_1_target= null
unit item_channel_2_target= null
integer array HERO_MAX_LEVEL
integer array hero_hashes
trigger t_hero_update
trigger t_hero_pickup_item
trigger t_hero_configure_all
trigger t_hero_set_all_max_level
timer hero_update_status_timer
integer array hero_abil_1
integer array hero_abil_2
integer array hero_abil_3
integer array hero_abil_4
trigger t_location_found= null
trigger t_help
trigger t_print
trigger t_xp
trigger t_xp2
trigger t_health
trigger t_dragon
trigger t_speed
trigger t_zoom


//JASSHelper struct globals:

endglobals


//===========================================================================
// 
// Human01
// 
//   Warcraft III map script
//   Generated by the Warcraft III World Editor
//   Date: Wed Sep 17 01:47:32 2025
//   Map Author: Blizzard Entertainment
// 
//===========================================================================

//***************************************************************************
//*
//*  Global Variables
//*
//***************************************************************************


function InitGlobals takes nothing returns nothing
    local integer i= 0
    set udg_StartingForces=CreateGroup()
    set udg_UthersForcesA=CreateGroup()
    set udg_UthersForcesB=CreateGroup()
    set udg_RescuableFootmen=CreateGroup()
    set udg_GnollCamp=CreateGroup()
    set udg_IsTimmyFree=false
    set udg_IsTimmyDead=false
    set udg_IsLittleTimmyReturned=false
    set udg_HasArthasArrived=false
    set udg_IsLedgerReturned=false
    set udg_IsGerardDead=false
    set udg_IsHorse01Removed=false
    set udg_IsHorse02Removed=false
    set udg_IsHorse03Removed=false
    set udg_IsUtherRemoved=false
    set udg_IsFootman01Removed=false
    set udg_IsFootman02Removed=false
    set udg_IsFootman03Removed=false
    set udg_IsFootman04Removed=false
    set udg_IsFootman07Removed=false
    set udg_IsFootman08Removed=false
    set udg_IntroSkipped=false
    set udg_Slavers=CreateGroup()
    set udg_KidnappedVillagers=CreateGroup()
    set udg_BlakeDies=false
    set udg_RyanDies=false
    set udg_GarthDies=false
    set udg_ThornbyDies=false
    set udg_EndSkipped=false
    set udg_IsSlave01Removed=false
    set udg_IsSlave02Removed=false
    set udg_IsSlave03Removed=false
    set udg_IsSlave04Removed=false
    set udg_IsSlave05Removed=false
    set udg_IsSlave06Removed=false
    set udg_IsGrunt01Removed=false
    set udg_IsGrunt02Removed=false
    set udg_VictorySkipped=false
    set udg_AAAP_Arthas=Player(1)
    set udg_WarlordAndCrewGroup=CreateGroup()
    set udg_AAAPG_Arthas=bj_FORCE_PLAYER[1]
    set udg_P_Uther=Player(9)
    set udg_P_Orcs=Player(0)
    set udg_TimmyQuestFailed=false
    set udg_TimmyQuestRequiredUnits=CreateGroup()
    set udg_OrcQuestGiven=false
    set udg_BanditQuestFailed=false
    set udg_GAMEOVER=false
    set udg_MenagBanditsGroup=CreateGroup()
    set udg_IntroObjectiveGiven=false
    set udg_SelectedUnits=CreateGroup()
    set udg_LedgerQuestGiven=false
    set udg_WaterfallBoolean=false
endfunction

//***************************************************************************
//*
//*  Unit Item Tables
//*
//***************************************************************************

function Unit000025_DropItems takes nothing returns nothing
    local widget trigWidget= null
    local unit trigUnit= null
    local integer itemID= 0
    local boolean canDrop= true

    set trigWidget=bj_lastDyingWidget
    if ( trigWidget == null ) then
        set trigUnit=GetTriggerUnit()
    endif

    if ( trigUnit != null ) then
        set canDrop=not IsUnitHidden(trigUnit)
        if ( canDrop and GetChangingUnit() != null ) then
            set canDrop=( GetChangingUnitPrevOwner() == Player(PLAYER_NEUTRAL_AGGRESSIVE) )
        endif
    endif

    if ( canDrop ) then
        // Item set 0
        call RandomDistReset()
        call RandomDistAddItem('I015', 100)
        set itemID=RandomDistChoose()
        if ( trigUnit != null ) then
            call UnitDropItem(trigUnit, itemID)
        else
            call WidgetDropItem(trigWidget, itemID)
        endif

    endif

    set bj_lastDyingWidget=null
    call DestroyTrigger(GetTriggeringTrigger())
endfunction

function Unit000037_DropItems takes nothing returns nothing
    local widget trigWidget= null
    local unit trigUnit= null
    local integer itemID= 0
    local boolean canDrop= true

    set trigWidget=bj_lastDyingWidget
    if ( trigWidget == null ) then
        set trigUnit=GetTriggerUnit()
    endif

    if ( trigUnit != null ) then
        set canDrop=not IsUnitHidden(trigUnit)
        if ( canDrop and GetChangingUnit() != null ) then
            set canDrop=( GetChangingUnitPrevOwner() == Player(PLAYER_NEUTRAL_AGGRESSIVE) )
        endif
    endif

    if ( canDrop ) then
        // Item set 0
        call RandomDistReset()
        call RandomDistAddItem('I014', 100)
        set itemID=RandomDistChoose()
        if ( trigUnit != null ) then
            call UnitDropItem(trigUnit, itemID)
        else
            call WidgetDropItem(trigWidget, itemID)
        endif

    endif

    set bj_lastDyingWidget=null
    call DestroyTrigger(GetTriggeringTrigger())
endfunction

function Unit000056_DropItems takes nothing returns nothing
    local widget trigWidget= null
    local unit trigUnit= null
    local integer itemID= 0
    local boolean canDrop= true

    set trigWidget=bj_lastDyingWidget
    if ( trigWidget == null ) then
        set trigUnit=GetTriggerUnit()
    endif

    if ( trigUnit != null ) then
        set canDrop=not IsUnitHidden(trigUnit)
        if ( canDrop and GetChangingUnit() != null ) then
            set canDrop=( GetChangingUnitPrevOwner() == Player(PLAYER_NEUTRAL_AGGRESSIVE) )
        endif
    endif

    if ( canDrop ) then
        // Item set 0
        call RandomDistReset()
        call RandomDistAddItem('I013', 100)
        set itemID=RandomDistChoose()
        if ( trigUnit != null ) then
            call UnitDropItem(trigUnit, itemID)
        else
            call WidgetDropItem(trigWidget, itemID)
        endif

    endif

    set bj_lastDyingWidget=null
    call DestroyTrigger(GetTriggeringTrigger())
endfunction


//***************************************************************************
//*
//*  Sounds
//*
//***************************************************************************

function InitSounds takes nothing returns nothing
    set gg_snd_BanditYesAttack2=CreateSound("Units\\Creeps\\Bandit\\BanditYesAttack2.wav", false, false, true, 10, 10, "DefaultEAXON")
    call SetSoundParamsFromLabel(gg_snd_BanditYesAttack2, "BanditYesAttack")
    call SetSoundDuration(gg_snd_BanditYesAttack2, 1216)
    set gg_snd_BanditYesAttack3=CreateSound("Units\\Creeps\\Bandit\\BanditYesAttack3.wav", false, false, true, 10, 10, "DefaultEAXON")
    call SetSoundParamsFromLabel(gg_snd_BanditYesAttack3, "BanditYesAttack")
    call SetSoundDuration(gg_snd_BanditYesAttack3, 490)
    set gg_snd_DefendCaster=CreateSound("Abilities\\Spells\\Human\\Defend\\DefendCaster.wav", false, false, true, 10, 10, "SpellsEAX")
    call SetSoundParamsFromLabel(gg_snd_DefendCaster, "Defend")
    call SetSoundDuration(gg_snd_DefendCaster, 1166)
    set gg_snd_FootmanYesAttack2=CreateSound("Units\\Human\\Footman\\FootmanYesAttack2.wav", false, true, true, 10, 10, "DefaultEAXON")
    call SetSoundParamsFromLabel(gg_snd_FootmanYesAttack2, "FootmanYesAttack")
    call SetSoundDuration(gg_snd_FootmanYesAttack2, 1085)
    set gg_snd_H01Arthas02=CreateSound("Sound\\Dialogue\\HumanCampaign\\Human01\\H01Arthas02.mp3", false, false, false, 10, 10, "")
    call SetSoundParamsFromLabel(gg_snd_H01Arthas02, "H01Arthas02")
    call SetSoundDuration(gg_snd_H01Arthas02, 4493)
    set gg_snd_H01Arthas04=CreateSound("Sound\\Dialogue\\HumanCampaign\\Human01\\H01Arthas04.mp3", false, false, false, 10, 10, "")
    call SetSoundParamsFromLabel(gg_snd_H01Arthas04, "H01Arthas04")
    call SetSoundDuration(gg_snd_H01Arthas04, 4101)
    set gg_snd_H01Arthas06=CreateSound("Sound\\Dialogue\\HumanCampaign\\Human01\\H01Arthas06.mp3", false, false, false, 10, 10, "")
    call SetSoundParamsFromLabel(gg_snd_H01Arthas06, "H01Arthas06")
    call SetSoundDuration(gg_snd_H01Arthas06, 7497)
    set gg_snd_H01Arthas08=CreateSound("Sound\\Dialogue\\HumanCampaign\\Human01\\H01Arthas08.mp3", false, false, false, 10, 10, "")
    call SetSoundParamsFromLabel(gg_snd_H01Arthas08, "H01Arthas08")
    call SetSoundDuration(gg_snd_H01Arthas08, 7784)
    set gg_snd_H01Arthas10=CreateSound("Sound\\Dialogue\\HumanCampaign\\Human01\\H01Arthas10.mp3", false, false, false, 10, 10, "")
    call SetSoundParamsFromLabel(gg_snd_H01Arthas10, "H01Arthas10")
    call SetSoundDuration(gg_snd_H01Arthas10, 2664)
    set gg_snd_H01Arthas18=CreateSound("Sound\\Dialogue\\HumanCampaign\\Human01\\H01Arthas18.mp3", false, false, false, 10, 10, "")
    call SetSoundParamsFromLabel(gg_snd_H01Arthas18, "H01Arthas18")
    call SetSoundDuration(gg_snd_H01Arthas18, 4153)
    set gg_snd_H01Arthas24=CreateSound("Sound\\Dialogue\\HumanCampaign\\Human01\\H01Arthas24.mp3", false, false, false, 10, 10, "")
    call SetSoundParamsFromLabel(gg_snd_H01Arthas24, "H01Arthas24")
    call SetSoundDuration(gg_snd_H01Arthas24, 3422)
    set gg_snd_H01Arthas26=CreateSound("Sound\\Dialogue\\HumanCampaign\\Human01\\H01Arthas26.mp3", false, false, false, 10, 10, "")
    call SetSoundParamsFromLabel(gg_snd_H01Arthas26, "H01Arthas26")
    call SetSoundDuration(gg_snd_H01Arthas26, 3239)
    set gg_snd_H01Bandit32=CreateSound("Sound\\Dialogue\\HumanCampaign\\Human01\\H01Bandit32.mp3", false, false, false, 10, 10, "")
    call SetSoundParamsFromLabel(gg_snd_H01Bandit32, "H01Bandit32")
    call SetSoundDuration(gg_snd_H01Bandit32, 3709)
    set gg_snd_H01BanditB14=CreateSound("Sound\\Dialogue\\HumanCampaign\\Human01\\H01BanditB14.mp3", false, false, false, 10, 10, "")
    call SetSoundParamsFromLabel(gg_snd_H01BanditB14, "H01BanditB14")
    call SetSoundDuration(gg_snd_H01BanditB14, 3709)
    set gg_snd_H01Grunt17=CreateSound("Sound\\Dialogue\\HumanCampaign\\Human01\\H01Grunt17.mp3", false, false, false, 10, 10, "")
    call SetSoundParamsFromLabel(gg_snd_H01Grunt17, "H01Grunt17")
    call SetSoundDuration(gg_snd_H01Grunt17, 2455)
    set gg_snd_H01Grunt21=CreateSound("Sound\\Dialogue\\HumanCampaign\\Human01\\H01Grunt21.mp3", false, false, false, 10, 10, "")
    call SetSoundParamsFromLabel(gg_snd_H01Grunt21, "H01Grunt21")
    call SetSoundDuration(gg_snd_H01Grunt21, 1071)
    set gg_snd_H01Knight25=CreateSound("Sound\\Dialogue\\HumanCampaign\\Human01\\H01Knight25.mp3", false, false, false, 10, 10, "")
    call SetSoundParamsFromLabel(gg_snd_H01Knight25, "H01Knight25")
    call SetSoundDuration(gg_snd_H01Knight25, 4257)
    set gg_snd_H01Uther01=CreateSound("Sound\\Dialogue\\HumanCampaign\\Human01\\H01Uther01.mp3", false, false, false, 10, 10, "")
    call SetSoundParamsFromLabel(gg_snd_H01Uther01, "H01Uther01")
    call SetSoundDuration(gg_snd_H01Uther01, 4728)
    set gg_snd_H01Uther03=CreateSound("Sound\\Dialogue\\HumanCampaign\\Human01\\H01Uther03.mp3", false, false, false, 10, 10, "")
    call SetSoundParamsFromLabel(gg_snd_H01Uther03, "H01Uther03")
    call SetSoundDuration(gg_snd_H01Uther03, 4101)
    set gg_snd_H01Uther05=CreateSound("Sound\\Dialogue\\HumanCampaign\\Human01\\H01Uther05.mp3", false, false, false, 10, 10, "")
    call SetSoundParamsFromLabel(gg_snd_H01Uther05, "H01Uther05")
    call SetSoundDuration(gg_snd_H01Uther05, 5224)
    set gg_snd_H01Uther07=CreateSound("Sound\\Dialogue\\HumanCampaign\\Human01\\H01Uther07.mp3", false, false, false, 10, 10, "")
    call SetSoundParamsFromLabel(gg_snd_H01Uther07, "H01Uther07")
    call SetSoundDuration(gg_snd_H01Uther07, 1985)
    set gg_snd_H01Uther09=CreateSound("Sound\\Dialogue\\HumanCampaign\\Human01\\H01Uther09.mp3", false, false, false, 10, 10, "")
    call SetSoundParamsFromLabel(gg_snd_H01Uther09, "H01Uther09")
    call SetSoundDuration(gg_snd_H01Uther09, 5381)
    set gg_snd_H01Uther11=CreateSound("Sound\\Dialogue\\HumanCampaign\\Human01\\H01Uther11.mp3", false, false, false, 10, 10, "")
    call SetSoundParamsFromLabel(gg_snd_H01Uther11, "H01Uther11")
    call SetSoundDuration(gg_snd_H01Uther11, 6452)
    set gg_snd_H01VillagerC23=CreateSound("Sound\\Dialogue\\HumanCampaign\\Human01\\H01VillagerC23.mp3", false, false, false, 10, 10, "")
    call SetSoundParamsFromLabel(gg_snd_H01VillagerC23, "H01VillagerC23")
    call SetSoundDuration(gg_snd_H01VillagerC23, 3448)
    set gg_snd_H01VillagerC3501=CreateSound("Sound\\Dialogue\\HumanCampaign\\Human01\\H01VillagerC35.mp3", false, false, false, 10, 10, "")
    call SetSoundParamsFromLabel(gg_snd_H01VillagerC3501, "H01VillagerC35")
    call SetSoundDuration(gg_snd_H01VillagerC3501, 5799)
    set gg_snd_H01VillagerC36=CreateSound("Sound\\Dialogue\\HumanCampaign\\Human01\\H01VillagerC36.mp3", false, false, true, 10, 10, "DefaultEAXON")
    call SetSoundParamsFromLabel(gg_snd_H01VillagerC36, "H01VillagerC36")
    call SetSoundDuration(gg_snd_H01VillagerC36, 4336)
    set gg_snd_H01VillagerC37=CreateSound("Sound\\Dialogue\\HumanCampaign\\Human01\\H01VillagerC37.mp3", false, false, false, 10, 10, "")
    call SetSoundParamsFromLabel(gg_snd_H01VillagerC37, "H01VillagerC37")
    call SetSoundDuration(gg_snd_H01VillagerC37, 940)
    set gg_snd_H01VillagerC38=CreateSound("Sound\\Dialogue\\HumanCampaign\\Human01\\H01VillagerC38.mp3", false, false, false, 10, 10, "")
    call SetSoundParamsFromLabel(gg_snd_H01VillagerC38, "H01VillagerC38")
    call SetSoundDuration(gg_snd_H01VillagerC38, 1253)
    set gg_snd_H01VillagerF22=CreateSound("Sound\\Dialogue\\HumanCampaign\\Human01\\H01VillagerF22.mp3", false, false, false, 10, 10, "DefaultEAXON")
    call SetSoundParamsFromLabel(gg_snd_H01VillagerF22, "H01VillagerF22")
    call SetSoundDuration(gg_snd_H01VillagerF22, 1724)
    set gg_snd_H01VillagerF27=CreateSound("Sound\\Dialogue\\HumanCampaign\\Human01\\H01VillagerF27.mp3", false, false, false, 10, 10, "")
    call SetSoundParamsFromLabel(gg_snd_H01VillagerF27, "H01VillagerF27")
    call SetSoundDuration(gg_snd_H01VillagerF27, 9430)
    set gg_snd_H01VillagerM28=CreateSound("Sound\\Dialogue\\HumanCampaign\\Human01\\H01VillagerM28.mp3", false, false, false, 10, 10, "")
    call SetSoundParamsFromLabel(gg_snd_H01VillagerM28, "H01VillagerM28")
    call SetSoundDuration(gg_snd_H01VillagerM28, 12225)
    set gg_snd_H01VillagerM33=CreateSound("Sound\\Dialogue\\HumanCampaign\\Human01\\H01VillagerM33.mp3", false, false, false, 10, 10, "")
    call SetSoundParamsFromLabel(gg_snd_H01VillagerM33, "H01VillagerM33")
    call SetSoundDuration(gg_snd_H01VillagerM33, 2873)
    set gg_snd_H01WolfRider19=CreateSound("Sound\\Dialogue\\HumanCampaign\\Human01\\H01WolfRider19.mp3", false, false, false, 10, 10, "")
    call SetSoundParamsFromLabel(gg_snd_H01WolfRider19, "H01WolfRider19")
    call SetSoundDuration(gg_snd_H01WolfRider19, 3160)
    set gg_snd_H03Footman47=CreateSound("Sound\\Dialogue\\HumanCampaign\\Human03\\H03Footman47.mp3", false, false, false, 10, 10, "")
    call SetSoundParamsFromLabel(gg_snd_H03Footman47, "H03Footman47")
    call SetSoundDuration(gg_snd_H03Footman47, 940)
    set gg_snd_H03VillagerM43=CreateSound("Sound\\Dialogue\\HumanCampaign\\Human03\\H03VillagerM43.mp3", false, false, false, 10, 10, "")
    call SetSoundParamsFromLabel(gg_snd_H03VillagerM43, "H03VillagerM43")
    call SetSoundDuration(gg_snd_H03VillagerM43, 1645)
    set gg_snd_H03VillagerM44=CreateSound("Sound\\Dialogue\\HumanCampaign\\Human03\\H03VillagerM44.mp3", false, false, false, 10, 10, "")
    call SetSoundParamsFromLabel(gg_snd_H03VillagerM44, "H03VillagerM44")
    call SetSoundDuration(gg_snd_H03VillagerM44, 1515)
    set gg_snd_H03VillagerM50=CreateSound("Sound\\Dialogue\\HumanCampaign\\Human03\\H03VillagerM50.mp3", false, false, false, 10, 10, "")
    call SetSoundParamsFromLabel(gg_snd_H03VillagerM50, "H03VillagerM50")
    call SetSoundDuration(gg_snd_H03VillagerM50, 1227)
    set gg_snd_HeroPaladinYesAttack1=CreateSound("Units\\Human\\HeroPaladin\\HeroPaladinYesAttack1.wav", false, true, true, 10, 10, "HeroAcksEAX")
    call SetSoundParamsFromLabel(gg_snd_HeroPaladinYesAttack1, "HeroPaladinYesAttack")
    call SetSoundDuration(gg_snd_HeroPaladinYesAttack1, 1471)
    set gg_snd_KnightNoRiderWarcry1=CreateSound("Units\\Human\\KnightNoRider\\KnightNoRiderWarcry1.wav", false, true, true, 10, 10, "DefaultEAXON")
    call SetSoundParamsFromLabel(gg_snd_KnightNoRiderWarcry1, "KnightNoRiderWarcry")
    call SetSoundDuration(gg_snd_KnightNoRiderWarcry1, 2217)
    set gg_snd_KnightNoRiderWhat1=CreateSound("Units\\Human\\KnightNoRider\\KnightNoRiderWhat1.wav", false, true, false, 10, 10, "DefaultEAXON")
    call SetSoundParamsFromLabel(gg_snd_KnightNoRiderWhat1, "KnightNoRiderWhat")
    call SetSoundDuration(gg_snd_KnightNoRiderWhat1, 969)
    set gg_snd_KnightNoRiderWhat2=CreateSound("Units\\Human\\KnightNoRider\\KnightNoRiderWhat2.wav", false, true, true, 10, 10, "DefaultEAXON")
    call SetSoundParamsFromLabel(gg_snd_KnightNoRiderWhat2, "KnightNoRiderWhat")
    call SetSoundDuration(gg_snd_KnightNoRiderWhat2, 1973)
    set gg_snd_PickUpItem=CreateSound("Sound\\Interface\\PickUpItem.wav", false, false, false, 10, 10, "")
    call SetSoundParamsFromLabel(gg_snd_PickUpItem, "ItemGet")
    call SetSoundDuration(gg_snd_PickUpItem, 174)
    set gg_snd_VillagerF1=CreateSound("Units\\Critters\\VillagerWoman\\VillagerF1.wav", false, false, false, 10, 10, "DefaultEAXON")
    call SetSoundParamsFromLabel(gg_snd_VillagerF1, "VillagerWomanWhat")
    call SetSoundDuration(gg_snd_VillagerF1, 606)
    set gg_snd_VillagerF2=CreateSound("Units\\Critters\\VillagerWoman\\VillagerF2.wav", false, false, false, 10, 10, "DefaultEAXON")
    call SetSoundParamsFromLabel(gg_snd_VillagerF2, "VillagerWomanWhat")
    call SetSoundDuration(gg_snd_VillagerF2, 1041)
    set gg_snd_VillagerF3=CreateSound("Units\\Critters\\VillagerWoman\\VillagerF3.wav", false, false, false, 10, 10, "DefaultEAXON")
    call SetSoundParamsFromLabel(gg_snd_VillagerF3, "VillagerWomanWhat")
    call SetSoundDuration(gg_snd_VillagerF3, 1364)
    set gg_snd_VillagerM1=CreateSound("Units\\Critters\\VillagerMan\\VillagerM1.wav", false, false, false, 10, 10, "DefaultEAXON")
    call SetSoundParamsFromLabel(gg_snd_VillagerM1, "VillagerManWhat")
    call SetSoundDuration(gg_snd_VillagerM1, 774)
    set gg_snd_VillagerM2=CreateSound("Units\\Critters\\VillagerMan\\VillagerM2.wav", false, false, false, 10, 10, "DefaultEAXON")
    call SetSoundParamsFromLabel(gg_snd_VillagerM2, "VillagerManWhat")
    call SetSoundDuration(gg_snd_VillagerM2, 1166)
    set gg_snd_H01VillagerF42=CreateSound("Sound\\Dialogue\\HumanCampaign\\Human01\\H01VillagerF42.mp3", false, false, false, 10, 10, "")
    call SetSoundParamsFromLabel(gg_snd_H01VillagerF42, "H01VillagerF42")
    call SetSoundDuration(gg_snd_H01VillagerF42, 2951)
    set gg_snd_H01VillagerM43=CreateSound("Sound\\Dialogue\\HumanCampaign\\Human01\\H01VillagerM43.mp3", false, false, false, 10, 10, "")
    call SetSoundParamsFromLabel(gg_snd_H01VillagerM43, "H01VillagerM43")
    call SetSoundDuration(gg_snd_H01VillagerM43, 3291)
    set gg_snd_Rescue=CreateSound("Sound\\Interface\\Rescue.wav", false, false, false, 10, 10, "")
    call SetSoundParamsFromLabel(gg_snd_Rescue, "Rescue")
    call SetSoundDuration(gg_snd_Rescue, 3796)
    set gg_snd_WaterLakeLoop1=CreateSound("Sound\\Ambient\\DoodadEffects\\WaterLakeLoop1.wav", true, true, true, 10, 10, "DoodadsEAX")
    call SetSoundParamsFromLabel(gg_snd_WaterLakeLoop1, "LakeLoop")
    call SetSoundDuration(gg_snd_WaterLakeLoop1, 3297)
    set gg_snd_WaterStreamLoop1=CreateSound("Sound\\Ambient\\DoodadEffects\\WaterStreamLoop1.wav", true, true, true, 10, 10, "DoodadsEAX")
    call SetSoundParamsFromLabel(gg_snd_WaterStreamLoop1, "StreamLoop")
    call SetSoundDuration(gg_snd_WaterStreamLoop1, 2008)
    set gg_snd_WaterWaterFallLoop1=CreateSound("Sound\\Ambient\\DoodadEffects\\WaterWaterFallLoop1.wav", true, true, true, 10, 10, "DoodadsEAX")
    call SetSoundParamsFromLabel(gg_snd_WaterWaterFallLoop1, "WaterfallLoop")
    call SetSoundDuration(gg_snd_WaterWaterFallLoop1, 1021)
    set gg_snd_KnightNoRiderYesAttack1=CreateSound("Units\\Human\\KnightNoRider\\KnightNoRiderYesAttack1.wav", false, true, true, 10, 10, "DefaultEAXON")
    call SetSoundParamsFromLabel(gg_snd_KnightNoRiderYesAttack1, "KnightNoRiderYesAttack")
    call SetSoundDuration(gg_snd_KnightNoRiderYesAttack1, 1799)
    set gg_snd_KnightNoRiderWhat3=CreateSound("Units\\Human\\KnightNoRider\\KnightNoRiderWhat3.wav", false, true, true, 10, 10, "DefaultEAXON")
    call SetSoundParamsFromLabel(gg_snd_KnightNoRiderWhat3, "KnightNoRiderWhat")
    call SetSoundDuration(gg_snd_KnightNoRiderWhat3, 1857)
    set gg_snd_HorseLoop2=CreateSound("Units\\Human\\Knight\\HorseLoop2.wav", false, true, true, 10, 10, "DefaultEAXON")
    call SetSoundParamsFromLabel(gg_snd_HorseLoop2, "HumanKnightMovement")
    call SetSoundDuration(gg_snd_HorseLoop2, 3227)
    set gg_snd_HorseLoop1=CreateSound("Units\\Human\\Knight\\HorseLoop1.wav", false, true, true, 10, 10, "DefaultEAXON")
    call SetSoundParamsFromLabel(gg_snd_HorseLoop1, "HumanKnightMovement")
    call SetSoundDuration(gg_snd_HorseLoop1, 2101)
    set gg_snd_DoorSlam1=CreateSound("Sound\\Ambient\\DoodadEffects\\DoorSlam1.wav", false, true, true, 10, 10, "DefaultEAXON")
    call SetSoundParamsFromLabel(gg_snd_DoorSlam1, "DoorSlamSound")
    call SetSoundDuration(gg_snd_DoorSlam1, 485)
endfunction

//***************************************************************************
//*
//*  Destructable Objects
//*
//***************************************************************************

function CreateAllDestructables takes nothing returns nothing
    local destructable d
    local trigger t
    local real life
    set gg_dest_LOcg_1482=CreateDestructable('LOcg', 704.0, - 4096.0, 209.589, 0.930, 0)
    set gg_dest_LTcr_0287=CreateDestructable('LTcr', - 3200.0, 1856.0, 0.000, 0.997, 1)
    set gg_dest_LTcr_0730=CreateDestructable('LTcr', 2048.0, 4096.0, 0.000, 1.121, 0)
    set gg_dest_LTcr_1991=CreateDestructable('LTcr', - 2112.0, 1344.0, 0.000, 1.200, 1)
    set gg_dest_LTg1_1823=CreateDeadDestructableZ('LTg1', 2048.0, 128.0, 25.3, 270.000, 0.900, 0)
endfunction

//***************************************************************************
//*
//*  Unit Creation
//*
//***************************************************************************

//===========================================================================
function CreateUnitsForPlayer0 takes nothing returns nothing
    local player p= Player(0)
    local unit u
    local integer unitID
    local trigger t
    local real life

    set gg_unit_orai_0046=CreateUnit(p, 'orai', 3057.8, 905.4, 152.460)
    set u=CreateUnit(p, 'ogru', 177.1, 4108.4, 278.762)
    set gg_unit_ogru_0083=CreateUnit(p, 'ogru', 3158.6, 1851.0, 178.016)
    set gg_unit_ogru_0144=CreateUnit(p, 'ogru', 297.6, 3880.4, 194.029)
    set gg_unit_ogru_0145=CreateUnit(p, 'ogru', 787.0, 4013.8, 192.504)
    set gg_unit_ogru_0146=CreateUnit(p, 'ogru', 791.1, 3734.4, 172.370)
    set gg_unit_oC16_0157=CreateUnit(p, 'oC16', 63.1, 3857.6, 340.000)
endfunction

//===========================================================================
function CreateUnitsForPlayer1 takes nothing returns nothing
    local player p= Player(1)
    local unit u
    local integer unitID
    local trigger t
    local real life

    set gg_unit_hhdl_0034=CreateUnit(p, 'hhdl', - 4101.9, 2999.6, 319.299)
    set gg_unit_hfoo_0053=CreateUnit(p, 'hfoo', - 3850.9, 3016.6, 306.433)
    set gg_unit_hfoo_0054=CreateUnit(p, 'hfoo', - 4102.3, 2799.4, 318.305)
    set gg_unit_hhdl_0056=CreateUnit(p, 'hhdl', - 3964.5, 3006.4, 291.706)
    set gg_unit_hhdl_0057=CreateUnit(p, 'hhdl', - 3939.1, 3127.7, 2.462)
endfunction

//===========================================================================
function CreateBuildingsForPlayer2 takes nothing returns nothing
    local player p= Player(2)
    local unit u
    local integer unitID
    local trigger t
    local real life

    set gg_unit_hhou_0044=CreateUnit(p, 'hhou', - 3648.0, - 1920.0, 270.000)
    set gg_unit_hhou_0055=CreateUnit(p, 'hhou', - 3776.0, - 1280.0, 270.000)
    set gg_unit_hhou_0058=CreateUnit(p, 'hhou', - 2240.0, - 1344.0, 270.000)
    set gg_unit_hhou_0059=CreateUnit(p, 'hhou', - 2752.0, - 4288.0, 270.000)
endfunction

//===========================================================================
function CreateUnitsForPlayer2 takes nothing returns nothing
    local player p= Player(2)
    local unit u
    local integer unitID
    local trigger t
    local real life

    set gg_unit_hfoo_0041=CreateUnit(p, 'hfoo', 242.8, 1918.5, 305.159)
    set u=CreateUnit(p, 'hfoo', 379.6, 1985.0, 249.726)
    set u=CreateUnit(p, 'hfoo', 107.0, 2000.5, 296.936)
    set gg_unit_nvil_0052=CreateUnit(p, 'nvil', 2906.8, 993.5, 116.440)
    set gg_unit_nC09_0061=CreateUnit(p, 'nC09', - 2353.7, - 1491.3, 236.540)
    set gg_unit_nC03_0063=CreateUnit(p, 'nC03', - 3960.7, - 2282.4, 185.092)
    set gg_unit_nC10_0065=CreateUnit(p, 'nC10', - 3482.4, - 1716.5, 302.458)
    set u=CreateUnit(p, 'nC24', - 2890.6, - 2331.8, 207.377)
    set u=CreateUnit(p, 'nC23', - 2969.9, - 4363.7, 55.263)
    set gg_unit_nC08_0078=CreateUnit(p, 'nC08', - 1636.9, - 2234.5, 227.680)
    set gg_unit_nvil_0084=CreateUnit(p, 'nvil', 2607.8, 915.0, 95.161)
    set gg_unit_nC07_0093=CreateUnit(p, 'nC07', - 2947.6, - 4231.6, 267.207)
    set gg_unit_nC14_0096=CreateUnit(p, 'nC14', - 4512.5, - 2997.3, 295.766)
    set gg_unit_nC02_0098=CreateUnit(p, 'nC02', - 3498.6, 294.5, 291.557)
    set gg_unit_nC06_0110=CreateUnit(p, 'nC06', 284.5, - 1224.8, 252.965)
    set gg_unit_nC05_0112=CreateUnit(p, 'nC05', 356.1, - 1240.0, 274.512)
    set gg_unit_nC17_0155=CreateUnit(p, 'nC17', - 3614.4, - 4063.4, 62.580)
    set u=CreateUnit(p, 'nC19', - 3038.4, - 4401.8, 83.938)
    set gg_unit_nC13_0159=CreateUnit(p, 'nC13', - 4410.8, - 2951.7, 292.347)
    set u=CreateUnit(p, 'nC21', - 2901.3, - 4341.4, 144.543)
    set u=CreateUnit(p, 'nC20', - 3021.0, - 4324.3, 70.868)
    set u=CreateUnit(p, 'nC22', - 2916.2, - 4414.8, 99.570)
    set gg_unit_nC18_0163=CreateUnit(p, 'nC18', - 3584.3, - 3997.4, 77.038)
endfunction

//===========================================================================
function CreateUnitsForPlayer8 takes nothing returns nothing
    local player p= Player(8)
    local unit u
    local integer unitID
    local trigger t
    local real life

    set u=CreateUnit(p, 'nban', 3483.6, - 2819.4, 154.125)
    set u=CreateUnit(p, 'nban', 3218.6, - 3121.7, 85.921)
    set u=CreateUnit(p, 'nban', 3061.8, - 3077.5, 95.223)
    set gg_unit_nban_0017=CreateUnit(p, 'nban', - 1245.1, 435.8, 279.050)
    set gg_unit_nbrg_0064=CreateUnit(p, 'nbrg', 4013.2, - 4349.1, 121.545)
    set gg_unit_nbrg_0070=CreateUnit(p, 'nbrg', 3509.7, - 4363.2, 36.333)
    set gg_unit_nbrg_0071=CreateUnit(p, 'nbrg', 3555.9, - 2983.5, 175.123)
    set gg_unit_nban_0079=CreateUnit(p, 'nban', 508.5, - 1147.9, 150.850)
    call SetUnitAcquireRange(gg_unit_nban_0079, 200.0)
    set t=CreateTrigger()
    call TriggerRegisterUnitEvent(t, gg_unit_nban_0079, EVENT_UNIT_DEATH)
    call TriggerRegisterUnitEvent(t, gg_unit_nban_0079, EVENT_UNIT_CHANGE_OWNER)
    call TriggerAddAction(t, function Unit000025_DropItems)
    set gg_unit_nban_0092=CreateUnit(p, 'nban', - 336.1, 31.2, 137.754)
    set gg_unit_nban_0094=CreateUnit(p, 'nban', - 348.9, 556.9, 339.730)
    set t=CreateTrigger()
    call TriggerRegisterUnitEvent(t, gg_unit_nban_0094, EVENT_UNIT_DEATH)
    call TriggerRegisterUnitEvent(t, gg_unit_nban_0094, EVENT_UNIT_CHANGE_OWNER)
    call TriggerAddAction(t, function Unit000037_DropItems)
    set gg_unit_nban_0095=CreateUnit(p, 'nban', - 409.2, 544.1, 112.449)
    set gg_unit_nC04_0106=CreateUnit(p, 'nC04', 609.7, - 1321.2, 238.390)
    call SetUnitAcquireRange(gg_unit_nC04_0106, 200.0)
    set gg_unit_nban_0109=CreateUnit(p, 'nban', 352.3, - 1376.8, 95.243)
    call SetUnitAcquireRange(gg_unit_nban_0109, 200.0)
    set gg_unit_nban_0167=CreateUnit(p, 'nban', 262.7, - 1323.3, 73.704)
    call SetUnitAcquireRange(gg_unit_nban_0167, 200.0)
    set gg_unit_nban_0168=CreateUnit(p, 'nban', 455.0, - 1335.8, 133.110)
    call SetUnitAcquireRange(gg_unit_nban_0168, 200.0)
endfunction

//===========================================================================
function CreateBuildingsForPlayer9 takes nothing returns nothing
    local player p= Player(9)
    local unit u
    local integer unitID
    local trigger t
    local real life

    set u=CreateUnit(p, 'hwtw', - 3008.0, 2432.0, 270.000)
    set u=CreateUnit(p, 'hwtw', - 3456.0, 2112.0, 270.000)
endfunction

//===========================================================================
function CreateUnitsForPlayer9 takes nothing returns nothing
    local player p= Player(9)
    local unit u
    local integer unitID
    local trigger t
    local real life

    set gg_unit_hfoo_0001=CreateUnit(p, 'hfoo', - 2310.6, 1702.9, 167.530)
    set gg_unit_hfoo_0002=CreateUnit(p, 'hfoo', - 2316.2, 1569.9, 152.260)
    set gg_unit_hfoo_0003=CreateUnit(p, 'hfoo', - 2438.7, 1496.6, 133.483)
    set gg_unit_hfoo_0004=CreateUnit(p, 'hfoo', - 2537.0, 1470.6, 102.051)
    set gg_unit_hfoo_0005=CreateUnit(p, 'hfoo', - 2255.3, 1383.6, 171.464)
    set gg_unit_hfoo_0006=CreateUnit(p, 'hfoo', - 2352.2, 1379.6, 1.198)
    set gg_unit_Huth_0024=CreateUnit(p, 'Huth', - 2538.9, 1648.8, 336.120)
    call SetHeroLevel(gg_unit_Huth_0024, 10, false)
    set gg_unit_hC01_0032=CreateUnit(p, 'hC01', - 2105.8, 1715.6, 305.763)
    set gg_unit_hC01_0033=CreateUnit(p, 'hC01', - 2045.0, 1624.4, 119.879)
endfunction

//===========================================================================
function CreateNeutralHostile takes nothing returns nothing
    local player p= Player(PLAYER_NEUTRAL_AGGRESSIVE)
    local unit u
    local integer unitID
    local trigger t
    local real life

    set u=CreateUnit(p, 'ngno', 301.3, - 4120.2, 54.600)
    call SetUnitAcquireRange(u, 200.0)
    set t=CreateTrigger()
    call TriggerRegisterUnitEvent(t, u, EVENT_UNIT_DEATH)
    call TriggerRegisterUnitEvent(t, u, EVENT_UNIT_CHANGE_OWNER)
    call TriggerAddAction(t, function Unit000056_DropItems)
    set u=CreateUnit(p, 'ngno', 423.5, - 4046.5, 216.000)
    call SetUnitAcquireRange(u, 200.0)
    set u=CreateUnit(p, 'ngna', 499.5, - 4195.6, 110.583)
    call SetUnitAcquireRange(u, 200.0)
    set gg_unit_nC11_0158=CreateUnit(p, 'nC11', - 794.2, 403.1, 257.380)
    set gg_unit_nC25_0164=CreateUnit(p, 'nC25', 2396.7, 1216.3, 231.782)
    set gg_unit_nC27_0165=CreateUnit(p, 'nC27', 1941.2, 1258.2, 243.981)
    set gg_unit_nC26_0166=CreateUnit(p, 'nC26', 1677.0, 1381.7, 243.355)
endfunction

//===========================================================================
function CreateNeutralPassiveBuildings takes nothing returns nothing
    local player p= Player(PLAYER_NEUTRAL_PASSIVE)
    local unit u
    local integer unitID
    local trigger t
    local real life

    set u=CreateUnit(p, 'ngnh', 352.0, - 4512.0, 270.000)
    set gg_unit_ncb5_0013=CreateUnit(p, 'ncb5', 3616.0, 3168.0, 270.000)
    set gg_unit_ncba_0014=CreateUnit(p, 'ncba', 3616.0, 2144.0, 270.000)
    set gg_unit_ncba_0016=CreateUnit(p, 'ncba', 1632.0, 544.0, 270.000)
    set gg_unit_ncb3_0018=CreateUnit(p, 'ncb3', 3552.0, 2592.0, 270.000)
    set gg_unit_ncb5_0019=CreateUnit(p, 'ncb5', 3936.0, 2144.0, 270.000)
    set gg_unit_ncb3_0020=CreateUnit(p, 'ncb3', 4128.0, 2720.0, 270.000)
    set gg_unit_ncbb_0025=CreateUnit(p, 'ncbb', 2464.0, 544.0, 270.000)
    set gg_unit_ncb5_0027=CreateUnit(p, 'ncb5', 1312.0, 864.0, 270.000)
    set u=CreateUnit(p, 'ngnh', 544.0, - 3808.0, 270.000)
    set u=CreateUnit(p, 'ngnh', - 672.0, - 4256.0, 270.000)
    set u=CreateUnit(p, 'nten', - 3360.0, 1888.0, 270.000)
    set u=CreateUnit(p, 'nten', - 3232.0, 1696.0, 270.000)
    set u=CreateUnit(p, 'nten', 3360.0, - 4512.0, 270.000)
    set gg_unit_ncb3_0088=CreateUnit(p, 'ncb3', 1632.0, 2976.0, 270.000)
    set u=CreateUnit(p, 'nten', 4192.0, - 4320.0, 270.000)
    set u=CreateUnit(p, 'nten', 3424.0, - 4192.0, 270.000)
    set u=CreateUnit(p, 'nten', 3552.0, - 4640.0, 270.000)
    set gg_unit_ncbb_0097=CreateUnit(p, 'ncbb', 992.0, 3232.0, 270.000)
    set u=CreateUnit(p, 'nten', - 2720.0, 2400.0, 270.000)
    set u=CreateUnit(p, 'nten', - 2528.0, 2272.0, 270.000)
    set u=CreateUnit(p, 'nten', - 2400.0, 1120.0, 270.000)
    set gg_unit_ncb5_0104=CreateUnit(p, 'ncb5', 2464.0, 2976.0, 270.000)
    set gg_unit_ncb8_0105=CreateUnit(p, 'ncb8', 2912.0, 2848.0, 270.000)
    set gg_unit_ncba_0111=CreateUnit(p, 'ncba', 3040.0, 2400.0, 270.000)
    set gg_unit_ncb3_0113=CreateUnit(p, 'ncb3', 1312.0, 3232.0, 270.000)
    set gg_unit_ncb6_0114=CreateUnit(p, 'ncb6', - 4256.0, - 2784.0, 270.000)
    set gg_unit_ncbb_0115=CreateUnit(p, 'ncbb', 1184.0, 1696.0, 270.000)
    set gg_unit_ncba_0116=CreateUnit(p, 'ncba', 800.0, 2016.0, 270.000)
    set gg_unit_ncb6_0117=CreateUnit(p, 'ncb6', 480.0, 2336.0, 270.000)
    set gg_unit_ncb7_0118=CreateUnit(p, 'ncb7', 160.0, 2528.0, 270.000)
    set gg_unit_ncba_0119=CreateUnit(p, 'ncba', 1696.0, 3744.0, 270.000)
    set gg_unit_ncba_0120=CreateUnit(p, 'ncba', 2784.0, 3296.0, 270.000)
    set gg_unit_ncb3_0121=CreateUnit(p, 'ncb3', 736.0, 800.0, 270.000)
    set gg_unit_ncb7_0122=CreateUnit(p, 'ncb7', 96.0, 928.0, 270.000)
    set gg_unit_ncb3_0123=CreateUnit(p, 'ncb3', 3104.0, 1696.0, 270.000)
    set gg_unit_ncb3_0126=CreateUnit(p, 'ncb3', 2784.0, 800.0, 270.000)
    set gg_unit_ncb5_0127=CreateUnit(p, 'ncb5', 3104.0, 672.0, 270.000)
    set gg_unit_ncbb_0128=CreateUnit(p, 'ncbb', 3808.0, 1696.0, 270.000)
    set gg_unit_ncba_0135=CreateUnit(p, 'ncba', 1184.0, 3552.0, 270.000)
    set gg_unit_ncbb_0136=CreateUnit(p, 'ncbb', 1248.0, 4000.0, 270.000)
    set gg_unit_ncb2_0137=CreateUnit(p, 'ncb2', - 96.0, 4128.0, 270.000)
    set gg_unit_ncb3_0138=CreateUnit(p, 'ncb3', 1568.0, 4192.0, 270.000)
    set gg_unit_ncb0_0139=CreateUnit(p, 'ncb0', 1888.0, 4256.0, 270.000)
    set gg_unit_ncb3_0140=CreateUnit(p, 'ncb3', 3168.0, 3168.0, 270.000)
    set gg_unit_ncbb_0141=CreateUnit(p, 'ncbb', 3232.0, 2848.0, 270.000)
endfunction

//===========================================================================
function CreateNeutralPassive takes nothing returns nothing
    local player p= Player(PLAYER_NEUTRAL_PASSIVE)
    local unit u
    local integer unitID
    local trigger t
    local real life

    set u=CreateUnit(p, 'nshe', - 3159.1, - 1357.1, 341.000)
    set gg_unit_nvil_0022=CreateUnit(p, 'nvil', 715.9, 1253.6, 299.376)
    set gg_unit_nvil_0026=CreateUnit(p, 'nvil', 2582.2, 1959.0, 319.508)
    set u=CreateUnit(p, 'npig', - 2023.7, 2593.2, 253.000)
    set u=CreateUnit(p, 'nshe', - 3824.4, 335.6, 86.000)
    set gg_unit_nvlw_0036=CreateUnit(p, 'nvlw', 2156.6, 1505.0, 348.722)
    set gg_unit_nvlw_0040=CreateUnit(p, 'nvlw', 2820.2, 1334.9, 221.853)
    set gg_unit_nvil_0045=CreateUnit(p, 'nvil', 2225.1, 1489.0, 160.592)
    set gg_unit_nvlk_0047=CreateUnit(p, 'nvlk', 2759.8, 1229.7, 348.915)
    set gg_unit_nvlk_0048=CreateUnit(p, 'nvlk', 2697.6, 1355.8, 226.776)
    set gg_unit_nvlk_0049=CreateUnit(p, 'nvlk', 1119.6, 2695.1, 2.974)
    set gg_unit_nvlk_0050=CreateUnit(p, 'nvlk', 983.0, 2582.2, 358.282)
    set gg_unit_nvlw_0051=CreateUnit(p, 'nvlw', 2573.4, 3824.5, 228.984)
    set u=CreateUnit(p, 'nshe', - 2728.1, - 2897.9, 209.000)
    set u=CreateUnit(p, 'nshe', - 2642.8, - 2880.7, 246.000)
    set u=CreateUnit(p, 'nshe', - 2643.3, - 2923.7, 232.000)
    set u=CreateUnit(p, 'nshe', - 2689.8, - 2927.7, 339.000)
    set u=CreateUnit(p, 'nshe', - 2684.9, - 2854.3, 22.000)
    set gg_unit_nvlw_0085=CreateUnit(p, 'nvlw', 1217.9, 2569.8, 358.834)
    set gg_unit_nvlw_0086=CreateUnit(p, 'nvlw', 1566.8, 1385.1, 213.516)
    set u=CreateUnit(p, 'nshe', - 2506.3, - 4453.7, 26.668)
    set u=CreateUnit(p, 'nshe', 3832.2, 923.5, 31.806)
    set u=CreateUnit(p, 'nshe', 3721.8, 866.2, 185.631)
    set u=CreateUnit(p, 'nshe', 3652.1, 727.6, 38.212)
    set u=CreateUnit(p, 'nshe', 3522.6, 830.4, 227.468)
    set u=CreateUnit(p, 'nshe', 3801.4, 731.9, 81.060)
    set u=CreateUnit(p, 'nshe', 3630.2, 1070.3, 30.829)
    set u=CreateUnit(p, 'npig', - 2338.1, 3006.6, 352.288)
    set gg_unit_nvlw_0147=CreateUnit(p, 'nvlw', 632.0, 3994.7, 219.491)
    set gg_unit_nvil_0148=CreateUnit(p, 'nvil', 620.4, 3937.4, 308.736)
    set gg_unit_nvil_0149=CreateUnit(p, 'nvil', 590.1, 4005.3, 193.926)
    set gg_unit_nvil_0150=CreateUnit(p, 'nvil', 611.6, 3780.0, 61.361)
    set gg_unit_nvlw_0151=CreateUnit(p, 'nvlw', 622.0, 3723.0, 165.437)
    set gg_unit_nvlw_0152=CreateUnit(p, 'nvlw', 564.7, 3704.9, 147.771)
    set u=CreateUnit(p, 'npig', - 2052.7, 3647.9, 181.884)
    set u=CreateUnit(p, 'npig', - 750.6, - 2723.8, 352.288)
endfunction

//===========================================================================
function CreatePlayerBuildings takes nothing returns nothing
    call CreateBuildingsForPlayer2()
    call CreateBuildingsForPlayer9()
endfunction

//===========================================================================
function CreatePlayerUnits takes nothing returns nothing
    call CreateUnitsForPlayer0()
    call CreateUnitsForPlayer1()
    call CreateUnitsForPlayer2()
    call CreateUnitsForPlayer8()
    call CreateUnitsForPlayer9()
endfunction

//===========================================================================
function CreateAllUnits takes nothing returns nothing
    call CreateNeutralPassiveBuildings()
    call CreatePlayerBuildings()
    call CreateNeutralHostile()
    call CreateNeutralPassive()
    call CreatePlayerUnits()
endfunction

//***************************************************************************
//*
//*  Regions
//*
//***************************************************************************

function CreateRegions takes nothing returns nothing
    local weathereffect we

    set gg_rct_Alicia=Rect(- 2976.0, - 4256.0, - 2912.0, - 4192.0)
    set gg_rct_Amy_Diane=Rect(- 1728.0, - 2400.0, - 1536.0, - 2112.0)
    set gg_rct_Armor01=Rect(- 4608.0, - 2912.0, - 4544.0, - 2848.0)
    set gg_rct_Armor02=Rect(- 4480.0, - 2912.0, - 4416.0, - 2848.0)
    set gg_rct_Arthas_End=Rect(- 2880.0, 1856.0, - 2816.0, 1920.0)
    set gg_rct_Bandit_Camp_Trigger=Rect(3040.0, - 4000.0, 4960.0, - 3744.0)
    set gg_rct_Bandit_Facing=Rect(3584.0, - 3616.0, 3648.0, - 3520.0)
    set gg_rct_Bandit01_End=Rect(3584.0, - 4448.0, 3648.0, - 4384.0)
    set gg_rct_Bandit02_End=Rect(3584.0, - 4224.0, 3648.0, - 4160.0)
    set gg_rct_Bandit03_End=Rect(3776.0, - 4192.0, 3872.0, - 4096.0)
    set gg_rct_Bandit04_End=Rect(3936.0, - 4160.0, 4000.0, - 4096.0)
    set gg_rct_BanditScene=Rect(- 2592.0, - 1056.0, - 2016.0, - 416.0)
    set gg_rct_BanditScene_ACTION=Rect(- 3136.0, 608.0, - 2496.0, 800.0)
    set gg_rct_Benedict=Rect(- 832.0, 352.0, - 736.0, 448.0)
    set gg_rct_Blake01=Rect(- 3744.0, - 672.0, - 3680.0, - 608.0)
    set gg_rct_Blake02=Rect(- 3616.0, - 4032.0, - 3552.0, - 3968.0)
    set gg_rct_CaravanLeader02=Rect(448.0, 3840.0, 512.0, 3904.0)
    set gg_rct_Center_of_Village=Rect(1952.0, 736.0, 2080.0, 896.0)
    set gg_rct_ChildFlee=Rect(- 4192.0, - 2976.0, - 4064.0, - 2848.0)
    set gg_rct_Coward_Dest_01=Rect(2688.0, 1632.0, 2784.0, 1728.0)
    set gg_rct_Coward_Dest_02=Rect(2944.0, 1792.0, 3040.0, 1888.0)
    set gg_rct_Coward_Dest_03=Rect(1312.0, - 96.0, 1408.0, 0.0)
    set gg_rct_Crate01=Rect(- 3264.0, 1792.0, - 3136.0, 1920.0)
    set gg_rct_Crate02=Rect(- 2176.0, 1280.0, - 2048.0, 1408.0)
    set gg_rct_CreateKnight=Rect(2592.0, - 928.0, 2656.0, - 864.0)
    set gg_rct_End_Pan=Rect(416.0, 3712.0, 480.0, 3776.0)
    set gg_rct_EndArthas=Rect(1728.0, - 192.0, 1792.0, - 128.0)
    set gg_rct_EndBoss=Rect(32.0, 3808.0, 128.0, 3904.0)
    set gg_rct_EndChild=Rect(2048.0, - 128.0, 2112.0, - 64.0)
    set gg_rct_EndMan=Rect(2112.0, 0.0, 2176.0, 64.0)
    set gg_rct_EndWoman=Rect(2144.0, - 128.0, 2208.0, - 64.0)
    set gg_rct_Ensnaree_Dest_01=Rect(1888.0, 1504.0, 1984.0, 1600.0)
    set gg_rct_Ensnaree_Dest_02=Rect(1216.0, 2784.0, 1344.0, 2912.0)
    set gg_rct_Ensnaree_Escapes=Rect(1216.0, 2880.0, 1344.0, 3008.0)
    set gg_rct_Ensnarer_Dest=Rect(1984.0, 1184.0, 2080.0, 1280.0)
    set gg_rct_FarmerBob=Rect(- 3744.0, 64.0, - 3360.0, 416.0)
    set gg_rct_FarmerTed=Rect(- 4192.0, - 2432.0, - 3904.0, - 2112.0)
    set gg_rct_FinalFootman01=Rect(- 2912.0, 2016.0, - 2848.0, 2080.0)
    set gg_rct_FinalFootman02=Rect(- 3040.0, 1888.0, - 2976.0, 1952.0)
    set gg_rct_FinalFootman03=Rect(- 2848.0, 1568.0, - 2784.0, 1632.0)
    set gg_rct_FinalFootman04=Rect(- 2752.0, 1632.0, - 2688.0, 1696.0)
    set gg_rct_FleeingVillagerStart=Rect(2080.0, 320.0, 2144.0, 384.0)
    set gg_rct_Footman_01_End=Rect(- 3008.0, 2208.0, - 2944.0, 2272.0)
    set gg_rct_Footman_02_End=Rect(- 3296.0, 1824.0, - 3232.0, 1888.0)
    set gg_rct_Footman01=Rect(- 2368.0, 1760.0, - 2304.0, 1824.0)
    set gg_rct_Footman02=Rect(- 2432.0, 1504.0, - 2368.0, 1568.0)
    set gg_rct_Footman03=Rect(- 2240.0, 1664.0, - 2176.0, 1728.0)
    set gg_rct_Footman04=Rect(- 2336.0, 1408.0, - 2272.0, 1472.0)
    set gg_rct_Footman05=Rect(- 2592.0, 1408.0, - 2528.0, 1472.0)
    set gg_rct_Footman06=Rect(- 2816.0, 1344.0, - 2752.0, 1408.0)
    set gg_rct_Footman07=Rect(- 2528.0, 1280.0, - 2464.0, 1344.0)
    set gg_rct_Footman08=Rect(- 2752.0, 1216.0, - 2688.0, 1280.0)
    set gg_rct_Ghost_Facing=Rect(3296.0, - 1056.0, 3520.0, - 832.0)
    set gg_rct_Ghost01=Rect(3424.0, - 320.0, 3520.0, - 192.0)
    set gg_rct_Ghost02=Rect(3648.0, - 320.0, 3776.0, - 160.0)
    set gg_rct_Ghost03=Rect(3392.0, - 576.0, 3520.0, - 448.0)
    set gg_rct_Ghost04=Rect(3648.0, - 576.0, 3776.0, - 448.0)
    set gg_rct_Ghost05=Rect(3872.0, - 576.0, 4032.0, - 448.0)
    set gg_rct_Ghost06=Rect(3648.0, - 832.0, 3776.0, - 704.0)
    set gg_rct_Ghost07=Rect(3904.0, - 832.0, 4032.0, - 704.0)
    set gg_rct_GnollCamp=Rect(224.0, - 4288.0, 576.0, - 3936.0)
    set gg_rct_Grunt01Start=Rect(1952.0, 576.0, 2016.0, 640.0)
    set gg_rct_Grunt02Start=Rect(2144.0, 544.0, 2208.0, 608.0)
    set gg_rct_GruntSurprise_Dest=Rect(2272.0, 1152.0, 2368.0, 1248.0)
    set gg_rct_House_Escape_01=Rect(1728.0, 3968.0, 1856.0, 4096.0)
    set gg_rct_House_Escape_02=Rect(2176.0, 4160.0, 2304.0, 4288.0)
    set gg_rct_House_Escape_03=Rect(2592.0, 4224.0, 2720.0, 4352.0)
    set gg_rct_House_Inhabitant_Dest_01=Rect(1760.0, 3872.0, 1888.0, 4000.0)
    set gg_rct_House_Inhabitant_Dest_02=Rect(2176.0, 4064.0, 2304.0, 4192.0)
    set gg_rct_House_Inhabitant_Dest_03=Rect(2592.0, 4128.0, 2720.0, 4256.0)
    set gg_rct_House_Inhabitants_Spawn=Rect(2688.0, 3200.0, 2880.0, 3392.0)
    set gg_rct_House_Killer_01=Rect(2752.0, 3456.0, 2848.0, 3552.0)
    set gg_rct_House_Killer_02=Rect(2592.0, 3168.0, 2688.0, 3264.0)
    set gg_rct_Invader01=Rect(288.0, 1824.0, 352.0, 1888.0)
    set gg_rct_Invader02=Rect(128.0, 1856.0, 192.0, 1920.0)
    set gg_rct_Knight_Destination=Rect(2112.0, - 416.0, 2176.0, - 352.0)
    set gg_rct_LedgerCenter=Rect(352.0, - 1408.0, 480.0, - 1280.0)
    set gg_rct_LedgerTrigger01=Rect(- 928.0, - 2176.0, - 768.0, - 1152.0)
    set gg_rct_Little_Timmys_Cage_Pan=Rect(352.0, - 4160.0, 416.0, - 4096.0)
    set gg_rct_Little_Timmys_Home=Rect(- 3232.0, - 4864.0, - 2432.0, - 3872.0)
    set gg_rct_LittleTimmysSpawnPoint=Rect(640.0, - 4160.0, 704.0, - 4096.0)
    set gg_rct_Margaret=Rect(- 2432.0, - 1568.0, - 2272.0, - 1408.0)
    set gg_rct_Menag=Rect(576.0, - 1408.0, 640.0, - 1344.0)
    set gg_rct_Menag_End=Rect(3840.0, - 4384.0, 3904.0, - 4320.0)
    set gg_rct_OrcAmbusher02=Rect(3136.0, 1568.0, 3200.0, 1632.0)
    set gg_rct_Patrol01=Rect(640.0, 2304.0, 1120.0, 2784.0)
    set gg_rct_Patrol03=Rect(2432.0, 2240.0, 2880.0, 2688.0)
    set gg_rct_Patrol04=Rect(2688.0, 896.0, 3232.0, 1376.0)
    set gg_rct_Pursuit_Center=Rect(1952.0, 192.0, 2048.0, 288.0)
    set gg_rct_PursuitTarget=Rect(1856.0, - 352.0, 1952.0, - 256.0)
    set gg_rct_Recruit_01_End=Rect(- 4544.0, - 3040.0, - 4480.0, - 2976.0)
    set gg_rct_Recruit_02_End=Rect(- 4448.0, - 2976.0, - 4384.0, - 2912.0)
    set gg_rct_Recruit_Pan=Rect(- 4512.0, - 3136.0, - 4448.0, - 3072.0)
    set gg_rct_Recruit_Trigger=Rect(- 4288.0, - 3584.0, - 4224.0, - 2912.0)
    set gg_rct_RemoveCaravan=Rect(- 96.0, 5184.0, 800.0, 5408.0)
    set gg_rct_RescuableFootmen=Rect(32.0, 1792.0, 448.0, 2176.0)
    set gg_rct_RescueFootmen01=Rect(736.0, 800.0, 928.0, 1664.0)
    set gg_rct_RiverLoop01=Rect(1216.0, - 1536.0, 1920.0, - 960.0)
    call SetSoundPosition(gg_snd_WaterStreamLoop1, 1568.0, - 1248.0, - 195.7)
    call RegisterStackedSound(gg_snd_WaterStreamLoop1, true, 704.0, 576.0)
    set gg_rct_RiverLoop02=Rect(1728.0, - 1984.0, 2432.0, - 1408.0)
    call SetSoundPosition(gg_snd_WaterStreamLoop1, 2080.0, - 1696.0, - 248.0)
    call RegisterStackedSound(gg_snd_WaterStreamLoop1, true, 704.0, 576.0)
    set gg_rct_RiverLoop03=Rect(2624.0, - 4416.0, 3136.0, - 3136.0)
    call SetSoundPosition(gg_snd_WaterStreamLoop1, 2880.0, - 3776.0, - 176.8)
    call RegisterStackedSound(gg_snd_WaterStreamLoop1, true, 512.0, 1280.0)
    set gg_rct_RiverLoop04=Rect(3872.0, - 3040.0, 4576.0, - 2528.0)
    call SetSoundPosition(gg_snd_WaterStreamLoop1, 4224.0, - 2784.0, - 248.7)
    call RegisterStackedSound(gg_snd_WaterStreamLoop1, true, 704.0, 512.0)
    set gg_rct_RiverLoop05=Rect(416.0, - 896.0, 1120.0, - 320.0)
    call SetSoundPosition(gg_snd_WaterStreamLoop1, 768.0, - 608.0, - 253.6)
    call RegisterStackedSound(gg_snd_WaterStreamLoop1, true, 704.0, 576.0)
    set gg_rct_Ryan01=Rect(- 3712.0, - 736.0, - 3648.0, - 672.0)
    set gg_rct_Ryan02=Rect(- 3648.0, - 4096.0, - 3584.0, - 4032.0)
    set gg_rct_Slave_Collisions=Rect(- 64.0, 4576.0, 800.0, 4704.0)
    set gg_rct_Starting_Forces=Rect(- 4032.0, 2496.0, - 3680.0, 2912.0)
    set gg_rct_Stephanie=Rect(- 3584.0, - 1760.0, - 3392.0, - 1472.0)
    set gg_rct_Surprise_Attack_Center=Rect(- 832.0, 224.0, - 768.0, 288.0)
    set gg_rct_Surprise_Attack_Target=Rect(- 1120.0, - 192.0, - 672.0, 128.0)
    set gg_rct_Surprise_Attack_Trigger_01=Rect(- 1600.0, - 256.0, - 544.0, 32.0)
    set gg_rct_Surprise_Attack_Trigger_02=Rect(- 1440.0, 32.0, - 224.0, 800.0)
    set gg_rct_Timmy_Go_Home=Rect(- 3008.0, - 4448.0, - 2944.0, - 4384.0)
    set gg_rct_TimmyFreeCin_Alicia=Rect(- 224.0, - 4064.0, - 128.0, - 3968.0)
    set gg_rct_TimmyFreeCin_Arthas=Rect(32.0, - 4224.0, 128.0, - 4128.0)
    set gg_rct_TimmyFreeCin_ArthasGuys=Rect(- 384.0, - 4416.0, - 64.0, - 4160.0)
    set gg_rct_TimmyQuestRequiredUnits=Rect(- 3104.0, - 4480.0, - 2848.0, - 4128.0)
    set gg_rct_TownCenter=Rect(2016.0, 1824.0, 2208.0, 1984.0)
    set gg_rct_Trash=Rect(- 2784.0, 3744.0, - 1376.0, 4736.0)
    set gg_rct_Trigger_House_Collapse=Rect(1792.0, 2944.0, 2304.0, 3136.0)
    set gg_rct_TriggerAmbush=Rect(1728.0, 480.0, 2368.0, 640.0)
    set gg_rct_TriggerEndCinematic_01=Rect(1088.0, 2112.0, 1216.0, 2944.0)
    set gg_rct_TriggerEndCinematic_02=Rect(192.0, 2240.0, 960.0, 2528.0)
    set gg_rct_TriggerGnollCamp01=Rect(- 992.0, - 3712.0, - 320.0, - 3488.0)
    set gg_rct_TriggerGnollCamp02=Rect(- 320.0, - 3616.0, 64.0, - 3328.0)
    set gg_rct_TriggerLedger02=Rect(928.0, - 2048.0, 1024.0, - 1792.0)
    set gg_rct_TriggerPursuit01=Rect(1120.0, - 768.0, 3040.0, - 384.0)
    set gg_rct_Uther_01=Rect(- 2688.0, 1696.0, - 2624.0, 1760.0)
    set gg_rct_UtherDelete=Rect(- 5120.0, 2464.0, - 4544.0, 3520.0)
    set gg_rct_Warlord_1=Rect(2688.0, 992.0, 2848.0, 1152.0)
    set gg_rct_Warlord_2_Kill_Villager=Rect(2304.0, 1120.0, 2496.0, 1312.0)
    set gg_rct_Warlord_3_Kill_Villager=Rect(1856.0, 1152.0, 2016.0, 1344.0)
    set gg_rct_Warlord_4_Kill_Villager=Rect(1568.0, 1280.0, 1760.0, 1472.0)
    set gg_rct_Warlord_5_Run_Here=Rect(1408.0, 2112.0, 1536.0, 2240.0)
    set gg_rct_WarlordAndCrew=Rect(- 64.0, 3680.0, 384.0, 4192.0)
    set gg_rct_WaterLoop01=Rect(- 2656.0, - 2880.0, - 2176.0, - 2304.0)
    call SetSoundPosition(gg_snd_WaterLakeLoop1, - 2416.0, - 2592.0, - 244.0)
    call RegisterStackedSound(gg_snd_WaterLakeLoop1, true, 480.0, 576.0)
    set gg_rct_WaterLoop02=Rect(2432.0, - 3136.0, 3424.0, - 2080.0)
    call SetSoundPosition(gg_snd_WaterLakeLoop1, 2928.0, - 2608.0, - 124.7)
    call RegisterStackedSound(gg_snd_WaterLakeLoop1, true, 992.0, 1056.0)
    set gg_rct_Crate03=Rect(1984.0, 4032.0, 2112.0, 4160.0)
    set gg_rct_TimmyIsFreePan=Rect(- 64.0, - 4160.0, 32.0, - 4064.0)
    set gg_rct_LedgerQuest=Rect(- 128.0, - 2048.0, 896.0, - 768.0)
    set gg_rct_Region_141=Rect(160.0, - 1472.0, 672.0, - 1056.0)
    set gg_rct_Waterfall=Rect(544.0, - 1504.0, 1728.0, - 384.0)
    set gg_rct_WaterfallVis=Rect(576.0, - 96.0, 736.0, 64.0)
endfunction

//***************************************************************************
//*
//*  Cameras
//*
//***************************************************************************

function CreateCameras takes nothing returns nothing

    set gg_cam_Close_Arthas=CreateCameraSetup()
    call CameraSetupSetField(gg_cam_Close_Arthas, CAMERA_FIELD_ZOFFSET, 0.0, 0.0)
    call CameraSetupSetField(gg_cam_Close_Arthas, CAMERA_FIELD_ROTATION, 83.7, 0.0)
    call CameraSetupSetField(gg_cam_Close_Arthas, CAMERA_FIELD_ANGLE_OF_ATTACK, 330.6, 0.0)
    call CameraSetupSetField(gg_cam_Close_Arthas, CAMERA_FIELD_TARGET_DISTANCE, 830.1, 0.0)
    call CameraSetupSetField(gg_cam_Close_Arthas, CAMERA_FIELD_ROLL, 0.0, 0.0)
    call CameraSetupSetField(gg_cam_Close_Arthas, CAMERA_FIELD_FIELD_OF_VIEW, 90.0, 0.0)
    call CameraSetupSetField(gg_cam_Close_Arthas, CAMERA_FIELD_FARZ, 2500.0, 0.0)
    call CameraSetupSetDestPosition(gg_cam_Close_Arthas, - 2729.0, 1922.1, 0.0)

    set gg_cam_Strahnbrad01=CreateCameraSetup()
    call CameraSetupSetField(gg_cam_Strahnbrad01, CAMERA_FIELD_ZOFFSET, 0.0, 0.0)
    call CameraSetupSetField(gg_cam_Strahnbrad01, CAMERA_FIELD_ROTATION, 51.3, 0.0)
    call CameraSetupSetField(gg_cam_Strahnbrad01, CAMERA_FIELD_ANGLE_OF_ATTACK, 347.7, 0.0)
    call CameraSetupSetField(gg_cam_Strahnbrad01, CAMERA_FIELD_TARGET_DISTANCE, 1127.0, 0.0)
    call CameraSetupSetField(gg_cam_Strahnbrad01, CAMERA_FIELD_ROLL, 0.0, 0.0)
    call CameraSetupSetField(gg_cam_Strahnbrad01, CAMERA_FIELD_FIELD_OF_VIEW, 80.0, 0.0)
    call CameraSetupSetField(gg_cam_Strahnbrad01, CAMERA_FIELD_FARZ, 4500.0, 0.0)
    call CameraSetupSetDestPosition(gg_cam_Strahnbrad01, 1490.2, 1993.6, 0.0)

    set gg_cam_Strahnbrad02=CreateCameraSetup()
    call CameraSetupSetField(gg_cam_Strahnbrad02, CAMERA_FIELD_ZOFFSET, 0.0, 0.0)
    call CameraSetupSetField(gg_cam_Strahnbrad02, CAMERA_FIELD_ROTATION, 47.3, 0.0)
    call CameraSetupSetField(gg_cam_Strahnbrad02, CAMERA_FIELD_ANGLE_OF_ATTACK, 337.1, 0.0)
    call CameraSetupSetField(gg_cam_Strahnbrad02, CAMERA_FIELD_TARGET_DISTANCE, 1650.0, 0.0)
    call CameraSetupSetField(gg_cam_Strahnbrad02, CAMERA_FIELD_ROLL, 0.0, 0.0)
    call CameraSetupSetField(gg_cam_Strahnbrad02, CAMERA_FIELD_FIELD_OF_VIEW, 75.0, 0.0)
    call CameraSetupSetField(gg_cam_Strahnbrad02, CAMERA_FIELD_FARZ, 4500.0, 0.0)
    call CameraSetupSetDestPosition(gg_cam_Strahnbrad02, 1831.5, 2356.8, 0.0)

    set gg_cam_Strahnbrad03=CreateCameraSetup()
    call CameraSetupSetField(gg_cam_Strahnbrad03, CAMERA_FIELD_ZOFFSET, 0.0, 0.0)
    call CameraSetupSetField(gg_cam_Strahnbrad03, CAMERA_FIELD_ROTATION, 178.6, 0.0)
    call CameraSetupSetField(gg_cam_Strahnbrad03, CAMERA_FIELD_ANGLE_OF_ATTACK, 335.9, 0.0)
    call CameraSetupSetField(gg_cam_Strahnbrad03, CAMERA_FIELD_TARGET_DISTANCE, 974.2, 0.0)
    call CameraSetupSetField(gg_cam_Strahnbrad03, CAMERA_FIELD_ROLL, 0.0, 0.0)
    call CameraSetupSetField(gg_cam_Strahnbrad03, CAMERA_FIELD_FIELD_OF_VIEW, 80.0, 0.0)
    call CameraSetupSetField(gg_cam_Strahnbrad03, CAMERA_FIELD_FARZ, 3450.0, 0.0)
    call CameraSetupSetDestPosition(gg_cam_Strahnbrad03, 2492.8, 1548.9, 0.0)

    set gg_cam_Strahnbrad04=CreateCameraSetup()
    call CameraSetupSetField(gg_cam_Strahnbrad04, CAMERA_FIELD_ZOFFSET, 0.0, 0.0)
    call CameraSetupSetField(gg_cam_Strahnbrad04, CAMERA_FIELD_ROTATION, 177.6, 0.0)
    call CameraSetupSetField(gg_cam_Strahnbrad04, CAMERA_FIELD_ANGLE_OF_ATTACK, 339.1, 0.0)
    call CameraSetupSetField(gg_cam_Strahnbrad04, CAMERA_FIELD_TARGET_DISTANCE, 974.2, 0.0)
    call CameraSetupSetField(gg_cam_Strahnbrad04, CAMERA_FIELD_ROLL, 0.0, 0.0)
    call CameraSetupSetField(gg_cam_Strahnbrad04, CAMERA_FIELD_FIELD_OF_VIEW, 80.0, 0.0)
    call CameraSetupSetField(gg_cam_Strahnbrad04, CAMERA_FIELD_FARZ, 3550.0, 0.0)
    call CameraSetupSetDestPosition(gg_cam_Strahnbrad04, 2285.1, 1105.0, 0.0)

    set gg_cam_Start01=CreateCameraSetup()
    call CameraSetupSetField(gg_cam_Start01, CAMERA_FIELD_ZOFFSET, 0.0, 0.0)
    call CameraSetupSetField(gg_cam_Start01, CAMERA_FIELD_ROTATION, 67.9, 0.0)
    call CameraSetupSetField(gg_cam_Start01, CAMERA_FIELD_ANGLE_OF_ATTACK, 347.6, 0.0)
    call CameraSetupSetField(gg_cam_Start01, CAMERA_FIELD_TARGET_DISTANCE, 1815.0, 0.0)
    call CameraSetupSetField(gg_cam_Start01, CAMERA_FIELD_ROLL, 0.0, 0.0)
    call CameraSetupSetField(gg_cam_Start01, CAMERA_FIELD_FIELD_OF_VIEW, 80.0, 0.0)
    call CameraSetupSetField(gg_cam_Start01, CAMERA_FIELD_FARZ, 5000.0, 0.0)
    call CameraSetupSetDestPosition(gg_cam_Start01, - 2804.3, 1653.9, 0.0)

    set gg_cam_Final01=CreateCameraSetup()
    call CameraSetupSetField(gg_cam_Final01, CAMERA_FIELD_ZOFFSET, 0.0, 0.0)
    call CameraSetupSetField(gg_cam_Final01, CAMERA_FIELD_ROTATION, 123.3, 0.0)
    call CameraSetupSetField(gg_cam_Final01, CAMERA_FIELD_ANGLE_OF_ATTACK, 336.0, 0.0)
    call CameraSetupSetField(gg_cam_Final01, CAMERA_FIELD_TARGET_DISTANCE, 1127.0, 0.0)
    call CameraSetupSetField(gg_cam_Final01, CAMERA_FIELD_ROLL, 0.0, 0.0)
    call CameraSetupSetField(gg_cam_Final01, CAMERA_FIELD_FIELD_OF_VIEW, 100.0, 0.0)
    call CameraSetupSetField(gg_cam_Final01, CAMERA_FIELD_FARZ, 5000.0, 0.0)
    call CameraSetupSetDestPosition(gg_cam_Final01, - 47.8, 4145.9, 0.0)

    set gg_cam_Final02=CreateCameraSetup()
    call CameraSetupSetField(gg_cam_Final02, CAMERA_FIELD_ZOFFSET, 0.0, 0.0)
    call CameraSetupSetField(gg_cam_Final02, CAMERA_FIELD_ROTATION, 70.5, 0.0)
    call CameraSetupSetField(gg_cam_Final02, CAMERA_FIELD_ANGLE_OF_ATTACK, 325.4, 0.0)
    call CameraSetupSetField(gg_cam_Final02, CAMERA_FIELD_TARGET_DISTANCE, 846.7, 0.0)
    call CameraSetupSetField(gg_cam_Final02, CAMERA_FIELD_ROLL, 0.0, 0.0)
    call CameraSetupSetField(gg_cam_Final02, CAMERA_FIELD_FIELD_OF_VIEW, 105.0, 0.0)
    call CameraSetupSetField(gg_cam_Final02, CAMERA_FIELD_FARZ, 5000.0, 0.0)
    call CameraSetupSetDestPosition(gg_cam_Final02, 407.5, 3999.1, 0.0)

    set gg_cam_Victory01=CreateCameraSetup()
    call CameraSetupSetField(gg_cam_Victory01, CAMERA_FIELD_ZOFFSET, 0.0, 0.0)
    call CameraSetupSetField(gg_cam_Victory01, CAMERA_FIELD_ROTATION, 125.0, 0.0)
    call CameraSetupSetField(gg_cam_Victory01, CAMERA_FIELD_ANGLE_OF_ATTACK, 323.5, 0.0)
    call CameraSetupSetField(gg_cam_Victory01, CAMERA_FIELD_TARGET_DISTANCE, 1127.0, 0.0)
    call CameraSetupSetField(gg_cam_Victory01, CAMERA_FIELD_ROLL, 0.0, 0.0)
    call CameraSetupSetField(gg_cam_Victory01, CAMERA_FIELD_FIELD_OF_VIEW, 80.0, 0.0)
    call CameraSetupSetField(gg_cam_Victory01, CAMERA_FIELD_FARZ, 4000.0, 0.0)
    call CameraSetupSetDestPosition(gg_cam_Victory01, 1732.0, 493.9, 0.0)

    set gg_cam_Victory02=CreateCameraSetup()
    call CameraSetupSetField(gg_cam_Victory02, CAMERA_FIELD_ZOFFSET, 0.0, 0.0)
    call CameraSetupSetField(gg_cam_Victory02, CAMERA_FIELD_ROTATION, 114.5, 0.0)
    call CameraSetupSetField(gg_cam_Victory02, CAMERA_FIELD_ANGLE_OF_ATTACK, 334.1, 0.0)
    call CameraSetupSetField(gg_cam_Victory02, CAMERA_FIELD_TARGET_DISTANCE, 846.7, 0.0)
    call CameraSetupSetField(gg_cam_Victory02, CAMERA_FIELD_ROLL, 0.0, 0.0)
    call CameraSetupSetField(gg_cam_Victory02, CAMERA_FIELD_FIELD_OF_VIEW, 85.0, 0.0)
    call CameraSetupSetField(gg_cam_Victory02, CAMERA_FIELD_FARZ, 4100.0, 0.0)
    call CameraSetupSetDestPosition(gg_cam_Victory02, 1898.6, 165.9, 0.0)

    set gg_cam_Cam1Panstart=CreateCameraSetup()
    call CameraSetupSetField(gg_cam_Cam1Panstart, CAMERA_FIELD_ZOFFSET, 0.0, 0.0)
    call CameraSetupSetField(gg_cam_Cam1Panstart, CAMERA_FIELD_ROTATION, 328.7, 0.0)
    call CameraSetupSetField(gg_cam_Cam1Panstart, CAMERA_FIELD_ANGLE_OF_ATTACK, 319.3, 0.0)
    call CameraSetupSetField(gg_cam_Cam1Panstart, CAMERA_FIELD_TARGET_DISTANCE, 936.6, 0.0)
    call CameraSetupSetField(gg_cam_Cam1Panstart, CAMERA_FIELD_ROLL, 0.0, 0.0)
    call CameraSetupSetField(gg_cam_Cam1Panstart, CAMERA_FIELD_FIELD_OF_VIEW, 75.0, 0.0)
    call CameraSetupSetField(gg_cam_Cam1Panstart, CAMERA_FIELD_FARZ, 3000.0, 0.0)
    call CameraSetupSetDestPosition(gg_cam_Cam1Panstart, - 2002.1, 1377.2, 0.0)

    set gg_cam_Cam2PanEnd=CreateCameraSetup()
    call CameraSetupSetField(gg_cam_Cam2PanEnd, CAMERA_FIELD_ZOFFSET, 0.0, 0.0)
    call CameraSetupSetField(gg_cam_Cam2PanEnd, CAMERA_FIELD_ROTATION, 328.7, 0.0)
    call CameraSetupSetField(gg_cam_Cam2PanEnd, CAMERA_FIELD_ANGLE_OF_ATTACK, 319.3, 0.0)
    call CameraSetupSetField(gg_cam_Cam2PanEnd, CAMERA_FIELD_TARGET_DISTANCE, 936.6, 0.0)
    call CameraSetupSetField(gg_cam_Cam2PanEnd, CAMERA_FIELD_ROLL, 0.0, 0.0)
    call CameraSetupSetField(gg_cam_Cam2PanEnd, CAMERA_FIELD_FIELD_OF_VIEW, 75.0, 0.0)
    call CameraSetupSetField(gg_cam_Cam2PanEnd, CAMERA_FIELD_FARZ, 3000.0, 0.0)
    call CameraSetupSetDestPosition(gg_cam_Cam2PanEnd, - 2421.8, 1628.1, 0.0)

    set gg_cam_Cam3UtherArthasMeet=CreateCameraSetup()
    call CameraSetupSetField(gg_cam_Cam3UtherArthasMeet, CAMERA_FIELD_ZOFFSET, 0.0, 0.0)
    call CameraSetupSetField(gg_cam_Cam3UtherArthasMeet, CAMERA_FIELD_ROTATION, 19.5, 0.0)
    call CameraSetupSetField(gg_cam_Cam3UtherArthasMeet, CAMERA_FIELD_ANGLE_OF_ATTACK, 327.5, 0.0)
    call CameraSetupSetField(gg_cam_Cam3UtherArthasMeet, CAMERA_FIELD_TARGET_DISTANCE, 840.7, 0.0)
    call CameraSetupSetField(gg_cam_Cam3UtherArthasMeet, CAMERA_FIELD_ROLL, 0.0, 0.0)
    call CameraSetupSetField(gg_cam_Cam3UtherArthasMeet, CAMERA_FIELD_FIELD_OF_VIEW, 90.0, 0.0)
    call CameraSetupSetField(gg_cam_Cam3UtherArthasMeet, CAMERA_FIELD_FARZ, 3636.4, 0.0)
    call CameraSetupSetDestPosition(gg_cam_Cam3UtherArthasMeet, - 2599.8, 1833.2, 0.0)

    set gg_cam_CamArthasIntroPanEnd=CreateCameraSetup()
    call CameraSetupSetField(gg_cam_CamArthasIntroPanEnd, CAMERA_FIELD_ZOFFSET, 0.0, 0.0)
    call CameraSetupSetField(gg_cam_CamArthasIntroPanEnd, CAMERA_FIELD_ROTATION, 94.6, 0.0)
    call CameraSetupSetField(gg_cam_CamArthasIntroPanEnd, CAMERA_FIELD_ANGLE_OF_ATTACK, 350.1, 0.0)
    call CameraSetupSetField(gg_cam_CamArthasIntroPanEnd, CAMERA_FIELD_TARGET_DISTANCE, 956.1, 0.0)
    call CameraSetupSetField(gg_cam_CamArthasIntroPanEnd, CAMERA_FIELD_ROLL, 0.0, 0.0)
    call CameraSetupSetField(gg_cam_CamArthasIntroPanEnd, CAMERA_FIELD_FIELD_OF_VIEW, 85.0, 0.0)
    call CameraSetupSetField(gg_cam_CamArthasIntroPanEnd, CAMERA_FIELD_FARZ, 6584.5, 0.0)
    call CameraSetupSetDestPosition(gg_cam_CamArthasIntroPanEnd, - 2834.2, 2200.2, 0.0)

    set gg_cam_CamArthasIntroPanStart=CreateCameraSetup()
    call CameraSetupSetField(gg_cam_CamArthasIntroPanStart, CAMERA_FIELD_ZOFFSET, 0.0, 0.0)
    call CameraSetupSetField(gg_cam_CamArthasIntroPanStart, CAMERA_FIELD_ROTATION, 90.1, 0.0)
    call CameraSetupSetField(gg_cam_CamArthasIntroPanStart, CAMERA_FIELD_ANGLE_OF_ATTACK, 299.5, 0.0)
    call CameraSetupSetField(gg_cam_CamArthasIntroPanStart, CAMERA_FIELD_TARGET_DISTANCE, 1363.6, 0.0)
    call CameraSetupSetField(gg_cam_CamArthasIntroPanStart, CAMERA_FIELD_ROLL, 0.0, 0.0)
    call CameraSetupSetField(gg_cam_CamArthasIntroPanStart, CAMERA_FIELD_FIELD_OF_VIEW, 85.0, 0.0)
    call CameraSetupSetField(gg_cam_CamArthasIntroPanStart, CAMERA_FIELD_FARZ, 5000.0, 0.0)
    call CameraSetupSetDestPosition(gg_cam_CamArthasIntroPanStart, - 3170.9, 2372.1, 0.0)

    set gg_cam_CamEndCounterAngle=CreateCameraSetup()
    call CameraSetupSetField(gg_cam_CamEndCounterAngle, CAMERA_FIELD_ZOFFSET, 0.0, 0.0)
    call CameraSetupSetField(gg_cam_CamEndCounterAngle, CAMERA_FIELD_ROTATION, 23.7, 0.0)
    call CameraSetupSetField(gg_cam_CamEndCounterAngle, CAMERA_FIELD_ANGLE_OF_ATTACK, 334.0, 0.0)
    call CameraSetupSetField(gg_cam_CamEndCounterAngle, CAMERA_FIELD_TARGET_DISTANCE, 846.7, 0.0)
    call CameraSetupSetField(gg_cam_CamEndCounterAngle, CAMERA_FIELD_ROLL, 0.0, 0.0)
    call CameraSetupSetField(gg_cam_CamEndCounterAngle, CAMERA_FIELD_FIELD_OF_VIEW, 80.0, 0.0)
    call CameraSetupSetField(gg_cam_CamEndCounterAngle, CAMERA_FIELD_FARZ, 4000.0, 0.0)
    call CameraSetupSetDestPosition(gg_cam_CamEndCounterAngle, 2140.1, - 108.6, 0.0)

    set gg_cam_Start01a=CreateCameraSetup()
    call CameraSetupSetField(gg_cam_Start01a, CAMERA_FIELD_ZOFFSET, 0.0, 0.0)
    call CameraSetupSetField(gg_cam_Start01a, CAMERA_FIELD_ROTATION, 76.9, 0.0)
    call CameraSetupSetField(gg_cam_Start01a, CAMERA_FIELD_ANGLE_OF_ATTACK, 336.4, 0.0)
    call CameraSetupSetField(gg_cam_Start01a, CAMERA_FIELD_TARGET_DISTANCE, 1815.0, 0.0)
    call CameraSetupSetField(gg_cam_Start01a, CAMERA_FIELD_ROLL, 0.0, 0.0)
    call CameraSetupSetField(gg_cam_Start01a, CAMERA_FIELD_FIELD_OF_VIEW, 80.0, 0.0)
    call CameraSetupSetField(gg_cam_Start01a, CAMERA_FIELD_FARZ, 3800.0, 0.0)
    call CameraSetupSetDestPosition(gg_cam_Start01a, - 2804.3, 1653.9, 0.0)

    set gg_cam_TimmyFreeCin1=CreateCameraSetup()
    call CameraSetupSetField(gg_cam_TimmyFreeCin1, CAMERA_FIELD_ZOFFSET, 0.0, 0.0)
    call CameraSetupSetField(gg_cam_TimmyFreeCin1, CAMERA_FIELD_ROTATION, 90.0, 0.0)
    call CameraSetupSetField(gg_cam_TimmyFreeCin1, CAMERA_FIELD_ANGLE_OF_ATTACK, 304.0, 0.0)
    call CameraSetupSetField(gg_cam_TimmyFreeCin1, CAMERA_FIELD_TARGET_DISTANCE, 1650.0, 0.0)
    call CameraSetupSetField(gg_cam_TimmyFreeCin1, CAMERA_FIELD_ROLL, 0.0, 0.0)
    call CameraSetupSetField(gg_cam_TimmyFreeCin1, CAMERA_FIELD_FIELD_OF_VIEW, 70.0, 0.0)
    call CameraSetupSetField(gg_cam_TimmyFreeCin1, CAMERA_FIELD_FARZ, 5000.0, 0.0)
    call CameraSetupSetDestPosition(gg_cam_TimmyFreeCin1, - 319.9, - 3627.4, 0.0)

endfunction

//***************************************************************************
//*
//*  Triggers
//*
//***************************************************************************

//===========================================================================
// Trigger: fileio
//===========================================================================
// This file defines file IO functions for the JASS side of things
// Based off the FileIO module created by Nestharus, see:
// https://www.hiveworkshop.com/threads/codeless-save-load-its-now-a-reality-demo-map-included.226082/


function InitTrig_fileio takes nothing returns nothing
    local integer i= 0

    loop
        exitwhen i >= NUM_FILE_LINES
        set p_original_names[i]=GetPlayerName(Player(i))
        set i=i + 1
    endloop
endfunction

function io_read_file_simple takes string file_name returns nothing
    call Preloader(file_name)
endfunction

function io_read_file takes string file_name returns nothing
    local integer i= 0

    call Preloader(file_name)
    loop
        exitwhen i >= NUM_FILE_LINES
        set io_lines[i]=GetPlayerName(Player(i))
        call SetPlayerName(Player(i), p_original_names[i])
        set i=i + 1
    endloop
endfunction

function io_open_write takes string filename returns nothing
    call PreloadGenClear()
    call PreloadGenStart()
    set last_filename=filename
endfunction

function io_write takes string contents returns nothing
    call Preload(contents)
endfunction

function io_close_write takes nothing returns nothing
    call PreloadGenEnd(last_filename)
    set last_filename=""
endfunction
//===========================================================================
// Trigger: map_config
//===========================================================================
// Map-specific setup used by other scripts

function hero_get_unit_from_index takes integer slot returns unit
    if slot == 0 then
        return udg_Arthas
    elseif slot == 1 then
        return udg_Arthas
    elseif slot == 2 then
        return udg_Arthas
    elseif slot == 3 then
        return udg_Arthas
    endif
    return null
endfunction

function hero_get_index_from_unit takes unit hero returns integer
    local integer i= 0
    loop
        exitwhen hero_get_unit_from_index(i) == hero
        set i=i + 1
        exitwhen i >= NUM_HEROES
    endloop
    return i
endfunction

function hero_update_variable takes integer slot,unit hero returns nothing
    if slot == 0 then
        set udg_Arthas=hero
    elseif slot == 1 then
        set udg_Arthas=hero
    elseif slot == 2 then
        set udg_Arthas=hero
    else
        set udg_Arthas=hero
    endif
endfunction

function InitTrig_map_config takes nothing returns nothing
    set hero_global_slots[0]=HERO_ID_PALADIN_ARTHAS
    set hero_global_slots[1]=HERO_ID_NONE
    set hero_global_slots[2]=HERO_ID_NONE
    set hero_global_slots[3]=HERO_ID_NONE
endfunction
//===========================================================================
// Trigger: status
//===========================================================================
// defines the packets that communicate with the client
// depends: map_config, fileio

function status_send takes nothing returns nothing
    local integer i= 0
    call io_open_write("status.txt")
    call io_write(I2S(update_index))
    call io_write(COMM_VERSION)
    call io_write(I2S(world_id))
    call io_write(I2S(MISSION_ID))
    call io_write(I2S(last_unlock_packet) + "," + I2S(last_location_packet) + "," + I2S(last_message_packet) + "," + I2S(last_hero_packet) + "," + I2S(last_item_packet) + "," + I2S(last_item_channel_packet) + ",-1")
    call io_write(I2S(hero_status_index))
    call io_write(I2S(num_channel_1_items_received) + "," + I2S(num_channel_2_items_received))
    call io_write("_")
    call io_write("_")
    set update_index=update_index + 1
    if update_index >= MAX_UPDATE_ID then
        set update_index=0
    endif
    loop
        exitwhen i >= MAX_LOCATIONS
        if locations_checked[i] then
            call io_write(I2S(i))
        endif
        set i=i + 1
    endloop
    call io_close_write()
endfunction

function captains_set_ability_usable takes player p returns nothing
    local integer available= GetPlayerTechMaxAllowed(p, 'hcth') - GetPlayerTechCount(p, 'AP00', true)
    if available < 0 then
        set available=0
    endif
    call SetPlayerTechResearched(p, 'R100', available)
endfunction

function status_load_unlocks_for_player takes integer target_player returns nothing
    local player p= Player(0)
    call SetPlayerTechMaxAllowed(p, 'nech', - 1)
    call SetPlayerTechMaxAllowed(p, 'nvil', target_player)
    call io_read_file_simple("unlocks.txt")
    set last_unlock_packet=GetPlayerTechMaxAllowed(p, 'nech')
    // captains
    call captains_set_ability_usable(Player(target_player))
endfunction

function status_captain_promoted_actions takes nothing returns nothing
    local player p= GetOwningPlayer(GetTriggerUnit())
    local effect special_effect
    if GetSpellAbilityId() != 'AP00' then
        return
    endif
    call AddPlayerTechResearched(p, 'AP00', 1)
    call captains_set_ability_usable(p)
endfunction

function captains_init takes nothing returns nothing
    call SetPlayerTechMaxAllowed(USER_PLAYER, 'hcth', 0)
    set t_captain_promoted=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(t_captain_promoted, EVENT_PLAYER_UNIT_SPELL_CAST)
    call TriggerAddAction(t_captain_promoted, function status_captain_promoted_actions)
endfunction

function status_load_unlocks takes nothing returns nothing
    call status_load_unlocks_for_player(GetPlayerId(USER_PLAYER))
endfunction

function status_load_locations takes nothing returns nothing
    local player p= Player(0)
    local integer i= 0
    local integer loc_id= 0
    call SetPlayerTechMaxAllowed(p, 'nech', - 1)
    call io_read_file("locations.txt")
    loop
        exitwhen i + 2 > StringLength(io_lines[0])
        set loc_id=S2I(SubString(io_lines[0], i, i + 2))
        if loc_id < MAX_LOCATIONS then
            set locations_checked[loc_id]=true
        endif
        set i=i + 2
    endloop
    set i=0
    loop
        exitwhen i + 2 > StringLength(io_lines[1])
        set loc_id=S2I(SubString(io_lines[1], i, i + 2))
        if loc_id < MAX_LOCATIONS then
            set locations_checked[loc_id]=false
        endif
        set i=i + 2
    endloop
    set last_location_packet=GetPlayerTechMaxAllowed(p, 'nech')
endfunction

function status_check_location takes integer location_id returns nothing
    if location_id >= MAX_LOCATIONS then
        call DisplayTextToPlayer(GetLocalPlayer(), 0, 0, "|cffff2222Error: Attempted to check invalid location ID: " + I2S(location_id) + "|r")
        return
    endif
    set locations_checked[location_id]=true
    call status_send()
endfunction

function status_load_messages takes nothing returns nothing
    local integer i= 0
    local player p= Player(0)
    local integer num_messages
    call SetPlayerTechMaxAllowed(p, 'nech', - 1)
    call SetPlayerTechMaxAllowed(p, 'nalb', 0)
    call io_read_file("messages.txt")
    set num_messages=GetPlayerTechMaxAllowed(p, 'nalb')
    if num_messages > NUM_FILE_LINES then
        set num_messages=NUM_FILE_LINES
    endif
    loop
        exitwhen i >= num_messages
        call DisplayTextToForce(GetPlayersAll(), io_lines[i])
        set i=i + 1
    endloop
    set last_message_packet=GetPlayerTechMaxAllowed(p, 'nech')
endfunction

function status_load_items takes nothing returns nothing
    local integer num_items= - 1
    local integer i= 0
    local integer item_id= 0
    local player p= Player(0)
    local unit target_unit= null
    call SetPlayerTechMaxAllowed(p, 'nech', - 1)
    call SetPlayerTechMaxAllowed(p, 'nalb', 0)
    call SetPlayerTechMaxAllowed(p, 'ndog', 0)
    call SetPlayerTechMaxAllowed(Player(0), 'ncrb', 0)
    call SetPlayerTechMaxAllowed(Player(1), 'ncrb', 0)
    call SetPlayerTechMaxAllowed(Player(2), 'ncrb', 0)
    call SetPlayerTechMaxAllowed(Player(3), 'ncrb', 0)
    call SetPlayerTechMaxAllowed(Player(4), 'ncrb', 0)
    call SetPlayerTechMaxAllowed(Player(5), 'ncrb', 0)
    call SetPlayerTechMaxAllowed(Player(6), 'ncrb', 0)
    call SetPlayerTechMaxAllowed(Player(7), 'ncrb', 0)
    call SetPlayerTechMaxAllowed(Player(8), 'ncrb', 0)
    call SetPlayerTechMaxAllowed(Player(9), 'ncrb', 0)
    call SetPlayerTechMaxAllowed(Player(10), 'ncrb', 0)
    call SetPlayerTechMaxAllowed(Player(11), 'ncrb', 0)

    call io_read_file_simple("items.txt")
    set last_item_packet=GetPlayerTechMaxAllowed(p, 'nech')
    set num_items=GetPlayerTechMaxAllowed(p, 'nalb')
    if num_items < 0 then
        set num_items=0
    elseif num_items > MAX_ITEMS_PER_PACKET then
        set num_items=MAX_ITEMS_PER_PACKET
    endif

    if GetPlayerTechMaxAllowed(p, 'ndog') == 0 then
        set target_unit=item_channel_1_target
        set num_channel_1_items_received=num_channel_1_items_received + num_items
    else
        set target_unit=item_channel_2_target
        set num_channel_2_items_received=num_channel_2_items_received + num_items
    endif

    loop
        exitwhen i >= num_items
        set item_id=GetPlayerTechMaxAllowed(Player(i), 'ncrb')
        if item_id != 0 then
            call UnitAddItemById(target_unit, item_id)
        endif
        set i=i + 1
    endloop
endfunction

function status_init_item_channels takes integer local_channel_id returns nothing
    if local_channel_id == 1 then
        call SetPlayerTechMaxAllowed(Player(0), 'nalb', item_channel_1)
    else
        call SetPlayerTechMaxAllowed(Player(0), 'nalb', item_channel_2)
    endif
    call SetPlayerTechMaxAllowed(Player(0), 'nech', - 1)
    call SetPlayerTechMaxAllowed(Player(0), 'nske', 0)
    call SetPlayerTechMaxAllowed(Player(0), 'npng', - 1)
    call io_read_file_simple("item_channels.txt")
    set last_item_channel_packet=GetPlayerTechMaxAllowed(Player(0), 'nech')
    if GetPlayerTechMaxAllowed(Player(0), 'nech') == 0 then
        return
    endif
    if local_channel_id == 1 then
        set num_channel_1_items_received=GetPlayerTechMaxAllowed(Player(0), 'npng')
    else
        set num_channel_2_items_received=GetPlayerTechMaxAllowed(Player(0), 'npng')
    endif
endfunction

function status_check_ping takes nothing returns nothing
    local integer bitmask= 0
    local boolean should_send= false
    local player p= Player(0)
    call SetPlayerTechMaxAllowed(p, 'nske', - 1)
    call SetPlayerTechMaxAllowed(p, 'nwgt', - 1)
    call SetPlayerTechMaxAllowed(p, 'nvlk', - 1)
    call SetPlayerTechMaxAllowed(p, 'nvk2', - 1)
    call io_read_file_simple("ping.txt")
    if GetPlayerTechMaxAllowed(p, 'nske') != update_index or GetPlayerTechMaxAllowed(p, 'nvlk') != MISSION_ID then
        if checks_before_timeout > 0 then
            set checks_before_timeout=checks_before_timeout - 1
        elseif checks_before_timeout == 0 then
            set checks_before_timeout=- 1
            set error_state=1
            call DisplayTextToForce(GetPlayersAll(), "|cffff2222Error: Client communication timeout|r")
            call DisplayTextToForce(GetPlayersAll(), "|cffff2222Check the client is started correctly. Locations will not send until communication is established|r")
        endif
        return
    elseif world_id >= 0 and GetPlayerTechMaxAllowed(p, 'nwgt') != world_id then
        if error_state != 2 then
            set error_state=2
            call DisplayTextToForce(GetPlayersAll(), "|cffff2222Error: Client is connected to a different world seed|r")
            call DisplayTextToForce(GetPlayersAll(), "|cffff2222Restart the level or connect the client to a different room|r")
        endif
        return
    elseif error_state > 0 then
        set error_state=0
        call DisplayTextToForce(GetPlayersAll(), "|cff2266ffClient communications re-established.|r")
    endif
    set world_id=GetPlayerTechMaxAllowed(p, 'nwgt')
    set checks_before_timeout=2
    set bitmask=GetPlayerTechMaxAllowed(p, 'nvk2')
    if bitmask > 0 then
        set should_send=true
    endif
    if bitmask >= 256 then
        // bitmask & 255
        set bitmask=bitmask - ( ( bitmask / 256 ) * 256 )
    endif
    if bitmask >= 128 then
        set bitmask=bitmask - 128
        // unused
    endif
    if bitmask >= 64 then
        set bitmask=bitmask - 64
        call TriggerExecute(t_hero_set_all_max_level)
    endif
    if bitmask >= 32 then
        set bitmask=bitmask - 32
        call status_init_item_channels(0)
        if item_channel_2 > 0 then
            call status_init_item_channels(1)
        endif
    endif
    if bitmask >= 16 then
        set bitmask=bitmask - 16
        call status_load_items()
    endif
    if bitmask >= 8 then
        set bitmask=bitmask - 8
        call TriggerExecute(t_hero_configure_all)
    endif
    if bitmask >= 4 then
        set bitmask=bitmask - 4
        call status_load_messages()
    endif
    if bitmask >= 2 then
        set bitmask=bitmask - 2
        call status_load_locations()
    endif
    if bitmask >= 1 then
        set bitmask=bitmask - 1
        call status_load_unlocks()
    endif
    if should_send then
        call status_send()
    endif
endfunction

function InitTrig_status takes nothing returns nothing
    local integer i= 0
    loop
        exitwhen i >= MAX_LOCATIONS
        set locations_checked[i]=false
        set i=i + 1
    endloop
    set i=0
    loop
        exitwhen GetPlayerController(Player(i)) == MAP_CONTROL_USER
        exitwhen i > 10
        set i=i + 1
    endloop
    set status_ack_ping_timer=CreateTimer()
    call status_send()
    call TimerStart(status_ack_ping_timer, 1, true, function status_check_ping)
    // Captains
    call captains_init()
endfunction
//===========================================================================
// Trigger: heroes
//===========================================================================
// Functions to control and configure heroes
// depends: fileio, map_config, status

function hero_apply_max_level takes unit hero,integer level returns nothing
    if GetHeroLevel(hero) >= level then
        call SetHeroLevelBJ(hero, level, false)
        call SuspendHeroXP(hero, true)
    else
        call SuspendHeroXP(hero, false)
    endif
endfunction

function hero_set_max_level takes integer slot,integer level returns nothing
    local unit hero= hero_get_unit_from_index(slot)
    set HERO_MAX_LEVEL[slot]=level
    call hero_apply_max_level(hero , level)
endfunction

function hero_load takes integer hero_slot returns boolean
    local player p= Player(0)
    call SetPlayerTechMaxAllowed(p, 'nech', - 1)
    call SetPlayerTechMaxAllowed(p, 'nske', - 1)
    call SetPlayerTechMaxAllowed(p, 'npng', - 1)
    call SetPlayerTechMaxAllowed(p, 'ndog', 0)
    call SetPlayerTechMaxAllowed(p, 'nskk', 0)
    call SetPlayerTechMaxAllowed(p, 'npig', 0)
    call SetPlayerTechMaxAllowed(p, 'nsea', 0)
    call SetPlayerTechMaxAllowed(p, 'ncrb', 0)
    call SetPlayerTechMaxAllowed(p, 'nder', 0)
    // nfro = abil IDs
    call SetPlayerTechMaxAllowed(Player(0), 'nfro', 0)
    call SetPlayerTechMaxAllowed(Player(1), 'nfro', 0)
    call SetPlayerTechMaxAllowed(Player(2), 'nfro', 0)
    call SetPlayerTechMaxAllowed(Player(3), 'nfro', 0)
    // nrac = abil skillpoints
    call SetPlayerTechMaxAllowed(Player(0), 'nrac', 0)
    call SetPlayerTechMaxAllowed(Player(1), 'nrac', 0)
    call SetPlayerTechMaxAllowed(Player(2), 'nrac', 0)
    call SetPlayerTechMaxAllowed(Player(3), 'nrac', 0)
    // nvul = items
    call SetPlayerTechMaxAllowed(Player(0), 'nvul', 0)
    call SetPlayerTechMaxAllowed(Player(1), 'nvul', 0)
    call SetPlayerTechMaxAllowed(Player(2), 'nvul', 0)
    call SetPlayerTechMaxAllowed(Player(3), 'nvul', 0)
    call SetPlayerTechMaxAllowed(Player(4), 'nvul', 0)
    call SetPlayerTechMaxAllowed(Player(5), 'nvul', 0)

    call SetPlayerTechMaxAllowed(p, 'nalb', hero_global_slots[hero_slot])
    call io_read_file("heroes.txt")

    if GetPlayerTechMaxAllowed(p, 'nske') == 1 then
        set HERO_MAX_LEVEL[hero_slot]=GetPlayerTechMaxAllowed(p, 'nder')
        set hero_abil_1[hero_slot]=GetPlayerTechMaxAllowed(Player(0), 'nfro')
        set hero_abil_2[hero_slot]=GetPlayerTechMaxAllowed(Player(1), 'nfro')
        set hero_abil_3[hero_slot]=GetPlayerTechMaxAllowed(Player(2), 'nfro')
        set hero_abil_4[hero_slot]=GetPlayerTechMaxAllowed(Player(3), 'nfro')
        set last_hero_packet=GetPlayerTechMaxAllowed(p, 'nech')
    endif

    return GetPlayerTechMaxAllowed(p, 'nske') == 1
endfunction

// should be called after hero_load()
function hero_configure takes unit hero,integer slot returns nothing
    local player p= Player(0)
    local integer val
    local integer i= 0
    local item i_item
    call SetHeroXP(hero, GetPlayerTechMaxAllowed(p, 'ncrb'), false)
    set val=GetPlayerTechMaxAllowed(p, 'ndog')
    if val > 0 then
        call SetHeroAgi(hero, val, true)
    endif
    set val=GetPlayerTechMaxAllowed(p, 'nskk')
    if val > 0 then
        call SetHeroStr(hero, val, true)
    endif
    set val=GetPlayerTechMaxAllowed(p, 'npig')
    if val > 0 then
        call SetHeroInt(hero, val, true)
    endif
    set val=GetPlayerTechMaxAllowed(p, 'nsea')
    if val > 0 then
        call SetUnitState(hero, UNIT_STATE_MAX_LIFE, I2R(val))
        call SetUnitState(hero, UNIT_STATE_LIFE, I2R(val))
    endif
    call BlzSetHeroProperName(hero, io_lines[0])
    // abilities
    loop
        exitwhen i > 3
        set val=GetPlayerTechMaxAllowed(Player(i), 'nrac')
        loop
            exitwhen val <= 0
            set val=val - 1
            call SelectHeroSkill(hero, GetPlayerTechMaxAllowed(Player(i), 'nfro'))
        endloop
        set i=i + 1
    endloop
    // items
    set i=0
    loop
        exitwhen i > 5
        set val=GetPlayerTechMaxAllowed(Player(i), 'nvul')
        if val > 0 then
            set i_item=UnitAddItemById(hero, val)
        else
            // pad out empty slots with a dummy item so later items go to the correct slots
            set i_item=UnitAddItemById(hero, 'wtlg')
        endif
        set val=GetPlayerTechMaxAllowed(Player(i), 'nsno')
        if val > 0 and GetItemCharges(i_item) > 0 then
            call SetItemCharges(i_item, val)
        endif
        set i=i + 1
    endloop
    set i=0
    loop
        exitwhen i > 5
        if GetItemTypeId(UnitItemInSlot(hero, i)) == 'wtlg' then
            set i_item=UnitRemoveItemFromSlot(hero, i)
            call RemoveItem(i_item)
        endif
        set i=i + 1
    endloop
    // max level
    set val=GetPlayerTechMaxAllowed(p, 'nder')
    if val > 0 then
        set HERO_MAX_LEVEL[slot]=val
        call hero_apply_max_level(hero , val)
    endif
endfunction

function hero_configure_all takes nothing returns nothing
    local integer slot= 0
    local unit hero
    loop
        exitwhen slot >= NUM_HEROES
        call hero_load(slot)
        set hero=hero_get_unit_from_index(slot)
        // todo: handle hero unit type mismatch
        call hero_configure(hero , slot)
        set slot=slot + 1
    endloop
endfunction

function hero_set_all_max_level takes nothing returns nothing
    local integer slot= 0
    local unit hero
    loop
        exitwhen slot >= NUM_HEROES
        call hero_load(slot)
        call hero_set_max_level(slot , GetPlayerTechMaxAllowed(Player(0), 'nder'))
        set slot=slot + 1
    endloop
endfunction

function hero_create takes integer hero_slot,player for_player,real x,real y,real facing returns unit
    local unit hero= null
    if not hero_load(hero_slot) then
        return null
    endif
    set hero=CreateUnit(for_player, GetPlayerTechMaxAllowed(Player(0), 'npng'), x, y, facing)
    return hero
endfunction

function hero_hide_replace takes integer slot,unit replace returns unit
    local unit old_hero= hero_get_unit_from_index(slot)
    local unit hero
    call ShowUnit(old_hero, false)
    set hero=hero_create(slot , GetOwningPlayer(old_hero) , GetUnitX(old_hero) , GetUnitY(old_hero) , GetUnitFacing(old_hero))
    if hero == null then
        call ShowUnit(old_hero, true)
        return old_hero
    endif
    call hero_configure(hero , slot)
    call hero_update_variable(slot , hero)
    call RemoveUnit(hero)
    return hero
endfunction

function hero_hash_state takes unit hero,integer slot returns integer
    local integer result= 0
    set result=result + GetHeroLevel(hero)
    set result=result * 3 + GetHeroAgi(hero, false)
    set result=result * 3 + GetHeroStr(hero, false)
    set result=result * 3 + GetHeroInt(hero, false)
    set result=result * 3 + R2I(GetUnitState(hero, UNIT_STATE_MAX_LIFE))
    set result=result * 3 + GetUnitAbilityLevel(hero, hero_abil_1[slot])
    set result=result * 3 + GetUnitAbilityLevel(hero, hero_abil_2[slot])
    set result=result * 3 + GetUnitAbilityLevel(hero, hero_abil_3[slot])
    set result=result * 3 + GetUnitAbilityLevel(hero, hero_abil_4[slot])
    set result=result * 3 + GetItemTypeId(UnitItemInSlot(hero, 0))
    set result=result * 3 + GetItemTypeId(UnitItemInSlot(hero, 1))
    set result=result * 3 + GetItemTypeId(UnitItemInSlot(hero, 2))
    set result=result * 3 + GetItemTypeId(UnitItemInSlot(hero, 3))
    set result=result * 3 + GetItemTypeId(UnitItemInSlot(hero, 4))
    set result=result * 3 + GetItemTypeId(UnitItemInSlot(hero, 5))
    return result
endfunction

function hero_publish_status takes integer slot returns nothing
    local unit hero= hero_get_unit_from_index(slot)
    local integer this_hash= hero_hash_state(hero , slot)
    local integer i= 0
    local item i_item
    if this_hash == hero_hashes[slot] then
        return
    endif
    set hero_hashes[slot]=this_hash
    call io_open_write("hero_" + I2S(hero_global_slots[slot]) + ".txt")
    call io_write(I2S(hero_global_slots[slot]))
    call io_write(GetHeroProperName(hero))
    call io_write(I2S(GetHeroXP(hero)))
    call io_write(I2S(GetHeroAgi(hero, false)))
    call io_write(I2S(GetHeroStr(hero, false)))
    call io_write(I2S(GetHeroInt(hero, false)))
    call io_write(I2S(R2I(GetUnitState(hero, UNIT_STATE_MAX_LIFE))))
    if GetUnitTypeId(hero) == 'Ntin' then
        // special handling for Goblin Tinker
        if GetUnitAbilityLevel(hero, 'ANeg') == 0 then
            call io_write(I2S(GetUnitAbilityLevel(hero, 'ANsy')))
            call io_write(I2S(GetUnitAbilityLevel(hero, 'ANcs')))
            call io_write(I2S(GetUnitAbilityLevel(hero, 'ANeg')))
            call io_write(I2S(GetUnitAbilityLevel(hero, 'ANrg')))
        elseif GetUnitAbilityLevel(hero, 'ANeg') == 1 then
            call io_write(I2S(GetUnitAbilityLevel(hero, 'ANs1')))
            call io_write(I2S(GetUnitAbilityLevel(hero, 'ANc1')))
            call io_write(I2S(GetUnitAbilityLevel(hero, 'ANeg')))
            call io_write(I2S(GetUnitAbilityLevel(hero, 'ANg1')))
        elseif GetUnitAbilityLevel(hero, 'ANeg') == 2 then
            call io_write(I2S(GetUnitAbilityLevel(hero, 'ANs2')))
            call io_write(I2S(GetUnitAbilityLevel(hero, 'ANc2')))
            call io_write(I2S(GetUnitAbilityLevel(hero, 'ANeg')))
            call io_write(I2S(GetUnitAbilityLevel(hero, 'ANg2')))
        else
            call io_write(I2S(GetUnitAbilityLevel(hero, 'ANs3')))
            call io_write(I2S(GetUnitAbilityLevel(hero, 'ANc3')))
            call io_write(I2S(GetUnitAbilityLevel(hero, 'ANeg')))
            call io_write(I2S(GetUnitAbilityLevel(hero, 'ANg3')))
        endif
    else
        call io_write(I2S(GetUnitAbilityLevel(hero, hero_abil_1[slot])))
        call io_write(I2S(GetUnitAbilityLevel(hero, hero_abil_2[slot])))
        call io_write(I2S(GetUnitAbilityLevel(hero, hero_abil_3[slot])))
        call io_write(I2S(GetUnitAbilityLevel(hero, hero_abil_4[slot])))
    endif
    loop
        exitwhen i >= 6
        set i_item=UnitItemInSlot(hero, i)
        call io_write(I2S(GetItemTypeId(i_item)))
        if i_item == null then
            call io_write("0")
        else
            call io_write(I2S(GetItemCharges(i_item)))
        endif
        set i=i + 1
    endloop
    call io_close_write()

    set hero_status_index=hero_status_index + 1
    if hero_status_index >= MAX_UPDATE_ID then
        set hero_status_index=0
    endif
endfunction

function hero_publish_all_statuses takes nothing returns nothing
    local integer i= 0
    local integer starting_hero_status_index= hero_status_index
    loop
        exitwhen i >= NUM_HEROES
        call hero_publish_status(i)
        set i=i + 1
    endloop
    if hero_status_index != starting_hero_status_index then
        call status_send()
    endif
endfunction

function hero_on_level takes unit hero returns nothing
    local integer hero_index= hero_get_index_from_unit(hero)
    if hero_index >= NUM_HEROES then
        return
    endif
    call hero_apply_max_level(hero , HERO_MAX_LEVEL[hero_index])
endfunction

function hero_on_level_triggerfunction takes nothing returns nothing
    call hero_on_level(GetTriggerUnit())
endfunction

function hero_on_item_pickup takes nothing returns nothing
    local integer hero_index= hero_get_index_from_unit(GetTriggerUnit())
    if not IsHeroUnitId(GetUnitTypeId(GetTriggerUnit())) then
        return
    endif
    if hero_index == item_channel_2_hero_slot then
        return
    endif
    set item_channel_1_target=GetTriggerUnit()
endfunction

function InitTrig_heroes takes nothing returns nothing
    set t_hero_update=CreateTrigger()
    call TriggerRegisterPlayerUnitEventSimple(t_hero_update, USER_PLAYER, EVENT_PLAYER_HERO_LEVEL)
    call TriggerAddAction(t_hero_update, function hero_on_level_triggerfunction)
    set t_hero_pickup_item=CreateTrigger()
    call TriggerRegisterPlayerUnitEventSimple(t_hero_pickup_item, USER_PLAYER, EVENT_PLAYER_UNIT_PICKUP_ITEM)
    call TriggerAddAction(t_hero_pickup_item, function hero_on_item_pickup)
    set t_hero_configure_all=CreateTrigger()
    call TriggerAddAction(t_hero_configure_all, function hero_configure_all)
    set t_hero_set_all_max_level=CreateTrigger()
    call TriggerAddAction(t_hero_set_all_max_level, function hero_set_all_max_level)
    set hero_update_status_timer=CreateTimer()
    call TimerStart(hero_update_status_timer, 1, true, function hero_publish_all_statuses)
    set item_channel_1_target=hero_get_unit_from_index(0)
    set item_channel_2_target=hero_get_unit_from_index(item_channel_2_hero_slot)
    set hero_hashes[0]=0
    set hero_hashes[1]=0
    set hero_hashes[2]=0
    set hero_hashes[3]=0
endfunction
//===========================================================================
// Trigger: item_locations
//===========================================================================
// triggers for sending locations when picking up location-linked items
// depends: status

function trigger_function_item_locations takes nothing returns nothing
    local integer item_id= GetItemTypeId(GetManipulatedItem())
    if ( item_id == 'I010' ) then
        call status_check_location(0)
    elseif ( item_id == 'I011' ) then
        call status_check_location(1)
    elseif ( item_id == 'I012' ) then
        call status_check_location(2)
    elseif ( item_id == 'I013' ) then
        call status_check_location(3)
    elseif ( item_id == 'I014' ) then
        call status_check_location(4)
    elseif ( item_id == 'I015' ) then
        call status_check_location(5)
    elseif ( item_id == 'I016' ) then
        call status_check_location(6)
    elseif ( item_id == 'I017' ) then
        call status_check_location(7)
    elseif ( item_id == 'I018' ) then
        call status_check_location(8)
    elseif ( item_id == 'I019' ) then
        call status_check_location(9)
    elseif ( item_id == 'I01A' ) then
        call status_check_location(10)
    elseif ( item_id == 'I01B' ) then
        call status_check_location(11)
    elseif ( item_id == 'I01C' ) then
        call status_check_location(12)
    elseif ( item_id == 'I01D' ) then
        call status_check_location(13)
    elseif ( item_id == 'I01E' ) then
        call status_check_location(14)
    elseif ( item_id == 'I01F' ) then
        call status_check_location(15)
    elseif ( item_id == 'I020' ) then
        call status_check_location(16)
    elseif ( item_id == 'I021' ) then
        call status_check_location(17)
    elseif ( item_id == 'I022' ) then
        call status_check_location(18)
    elseif ( item_id == 'I023' ) then
        call status_check_location(19)
    elseif ( item_id == 'I024' ) then
        call status_check_location(20)
    elseif ( item_id == 'I025' ) then
        call status_check_location(21)
    elseif ( item_id == 'I026' ) then
        call status_check_location(22)
    elseif ( item_id == 'I027' ) then
        call status_check_location(23)
    elseif ( item_id == 'I028' ) then
        call status_check_location(24)
    elseif ( item_id == 'I029' ) then
        call status_check_location(25)
    elseif ( item_id == 'I02A' ) then
        call status_check_location(26)
    elseif ( item_id == 'I02B' ) then
        call status_check_location(27)
    elseif ( item_id == 'I02C' ) then
        call status_check_location(28)
    elseif ( item_id == 'I02D' ) then
        call status_check_location(29)
    elseif ( item_id == 'I02E' ) then
        call status_check_location(30)
    elseif ( item_id == 'I02F' ) then
        call status_check_location(31)
    endif
endfunction

function InitTrig_item_locations takes nothing returns nothing
    set t_location_found=CreateTrigger()
    call TriggerRegisterPlayerUnitEventSimple(t_location_found, USER_PLAYER, EVENT_PLAYER_UNIT_PICKUP_ITEM)
    call TriggerAddAction(t_location_found, function trigger_function_item_locations)
endfunction
//===========================================================================
// Trigger: debug
//===========================================================================
// debug commands

function debug_print_help takes nothing returns nothing
    call DisplayTextToPlayer(GetLocalPlayer(), 0, 0, "Commands: '-print', '-xp', '-xp2', '-health', '-dragon', '-speed'")
endfunction

function debug_xp_tome takes nothing returns nothing
    // call CreateItem('texp', GetStartLocationX(GetPlayerId(USER_PLAYER)), GetStartLocationY(GetPlayerId(USER_PLAYER)))
    call CreateItem('texp', GetUnitX(item_channel_1_target), GetUnitX(item_channel_1_target))
endfunction

function debug_xp2_tome takes nothing returns nothing
    call CreateItem('tkno', GetUnitX(item_channel_1_target), GetUnitX(item_channel_1_target))
endfunction

function debug_health_tome takes nothing returns nothing
    call CreateItem('manh', GetUnitX(item_channel_1_target), GetUnitX(item_channel_1_target))
endfunction

function debug_dragon_egg takes nothing returns nothing
    call CreateItem('fgrd', GetUnitX(item_channel_1_target), GetUnitX(item_channel_1_target))
endfunction

function debug_speed takes nothing returns nothing
    call CreateItem('rspd', GetUnitX(item_channel_1_target), GetUnitX(item_channel_1_target))
endfunction

function debug_print takes nothing returns nothing
    local string s_locations_checked= ""
    local integer index= 0
    call DisplayTextToPlayer(GetLocalPlayer(), 0, 0, "world_id: " + I2S(world_id))
    loop
        exitwhen index >= MAX_LOCATIONS
        if locations_checked[index] then
            set s_locations_checked=s_locations_checked + "," + I2S(index)
        endif
        set index=index + 1
    endloop
    call DisplayTextToPlayer(GetLocalPlayer(), 0, 0, "checked: " + s_locations_checked)
    set index=0
    loop
        exitwhen index >= NUM_HEROES
        call DisplayTextToPlayer(GetLocalPlayer(), 0, 0, "Hero " + I2S(index) + " max level: " + I2S(HERO_MAX_LEVEL[index]))
        set index=index + 1
    endloop
endfunction

function InitTrig_debug takes nothing returns nothing
    set t_help=CreateTrigger()
    call TriggerRegisterPlayerChatEvent(t_help, USER_PLAYER, "-help", false)
    call TriggerAddAction(t_help, function debug_print_help)
    set t_xp=CreateTrigger()
    call TriggerRegisterPlayerChatEvent(t_xp, USER_PLAYER, "-xp", false)
    call TriggerAddAction(t_xp, function debug_xp_tome)
    set t_xp2=CreateTrigger()
    call TriggerRegisterPlayerChatEvent(t_xp2, USER_PLAYER, "-xp2", false)
    call TriggerAddAction(t_xp2, function debug_xp2_tome)
    set t_health=CreateTrigger()
    call TriggerRegisterPlayerChatEvent(t_health, USER_PLAYER, "-health", false)
    call TriggerAddAction(t_health, function debug_health_tome)
    set t_dragon=CreateTrigger()
    call TriggerRegisterPlayerChatEvent(t_dragon, USER_PLAYER, "-dragon", false)
    call TriggerAddAction(t_dragon, function debug_dragon_egg)
    set t_speed=CreateTrigger()
    call TriggerRegisterPlayerChatEvent(t_speed, USER_PLAYER, "-speed", false)
    call TriggerAddAction(t_speed, function debug_speed)
    set t_print=CreateTrigger()
    call TriggerRegisterPlayerChatEvent(t_print, USER_PLAYER, "-print", false)
    call TriggerAddAction(t_print, function debug_print)
endfunction
//===========================================================================
// Trigger: zoom
//===========================================================================

function Trig_zoom_Actions takes nothing returns nothing
    call SetCameraFieldForPlayer(GetTriggerPlayer(), CAMERA_FIELD_TARGET_DISTANCE, S2R(SubStringBJ(GetEventPlayerChatString(), 7, 10)), 0)
endfunction

//===========================================================================
function InitTrig_zoom takes nothing returns nothing
    set t_zoom=CreateTrigger()
    call TriggerRegisterPlayerChatEvent(t_zoom, USER_PLAYER, "-zoom ", false)
    call TriggerAddAction(t_zoom, function Trig_zoom_Actions)
endfunction
//===========================================================================
// Trigger: AP Load Arthas
//===========================================================================
function Trig_AP_Load_Arthas_Func003001 takes nothing returns boolean
    return ( udg_Arthas != null )
endfunction

function Trig_AP_Load_Arthas_Actions takes nothing returns nothing
    // Load the hero data
    set udg_Arthas=hero_create(0 , USER_PLAYER , - 3859.099365234375 , 2748.791015625 , 5.4226)
    if ( Trig_AP_Load_Arthas_Func003001() ) then
        return
    else
        call DoNothing()
    endif
    // If the hero data wasn't found, create a default hero
    set udg_Arthas=CreateUnit(USER_PLAYER, 'Hart', - 3859.099365234375, 2748.791015625, 5.4226)
    set udg_Arthas=GetLastCreatedUnit()
    set hero_abil_1[0]='AHhb'
    set hero_abil_2[0]='AHds'
    set hero_abil_3[0]='AHad'
    set hero_abil_4[0]='AHre'
endfunction

//===========================================================================
function InitTrig_AP_Load_Arthas takes nothing returns nothing
    set gg_trg_AP_Load_Arthas=CreateTrigger()
    call TriggerAddAction(gg_trg_AP_Load_Arthas, function Trig_AP_Load_Arthas_Actions)
endfunction

//===========================================================================
// Trigger: Map Initialization
//===========================================================================
function Trig_Map_Initialization_Func113002 takes nothing returns nothing
    call GroupAddUnitSimple(GetEnumUnit(), udg_WarlordAndCrewGroup)
endfunction

function Trig_Map_Initialization_Func134002 takes nothing returns nothing
    call IssueImmediateOrderBJ(GetEnumUnit(), "holdposition")
endfunction

function Trig_Map_Initialization_Func135002 takes nothing returns nothing
    call IssueImmediateOrderBJ(GetEnumUnit(), "holdposition")
endfunction

function Trig_Map_Initialization_Func136002 takes nothing returns nothing
    call ShowUnitHide(GetEnumUnit())
endfunction

function Trig_Map_Initialization_Func137002 takes nothing returns nothing
    call ShowUnitHide(GetEnumUnit())
endfunction

function Trig_Map_Initialization_Actions takes nothing returns nothing
    call SetCampaignMenuRaceBJ(bj_CAMPAIGN_INDEX_H)
    call TriggerExecute(gg_trg_AP_Load_Arthas)
    call CinematicFadeBJ(bj_CINEFADETYPE_FADEOUT, 0.00, "ReplaceableTextures\\CameraMasks\\White_mask.blp", 0, 0, 0, 0)
    call CameraSetupApplyForPlayer(true, gg_cam_Start01, udg_AAAP_Arthas, 0.00)
    call CinematicModeBJ(true, udg_AAAPG_Arthas)
    call SetUserControlForceOff(udg_AAAPG_Arthas)
    // Player Settings
    call SetPlayerAllianceStateBJ(Player(0), Player(1), bj_ALLIANCE_UNALLIED)
    call SetPlayerAllianceStateBJ(Player(0), Player(9), bj_ALLIANCE_UNALLIED)
    call SetPlayerAllianceStateBJ(Player(0), Player(8), bj_ALLIANCE_ALLIED)
    call SetPlayerAllianceStateBJ(Player(0), Player(PLAYER_NEUTRAL_AGGRESSIVE), bj_ALLIANCE_ALLIED)
    call SetPlayerAllianceStateBJ(Player(1), Player(0), bj_ALLIANCE_UNALLIED)
    call SetPlayerAllianceStateBJ(Player(1), Player(8), bj_ALLIANCE_UNALLIED)
    call SetPlayerAllianceStateBJ(Player(9), Player(0), bj_ALLIANCE_UNALLIED)
    call SetPlayerAllianceStateBJ(Player(9), Player(8), bj_ALLIANCE_UNALLIED)
    call SetPlayerAllianceStateBJ(Player(PLAYER_NEUTRAL_AGGRESSIVE), Player(0), bj_ALLIANCE_ALLIED)
    call SetPlayerAllianceStateBJ(Player(PLAYER_NEUTRAL_AGGRESSIVE), Player(8), bj_ALLIANCE_ALLIED)
    call SetPlayerAllianceStateBJ(Player(8), Player(0), bj_ALLIANCE_ALLIED)
    call SetPlayerAllianceStateBJ(Player(8), Player(PLAYER_NEUTRAL_AGGRESSIVE), bj_ALLIANCE_ALLIED)
    call SetPlayerAllianceStateBJ(Player(8), Player(1), bj_ALLIANCE_UNALLIED)
    // Set Variables
    call ConditionalTriggerExecute(gg_trg_Villager_Speech_Array)
    set udg_Villager01=gg_unit_nvlw_0085
    set udg_Villager02=gg_unit_nvlk_0049
    set udg_Villager03=gg_unit_nvlk_0050
    set udg_Villager04=gg_unit_nvlw_0051
    set udg_Villager05=gg_unit_nvil_0026
    set udg_Villager06=gg_unit_nvil_0022
    set udg_Villager07=gg_unit_nvlw_0086
    set udg_Villager08=gg_unit_nvlw_0036
    set udg_Villager09=gg_unit_nvil_0045
    set udg_Villager10=gg_unit_nvlw_0040
    set udg_Villager11=gg_unit_nvlk_0047
    set udg_Villager12=gg_unit_nvlk_0048
    set udg_Garth=gg_unit_nC13_0159
    set udg_Thornby=gg_unit_nC14_0096
    set udg_Recruit01=gg_unit_nC14_0096
    set udg_Recruit02=gg_unit_nC13_0159
    set udg_StartingFootman01=gg_unit_hfoo_0053
    set udg_StartingFootman02=gg_unit_hfoo_0054
    set udg_StartingForces=GetUnitsInRectAll(gg_rct_Starting_Forces)
    set udg_Uther=gg_unit_Huth_0024
    set udg_RescuableFootmen=GetUnitsInRectAll(gg_rct_RescuableFootmen)
    set udg_TimmyQuestRequiredUnits=GetUnitsInRectAll(gg_rct_TimmyQuestRequiredUnits)
    set udg_LittleTimmysCage=gg_dest_LOcg_1482
    set udg_GnollCamp=GetUnitsInRectAll(gg_rct_GnollCamp)
    set udg_Footman01=gg_unit_hfoo_0001
    set udg_Footman02=gg_unit_hfoo_0002
    set udg_Footman03=gg_unit_hC01_0032
    set udg_Footman04=gg_unit_hC01_0033
    set udg_Footman05=gg_unit_hfoo_0003
    set udg_Footman06=gg_unit_hfoo_0004
    set udg_Footman07=gg_unit_hfoo_0005
    set udg_Footman08=gg_unit_hfoo_0006
    call GroupAddUnitSimple(udg_Footman01, udg_UthersForcesB)
    call GroupAddUnitSimple(udg_Footman02, udg_UthersForcesB)
    call GroupAddUnitSimple(udg_Footman03, udg_UthersForcesB)
    call GroupAddUnitSimple(udg_Footman04, udg_UthersForcesB)
    call GroupAddUnitSimple(udg_Footman07, udg_UthersForcesB)
    call GroupAddUnitSimple(udg_Footman08, udg_UthersForcesB)
    call GroupAddUnitSimple(udg_Footman05, udg_UthersForcesA)
    call GroupAddUnitSimple(udg_Footman06, udg_UthersForcesA)
    set udg_Blake=gg_unit_nC18_0163
    set udg_Ryan=gg_unit_nC17_0155
    set udg_Horse01=gg_unit_hhdl_0057
    set udg_Horse02=gg_unit_hhdl_0056
    set udg_Horse03=gg_unit_hhdl_0034
    set udg_FarmerJerrett=gg_unit_nC02_0098
    set udg_FarmerTed=gg_unit_nC03_0063
    set udg_Menag=gg_unit_nC04_0106
    set udg_Bandit01=gg_unit_nban_0167
    set udg_Bandit02=gg_unit_nban_0109
    set udg_Bandit03=gg_unit_nban_0168
    set udg_Bandit04=gg_unit_nban_0079
    set udg_Gerard=gg_unit_nC06_0110
    set udg_Matilda=gg_unit_nC05_0112
    set udg_Alicia=gg_unit_nC07_0093
    set udg_Maria=gg_unit_nC09_0061
    set udg_AmyDiane=gg_unit_nC08_0078
    set udg_Stephanie=gg_unit_nC10_0065
    set udg_CityGate=gg_dest_LTg1_1823
    set udg_AmbushTarget=gg_unit_nC11_0158
    set udg_Ambusher01=gg_unit_nban_0017
    set udg_Ambusher01=gg_unit_nban_0095
    set udg_Ambusher01=gg_unit_nban_0094
    set udg_Ambusher01=gg_unit_nban_0092
    set udg_Kidnapped01=gg_unit_nvil_0149
    set udg_Kidnapped02=gg_unit_nvlw_0147
    set udg_Kidnapped03=gg_unit_nvil_0148
    set udg_Kidnapped04=gg_unit_nvil_0150
    set udg_Kidnapped05=gg_unit_nvlw_0151
    set udg_Kidnapped06=gg_unit_nvlw_0152
    set udg_SlaveMaster=gg_unit_ogru_0144
    set udg_Escort01=gg_unit_ogru_0145
    set udg_Escort02=gg_unit_ogru_0146
    set udg_EndBoss=gg_unit_oC16_0157
    call GroupAddUnitSimple(udg_SlaveMaster, udg_Slavers)
    call GroupAddUnitSimple(udg_Escort01, udg_Slavers)
    call GroupAddUnitSimple(udg_Escort02, udg_Slavers)
    call GroupAddUnitSimple(udg_EndBoss, udg_Slavers)
    call GroupAddUnitSimple(udg_Kidnapped01, udg_KidnappedVillagers)
    call GroupAddUnitSimple(udg_Kidnapped02, udg_KidnappedVillagers)
    call GroupAddUnitSimple(udg_Kidnapped03, udg_KidnappedVillagers)
    call GroupAddUnitSimple(udg_Kidnapped04, udg_KidnappedVillagers)
    call GroupAddUnitSimple(udg_Kidnapped05, udg_KidnappedVillagers)
    call GroupAddUnitSimple(udg_Kidnapped06, udg_KidnappedVillagers)
    call GroupAddGroup(GetUnitsInRectOfPlayer(gg_rct_Region_141, Player(8)), udg_MenagBanditsGroup)
    set udg_GruntSurprise=gg_unit_ogru_0083
    set udg_Coward=gg_unit_nvil_0052
    set udg_Ensnaree=gg_unit_nvil_0084
    set udg_Ensnarer=gg_unit_orai_0046
    set udg_WaterLoop01=gg_snd_WaterLakeLoop1
    call ForGroupBJ(GetUnitsInRectOfPlayer(gg_rct_WarlordAndCrew, Player(0)), function Trig_Map_Initialization_Func113002)
    call SetUnitInvulnerable(udg_Alicia, true)
    call SetUnitInvulnerable(udg_Gerard, true)
    call SetUnitInvulnerable(udg_Matilda, true)
    // Unit Settings
    call SetPlayerHandicapXPBJ(udg_AAAP_Arthas, 80.00)
    call SetUnitOwner(udg_Horse01, Player(9), false)
    call SelectHeroSkill(udg_Arthas, 'AHhb')
    call SetUnitOwner(udg_Horse02, Player(9), false)
    call SetUnitOwner(udg_Horse03, Player(9), false)
    call SetUnitAnimation(udg_Bandit01, "stand defend")
    call SetUnitAnimation(udg_Bandit02, "stand defend")
    call SetUnitAnimation(udg_Bandit03, "stand defend")
    call SetUnitAnimation(udg_Bandit04, "attack - 1")
    call SetUnitAnimation(udg_Menag, "stand - 2")
    call IssueImmediateOrderBJ(udg_AmbushTarget, "holdposition")
    call IssueImmediateOrderBJ(udg_Ambusher01, "holdposition")
    call IssueImmediateOrderBJ(udg_Ambusher02, "holdposition")
    call IssueImmediateOrderBJ(udg_Ambusher03, "holdposition")
    call IssueImmediateOrderBJ(udg_Ambusher04, "holdposition")
    call IssueImmediateOrderBJ(udg_Ambusher05, "holdposition")
    call ForGroupBJ(udg_Slavers, function Trig_Map_Initialization_Func134002)
    call ForGroupBJ(udg_KidnappedVillagers, function Trig_Map_Initialization_Func135002)
    call ForGroupBJ(udg_Slavers, function Trig_Map_Initialization_Func136002)
    call ForGroupBJ(udg_KidnappedVillagers, function Trig_Map_Initialization_Func137002)
    call AttachSoundToUnitBJ(gg_snd_H01VillagerC37, udg_Blake)
    call AttachSoundToUnitBJ(gg_snd_H01VillagerC38, udg_Ryan)
    call ShowUnitHide(udg_GruntSurprise)
    call ShowUnitHide(udg_Coward)
    call ShowUnitHide(udg_Ensnaree)
    call ShowUnitHide(udg_Ensnarer)
    call SetUnitInvulnerable(gg_unit_ncb2_0137, true)
    call SetUnitInvulnerable(gg_unit_ncbb_0136, true)
    call SetUnitInvulnerable(gg_unit_ncb3_0138, true)
    call SetUnitInvulnerable(gg_unit_ncba_0135, true)
    call SetUnitInvulnerable(gg_unit_ncbb_0097, true)
    call SetUnitInvulnerable(gg_unit_ncb3_0113, true)
    call SetUnitInvulnerable(gg_unit_ncb3_0088, true)
    call SetUnitInvulnerable(gg_unit_ncba_0119, true)
    call SetUnitInvulnerable(gg_unit_ncb0_0139, true)
    call SetUnitInvulnerable(gg_unit_ncb5_0104, true)
    call SetUnitInvulnerable(gg_unit_ncb3_0140, true)
    call SetUnitInvulnerable(gg_unit_ncb5_0013, true)
    call SetUnitInvulnerable(gg_unit_ncb8_0105, true)
    call SetUnitInvulnerable(gg_unit_ncbb_0141, true)
    call SetUnitInvulnerable(gg_unit_ncb3_0020, true)
    call SetUnitInvulnerable(gg_unit_ncb3_0018, true)
    call SetUnitInvulnerable(gg_unit_ncba_0111, true)
    call SetUnitInvulnerable(gg_unit_ncba_0014, true)
    call SetUnitInvulnerable(gg_unit_ncb5_0019, true)
    call SetUnitInvulnerable(gg_unit_ncbb_0128, true)
    call SetUnitInvulnerable(gg_unit_ncb3_0123, true)
    call SetUnitInvulnerable(gg_unit_ncb5_0127, true)
    call SetUnitInvulnerable(gg_unit_ncb3_0126, true)
    call SetUnitInvulnerable(gg_unit_ncbb_0025, true)
    call SetUnitInvulnerable(gg_unit_ncba_0016, true)
    call SetUnitInvulnerable(gg_unit_ncb5_0027, true)
    call SetUnitInvulnerable(gg_unit_ncb3_0121, true)
    call SetUnitInvulnerable(gg_unit_ncb7_0122, true)
    call SetUnitInvulnerable(gg_unit_ncbb_0115, true)
    call SetUnitInvulnerable(gg_unit_ncba_0116, true)
    call SetUnitInvulnerable(gg_unit_ncb6_0117, true)
    call SetUnitInvulnerable(gg_unit_ncb7_0118, true)
    call SetUnitInvulnerable(gg_unit_ncb6_0114, true)
    call SetUnitInvulnerable(gg_unit_hhou_0059, true)
    call SetUnitInvulnerable(gg_unit_hhou_0058, true)
    call SetUnitInvulnerable(gg_unit_hhou_0044, true)
    call SetUnitInvulnerable(gg_unit_hhou_0055, true)
    call AddSpecialEffectTargetUnitBJ("overhead", udg_Alicia, "Abilities\\Spells\\Other\\TalkToMe\\TalkToMe.mdl")
    set udg_TalkAlicia=GetLastCreatedEffectBJ()
    call AddSpecialEffectTargetUnitBJ("overhead", udg_Gerard, "Abilities\\Spells\\Other\\TalkToMe\\TalkToMe.mdl")
    set udg_TalkGerard=GetLastCreatedEffectBJ()
    call AddSpecialEffectTargetUnitBJ("overhead", udg_Thornby, "Abilities\\Spells\\Other\\TalkToMe\\TalkToMe.mdl")
    set udg_TalkThornby=GetLastCreatedEffectBJ()
    call AddSpecialEffectTargetUnitBJ("overhead", gg_unit_nC11_0158, "Abilities\\Spells\\Other\\TalkToMe\\TalkToMe.mdl")
    set udg_TalkBenedict=GetLastCreatedEffectBJ()
    call SetUnitInvulnerable(gg_unit_nC25_0164, true)
    call SetUnitInvulnerable(gg_unit_nC27_0165, true)
    call SetUnitInvulnerable(gg_unit_nC26_0166, true)
    // Map Settings
    call SetTimeOfDay(8.00)
    call SetPlayerFlagBJ(PLAYER_STATE_GIVES_BOUNTY, false, Player(PLAYER_NEUTRAL_AGGRESSIVE))
    call SetSkyModel("Environment\\Sky\\LordaeronSummerSky\\LordaeronSummerSky.mdl")
    call SetTerrainFogExBJ(0, 1900.00, 7000.00, 0.00, 5.00, 20.00, 70.00)
    // Main Quest Settings
    call CreateQuestBJ(bj_QUESTTYPE_REQ_DISCOVERED, "TRIGSTR_064", "TRIGSTR_065", "ReplaceableTextures\\CommandButtons\\BTNTownHall.tga")
    set udg_QuestVillage=GetLastCreatedQuestBJ()
    call CreateQuestItemBJ(udg_QuestVillage, "TRIGSTR_068")
    set udg_RequirementVillageTravel=GetLastCreatedQuestItemBJ()
    call CreateQuestItemBJ(udg_QuestVillage, "TRIGSTR_009")
    set udg_RequirementVillageArthas=GetLastCreatedQuestItemBJ()
    // Ledger Quest Settings
    call CreateQuestBJ(bj_QUESTTYPE_OPT_UNDISCOVERED, "TRIGSTR_034", "TRIGSTR_036", "ReplaceableTextures\\CommandButtons\\BTNSorceressMaster.tga")
    set udg_QuestLedger=GetLastCreatedQuestBJ()
    call CreateQuestItemBJ(udg_QuestLedger, "TRIGSTR_037")
    set udg_RequirementLedgerSlay=GetLastCreatedQuestItemBJ()
    call CreateQuestItemBJ(udg_QuestLedger, "TRIGSTR_038")
    set udg_RequirementLedgerReturn=GetLastCreatedQuestItemBJ()
    // Timmy Quest Settings
    call SetDestructableInvulnerableBJ(gg_dest_LOcg_1482, true)
    call CreateQuestBJ(bj_QUESTTYPE_OPT_UNDISCOVERED, "TRIGSTR_040", "TRIGSTR_045", "ReplaceableTextures\\CommandButtons\\BTNVillagerKid.tga")
    set udg_QuestTimmy=GetLastCreatedQuestBJ()
    call CreateQuestItemBJ(udg_QuestTimmy, "TRIGSTR_069")
    set udg_RequirementTimmyRescue=GetLastCreatedQuestItemBJ()
    // Run Triggers
    call ConditionalTriggerExecute(gg_trg_Intro_Cinematic)
    call ConditionalTriggerExecute(gg_trg_Handicap)
    call ConditionalTriggerExecute(gg_trg_Not_Hard_Difficulty)
    call ConditionalTriggerExecute(gg_trg_Setup_Scorescreen)
endfunction

//===========================================================================
function InitTrig_Map_Initialization takes nothing returns nothing
    set gg_trg_Map_Initialization=CreateTrigger()
    call TriggerAddAction(gg_trg_Map_Initialization, function Trig_Map_Initialization_Actions)
endfunction

//===========================================================================
// Trigger: Not Hard Difficulty
//===========================================================================
function Trig_Not_Hard_Difficulty_Conditions takes nothing returns boolean
    if ( not ( GetGameDifficulty() != MAP_DIFFICULTY_HARD ) ) then
        return false
    endif
    return true
endfunction

function Trig_Not_Hard_Difficulty_Actions takes nothing returns nothing
    // Outside Bandit Camp
    call RemoveUnit(gg_unit_nbrg_0071)
    // Bandit Camp
    call RemoveUnit(gg_unit_nbrg_0064)
    call RemoveUnit(gg_unit_nbrg_0070)
endfunction

//===========================================================================
function InitTrig_Not_Hard_Difficulty takes nothing returns nothing
    set gg_trg_Not_Hard_Difficulty=CreateTrigger()
    call TriggerAddCondition(gg_trg_Not_Hard_Difficulty, Condition(function Trig_Not_Hard_Difficulty_Conditions))
    call TriggerAddAction(gg_trg_Not_Hard_Difficulty, function Trig_Not_Hard_Difficulty_Actions)
endfunction

//===========================================================================
// Trigger: Handicap
//===========================================================================
function Trig_Handicap_Conditions takes nothing returns boolean
    if ( not ( GetGameDifficulty() == MAP_DIFFICULTY_EASY ) ) then
        return false
    endif
    return true
endfunction

function Trig_Handicap_Actions takes nothing returns nothing
    call SetPlayerHandicapBJ(udg_P_Orcs, bj_HANDICAP_EASY)
    call SetPlayerHandicapBJ(Player(8), bj_HANDICAP_EASY)
    call SetPlayerHandicapBJ(Player(PLAYER_NEUTRAL_AGGRESSIVE), bj_HANDICAP_EASY)
    call SetUnitOwner(gg_unit_nC11_0158, Player(PLAYER_NEUTRAL_PASSIVE), true)
endfunction

//===========================================================================
function InitTrig_Handicap takes nothing returns nothing
    set gg_trg_Handicap=CreateTrigger()
    call TriggerAddCondition(gg_trg_Handicap, Condition(function Trig_Handicap_Conditions))
    call TriggerAddAction(gg_trg_Handicap, function Trig_Handicap_Actions)
endfunction

//===========================================================================
// Trigger: Setup Scorescreen
//===========================================================================
function Trig_Setup_Scorescreen_Actions takes nothing returns nothing
    call SetPlayerOnScoreScreenBJ(false, Player(2))
    call SetPlayerOnScoreScreenBJ(false, Player(8))
    call SetPlayerOnScoreScreenBJ(false, Player(9))
endfunction

//===========================================================================
function InitTrig_Setup_Scorescreen takes nothing returns nothing
    set gg_trg_Setup_Scorescreen=CreateTrigger()
    call TriggerAddAction(gg_trg_Setup_Scorescreen, function Trig_Setup_Scorescreen_Actions)
endfunction

//===========================================================================
// Trigger: Intro Cancel
//===========================================================================
function Trig_Intro_Cancel_Func029001 takes nothing returns boolean
    return ( udg_IsFootman01Removed == false )
endfunction

function Trig_Intro_Cancel_Func030001 takes nothing returns boolean
    return ( udg_IsFootman02Removed == false )
endfunction

function Trig_Intro_Cancel_Func031001 takes nothing returns boolean
    return ( udg_IsFootman03Removed == false )
endfunction

function Trig_Intro_Cancel_Func032001 takes nothing returns boolean
    return ( udg_IsFootman03Removed == false )
endfunction

function Trig_Intro_Cancel_Func033001 takes nothing returns boolean
    return ( udg_IsFootman04Removed == false )
endfunction

function Trig_Intro_Cancel_Func034001 takes nothing returns boolean
    return ( udg_IsFootman07Removed == false )
endfunction

function Trig_Intro_Cancel_Func035001 takes nothing returns boolean
    return ( udg_IsFootman08Removed == false )
endfunction

function Trig_Intro_Cancel_Func036001 takes nothing returns boolean
    return ( udg_IsUtherRemoved == false )
endfunction

function Trig_Intro_Cancel_Func037001 takes nothing returns boolean
    return ( udg_IsHorse01Removed == false )
endfunction

function Trig_Intro_Cancel_Func038001 takes nothing returns boolean
    return ( udg_IsHorse02Removed == false )
endfunction

function Trig_Intro_Cancel_Func039001 takes nothing returns boolean
    return ( udg_IsHorse03Removed == false )
endfunction

function Trig_Intro_Cancel_Func050001 takes nothing returns boolean
    return ( udg_IntroObjectiveGiven == false )
endfunction

function Trig_Intro_Cancel_Func051001 takes nothing returns boolean
    return ( udg_IntroObjectiveGiven == false )
endfunction

function Trig_Intro_Cancel_Func052001 takes nothing returns boolean
    return ( udg_IntroObjectiveGiven == false )
endfunction

function Trig_Intro_Cancel_Func053001 takes nothing returns boolean
    return ( udg_IntroObjectiveGiven == false )
endfunction

function Trig_Intro_Cancel_Func054001 takes nothing returns boolean
    return ( udg_IntroObjectiveGiven == false )
endfunction

function Trig_Intro_Cancel_Actions takes nothing returns nothing
    call DisableTrigger(GetTriggeringTrigger())
    set udg_IntroSkipped=true
    call ResetTerrainFogBJ()
    call UseTimeOfDayBJ(true)
    call SetUserControlForceOn(udg_AAAPG_Arthas)
    call CinematicModeBJ(false, udg_AAAPG_Arthas)
    call CinematicFadeBJ(bj_CINEFADETYPE_FADEIN, 0.00, "ReplaceableTextures\\CameraMasks\\White_mask.blp", 0, 0, 0, 0)
    call ResetToGameCameraForPlayer(udg_AAAP_Arthas, 0.00)
    call PanCameraToTimedLocForPlayer(udg_AAAP_Arthas, GetRectCenter(gg_rct_Arthas_End), 0.00)
    call CameraResetSmoothingFactorBJ()
    call SetSkyModel(null)
    call SetUnitPositionLoc(udg_Arthas, GetRectCenter(gg_rct_Arthas_End))
    call SetUnitPositionLoc(udg_Footman05, GetRectCenter(gg_rct_FinalFootman03))
    call SetUnitPositionLoc(udg_Footman06, GetRectCenter(gg_rct_FinalFootman04))
    call SetUnitPositionLoc(udg_StartingFootman01, GetRectCenter(gg_rct_FinalFootman01))
    call SetUnitPositionLoc(udg_StartingFootman02, GetRectCenter(gg_rct_FinalFootman02))
    call RemoveUnit(udg_Villager01)
    call RemoveUnit(udg_Villager02)
    call RemoveUnit(udg_Villager03)
    call RemoveUnit(udg_Villager04)
    call RemoveUnit(udg_Villager05)
    call RemoveUnit(udg_Villager06)
    call RemoveUnit(udg_Villager07)
    call RemoveUnit(udg_Villager08)
    call RemoveUnit(udg_Villager09)
    call RemoveUnit(udg_Villager10)
    call RemoveUnit(udg_Villager11)
    call RemoveUnit(udg_Villager12)
    if ( Trig_Intro_Cancel_Func029001() ) then
        call RemoveUnit(udg_Footman01)
    else
        call DoNothing()
    endif
    if ( Trig_Intro_Cancel_Func030001() ) then
        call RemoveUnit(udg_Footman02)
    else
        call DoNothing()
    endif
    if ( Trig_Intro_Cancel_Func031001() ) then
        call RemoveUnit(udg_Footman03)
    else
        call DoNothing()
    endif
    if ( Trig_Intro_Cancel_Func032001() ) then
        call RemoveUnit(udg_Footman03)
    else
        call DoNothing()
    endif
    if ( Trig_Intro_Cancel_Func033001() ) then
        call RemoveUnit(udg_Footman04)
    else
        call DoNothing()
    endif
    if ( Trig_Intro_Cancel_Func034001() ) then
        call RemoveUnit(udg_Footman07)
    else
        call DoNothing()
    endif
    if ( Trig_Intro_Cancel_Func035001() ) then
        call RemoveUnit(udg_Footman08)
    else
        call DoNothing()
    endif
    if ( Trig_Intro_Cancel_Func036001() ) then
        call RemoveUnit(udg_Uther)
    else
        call DoNothing()
    endif
    if ( Trig_Intro_Cancel_Func037001() ) then
        call RemoveUnit(udg_Horse01)
    else
        call DoNothing()
    endif
    if ( Trig_Intro_Cancel_Func038001() ) then
        call RemoveUnit(udg_Horse02)
    else
        call DoNothing()
    endif
    if ( Trig_Intro_Cancel_Func039001() ) then
        call RemoveUnit(udg_Horse03)
    else
        call DoNothing()
    endif
    set udg_HasArthasArrived=true
    call StopSoundBJ(GetLastPlayedSound(), true)
    call VolumeGroupResetBJ()
    call EndThematicMusicBJ()
    call SelectUnitSingle(udg_Arthas)
    call SetUnitOwner(udg_Footman05, udg_AAAP_Arthas, true)
    call SetUnitOwner(udg_Footman06, udg_AAAP_Arthas, true)
    call ResetUnitAnimation(udg_Footman05)
    call ResetUnitAnimation(udg_Footman06)
    call TriggerSleepAction(1.00)
    if ( Trig_Intro_Cancel_Func050001() ) then
        call QuestMessageBJ(udg_AAAPG_Arthas, bj_QUESTMESSAGE_DISCOVERED, "TRIGSTR_367")
    else
        call DoNothing()
    endif
    if ( Trig_Intro_Cancel_Func051001() ) then
        call PingMinimapLocForForce(udg_AAAPG_Arthas, GetRectCenter(gg_rct_TownCenter), 4.00)
    else
        call DoNothing()
    endif
    if ( Trig_Intro_Cancel_Func052001() ) then
        call SetCameraQuickPositionLocForPlayer(udg_AAAP_Arthas, GetRectCenter(gg_rct_TownCenter))
    else
        call DoNothing()
    endif
    if ( Trig_Intro_Cancel_Func053001() ) then
        call PingMinimapLocForForce(udg_AAAPG_Arthas, GetRectCenter(gg_rct_TownCenter), 4.00)
    else
        call DoNothing()
    endif
    if ( Trig_Intro_Cancel_Func054001() ) then
        call SetCameraQuickPositionLocForPlayer(udg_AAAP_Arthas, GetRectCenter(gg_rct_TownCenter))
    else
        call DoNothing()
    endif
    call CreateFogModifierRadiusLocBJ(true, udg_AAAP_Arthas, FOG_OF_WAR_VISIBLE, GetRectCenter(gg_rct_TownCenter), 1024.00)
    set udg_TownVisibility=GetLastCreatedFogModifier()
    call FogModifierStop(udg_TownVisibility)
    call ConditionalTriggerExecute(gg_trg_Show_Orc_Cinematic_Units)
    call TriggerExecute(gg_trg_Burn_the_Buildings)
    call IssuePointOrderLocBJ(udg_Blake, "move", GetRectCenter(gg_rct_Blake01))
    call TriggerSleepAction(1.00)
    call IssuePointOrderLocBJ(udg_Ryan, "move", GetRectCenter(gg_rct_Ryan01))
    call TriggerSleepAction(10.00)
    call QueuedTriggerAddBJ(gg_trg_Footman_Acquired, true)
    call TriggerSleepAction(10.00)
    call QueuedTriggerAddBJ(gg_trg_Holy_Light_Hint_Queue, true)
endfunction

//===========================================================================
function InitTrig_Intro_Cancel takes nothing returns nothing
    set gg_trg_Intro_Cancel=CreateTrigger()
    call DisableTrigger(gg_trg_Intro_Cancel)
    call TriggerRegisterPlayerEventEndCinematic(gg_trg_Intro_Cancel, Player(1))
    call TriggerAddAction(gg_trg_Intro_Cancel, function Trig_Intro_Cancel_Actions)
endfunction

//===========================================================================
// Trigger: Intro Cinematic
//===========================================================================
function Trig_Intro_Cinematic_Func019001 takes nothing returns boolean
    return ( udg_IntroSkipped == true )
endfunction

function Trig_Intro_Cinematic_Func024001 takes nothing returns boolean
    return ( udg_IntroSkipped == true )
endfunction

function Trig_Intro_Cinematic_Func027001 takes nothing returns boolean
    return ( udg_IntroSkipped == true )
endfunction

function Trig_Intro_Cinematic_Func031001 takes nothing returns boolean
    return ( udg_IntroSkipped == true )
endfunction

function Trig_Intro_Cinematic_Func042001 takes nothing returns boolean
    return ( udg_IntroSkipped == true )
endfunction

function Trig_Intro_Cinematic_Func055001 takes nothing returns boolean
    return ( udg_IntroSkipped == true )
endfunction

function Trig_Intro_Cinematic_Func064001 takes nothing returns boolean
    return ( udg_IntroSkipped == true )
endfunction

function Trig_Intro_Cinematic_Func078001 takes nothing returns boolean
    return ( udg_IntroSkipped == true )
endfunction

function Trig_Intro_Cinematic_Func096001 takes nothing returns boolean
    return ( udg_IntroSkipped == true )
endfunction

function Trig_Intro_Cinematic_Func097002 takes nothing returns nothing
    call SetUnitFacingToFaceUnitTimed(GetEnumUnit(), udg_Arthas, 0.10)
endfunction

function Trig_Intro_Cinematic_Func098002 takes nothing returns nothing
    call SetUnitFacingToFaceUnitTimed(GetEnumUnit(), udg_Arthas, 0.10)
endfunction

function Trig_Intro_Cinematic_Func100001 takes nothing returns boolean
    return ( udg_IntroSkipped == true )
endfunction

function Trig_Intro_Cinematic_Func111001 takes nothing returns boolean
    return ( udg_IntroSkipped == true )
endfunction

function Trig_Intro_Cinematic_Func113001 takes nothing returns boolean
    return ( udg_IntroSkipped == true )
endfunction

function Trig_Intro_Cinematic_Func115001 takes nothing returns boolean
    return ( udg_IntroSkipped == true )
endfunction

function Trig_Intro_Cinematic_Func119001 takes nothing returns boolean
    return ( udg_IntroSkipped == true )
endfunction

function Trig_Intro_Cinematic_Func121001 takes nothing returns boolean
    return ( udg_IntroSkipped == true )
endfunction

function Trig_Intro_Cinematic_Func123001 takes nothing returns boolean
    return ( udg_IntroSkipped == true )
endfunction

function Trig_Intro_Cinematic_Func125001 takes nothing returns boolean
    return ( udg_IntroSkipped == true )
endfunction

function Trig_Intro_Cinematic_Func127001 takes nothing returns boolean
    return ( udg_IntroSkipped == true )
endfunction

function Trig_Intro_Cinematic_Func129001 takes nothing returns boolean
    return ( udg_IntroSkipped == true )
endfunction

function Trig_Intro_Cinematic_Func132001 takes nothing returns boolean
    return ( udg_IntroSkipped == true )
endfunction

function Trig_Intro_Cinematic_Func134001 takes nothing returns boolean
    return ( udg_IntroSkipped == true )
endfunction

function Trig_Intro_Cinematic_Func136001 takes nothing returns boolean
    return ( udg_IntroSkipped == true )
endfunction

function Trig_Intro_Cinematic_Func138001 takes nothing returns boolean
    return ( udg_IntroSkipped == true )
endfunction

function Trig_Intro_Cinematic_Func142001 takes nothing returns boolean
    return ( udg_IntroSkipped == true )
endfunction

function Trig_Intro_Cinematic_Func150001 takes nothing returns boolean
    return ( udg_IntroSkipped == true )
endfunction

function Trig_Intro_Cinematic_Func153001 takes nothing returns boolean
    return ( udg_IntroSkipped == true )
endfunction

function Trig_Intro_Cinematic_Func158001 takes nothing returns boolean
    return ( udg_IntroSkipped == true )
endfunction

function Trig_Intro_Cinematic_Func163001 takes nothing returns boolean
    return ( udg_IntroSkipped == true )
endfunction

function Trig_Intro_Cinematic_Func168001 takes nothing returns boolean
    return ( udg_IntroSkipped == true )
endfunction

function Trig_Intro_Cinematic_Func170001 takes nothing returns boolean
    return ( udg_IntroSkipped == true )
endfunction

function Trig_Intro_Cinematic_Func173001 takes nothing returns boolean
    return ( udg_IntroSkipped == true )
endfunction

function Trig_Intro_Cinematic_Func176001 takes nothing returns boolean
    return ( udg_IntroSkipped == true )
endfunction

function Trig_Intro_Cinematic_Func180002 takes nothing returns nothing
    call IssuePointOrderLocBJ(GetEnumUnit(), "move", GetRectCenter(gg_rct_UtherDelete))
endfunction

function Trig_Intro_Cinematic_Func183001 takes nothing returns boolean
    return ( udg_IntroSkipped == true )
endfunction

function Trig_Intro_Cinematic_Func193002 takes nothing returns nothing
    call RescueUnitBJ(GetEnumUnit(), Player(1), true)
endfunction

function Trig_Intro_Cinematic_Func194002 takes nothing returns nothing
    call ResetUnitAnimation(GetEnumUnit())
endfunction

function Trig_Intro_Cinematic_Actions takes nothing returns nothing
    call CameraSetupApplyForPlayer(true, gg_cam_Start01a, udg_AAAP_Arthas, 0.00)
    call CinematicFadeBJ(bj_CINEFADETYPE_FADEOUT, 0.00, "ReplaceableTextures\\CameraMasks\\White_mask.blp", 0, 0, 0, 0)
    call UseTimeOfDayBJ(false)
    call CameraSetSmoothingFactorBJ(2.00)
    call CinematicFadeBJ(bj_CINEFADETYPE_FADEIN, 3.00, "ReplaceableTextures\\CameraMasks\\White_mask.blp", 0, 0, 0, 0)
    call SetTerrainFogExBJ(0, 1000.00, 5000.00, 0, 0.00, 20.00, 50.00)
    call SetUnitFacingToFaceUnitTimed(udg_Footman01, udg_Uther, 0.00)
    call SetUnitFacingToFaceUnitTimed(udg_Footman02, udg_Uther, 0.00)
    call SetUnitFacingToFaceUnitTimed(udg_Footman05, udg_Uther, 0.00)
    call SetUnitFacingToFaceUnitTimed(udg_Footman06, udg_Uther, 0.00)
    call SetUnitFacingToFaceUnitTimed(udg_Uther, udg_Footman02, 0.00)
    call ClearMapMusicBJ()
    call TriggerSleepAction(0.01)
    call PlayThematicMusicBJ("Sound\\Music\\mp3Music\\Comradeship.mp3")
    call SetMapMusicIndexedBJ("music", 0)
    // Cinematic is escapable after this point.
    call EnableTrigger(gg_trg_Intro_Cancel)
    call TriggerSleepAction(0.50)
    if ( Trig_Intro_Cinematic_Func019001() ) then
        return
    else
        call DoNothing()
    endif
    call IssueTargetOrderBJ(udg_Footman03, "attack", udg_Footman04)
    call TriggerSleepAction(0.20)
    call IssueTargetOrderBJ(udg_Footman08, "attack", udg_Footman07)
    call TriggerSleepAction(0.25)
    if ( Trig_Intro_Cinematic_Func024001() ) then
        return
    else
        call DoNothing()
    endif
    call IssueTargetOrderBJ(udg_Footman07, "attack", udg_Footman08)
    call TriggerSleepAction(0.20)
    if ( Trig_Intro_Cinematic_Func027001() ) then
        return
    else
        call DoNothing()
    endif
    call IssueTargetOrderBJ(udg_Footman04, "attack", udg_Footman03)
    call ConditionalTriggerExecute(gg_trg___Defend)
    call TriggerSleepAction(4.50)
    if ( Trig_Intro_Cinematic_Func031001() ) then
        return
    else
        call DoNothing()
    endif
    call SetTerrainFogExBJ(0, 500.00, 3800.00, 0, 0.00, 20.00, 50.00)
    call CinematicFadeBJ(bj_CINEFADETYPE_FADEOUT, 0.30, "ReplaceableTextures\\CameraMasks\\White_mask.blp", 0, 0, 0, 0)
    call SetSoundPositionLocBJ(gg_snd_KnightNoRiderWhat2, GetUnitLoc(udg_Horse02), 0)
    call SetSoundVolumeBJ(gg_snd_KnightNoRiderWhat2, 80.00)
    call PlaySoundBJ(gg_snd_KnightNoRiderWhat2)
    call IssuePointOrderLocBJ(udg_Arthas, "move", GetRectCenter(gg_rct_Arthas_End))
    call TriggerSleepAction(0.05)
    call IssuePointOrderLocBJ(udg_StartingFootman01, "move", GetRectCenter(gg_rct_Footman_01_End))
    call IssuePointOrderLocBJ(udg_StartingFootman02, "move", GetRectCenter(gg_rct_Footman_02_End))
    call TriggerSleepAction(0.30)
    if ( Trig_Intro_Cinematic_Func042001() ) then
        return
    else
        call DoNothing()
    endif
    call CinematicFadeBJ(bj_CINEFADETYPE_FADEIN, 0.30, "ReplaceableTextures\\CameraMasks\\White_mask.blp", 0, 0, 0, 0)
    call CameraSetSmoothingFactorBJ(0.00)
    call CameraSetupApplyForPlayer(true, gg_cam_CamArthasIntroPanStart, udg_AAAP_Arthas, 0.00)
    call IssuePointOrderLocBJ(udg_Uther, "move", GetRectCenter(gg_rct_Uther_01))
    call SetUnitAnimation(udg_Horse02, "stand victory")
    call SetSoundPositionLocBJ(gg_snd_KnightNoRiderWarcry1, GetUnitLoc(udg_Horse02), 0)
    call PlaySoundBJ(gg_snd_KnightNoRiderWarcry1)
    call ResetUnitAnimation(udg_Horse02)
    call SetSoundPositionLocBJ(gg_snd_KnightNoRiderWhat1, GetUnitLoc(udg_Horse02), 0)
    call PlaySoundBJ(gg_snd_KnightNoRiderWhat1)
    call CameraSetupApplyForPlayer(true, gg_cam_CamArthasIntroPanEnd, udg_AAAP_Arthas, 4.00)
    call TriggerSleepAction(4.00)
    if ( Trig_Intro_Cinematic_Func055001() ) then
        return
    else
        call DoNothing()
    endif
    set udg_HasArthasArrived=true
    call DisableTrigger(gg_trg___Defend)
    call ResetUnitAnimation(udg_Uther)
    call ResetUnitAnimation(udg_Footman01)
    call ResetUnitAnimation(udg_Footman02)
    call ResetUnitAnimation(udg_Footman05)
    call ResetUnitAnimation(udg_Footman06)
    call TriggerSleepAction(0.50)
    if ( Trig_Intro_Cinematic_Func064001() ) then
        return
    else
        call DoNothing()
    endif
    call IssueImmediateOrderBJ(udg_Arthas, "stop")
    call SetUnitFacingToFaceUnitTimed(udg_Arthas, udg_Uther, 0.50)
    call SetUnitFacingToFaceUnitTimed(udg_Uther, udg_Arthas, 0.40)
    call IssuePointOrderLocBJ(udg_Footman01, "move", GetRectCenter(gg_rct_Footman01))
    call IssuePointOrderLocBJ(udg_Footman02, "move", GetRectCenter(gg_rct_Footman02))
    call IssuePointOrderLocBJ(udg_Footman03, "move", GetRectCenter(gg_rct_Footman03))
    call IssuePointOrderLocBJ(udg_Footman04, "move", GetRectCenter(gg_rct_Footman04))
    call IssuePointOrderLocBJ(udg_Footman05, "move", GetRectCenter(gg_rct_Footman05))
    call IssuePointOrderLocBJ(udg_Footman06, "move", GetRectCenter(gg_rct_Footman06))
    call IssuePointOrderLocBJ(udg_Footman07, "move", GetRectCenter(gg_rct_Footman07))
    call IssuePointOrderLocBJ(udg_Footman08, "move", GetRectCenter(gg_rct_Footman08))
    call TransmissionFromUnitWithNameBJ(udg_AAAPG_Arthas, udg_Uther, "TRIGSTR_020", gg_snd_H01Uther01, "TRIGSTR_021", bj_TIMETYPE_ADD, 0.00, false)
    call TriggerSleepAction(0.30)
    if ( Trig_Intro_Cinematic_Func078001() ) then
        return
    else
        call DoNothing()
    endif
    call RemoveUnit(udg_Footman03)
    call CreateNUnitsAtLoc(1, 'hfoo', udg_P_Uther, GetRectCenter(gg_rct_Footman03), 0.00)
    set udg_Footman03=GetLastCreatedUnit()
    call GroupAddUnitSimple(udg_Footman03, udg_UthersForcesB)
    call RemoveUnit(udg_Footman04)
    call CreateNUnitsAtLoc(1, 'hfoo', udg_P_Uther, GetRectCenter(gg_rct_Footman04), 0.00)
    set udg_Footman04=GetLastCreatedUnit()
    call GroupAddUnitSimple(udg_Footman04, udg_UthersForcesB)
    call RemoveUnit(udg_Footman07)
    call CreateNUnitsAtLoc(1, 'hfoo', udg_P_Uther, GetRectCenter(gg_rct_Footman07), 0.00)
    set udg_Footman07=GetLastCreatedUnit()
    call GroupAddUnitSimple(udg_Footman07, udg_UthersForcesB)
    call RemoveUnit(udg_Footman08)
    call CreateNUnitsAtLoc(1, 'hfoo', udg_P_Uther, GetRectCenter(gg_rct_Footman08), 0.00)
    set udg_Footman08=GetLastCreatedUnit()
    call GroupAddUnitSimple(udg_Footman08, udg_UthersForcesB)
    call TriggerSleepAction(0.20)
    if ( Trig_Intro_Cinematic_Func096001() ) then
        return
    else
        call DoNothing()
    endif
    call ForGroupBJ(udg_UthersForcesA, function Trig_Intro_Cinematic_Func097002)
    call ForGroupBJ(udg_UthersForcesB, function Trig_Intro_Cinematic_Func098002)
    call TriggerSleepAction(0.01)
    if ( Trig_Intro_Cinematic_Func100001() ) then
        return
    else
        call DoNothing()
    endif
    call SetUnitAnimation(udg_Footman01, "Stand - 1")
    call SetUnitAnimation(udg_Footman02, "Stand - 1")
    call SetUnitAnimation(udg_Footman03, "Stand - 1")
    call SetUnitAnimation(udg_Footman04, "Stand - 1")
    call SetUnitAnimation(udg_Footman05, "Stand - 1")
    call SetUnitAnimation(udg_Footman06, "Stand - 1")
    call SetUnitAnimation(udg_Footman07, "Stand - 1")
    call SetUnitAnimation(udg_Footman08, "Stand - 1")
    call TriggerSleepAction(3.50)
    call WaitForSoundBJ(gg_snd_H01Uther01, 0)
    if ( Trig_Intro_Cinematic_Func111001() ) then
        return
    else
        call DoNothing()
    endif
    call TransmissionFromUnitWithNameBJ(udg_AAAPG_Arthas, udg_Arthas, "TRIGSTR_022", gg_snd_H01Arthas02, "TRIGSTR_023", bj_TIMETYPE_ADD, 0.00, true)
    if ( Trig_Intro_Cinematic_Func113001() ) then
        return
    else
        call DoNothing()
    endif
    call TriggerSleepAction(0.50)
    if ( Trig_Intro_Cinematic_Func115001() ) then
        return
    else
        call DoNothing()
    endif
    call CameraSetSmoothingFactorBJ(0.00)
    call CameraSetupApplyForPlayer(true, gg_cam_Cam3UtherArthasMeet, udg_AAAP_Arthas, 0.00)
    call WaitForSoundBJ(gg_snd_H01Arthas02, 0)
    if ( Trig_Intro_Cinematic_Func119001() ) then
        return
    else
        call DoNothing()
    endif
    call TransmissionFromUnitWithNameBJ(udg_AAAPG_Arthas, udg_Uther, "TRIGSTR_024", gg_snd_H01Uther03, "TRIGSTR_025", bj_TIMETYPE_ADD, 0.00, true)
    if ( Trig_Intro_Cinematic_Func121001() ) then
        return
    else
        call DoNothing()
    endif
    call TransmissionFromUnitWithNameBJ(udg_AAAPG_Arthas, udg_Arthas, "TRIGSTR_026", gg_snd_H01Arthas04, "TRIGSTR_027", bj_TIMETYPE_ADD, 0.00, true)
    if ( Trig_Intro_Cinematic_Func123001() ) then
        return
    else
        call DoNothing()
    endif
    call TriggerSleepAction(0.50)
    if ( Trig_Intro_Cinematic_Func125001() ) then
        return
    else
        call DoNothing()
    endif
    call TransmissionFromUnitWithNameBJ(udg_AAAPG_Arthas, udg_Uther, "TRIGSTR_028", gg_snd_H01Uther05, "TRIGSTR_029", bj_TIMETYPE_ADD, 0.00, true)
    if ( Trig_Intro_Cinematic_Func127001() ) then
        return
    else
        call DoNothing()
    endif
    call TriggerSleepAction(0.20)
    if ( Trig_Intro_Cinematic_Func129001() ) then
        return
    else
        call DoNothing()
    endif
    call CameraSetupApplyForPlayer(true, gg_cam_Close_Arthas, udg_AAAP_Arthas, 0.00)
    call TransmissionFromUnitWithNameBJ(udg_AAAPG_Arthas, udg_Arthas, "TRIGSTR_030", gg_snd_H01Arthas06, "TRIGSTR_066", bj_TIMETYPE_ADD, 0.00, true)
    if ( Trig_Intro_Cinematic_Func132001() ) then
        return
    else
        call DoNothing()
    endif
    call TriggerSleepAction(0.40)
    if ( Trig_Intro_Cinematic_Func134001() ) then
        return
    else
        call DoNothing()
    endif
    call TransmissionFromUnitWithNameBJ(udg_AAAPG_Arthas, udg_Uther, "TRIGSTR_077", gg_snd_H01Uther07, "TRIGSTR_079", bj_TIMETYPE_ADD, 0.00, true)
    if ( Trig_Intro_Cinematic_Func136001() ) then
        return
    else
        call DoNothing()
    endif
    call TriggerSleepAction(0.50)
    if ( Trig_Intro_Cinematic_Func138001() ) then
        return
    else
        call DoNothing()
    endif
    call TransmissionFromUnitWithNameBJ(udg_AAAPG_Arthas, udg_Arthas, "TRIGSTR_080", gg_snd_H01Arthas08, "TRIGSTR_081", bj_TIMETYPE_ADD, 0.00, false)
    call CinematicFadeBJ(bj_CINEFADETYPE_FADEOUT, 0.30, "ReplaceableTextures\\CameraMasks\\White_mask.blp", 0, 0, 0, 0)
    call TriggerSleepAction(0.50)
    if ( Trig_Intro_Cinematic_Func142001() ) then
        return
    else
        call DoNothing()
    endif
    call SetTerrainFogExBJ(0, 1000.00, 5000.00, 0, 0.00, 20.00, 50.00)
    call ConditionalTriggerExecute(gg_trg___Villagers)
    call CameraSetSmoothingFactorBJ(10.00)
    call CinematicFadeBJ(bj_CINEFADETYPE_FADEIN, 0.30, "ReplaceableTextures\\CameraMasks\\White_mask.blp", 0, 0, 0, 0)
    call CameraSetupApplyForPlayer(true, gg_cam_Strahnbrad01, udg_AAAP_Arthas, 0.00)
    call CameraSetupApplyForPlayer(true, gg_cam_Strahnbrad02, udg_AAAP_Arthas, 7.00)
    call TriggerSleepAction(6.80)
    if ( Trig_Intro_Cinematic_Func150001() ) then
        return
    else
        call DoNothing()
    endif
    call CinematicFadeBJ(bj_CINEFADETYPE_FADEOUT, 0.30, "ReplaceableTextures\\CameraMasks\\White_mask.blp", 0, 0, 0, 0)
    call TriggerSleepAction(0.30)
    if ( Trig_Intro_Cinematic_Func153001() ) then
        return
    else
        call DoNothing()
    endif
    call CinematicFadeBJ(bj_CINEFADETYPE_FADEIN, 0.30, "ReplaceableTextures\\CameraMasks\\White_mask.blp", 0, 0, 0, 0)
    call CameraSetupApplyForPlayer(true, gg_cam_Strahnbrad03, udg_AAAP_Arthas, 0.00)
    call CameraSetupApplyForPlayer(true, gg_cam_Strahnbrad04, udg_AAAP_Arthas, 3.10)
    call TriggerSleepAction(2.50)
    if ( Trig_Intro_Cinematic_Func158001() ) then
        return
    else
        call DoNothing()
    endif
    call CameraSetSmoothingFactorBJ(0.10)
    call CinematicFadeBJ(bj_CINEFADETYPE_FADEOUT, 0.30, "ReplaceableTextures\\CameraMasks\\White_mask.blp", 0, 0, 0, 0)
    call SetTerrainFogExBJ(0, 1000.00, 8000.00, 0, 0.00, 20.00, 50.00)
    call TriggerSleepAction(0.30)
    if ( Trig_Intro_Cinematic_Func163001() ) then
        return
    else
        call DoNothing()
    endif
    call CinematicFadeBJ(bj_CINEFADETYPE_FADEIN, 0.30, "ReplaceableTextures\\CameraMasks\\White_mask.blp", 0, 0, 0, 0)
    call CameraSetupApplyForPlayer(true, gg_cam_Close_Arthas, udg_AAAP_Arthas, 0.00)
    call WaitForSoundBJ(gg_snd_H01Arthas08, 0)
    call TransmissionFromUnitWithNameBJ(udg_AAAPG_Arthas, udg_Uther, "TRIGSTR_082", gg_snd_H01Uther09, "TRIGSTR_083", bj_TIMETYPE_ADD, 0.00, true)
    if ( Trig_Intro_Cinematic_Func168001() ) then
        return
    else
        call DoNothing()
    endif
    call TransmissionFromUnitWithNameBJ(udg_AAAPG_Arthas, udg_Arthas, "TRIGSTR_084", gg_snd_H01Arthas10, "TRIGSTR_085", bj_TIMETYPE_ADD, 0.00, true)
    if ( Trig_Intro_Cinematic_Func170001() ) then
        return
    else
        call DoNothing()
    endif
    call TransmissionFromUnitWithNameBJ(udg_AAAPG_Arthas, udg_Uther, "TRIGSTR_086", gg_snd_H01Uther11, "TRIGSTR_087", bj_TIMETYPE_ADD, 0.00, false)
    call TriggerSleepAction(4.00)
    if ( Trig_Intro_Cinematic_Func173001() ) then
        return
    else
        call DoNothing()
    endif
    call IssuePointOrderLocBJ(udg_Uther, "move", GetRectCenter(gg_rct_UtherDelete))
    call TriggerSleepAction(1.00)
    if ( Trig_Intro_Cinematic_Func176001() ) then
        return
    else
        call DoNothing()
    endif
    call IssuePointOrderLocBJ(udg_Horse01, "move", GetRectCenter(gg_rct_UtherDelete))
    call IssuePointOrderLocBJ(udg_Horse02, "move", GetRectCenter(gg_rct_UtherDelete))
    call IssuePointOrderLocBJ(udg_Horse03, "move", GetRectCenter(gg_rct_UtherDelete))
    call ForGroupBJ(udg_UthersForcesB, function Trig_Intro_Cinematic_Func180002)
    call TriggerSleepAction(2.00)
    call WaitForSoundBJ(gg_snd_H01Uther11, 0)
    if ( Trig_Intro_Cinematic_Func183001() ) then
        return
    else
        call DoNothing()
    endif
    // NO LONGER SKIPPABLE
    // Cinematic is no longer escapable after this point.
    call DisableTrigger(gg_trg_Intro_Cancel)
    call CameraResetSmoothingFactorBJ()
    call ResetToGameCameraForPlayer(udg_AAAP_Arthas, 2.00)
    call TriggerSleepAction(1.00)
    call CinematicModeBJ(false, udg_AAAPG_Arthas)
    call SelectUnitSingle(udg_Arthas)
    call SetSkyModel(null)
    call ForGroupBJ(udg_UthersForcesA, function Trig_Intro_Cinematic_Func193002)
    call ForGroupBJ(udg_UthersForcesA, function Trig_Intro_Cinematic_Func194002)
    call TriggerSleepAction(0.50)
    set udg_IntroObjectiveGiven=true
    call QuestMessageBJ(udg_AAAPG_Arthas, bj_QUESTMESSAGE_DISCOVERED, "TRIGSTR_089")
    call PingMinimapLocForForce(udg_AAAPG_Arthas, GetRectCenter(gg_rct_TownCenter), 4.00)
    call SetCameraQuickPositionLocForPlayer(udg_AAAP_Arthas, GetRectCenter(gg_rct_TownCenter))
    call CreateFogModifierRadiusLocBJ(true, udg_AAAP_Arthas, FOG_OF_WAR_VISIBLE, GetRectCenter(gg_rct_TownCenter), 1024.00)
    set udg_TownVisibility=GetLastCreatedFogModifier()
    call FogModifierStop(udg_TownVisibility)
    call TriggerSleepAction(1.00)
    call UseTimeOfDayBJ(true)
    call IssuePointOrderLocBJ(udg_StartingFootman01, "move", GetRectCenter(gg_rct_FinalFootman01))
    call IssuePointOrderLocBJ(udg_StartingFootman02, "move", GetRectCenter(gg_rct_FinalFootman02))
    call IssuePointOrderLocBJ(udg_Footman05, "move", GetRectCenter(gg_rct_FinalFootman03))
    call IssuePointOrderLocBJ(udg_Footman06, "move", GetRectCenter(gg_rct_FinalFootman04))
    call ConditionalTriggerExecute(gg_trg_Show_Orc_Cinematic_Units)
    call TriggerExecute(gg_trg_Burn_the_Buildings)
    call TriggerSleepAction(1.00)
    call ResetTerrainFogBJ()
    call CameraResetSmoothingFactorBJ()
    call TriggerSleepAction(10.00)
    call QueuedTriggerAddBJ(gg_trg_Footman_Acquired, true)
    call TriggerSleepAction(10.00)
    call QueuedTriggerAddBJ(gg_trg_Holy_Light_Hint_Queue, true)
endfunction

//===========================================================================
function InitTrig_Intro_Cinematic takes nothing returns nothing
    set gg_trg_Intro_Cinematic=CreateTrigger()
    call TriggerAddAction(gg_trg_Intro_Cinematic, function Trig_Intro_Cinematic_Actions)
endfunction

//===========================================================================
// Trigger: Holy Light Hint Queue
//===========================================================================
function Trig_Holy_Light_Hint_Queue_Actions takes nothing returns nothing
    call DisableTrigger(GetTriggeringTrigger())
    call QuestMessageBJ(udg_AAAPG_Arthas, bj_QUESTMESSAGE_HINT, "TRIGSTR_325")
    call TriggerSleepAction(bj_QUEUE_DELAY_HINT)
    call QueuedTriggerRemoveBJ(GetTriggeringTrigger())
endfunction

//===========================================================================
function InitTrig_Holy_Light_Hint_Queue takes nothing returns nothing
    set gg_trg_Holy_Light_Hint_Queue=CreateTrigger()
    call TriggerAddAction(gg_trg_Holy_Light_Hint_Queue, function Trig_Holy_Light_Hint_Queue_Actions)
endfunction

//===========================================================================
// Trigger: Footman Acquired
//===========================================================================
function Trig_Footman_Acquired_Actions takes nothing returns nothing
    call DisableTrigger(GetTriggeringTrigger())
    call QuestMessageBJ(udg_AAAPG_Arthas, bj_QUESTMESSAGE_UNITACQUIRED, "TRIGSTR_363")
    call TriggerSleepAction(bj_QUEUE_DELAY_HINT)
    call QueuedTriggerRemoveBJ(GetTriggeringTrigger())
endfunction

//===========================================================================
function InitTrig_Footman_Acquired takes nothing returns nothing
    set gg_trg_Footman_Acquired=CreateTrigger()
    call TriggerAddAction(gg_trg_Footman_Acquired, function Trig_Footman_Acquired_Actions)
endfunction

//===========================================================================
// Trigger:   Defend
//
// Loops
//===========================================================================
function Trig___Defend_Conditions takes nothing returns boolean
    if ( not ( udg_HasArthasArrived == false ) ) then
        return false
    endif
    return true
endfunction

function Trig___Defend_Func006001 takes nothing returns boolean
    return ( udg_IntroSkipped == true )
endfunction

function Trig___Defend_Func012001 takes nothing returns boolean
    return ( udg_IntroSkipped == true )
endfunction

function Trig___Defend_Func015001 takes nothing returns boolean
    return ( udg_IntroSkipped == true )
endfunction

function Trig___Defend_Func021001 takes nothing returns boolean
    return ( udg_IntroSkipped == true )
endfunction

function Trig___Defend_Actions takes nothing returns nothing
    call SetUnitAnimation(udg_Uther, "Stand Victory")
    call SetSoundVolumeBJ(gg_snd_HeroPaladinYesAttack1, 50.00)
    call UnitAddIndicatorBJ(udg_Uther, 100.00, 100.00, 100.00, 0.00)
    call TriggerSleepAction(0.25)
    if ( Trig___Defend_Func006001() ) then
        return
    else
        call DoNothing()
    endif
    call SetUnitAnimation(udg_Footman06, "Stand Defend")
    call SetUnitAnimation(udg_Footman05, "Stand Defend")
    call SetUnitAnimation(udg_Footman02, "Stand Defend")
    call SetUnitAnimation(udg_Footman01, "Stand Defend")
    call TriggerSleepAction(0.25)
    if ( Trig___Defend_Func012001() ) then
        return
    else
        call DoNothing()
    endif
    call SetUnitAnimation(udg_Uther, "Stand - 1")
    call TriggerSleepAction(0.25)
    if ( Trig___Defend_Func015001() ) then
        return
    else
        call DoNothing()
    endif
    call SetUnitAnimation(udg_Footman06, "Stand - 1")
    call SetUnitAnimation(udg_Footman05, "Stand - 1")
    call SetUnitAnimation(udg_Footman01, "Stand - 1")
    call SetUnitAnimation(udg_Footman02, "Stand - 1")
    call TriggerSleepAction(1.00)
    if ( Trig___Defend_Func021001() ) then
        return
    else
        call DoNothing()
    endif
    call ConditionalTriggerExecute(GetTriggeringTrigger())
endfunction

//===========================================================================
function InitTrig___Defend takes nothing returns nothing
    set gg_trg___Defend=CreateTrigger()
    call TriggerAddCondition(gg_trg___Defend, Condition(function Trig___Defend_Conditions))
    call TriggerAddAction(gg_trg___Defend, function Trig___Defend_Actions)
endfunction

//===========================================================================
// Trigger:   Footman01 End Movement
//===========================================================================
function Trig___Footman01_End_Movement_Conditions takes nothing returns boolean
    if ( not ( GetEnteringUnit() == udg_StartingFootman01 ) ) then
        return false
    endif
    return true
endfunction

function Trig___Footman01_End_Movement_Actions takes nothing returns nothing
    call DisableTrigger(GetTriggeringTrigger())
    call IssueImmediateOrderBJ(udg_StartingFootman01, "holdposition")
    call SetUnitPathing(udg_StartingFootman01, true)
    call SetUnitFacingToFaceUnitTimed(udg_StartingFootman01, udg_Uther, 1.00)
endfunction

//===========================================================================
function InitTrig___Footman01_End_Movement takes nothing returns nothing
    set gg_trg___Footman01_End_Movement=CreateTrigger()
    call TriggerRegisterEnterRectSimple(gg_trg___Footman01_End_Movement, gg_rct_Footman_01_End)
    call TriggerAddCondition(gg_trg___Footman01_End_Movement, Condition(function Trig___Footman01_End_Movement_Conditions))
    call TriggerAddAction(gg_trg___Footman01_End_Movement, function Trig___Footman01_End_Movement_Actions)
endfunction

//===========================================================================
// Trigger:   Footman02 End Movement
//===========================================================================
function Trig___Footman02_End_Movement_Conditions takes nothing returns boolean
    if ( not ( GetEnteringUnit() == udg_StartingFootman02 ) ) then
        return false
    endif
    return true
endfunction

function Trig___Footman02_End_Movement_Actions takes nothing returns nothing
    call DisableTrigger(GetTriggeringTrigger())
    call IssueImmediateOrderBJ(udg_StartingFootman02, "holdposition")
    call SetUnitPathing(udg_StartingFootman02, true)
    call SetUnitFacingToFaceUnitTimed(udg_StartingFootman02, udg_Uther, 1.00)
endfunction

//===========================================================================
function InitTrig___Footman02_End_Movement takes nothing returns nothing
    set gg_trg___Footman02_End_Movement=CreateTrigger()
    call TriggerRegisterEnterRectSimple(gg_trg___Footman02_End_Movement, gg_rct_Footman_02_End)
    call TriggerAddCondition(gg_trg___Footman02_End_Movement, Condition(function Trig___Footman02_End_Movement_Conditions))
    call TriggerAddAction(gg_trg___Footman02_End_Movement, function Trig___Footman02_End_Movement_Actions)
endfunction

//===========================================================================
// Trigger:   Villagers
//===========================================================================
function Trig___Villagers_Actions takes nothing returns nothing
    call IssuePointOrderLocBJ(udg_Villager04, "move", GetRandomLocInRect(gg_rct_Patrol01))
    call IssuePointOrderLocBJ(udg_Villager06, "move", GetRandomLocInRect(gg_rct_Patrol04))
    call IssuePointOrderLocBJ(udg_Villager07, "move", GetRandomLocInRect(gg_rct_RescuableFootmen))
    call TriggerSleepAction(7.00)
    // ------------------------------------------------------------------------------------------------------------
    call IssuePointOrderLocBJ(udg_Villager01, "move", GetRandomLocInRect(gg_rct_Patrol03))
    call IssuePointOrderLocBJ(udg_Villager02, "move", GetRandomLocInRect(gg_rct_Patrol03))
    call IssuePointOrderLocBJ(udg_Villager03, "move", GetRandomLocInRect(gg_rct_Patrol03))
    call IssuePointOrderLocBJ(udg_Villager05, "move", GetRandomLocInRect(gg_rct_Patrol01))
    call TriggerSleepAction(8.00)
    call RemoveUnit(udg_Villager01)
    call RemoveUnit(udg_Villager02)
    call RemoveUnit(udg_Villager03)
    call RemoveUnit(udg_Villager04)
    call RemoveUnit(udg_Villager05)
    call RemoveUnit(udg_Villager06)
    call RemoveUnit(udg_Villager07)
    call RemoveUnit(udg_Villager08)
    call RemoveUnit(udg_Villager09)
    call RemoveUnit(udg_Villager10)
    call RemoveUnit(udg_Villager11)
    call RemoveUnit(udg_Villager12)
endfunction

//===========================================================================
function InitTrig___Villagers takes nothing returns nothing
    set gg_trg___Villagers=CreateTrigger()
    call TriggerAddAction(gg_trg___Villagers, function Trig___Villagers_Actions)
endfunction

//===========================================================================
// Trigger: Delete Uther
//===========================================================================
function Trig_Delete_Uther_Conditions takes nothing returns boolean
    if ( not ( GetOwningPlayer(GetEnteringUnit()) == udg_P_Uther ) ) then
        return false
    endif
    return true
endfunction

function Trig_Delete_Uther_Func001001 takes nothing returns boolean
    return ( GetEnteringUnit() == udg_Horse01 )
endfunction

function Trig_Delete_Uther_Func002001 takes nothing returns boolean
    return ( GetEnteringUnit() == udg_Horse02 )
endfunction

function Trig_Delete_Uther_Func003001 takes nothing returns boolean
    return ( GetEnteringUnit() == udg_Horse03 )
endfunction

function Trig_Delete_Uther_Func004001 takes nothing returns boolean
    return ( GetEnteringUnit() == udg_Uther )
endfunction

function Trig_Delete_Uther_Func005001 takes nothing returns boolean
    return ( GetEnteringUnit() == udg_Footman01 )
endfunction

function Trig_Delete_Uther_Func006001 takes nothing returns boolean
    return ( GetEnteringUnit() == udg_Footman02 )
endfunction

function Trig_Delete_Uther_Func007001 takes nothing returns boolean
    return ( GetEnteringUnit() == udg_Footman03 )
endfunction

function Trig_Delete_Uther_Func008001 takes nothing returns boolean
    return ( GetEnteringUnit() == udg_Footman04 )
endfunction

function Trig_Delete_Uther_Func009001 takes nothing returns boolean
    return ( GetEnteringUnit() == udg_Footman07 )
endfunction

function Trig_Delete_Uther_Func010001 takes nothing returns boolean
    return ( GetEnteringUnit() == udg_Footman08 )
endfunction

function Trig_Delete_Uther_Actions takes nothing returns nothing
    if ( Trig_Delete_Uther_Func001001() ) then
        set udg_IsHorse01Removed=true
    else
        call DoNothing()
    endif
    if ( Trig_Delete_Uther_Func002001() ) then
        set udg_IsHorse02Removed=true
    else
        call DoNothing()
    endif
    if ( Trig_Delete_Uther_Func003001() ) then
        set udg_IsHorse03Removed=true
    else
        call DoNothing()
    endif
    if ( Trig_Delete_Uther_Func004001() ) then
        set udg_IsUtherRemoved=true
    else
        call DoNothing()
    endif
    if ( Trig_Delete_Uther_Func005001() ) then
        set udg_IsFootman01Removed=true
    else
        call DoNothing()
    endif
    if ( Trig_Delete_Uther_Func006001() ) then
        set udg_IsFootman02Removed=true
    else
        call DoNothing()
    endif
    if ( Trig_Delete_Uther_Func007001() ) then
        set udg_IsFootman03Removed=true
    else
        call DoNothing()
    endif
    if ( Trig_Delete_Uther_Func008001() ) then
        set udg_IsFootman04Removed=true
    else
        call DoNothing()
    endif
    if ( Trig_Delete_Uther_Func009001() ) then
        set udg_IsFootman07Removed=true
    else
        call DoNothing()
    endif
    if ( Trig_Delete_Uther_Func010001() ) then
        set udg_IsFootman08Removed=true
    else
        call DoNothing()
    endif
    call RemoveUnit(GetEnteringUnit())
endfunction

//===========================================================================
function InitTrig_Delete_Uther takes nothing returns nothing
    set gg_trg_Delete_Uther=CreateTrigger()
    call TriggerRegisterEnterRectSimple(gg_trg_Delete_Uther, gg_rct_UtherDelete)
    call TriggerAddCondition(gg_trg_Delete_Uther, Condition(function Trig_Delete_Uther_Conditions))
    call TriggerAddAction(gg_trg_Delete_Uther, function Trig_Delete_Uther_Actions)
endfunction

//===========================================================================
// Trigger: Call for help
//===========================================================================
function Trig_Call_for_help_Conditions takes nothing returns boolean
    if ( not ( GetOwningPlayer(GetEnteringUnit()) == udg_AAAP_Arthas ) ) then
        return false
    endif
    if ( not ( udg_GAMEOVER == false ) ) then
        return false
    endif
    return true
endfunction

function Trig_Call_for_help_Actions takes nothing returns nothing
    call DisableTrigger(GetTriggeringTrigger())
    call QueuedTriggerAddBJ(gg_trg_Call_for_help_Queue, true)
endfunction

//===========================================================================
function InitTrig_Call_for_help takes nothing returns nothing
    set gg_trg_Call_for_help=CreateTrigger()
    call TriggerRegisterEnterRectSimple(gg_trg_Call_for_help, gg_rct_Surprise_Attack_Trigger_01)
    call TriggerAddCondition(gg_trg_Call_for_help, Condition(function Trig_Call_for_help_Conditions))
    call TriggerAddAction(gg_trg_Call_for_help, function Trig_Call_for_help_Actions)
endfunction

//===========================================================================
// Trigger: Call for help Queue
//===========================================================================
function Trig_Call_for_help_Queue_Conditions takes nothing returns boolean
    if ( not ( udg_GAMEOVER == false ) ) then
        return false
    endif
    return true
endfunction

function Trig_Call_for_help_Queue_Actions takes nothing returns nothing
    call CreateFogModifierRadiusLocBJ(true, udg_AAAP_Arthas, FOG_OF_WAR_VISIBLE, GetUnitLoc(udg_AmbushTarget), 256.00)
    set udg_VisibilityBenedict=GetLastCreatedFogModifier()
    call SetCameraQuickPositionLocForPlayer(udg_AAAP_Arthas, GetRectCenter(gg_rct_Surprise_Attack_Center))
    call PingMinimapLocForForce(udg_AAAPG_Arthas, GetRectCenter(gg_rct_Surprise_Attack_Center), 7.00)
    call SetSpeechVolumeGroupsBJ()
    call TransmissionFromUnitWithNameBJ(udg_AAAPG_Arthas, udg_AmbushTarget, "TRIGSTR_108", gg_snd_H03VillagerM50, "TRIGSTR_109", bj_TIMETYPE_ADD, 0.00, true)
    call VolumeGroupResetBJ()
    call QueuedTriggerRemoveBJ(gg_trg_Call_for_help_Queue)
endfunction

//===========================================================================
function InitTrig_Call_for_help_Queue takes nothing returns nothing
    set gg_trg_Call_for_help_Queue=CreateTrigger()
    call TriggerAddCondition(gg_trg_Call_for_help_Queue, Condition(function Trig_Call_for_help_Queue_Conditions))
    call TriggerAddAction(gg_trg_Call_for_help_Queue, function Trig_Call_for_help_Queue_Actions)
endfunction

//===========================================================================
// Trigger: Surprise Attack
//===========================================================================
function Trig_Surprise_Attack_Conditions takes nothing returns boolean
    if ( not ( GetOwningPlayer(GetEnteringUnit()) == udg_AAAP_Arthas ) ) then
        return false
    endif
    if ( not ( udg_GAMEOVER == false ) ) then
        return false
    endif
    return true
endfunction

function Trig_Surprise_Attack_Actions takes nothing returns nothing
    call DisableTrigger(GetTriggeringTrigger())
    call QueuedTriggerAddBJ(gg_trg_Surprise_Attack_Queue, true)
endfunction

//===========================================================================
function InitTrig_Surprise_Attack takes nothing returns nothing
    set gg_trg_Surprise_Attack=CreateTrigger()
    call TriggerRegisterEnterRectSimple(gg_trg_Surprise_Attack, gg_rct_Surprise_Attack_Trigger_02)
    call TriggerAddCondition(gg_trg_Surprise_Attack, Condition(function Trig_Surprise_Attack_Conditions))
    call TriggerAddAction(gg_trg_Surprise_Attack, function Trig_Surprise_Attack_Actions)
endfunction

//===========================================================================
// Trigger: Surprise Attack Queue
//===========================================================================
function Trig_Surprise_Attack_Queue_Conditions takes nothing returns boolean
    if ( not ( udg_GAMEOVER == false ) ) then
        return false
    endif
    return true
endfunction

function Trig_Surprise_Attack_Queue_Actions takes nothing returns nothing
    call SetSpeechVolumeGroupsBJ()
    call DestroyEffectBJ(udg_TalkBenedict)
    call SmartCameraPanBJ(udg_AAAP_Arthas, GetRectCenter(gg_rct_Surprise_Attack_Center), 0.5)
    call SetCameraQuickPositionLocForPlayer(udg_AAAP_Arthas, GetRectCenter(gg_rct_Surprise_Attack_Center))
    call PingMinimapLocForForce(udg_AAAPG_Arthas, GetRectCenter(gg_rct_Surprise_Attack_Center), 7.00)
    call AttachSoundToUnitBJ(gg_snd_BanditYesAttack3, gg_unit_nC11_0158)
    call PlaySoundBJ(gg_snd_BanditYesAttack3)
    call IssuePointOrderLocBJ(udg_Ambusher01, "attack", GetRandomLocInRect(gg_rct_Surprise_Attack_Target))
    call IssuePointOrderLocBJ(udg_Ambusher02, "attack", GetRandomLocInRect(gg_rct_Surprise_Attack_Target))
    call IssuePointOrderLocBJ(udg_Ambusher03, "attack", GetRandomLocInRect(gg_rct_Surprise_Attack_Target))
    call IssuePointOrderLocBJ(udg_Ambusher04, "attack", GetRandomLocInRect(gg_rct_Surprise_Attack_Target))
    call IssuePointOrderLocBJ(udg_Ambusher05, "attack", GetRandomLocInRect(gg_rct_Surprise_Attack_Target))
    call TransmissionFromUnitWithNameBJ(udg_AAAPG_Arthas, udg_StartingFootman01, "TRIGSTR_131", gg_snd_H03Footman47, "TRIGSTR_133", bj_TIMETYPE_SUB, 3.00, true)
    call SetUnitOwner(udg_AmbushTarget, Player(8), true)
    call ReplaceUnitBJ(udg_AmbushTarget, 'nC12', bj_UNIT_STATE_METHOD_RELATIVE)
    set udg_AmbushTarget=GetLastReplacedUnitBJ()
    call TriggerSleepAction(1.00)
    call SetUnitAnimation(udg_AmbushTarget, "stand victory")
    call TransmissionFromUnitWithNameBJ(udg_AAAPG_Arthas, udg_AmbushTarget, "TRIGSTR_134", gg_snd_H01Bandit32, "TRIGSTR_135", bj_TIMETYPE_ADD, 0.00, true)
    call ResetUnitAnimation(udg_AmbushTarget)
    call IssuePointOrderLocBJ(udg_AmbushTarget, "attack", GetRandomLocInRect(gg_rct_Surprise_Attack_Target))
    call VolumeGroupResetBJ()
    call FogModifierStop(udg_VisibilityBenedict)
    call QueuedTriggerRemoveBJ(gg_trg_Surprise_Attack_Queue)
endfunction

//===========================================================================
function InitTrig_Surprise_Attack_Queue takes nothing returns nothing
    set gg_trg_Surprise_Attack_Queue=CreateTrigger()
    call TriggerAddCondition(gg_trg_Surprise_Attack_Queue, Condition(function Trig_Surprise_Attack_Queue_Conditions))
    call TriggerAddAction(gg_trg_Surprise_Attack_Queue, function Trig_Surprise_Attack_Queue_Actions)
endfunction

//===========================================================================
// Trigger: Recruit
//===========================================================================
function Trig_Recruit_Conditions takes nothing returns boolean
    if ( not ( udg_GarthDies == false ) ) then
        return false
    endif
    if ( not ( udg_ThornbyDies == false ) ) then
        return false
    endif
    if ( not ( GetEnteringUnit() == udg_Arthas ) ) then
        return false
    endif
    if ( not ( udg_GAMEOVER == false ) ) then
        return false
    endif
    return true
endfunction

function Trig_Recruit_Actions takes nothing returns nothing
    call DisableTrigger(GetTriggeringTrigger())
    call status_check_location(20)
    call QueuedTriggerAddBJ(gg_trg_Recruit_Queue, true)
endfunction

//===========================================================================
function InitTrig_Recruit takes nothing returns nothing
    set gg_trg_Recruit=CreateTrigger()
    call TriggerRegisterEnterRectSimple(gg_trg_Recruit, gg_rct_Recruit_Trigger)
    call TriggerAddCondition(gg_trg_Recruit, Condition(function Trig_Recruit_Conditions))
    call TriggerAddAction(gg_trg_Recruit, function Trig_Recruit_Actions)
endfunction

//===========================================================================
// Trigger: Recruit Queue
//===========================================================================
function Trig_Recruit_Queue_Conditions takes nothing returns boolean
    if ( not ( udg_GAMEOVER == false ) ) then
        return false
    endif
    return true
endfunction

function Trig_Recruit_Queue_Func008001001 takes nothing returns boolean
    return ( udg_ThornbyDies == true )
endfunction

function Trig_Recruit_Queue_Func008001002 takes nothing returns boolean
    return ( udg_GarthDies == true )
endfunction

function Trig_Recruit_Queue_Func008001 takes nothing returns boolean
    return GetBooleanOr(Trig_Recruit_Queue_Func008001001(), Trig_Recruit_Queue_Func008001002())
endfunction

function Trig_Recruit_Queue_Func009001001 takes nothing returns boolean
    return ( udg_ThornbyDies == true )
endfunction

function Trig_Recruit_Queue_Func009001002 takes nothing returns boolean
    return ( udg_GarthDies == true )
endfunction

function Trig_Recruit_Queue_Func009001 takes nothing returns boolean
    return GetBooleanOr(Trig_Recruit_Queue_Func009001001(), Trig_Recruit_Queue_Func009001002())
endfunction

function Trig_Recruit_Queue_Func013001001 takes nothing returns boolean
    return ( udg_ThornbyDies == true )
endfunction

function Trig_Recruit_Queue_Func013001002 takes nothing returns boolean
    return ( udg_GarthDies == true )
endfunction

function Trig_Recruit_Queue_Func013001 takes nothing returns boolean
    return GetBooleanOr(Trig_Recruit_Queue_Func013001001(), Trig_Recruit_Queue_Func013001002())
endfunction

function Trig_Recruit_Queue_Func014001001 takes nothing returns boolean
    return ( udg_ThornbyDies == true )
endfunction

function Trig_Recruit_Queue_Func014001002 takes nothing returns boolean
    return ( udg_GarthDies == true )
endfunction

function Trig_Recruit_Queue_Func014001 takes nothing returns boolean
    return GetBooleanOr(Trig_Recruit_Queue_Func014001001(), Trig_Recruit_Queue_Func014001002())
endfunction

function Trig_Recruit_Queue_Func021001001 takes nothing returns boolean
    return ( udg_ThornbyDies == true )
endfunction

function Trig_Recruit_Queue_Func021001002 takes nothing returns boolean
    return ( udg_GarthDies == true )
endfunction

function Trig_Recruit_Queue_Func021001 takes nothing returns boolean
    return GetBooleanOr(Trig_Recruit_Queue_Func021001001(), Trig_Recruit_Queue_Func021001002())
endfunction

function Trig_Recruit_Queue_Func022001001 takes nothing returns boolean
    return ( udg_ThornbyDies == true )
endfunction

function Trig_Recruit_Queue_Func022001002 takes nothing returns boolean
    return ( udg_GarthDies == true )
endfunction

function Trig_Recruit_Queue_Func022001 takes nothing returns boolean
    return GetBooleanOr(Trig_Recruit_Queue_Func022001001(), Trig_Recruit_Queue_Func022001002())
endfunction

function Trig_Recruit_Queue_Func029001001 takes nothing returns boolean
    return ( udg_ThornbyDies == true )
endfunction

function Trig_Recruit_Queue_Func029001002 takes nothing returns boolean
    return ( udg_GarthDies == true )
endfunction

function Trig_Recruit_Queue_Func029001 takes nothing returns boolean
    return GetBooleanOr(Trig_Recruit_Queue_Func029001001(), Trig_Recruit_Queue_Func029001002())
endfunction

function Trig_Recruit_Queue_Func030001001 takes nothing returns boolean
    return ( udg_ThornbyDies == true )
endfunction

function Trig_Recruit_Queue_Func030001002 takes nothing returns boolean
    return ( udg_GarthDies == true )
endfunction

function Trig_Recruit_Queue_Func030001 takes nothing returns boolean
    return GetBooleanOr(Trig_Recruit_Queue_Func030001001(), Trig_Recruit_Queue_Func030001002())
endfunction

function Trig_Recruit_Queue_Func033001001 takes nothing returns boolean
    return ( udg_ThornbyDies == true )
endfunction

function Trig_Recruit_Queue_Func033001002 takes nothing returns boolean
    return ( udg_GarthDies == true )
endfunction

function Trig_Recruit_Queue_Func033001 takes nothing returns boolean
    return GetBooleanOr(Trig_Recruit_Queue_Func033001001(), Trig_Recruit_Queue_Func033001002())
endfunction

function Trig_Recruit_Queue_Func034001001 takes nothing returns boolean
    return ( udg_ThornbyDies == true )
endfunction

function Trig_Recruit_Queue_Func034001002 takes nothing returns boolean
    return ( udg_GarthDies == true )
endfunction

function Trig_Recruit_Queue_Func034001 takes nothing returns boolean
    return GetBooleanOr(Trig_Recruit_Queue_Func034001001(), Trig_Recruit_Queue_Func034001002())
endfunction

function Trig_Recruit_Queue_Func037001001 takes nothing returns boolean
    return ( udg_ThornbyDies == true )
endfunction

function Trig_Recruit_Queue_Func037001002 takes nothing returns boolean
    return ( udg_GarthDies == true )
endfunction

function Trig_Recruit_Queue_Func037001 takes nothing returns boolean
    return GetBooleanOr(Trig_Recruit_Queue_Func037001001(), Trig_Recruit_Queue_Func037001002())
endfunction

function Trig_Recruit_Queue_Func038001001 takes nothing returns boolean
    return ( udg_ThornbyDies == true )
endfunction

function Trig_Recruit_Queue_Func038001002 takes nothing returns boolean
    return ( udg_GarthDies == true )
endfunction

function Trig_Recruit_Queue_Func038001 takes nothing returns boolean
    return GetBooleanOr(Trig_Recruit_Queue_Func038001001(), Trig_Recruit_Queue_Func038001002())
endfunction

function Trig_Recruit_Queue_Actions takes nothing returns nothing
    call DisableTrigger(GetTriggeringTrigger())
    call ConditionalTriggerExecute(gg_trg_Destroy_TalkThornby)
    call SetCameraQuickPositionLocForPlayer(udg_AAAP_Arthas, GetRectCenter(gg_rct_Recruit_Pan))
    call PingMinimapLocForForce(udg_AAAPG_Arthas, GetRectCenter(gg_rct_Recruit_Pan), 4.00)
    call SetSpeechVolumeGroupsBJ()
    call TransmissionFromUnitWithNameBJ(udg_AAAPG_Arthas, udg_Thornby, "TRIGSTR_250", gg_snd_H01VillagerM43, "TRIGSTR_251", bj_TIMETYPE_ADD, 0.00, true)
    if ( Trig_Recruit_Queue_Func008001() ) then
        call TriggerExecute(gg_trg_Abort_Recruit_Queue)
    else
        call DoNothing()
    endif
    if ( Trig_Recruit_Queue_Func009001() ) then
        return
    else
        call DoNothing()
    endif
    call IssuePointOrderLocBJ(udg_Garth, "move", GetRandomLocInRect(gg_rct_Armor02))
    call IssuePointOrderLocBJ(udg_Thornby, "move", GetRandomLocInRect(gg_rct_Armor01))
    call TriggerSleepAction(0.50)
    if ( Trig_Recruit_Queue_Func013001() ) then
        call TriggerExecute(gg_trg_Abort_Recruit_Queue)
    else
        call DoNothing()
    endif
    if ( Trig_Recruit_Queue_Func014001() ) then
        return
    else
        call DoNothing()
    endif
    call PlaySoundBJ(gg_snd_DefendCaster)
    call RemoveUnit(udg_Garth)
    call CreateNUnitsAtLoc(1, 'hfoo', Player(1), GetRectCenter(gg_rct_Armor02), 270.00)
    set udg_Garth=GetLastCreatedUnit()
    call UnitAddIndicatorBJ(udg_Garth, 100.00, 100.00, 100.00, 0.00)
    call TriggerSleepAction(0.10)
    if ( Trig_Recruit_Queue_Func021001() ) then
        call TriggerExecute(gg_trg_Abort_Recruit_Queue)
    else
        call DoNothing()
    endif
    if ( Trig_Recruit_Queue_Func022001() ) then
        return
    else
        call DoNothing()
    endif
    call RemoveUnit(udg_Thornby)
    call CreateNUnitsAtLoc(1, 'hfoo', Player(1), GetRectCenter(gg_rct_Armor01), 240.00)
    set udg_Thornby=GetLastCreatedUnit()
    call UnitAddIndicatorBJ(udg_Thornby, 100.00, 100.00, 100.00, 0.00)
    call TriggerSleepAction(0.10)
    call PlaySoundBJ(gg_snd_Rescue)
    if ( Trig_Recruit_Queue_Func029001() ) then
        call TriggerExecute(gg_trg_Abort_Recruit_Queue)
    else
        call DoNothing()
    endif
    if ( Trig_Recruit_Queue_Func030001() ) then
        return
    else
        call DoNothing()
    endif
    call IssuePointOrderLocBJ(udg_Garth, "move", GetRandomLocInRect(gg_rct_Recruit_02_End))
    call TriggerSleepAction(0.10)
    if ( Trig_Recruit_Queue_Func033001() ) then
        call TriggerExecute(gg_trg_Abort_Recruit_Queue)
    else
        call DoNothing()
    endif
    if ( Trig_Recruit_Queue_Func034001() ) then
        return
    else
        call DoNothing()
    endif
    call IssuePointOrderLocBJ(udg_Thornby, "move", GetRandomLocInRect(gg_rct_Recruit_01_End))
    call TriggerSleepAction(0.50)
    if ( Trig_Recruit_Queue_Func037001() ) then
        call TriggerExecute(gg_trg_Abort_Recruit_Queue)
    else
        call DoNothing()
    endif
    if ( Trig_Recruit_Queue_Func038001() ) then
        return
    else
        call DoNothing()
    endif
    call SetCameraQuickPositionLocForPlayer(udg_AAAP_Arthas, GetRectCenter(gg_rct_Recruit_Pan))
    call PingMinimapLocForForce(udg_AAAPG_Arthas, GetRectCenter(gg_rct_Recruit_Pan), 5.00)
    call VolumeGroupResetBJ()
    call QueuedTriggerRemoveBJ(gg_trg_Recruit_Queue)
endfunction

//===========================================================================
function InitTrig_Recruit_Queue takes nothing returns nothing
    set gg_trg_Recruit_Queue=CreateTrigger()
    call TriggerAddCondition(gg_trg_Recruit_Queue, Condition(function Trig_Recruit_Queue_Conditions))
    call TriggerAddAction(gg_trg_Recruit_Queue, function Trig_Recruit_Queue_Actions)
endfunction

//===========================================================================
// Trigger: Abort Recruit Queue
//===========================================================================
function Trig_Abort_Recruit_Queue_Actions takes nothing returns nothing
    call VolumeGroupResetBJ()
    call ConditionalTriggerExecute(gg_trg_Destroy_TalkThornby)
    call QueuedTriggerRemoveBJ(gg_trg_Recruit_Queue)
endfunction

//===========================================================================
function InitTrig_Abort_Recruit_Queue takes nothing returns nothing
    set gg_trg_Abort_Recruit_Queue=CreateTrigger()
    call TriggerAddAction(gg_trg_Abort_Recruit_Queue, function Trig_Abort_Recruit_Queue_Actions)
endfunction

//===========================================================================
// Trigger: GarthDies
//===========================================================================
function Trig_GarthDies_Conditions takes nothing returns boolean
    if ( not ( udg_ThornbyDies == false ) ) then
        return false
    endif
    if ( not ( GetDyingUnit() == gg_unit_nC13_0159 ) ) then
        return false
    endif
    return true
endfunction

function Trig_GarthDies_Actions takes nothing returns nothing
    set udg_GarthDies=true
    call DisableTrigger(gg_trg_Recruit)
    call ConditionalTriggerExecute(gg_trg_Destroy_TalkThornby)
    call IssuePointOrderLocBJ(udg_Thornby, "move", GetRectCenter(gg_rct_Recruit_01_End))
endfunction

//===========================================================================
function InitTrig_GarthDies takes nothing returns nothing
    set gg_trg_GarthDies=CreateTrigger()
    call TriggerRegisterPlayerUnitEventSimple(gg_trg_GarthDies, Player(2), EVENT_PLAYER_UNIT_DEATH)
    call TriggerAddCondition(gg_trg_GarthDies, Condition(function Trig_GarthDies_Conditions))
    call TriggerAddAction(gg_trg_GarthDies, function Trig_GarthDies_Actions)
endfunction

//===========================================================================
// Trigger: ThornbyDies
//===========================================================================
function Trig_ThornbyDies_Conditions takes nothing returns boolean
    if ( not ( udg_GarthDies == false ) ) then
        return false
    endif
    if ( not ( GetDyingUnit() == gg_unit_nC14_0096 ) ) then
        return false
    endif
    return true
endfunction

function Trig_ThornbyDies_Actions takes nothing returns nothing
    set udg_ThornbyDies=true
    call DisableTrigger(gg_trg_Recruit)
    call ConditionalTriggerExecute(gg_trg_Destroy_TalkThornby)
    call IssuePointOrderLocBJ(udg_Garth, "move", GetRectCenter(gg_rct_Recruit_02_End))
endfunction

//===========================================================================
function InitTrig_ThornbyDies takes nothing returns nothing
    set gg_trg_ThornbyDies=CreateTrigger()
    call TriggerRegisterPlayerUnitEventSimple(gg_trg_ThornbyDies, Player(2), EVENT_PLAYER_UNIT_DEATH)
    call TriggerAddCondition(gg_trg_ThornbyDies, Condition(function Trig_ThornbyDies_Conditions))
    call TriggerAddAction(gg_trg_ThornbyDies, function Trig_ThornbyDies_Actions)
endfunction

//===========================================================================
// Trigger: Destroy TalkThornby
//
// It is safe to call this multiple times, checking conditions.  It will only destroy the effect once.
//===========================================================================
function Trig_Destroy_TalkThornby_Conditions takes nothing returns boolean
    if ( not ( IsTriggerEnabled(GetTriggeringTrigger()) == true ) ) then
        return false
    endif
    return true
endfunction

function Trig_Destroy_TalkThornby_Actions takes nothing returns nothing
    call DisableTrigger(GetTriggeringTrigger())
    call DestroyEffectBJ(udg_TalkThornby)
endfunction

//===========================================================================
function InitTrig_Destroy_TalkThornby takes nothing returns nothing
    set gg_trg_Destroy_TalkThornby=CreateTrigger()
    call TriggerAddCondition(gg_trg_Destroy_TalkThornby, Condition(function Trig_Destroy_TalkThornby_Conditions))
    call TriggerAddAction(gg_trg_Destroy_TalkThornby, function Trig_Destroy_TalkThornby_Actions)
endfunction

//===========================================================================
// Trigger: Crate01
//===========================================================================
function Trig_Crate01_Actions takes nothing returns nothing
    call DisableTrigger(GetTriggeringTrigger())
    call TriggerSleepAction(0.10)
    call CreateItemLoc('I011', GetRectCenter(gg_rct_Crate01))
endfunction

//===========================================================================
function InitTrig_Crate01 takes nothing returns nothing
    set gg_trg_Crate01=CreateTrigger()
    call TriggerRegisterDeathEvent(gg_trg_Crate01, gg_dest_LTcr_0287)
    call TriggerAddAction(gg_trg_Crate01, function Trig_Crate01_Actions)
endfunction

//===========================================================================
// Trigger: Crate02
//===========================================================================
function Trig_Crate02_Actions takes nothing returns nothing
    call DisableTrigger(GetTriggeringTrigger())
    call TriggerSleepAction(0.10)
    call CreateItemLoc('I012', GetRectCenter(gg_rct_Crate02))
endfunction

//===========================================================================
function InitTrig_Crate02 takes nothing returns nothing
    set gg_trg_Crate02=CreateTrigger()
    call TriggerRegisterDeathEvent(gg_trg_Crate02, gg_dest_LTcr_1991)
    call TriggerAddAction(gg_trg_Crate02, function Trig_Crate02_Actions)
endfunction

//===========================================================================
// Trigger: Crate03
//===========================================================================
function Trig_Crate03_Actions takes nothing returns nothing
    call DisableTrigger(GetTriggeringTrigger())
    call TriggerSleepAction(0.10)
    call CreateItemLoc('I017', GetRectCenter(gg_rct_Crate03))
endfunction

//===========================================================================
function InitTrig_Crate03 takes nothing returns nothing
    set gg_trg_Crate03=CreateTrigger()
    call TriggerRegisterDeathEvent(gg_trg_Crate03, gg_dest_LTcr_0730)
    call TriggerAddAction(gg_trg_Crate03, function Trig_Crate03_Actions)
endfunction

//===========================================================================
// Trigger: FarmerJerrett
//===========================================================================
function Trig_FarmerJerrett_Actions takes nothing returns nothing
    call IssuePointOrderLocBJ(udg_FarmerJerrett, "move", GetRandomLocInRect(gg_rct_FarmerBob))
endfunction

//===========================================================================
function InitTrig_FarmerJerrett takes nothing returns nothing
    set gg_trg_FarmerJerrett=CreateTrigger()
    call TriggerRegisterTimerEventPeriodic(gg_trg_FarmerJerrett, GetRandomReal(8.00, 25.00))
    call TriggerAddAction(gg_trg_FarmerJerrett, function Trig_FarmerJerrett_Actions)
endfunction

//===========================================================================
// Trigger: AproachesJerrett
//===========================================================================
function Trig_AproachesJerrett_Conditions takes nothing returns boolean
    if ( not ( IsUnitDeadBJ(udg_FarmerJerrett) == false ) ) then
        return false
    endif
    if ( not ( GetTriggerUnit() == udg_Arthas ) ) then
        return false
    endif
    if ( not ( udg_GAMEOVER == false ) ) then
        return false
    endif
    return true
endfunction

function Trig_AproachesJerrett_Actions takes nothing returns nothing
    call DisableTrigger(GetTriggeringTrigger())
    call SetUnitFacingToFaceUnitTimed(udg_FarmerJerrett, GetEnteringUnit(), 0.10)
    call PingMinimapLocForForce(udg_AAAPG_Arthas, GetUnitLoc(udg_FarmerJerrett), 1.00)
    call TransmissionFromUnitWithNameBJ(udg_AAAPG_Arthas, udg_FarmerJerrett, "TRIGSTR_256", gg_snd_VillagerM1, "TRIGSTR_257", bj_TIMETYPE_ADD, 0.00, true)
endfunction

//===========================================================================
function InitTrig_AproachesJerrett takes nothing returns nothing
    set gg_trg_AproachesJerrett=CreateTrigger()
    call TriggerRegisterUnitInRangeSimple(gg_trg_AproachesJerrett, 256.00, gg_unit_nC02_0098)
    call TriggerAddCondition(gg_trg_AproachesJerrett, Condition(function Trig_AproachesJerrett_Conditions))
    call TriggerAddAction(gg_trg_AproachesJerrett, function Trig_AproachesJerrett_Actions)
endfunction

//===========================================================================
// Trigger: FarmerTed
//===========================================================================
function Trig_FarmerTed_Actions takes nothing returns nothing
    call IssuePointOrderLocBJ(udg_FarmerTed, "move", GetRandomLocInRect(gg_rct_FarmerTed))
endfunction

//===========================================================================
function InitTrig_FarmerTed takes nothing returns nothing
    set gg_trg_FarmerTed=CreateTrigger()
    call TriggerRegisterTimerEventPeriodic(gg_trg_FarmerTed, GetRandomReal(8.00, 25.00))
    call TriggerAddAction(gg_trg_FarmerTed, function Trig_FarmerTed_Actions)
endfunction

//===========================================================================
// Trigger: AproachesTed
//===========================================================================
function Trig_AproachesTed_Conditions takes nothing returns boolean
    if ( not ( IsUnitDeadBJ(udg_FarmerTed) == false ) ) then
        return false
    endif
    if ( not ( GetTriggerUnit() == udg_Arthas ) ) then
        return false
    endif
    if ( not ( udg_GAMEOVER == false ) ) then
        return false
    endif
    return true
endfunction

function Trig_AproachesTed_Actions takes nothing returns nothing
    call DisableTrigger(GetTriggeringTrigger())
    call SetUnitFacingToFaceUnitTimed(udg_FarmerTed, GetEnteringUnit(), 0.10)
    call PingMinimapLocForForce(udg_AAAPG_Arthas, GetUnitLoc(udg_FarmerTed), 1.00)
    call TransmissionFromUnitWithNameBJ(udg_AAAPG_Arthas, udg_FarmerTed, "TRIGSTR_258", gg_snd_VillagerM2, "TRIGSTR_259", bj_TIMETYPE_ADD, 0.00, true)
endfunction

//===========================================================================
function InitTrig_AproachesTed takes nothing returns nothing
    set gg_trg_AproachesTed=CreateTrigger()
    call TriggerRegisterUnitInRangeSimple(gg_trg_AproachesTed, 256.00, gg_unit_nC03_0063)
    call TriggerAddCondition(gg_trg_AproachesTed, Condition(function Trig_AproachesTed_Conditions))
    call TriggerAddAction(gg_trg_AproachesTed, function Trig_AproachesTed_Actions)
endfunction

//===========================================================================
// Trigger: Maria
//===========================================================================
function Trig_Maria_Actions takes nothing returns nothing
    call IssuePointOrderLocBJ(udg_Maria, "move", GetRandomLocInRect(gg_rct_Margaret))
endfunction

//===========================================================================
function InitTrig_Maria takes nothing returns nothing
    set gg_trg_Maria=CreateTrigger()
    call TriggerRegisterTimerEventPeriodic(gg_trg_Maria, GetRandomReal(8.00, 25.00))
    call TriggerAddAction(gg_trg_Maria, function Trig_Maria_Actions)
endfunction

//===========================================================================
// Trigger: AproachesMaria
//===========================================================================
function Trig_AproachesMaria_Conditions takes nothing returns boolean
    if ( not ( IsUnitDeadBJ(udg_Maria) == false ) ) then
        return false
    endif
    if ( not ( GetTriggerUnit() == udg_Arthas ) ) then
        return false
    endif
    if ( not ( udg_GAMEOVER == false ) ) then
        return false
    endif
    return true
endfunction

function Trig_AproachesMaria_Actions takes nothing returns nothing
    call DisableTrigger(GetTriggeringTrigger())
    call SetUnitFacingToFaceUnitTimed(udg_Maria, GetEnteringUnit(), 0.10)
    call PingMinimapLocForForce(udg_AAAPG_Arthas, GetUnitLoc(udg_Maria), 1.00)
    call TransmissionFromUnitWithNameBJ(udg_AAAPG_Arthas, udg_Maria, "TRIGSTR_260", gg_snd_VillagerF1, "TRIGSTR_261", bj_TIMETYPE_ADD, 0.00, true)
endfunction

//===========================================================================
function InitTrig_AproachesMaria takes nothing returns nothing
    set gg_trg_AproachesMaria=CreateTrigger()
    call TriggerRegisterUnitInRangeSimple(gg_trg_AproachesMaria, 256.00, gg_unit_nC09_0061)
    call TriggerAddCondition(gg_trg_AproachesMaria, Condition(function Trig_AproachesMaria_Conditions))
    call TriggerAddAction(gg_trg_AproachesMaria, function Trig_AproachesMaria_Actions)
endfunction

//===========================================================================
// Trigger: Stephanie
//===========================================================================
function Trig_Stephanie_Actions takes nothing returns nothing
    call IssuePointOrderLocBJ(udg_Stephanie, "move", GetRandomLocInRect(gg_rct_Stephanie))
endfunction

//===========================================================================
function InitTrig_Stephanie takes nothing returns nothing
    set gg_trg_Stephanie=CreateTrigger()
    call TriggerRegisterTimerEventPeriodic(gg_trg_Stephanie, GetRandomReal(5.00, 8.00))
    call TriggerAddAction(gg_trg_Stephanie, function Trig_Stephanie_Actions)
endfunction

//===========================================================================
// Trigger: AproachesStephanie
//===========================================================================
function Trig_AproachesStephanie_Conditions takes nothing returns boolean
    if ( not ( IsUnitDeadBJ(udg_Stephanie) == false ) ) then
        return false
    endif
    if ( not ( GetTriggerUnit() == udg_Arthas ) ) then
        return false
    endif
    if ( not ( udg_GAMEOVER == false ) ) then
        return false
    endif
    return true
endfunction

function Trig_AproachesStephanie_Actions takes nothing returns nothing
    call DisableTrigger(GetTriggeringTrigger())
    call SetUnitFacingToFaceUnitTimed(udg_Stephanie, GetEnteringUnit(), 0.10)
    call PingMinimapLocForForce(udg_AAAPG_Arthas, GetUnitLoc(udg_Stephanie), 1.00)
    call TransmissionFromUnitWithNameBJ(udg_AAAPG_Arthas, udg_Stephanie, "TRIGSTR_262", gg_snd_VillagerF2, "TRIGSTR_263", bj_TIMETYPE_ADD, 0.00, true)
endfunction

//===========================================================================
function InitTrig_AproachesStephanie takes nothing returns nothing
    set gg_trg_AproachesStephanie=CreateTrigger()
    call TriggerRegisterUnitInRangeSimple(gg_trg_AproachesStephanie, 256.00, gg_unit_nC10_0065)
    call TriggerAddCondition(gg_trg_AproachesStephanie, Condition(function Trig_AproachesStephanie_Conditions))
    call TriggerAddAction(gg_trg_AproachesStephanie, function Trig_AproachesStephanie_Actions)
endfunction

//===========================================================================
// Trigger: Amy Diane
//===========================================================================
function Trig_Amy_Diane_Actions takes nothing returns nothing
    call IssuePointOrderLocBJ(udg_AmyDiane, "move", GetRandomLocInRect(gg_rct_Amy_Diane))
endfunction

//===========================================================================
function InitTrig_Amy_Diane takes nothing returns nothing
    set gg_trg_Amy_Diane=CreateTrigger()
    call TriggerRegisterTimerEventPeriodic(gg_trg_Amy_Diane, GetRandomReal(5.00, 8.00))
    call TriggerAddAction(gg_trg_Amy_Diane, function Trig_Amy_Diane_Actions)
endfunction

//===========================================================================
// Trigger: AproachesAmy Diane
//===========================================================================
function Trig_AproachesAmy_Diane_Conditions takes nothing returns boolean
    if ( not ( IsUnitDeadBJ(udg_AmyDiane) == false ) ) then
        return false
    endif
    if ( not ( GetTriggerUnit() == udg_Arthas ) ) then
        return false
    endif
    if ( not ( udg_GAMEOVER == false ) ) then
        return false
    endif
    return true
endfunction

function Trig_AproachesAmy_Diane_Actions takes nothing returns nothing
    call DisableTrigger(GetTriggeringTrigger())
    call SetUnitFacingToFaceUnitTimed(udg_AmyDiane, GetEnteringUnit(), 0.10)
    call PingMinimapLocForForce(udg_AAAPG_Arthas, GetUnitLoc(udg_AmyDiane), 1.00)
    call TransmissionFromUnitWithNameBJ(udg_AAAPG_Arthas, udg_AmyDiane, "TRIGSTR_264", gg_snd_VillagerF3, "TRIGSTR_265", bj_TIMETYPE_ADD, 0.00, true)
endfunction

//===========================================================================
function InitTrig_AproachesAmy_Diane takes nothing returns nothing
    set gg_trg_AproachesAmy_Diane=CreateTrigger()
    call TriggerRegisterUnitInRangeSimple(gg_trg_AproachesAmy_Diane, 256.00, gg_unit_nC08_0078)
    call TriggerAddCondition(gg_trg_AproachesAmy_Diane, Condition(function Trig_AproachesAmy_Diane_Conditions))
    call TriggerAddAction(gg_trg_AproachesAmy_Diane, function Trig_AproachesAmy_Diane_Actions)
endfunction

//===========================================================================
// Trigger: AproachesBlake
//===========================================================================
function Trig_AproachesBlake_Conditions takes nothing returns boolean
    if ( not ( udg_BlakeDies == false ) ) then
        return false
    endif
    if ( not ( udg_RyanDies == false ) ) then
        return false
    endif
    if ( not ( GetTriggerUnit() == udg_Arthas ) ) then
        return false
    endif
    return true
endfunction

function Trig_AproachesBlake_Actions takes nothing returns nothing
    call DisableTrigger(GetTriggeringTrigger())
    call DisableTrigger(gg_trg_AproachesRyan)
    call PlaySoundBJ(gg_snd_H01VillagerC37)
    call TriggerSleepAction(20.00)
    call EnableTrigger(GetTriggeringTrigger())
    call EnableTrigger(gg_trg_AproachesRyan)
endfunction

//===========================================================================
function InitTrig_AproachesBlake takes nothing returns nothing
    set gg_trg_AproachesBlake=CreateTrigger()
    call TriggerRegisterUnitInRangeSimple(gg_trg_AproachesBlake, 256.00, gg_unit_nC18_0163)
    call TriggerAddCondition(gg_trg_AproachesBlake, Condition(function Trig_AproachesBlake_Conditions))
    call TriggerAddAction(gg_trg_AproachesBlake, function Trig_AproachesBlake_Actions)
endfunction

//===========================================================================
// Trigger: AproachesRyan
//===========================================================================
function Trig_AproachesRyan_Conditions takes nothing returns boolean
    if ( not ( udg_BlakeDies == false ) ) then
        return false
    endif
    if ( not ( udg_RyanDies == false ) ) then
        return false
    endif
    if ( not ( GetTriggerUnit() == udg_Arthas ) ) then
        return false
    endif
    return true
endfunction

function Trig_AproachesRyan_Actions takes nothing returns nothing
    call DisableTrigger(GetTriggeringTrigger())
    call DisableTrigger(gg_trg_AproachesBlake)
    call PlaySoundBJ(gg_snd_H01VillagerC38)
    call TriggerSleepAction(20.00)
    call EnableTrigger(GetTriggeringTrigger())
    call EnableTrigger(gg_trg_AproachesBlake)
endfunction

//===========================================================================
function InitTrig_AproachesRyan takes nothing returns nothing
    set gg_trg_AproachesRyan=CreateTrigger()
    call TriggerRegisterUnitInRangeSimple(gg_trg_AproachesRyan, 256.00, gg_unit_nC17_0155)
    call TriggerAddCondition(gg_trg_AproachesRyan, Condition(function Trig_AproachesRyan_Conditions))
    call TriggerAddAction(gg_trg_AproachesRyan, function Trig_AproachesRyan_Actions)
endfunction

//===========================================================================
// Trigger: Villager Speech Array
//===========================================================================
function Trig_Villager_Speech_Array_Actions takes nothing returns nothing
    set udg_VillagerSpeechArray[1]=gg_trg_AproachesJerrett
    set udg_VillagerSpeechArray[2]=gg_trg_AproachesTed
    set udg_VillagerSpeechArray[3]=gg_trg_AproachesMaria
    set udg_VillagerSpeechArray[4]=gg_trg_AproachesStephanie
    set udg_VillagerSpeechArray[5]=gg_trg_AproachesAmy_Diane
    set udg_VillagerSpeechArray[6]=gg_trg_AproachesBlake
    set udg_VillagerSpeechArray[7]=gg_trg_AproachesRyan
endfunction

//===========================================================================
function InitTrig_Villager_Speech_Array takes nothing returns nothing
    set gg_trg_Villager_Speech_Array=CreateTrigger()
    call TriggerAddAction(gg_trg_Villager_Speech_Array, function Trig_Villager_Speech_Array_Actions)
endfunction

//===========================================================================
// Trigger: Villager Speech Array Loop OFF
//===========================================================================
function Trig_Villager_Speech_Array_Loop_OFF_Actions takes nothing returns nothing
    set bj_forLoopAIndex=1
    set bj_forLoopAIndexEnd=7
    loop
        exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
        call DisableTrigger(udg_VillagerSpeechArray[GetForLoopIndexA()])
        set bj_forLoopAIndex=bj_forLoopAIndex + 1
    endloop
endfunction

//===========================================================================
function InitTrig_Villager_Speech_Array_Loop_OFF takes nothing returns nothing
    set gg_trg_Villager_Speech_Array_Loop_OFF=CreateTrigger()
    call TriggerAddAction(gg_trg_Villager_Speech_Array_Loop_OFF, function Trig_Villager_Speech_Array_Loop_OFF_Actions)
endfunction

//===========================================================================
// Trigger: Coward Scene
//
// Staged Event
// Coward runs from a Raider, but turns a wrong corner and runs into a Grunt.
//===========================================================================
function Trig_Coward_Scene_Conditions takes nothing returns boolean
    if ( not ( GetOwningPlayer(GetEnteringUnit()) == Player(1) ) ) then
        return false
    endif
    if ( not ( udg_GAMEOVER == false ) ) then
        return false
    endif
    return true
endfunction

function Trig_Coward_Scene_Actions takes nothing returns nothing
    call DisableTrigger(GetTriggeringTrigger())
    call ShowUnitShow(udg_Coward)
    call ShowUnitShow(udg_Ensnaree)
    call ShowUnitShow(udg_Ensnarer)
    call TriggerSleepAction(0.10)
    call IssuePointOrderLocBJ(udg_Coward, "move", GetRectCenter(gg_rct_Coward_Dest_01))
    call IssuePointOrderLocBJ(udg_Ensnaree, "move", GetRectCenter(gg_rct_Ensnaree_Dest_01))
    call IssuePointOrderLocBJ(udg_Ensnarer, "attack", GetRectCenter(gg_rct_Ensnarer_Dest))
    call EnableTrigger(gg_trg___Coward_Turns_Corner)
    call TriggerSleepAction(1.00)
    // Ensnare currently cannot target neutrals.  Being fixed.
    // Ensnare also can't target allies, so we need to spawn the villager as an enemy.
    // Until the spell is adjusted, just attack the villager.
    call IssueTargetOrderBJ(udg_Ensnarer, "attack", udg_Ensnaree)
    call EnableTrigger(gg_trg___Ensnaree_Runs)
    call EnableTrigger(gg_trg___Ensnarer_Attacked)
endfunction

//===========================================================================
function InitTrig_Coward_Scene takes nothing returns nothing
    set gg_trg_Coward_Scene=CreateTrigger()
    call TriggerRegisterEnterRectSimple(gg_trg_Coward_Scene, gg_rct_TriggerAmbush)
    call TriggerAddCondition(gg_trg_Coward_Scene, Condition(function Trig_Coward_Scene_Conditions))
    call TriggerAddAction(gg_trg_Coward_Scene, function Trig_Coward_Scene_Actions)
endfunction

//===========================================================================
// Trigger:   Coward Turns Corner
//
// Coward turns the corner, looking for a place to hide.
//===========================================================================
function Trig___Coward_Turns_Corner_Conditions takes nothing returns boolean
    if ( not ( GetEnteringUnit() == udg_Coward ) ) then
        return false
    endif
    return true
endfunction

function Trig___Coward_Turns_Corner_Actions takes nothing returns nothing
    call DisableTrigger(GetTriggeringTrigger())
    call IssuePointOrderLocBJ(udg_Coward, "move", GetRectCenter(gg_rct_Coward_Dest_02))
    call EnableTrigger(gg_trg___Coward_Meets_Grunt)
endfunction

//===========================================================================
function InitTrig___Coward_Turns_Corner takes nothing returns nothing
    set gg_trg___Coward_Turns_Corner=CreateTrigger()
    call DisableTrigger(gg_trg___Coward_Turns_Corner)
    call TriggerRegisterEnterRectSimple(gg_trg___Coward_Turns_Corner, gg_rct_Coward_Dest_01)
    call TriggerAddCondition(gg_trg___Coward_Turns_Corner, Condition(function Trig___Coward_Turns_Corner_Conditions))
    call TriggerAddAction(gg_trg___Coward_Turns_Corner, function Trig___Coward_Turns_Corner_Actions)
endfunction

//===========================================================================
// Trigger:   Coward Meets Grunt
//
// Coward finds a grunt around the corner.  D'oh!
// Coward bolts in the other direction.
//===========================================================================
function Trig___Coward_Meets_Grunt_Conditions takes nothing returns boolean
    if ( not ( GetEnteringUnit() == udg_Coward ) ) then
        return false
    endif
    return true
endfunction

function Trig___Coward_Meets_Grunt_Actions takes nothing returns nothing
    call DisableTrigger(GetTriggeringTrigger())
    call ShowUnitShow(udg_GruntSurprise)
    call SetUnitLifePercentBJ(udg_GruntSurprise, 70.00)
    call IssuePointOrderLocBJ(udg_Coward, "move", GetRectCenter(gg_rct_Coward_Dest_03))
    call TriggerSleepAction(1.00)
    call IssueTargetOrderBJ(udg_GruntSurprise, "attack", udg_Coward)
    call EnableTrigger(gg_trg___GruntSurprise_Attacked)
endfunction

//===========================================================================
function InitTrig___Coward_Meets_Grunt takes nothing returns nothing
    set gg_trg___Coward_Meets_Grunt=CreateTrigger()
    call DisableTrigger(gg_trg___Coward_Meets_Grunt)
    call TriggerRegisterEnterRectSimple(gg_trg___Coward_Meets_Grunt, gg_rct_Coward_Dest_02)
    call TriggerAddCondition(gg_trg___Coward_Meets_Grunt, Condition(function Trig___Coward_Meets_Grunt_Conditions))
    call TriggerAddAction(gg_trg___Coward_Meets_Grunt, function Trig___Coward_Meets_Grunt_Actions)
endfunction

//===========================================================================
// Trigger:   GruntSurprise Attacked
//
// If the grunt is attacked, break him off of his attack-unit command.
//===========================================================================
function Trig___GruntSurprise_Attacked_Actions takes nothing returns nothing
    call DisableTrigger(GetTriggeringTrigger())
    call IssuePointOrderLocBJ(udg_GruntSurprise, "attack", GetRectCenter(gg_rct_GruntSurprise_Dest))
endfunction

//===========================================================================
function InitTrig___GruntSurprise_Attacked takes nothing returns nothing
    set gg_trg___GruntSurprise_Attacked=CreateTrigger()
    call DisableTrigger(gg_trg___GruntSurprise_Attacked)
    call TriggerRegisterUnitEvent(gg_trg___GruntSurprise_Attacked, gg_unit_ogru_0083, EVENT_UNIT_ATTACKED)
    call TriggerAddAction(gg_trg___GruntSurprise_Attacked, function Trig___GruntSurprise_Attacked_Actions)
endfunction

//===========================================================================
// Trigger:   Ensnaree Runs
//
// The ensnaree keeps running.  Wouldn't you?
//===========================================================================
function Trig___Ensnaree_Runs_Conditions takes nothing returns boolean
    if ( not ( GetEnteringUnit() == udg_Ensnaree ) ) then
        return false
    endif
    return true
endfunction

function Trig___Ensnaree_Runs_Actions takes nothing returns nothing
    call DisableTrigger(GetTriggeringTrigger())
    call IssuePointOrderLocBJ(udg_Ensnaree, "move", GetRectCenter(gg_rct_Ensnaree_Dest_02))
    call EnableTrigger(gg_trg___Ensnaree_Escapes)
endfunction

//===========================================================================
function InitTrig___Ensnaree_Runs takes nothing returns nothing
    set gg_trg___Ensnaree_Runs=CreateTrigger()
    call DisableTrigger(gg_trg___Ensnaree_Runs)
    call TriggerRegisterEnterRectSimple(gg_trg___Ensnaree_Runs, gg_rct_Ensnaree_Dest_01)
    call TriggerAddCondition(gg_trg___Ensnaree_Runs, Condition(function Trig___Ensnaree_Runs_Conditions))
    call TriggerAddAction(gg_trg___Ensnaree_Runs, function Trig___Ensnaree_Runs_Actions)
endfunction

//===========================================================================
// Trigger:   Ensnaree Escapes
//
// Ensnaree makes it to a house - let him enter and be removed.
//===========================================================================
function Trig___Ensnaree_Escapes_Conditions takes nothing returns boolean
    if ( not ( GetEnteringUnit() == udg_Ensnaree ) ) then
        return false
    endif
    return true
endfunction

function Trig___Ensnaree_Escapes_Func005001 takes nothing returns boolean
    return ( IsUnitDeadBJ(udg_Ensnaree) == false )
endfunction

function Trig___Ensnaree_Escapes_Actions takes nothing returns nothing
    call DisableTrigger(GetTriggeringTrigger())
    call SetUnitPathing(udg_Ensnaree, false)
    call IssuePointOrderLocBJ(udg_Ensnaree, "move", GetRectCenter(gg_rct_Ensnaree_Escapes))
    call TriggerSleepAction(1.50)
    if ( Trig___Ensnaree_Escapes_Func005001() ) then
        call RemoveUnit(udg_Ensnaree)
    else
        call DoNothing()
    endif
endfunction

//===========================================================================
function InitTrig___Ensnaree_Escapes takes nothing returns nothing
    set gg_trg___Ensnaree_Escapes=CreateTrigger()
    call DisableTrigger(gg_trg___Ensnaree_Escapes)
    call TriggerRegisterEnterRectSimple(gg_trg___Ensnaree_Escapes, gg_rct_Ensnaree_Dest_02)
    call TriggerAddCondition(gg_trg___Ensnaree_Escapes, Condition(function Trig___Ensnaree_Escapes_Conditions))
    call TriggerAddAction(gg_trg___Ensnaree_Escapes, function Trig___Ensnaree_Escapes_Actions)
endfunction

//===========================================================================
// Trigger:   Ensnarer Attacked
//
// If the raider is attacked, break him off of his attack-unit command.
//===========================================================================
function Trig___Ensnarer_Attacked_Actions takes nothing returns nothing
    call DisableTrigger(GetTriggeringTrigger())
    call IssuePointOrderLocBJ(udg_Ensnarer, "attack", GetRectCenter(gg_rct_Ensnarer_Dest))
endfunction

//===========================================================================
function InitTrig___Ensnarer_Attacked takes nothing returns nothing
    set gg_trg___Ensnarer_Attacked=CreateTrigger()
    call DisableTrigger(gg_trg___Ensnarer_Attacked)
    call TriggerRegisterUnitEvent(gg_trg___Ensnarer_Attacked, gg_unit_orai_0046, EVENT_UNIT_ATTACKED)
    call TriggerAddAction(gg_trg___Ensnarer_Attacked, function Trig___Ensnarer_Attacked_Actions)
endfunction

//===========================================================================
// Trigger: House Collapse
//
// Staged Event
// When player approaches the northern area of town, a couple of grunts finish off a building.
// Villagers then flee from the rubble to nearby buildings.
//===========================================================================
function Trig_House_Collapse_Conditions takes nothing returns boolean
    if ( not ( GetOwningPlayer(GetEnteringUnit()) == Player(1) ) ) then
        return false
    endif
    return true
endfunction

function Trig_House_Collapse_Actions takes nothing returns nothing
    call DisableTrigger(GetTriggeringTrigger())
    call CreateNUnitsAtLoc(1, 'ogru', Player(0), GetRectCenter(gg_rct_House_Killer_01), 315.00)
    call SetUnitLifePercentBJ(GetLastCreatedUnit(), 80.00)
    set udg_HouseKiller01=GetLastCreatedUnit()
    call CreateNUnitsAtLoc(1, 'ogru', Player(0), GetRectCenter(gg_rct_House_Killer_02), 0.00)
    call SetUnitLifePercentBJ(GetLastCreatedUnit(), 65.00)
    set udg_HouseKiller02=GetLastCreatedUnit()
    call TriggerSleepAction(0.10)
    call IssueTargetOrderBJ(udg_HouseKiller01, "attack", gg_unit_ncba_0120)
    call IssueTargetOrderBJ(udg_HouseKiller02, "attack", gg_unit_ncba_0120)
    call TriggerSleepAction(1.00)
    call SetUnitLifeBJ(gg_unit_ncba_0120, 1.00)
endfunction

//===========================================================================
function InitTrig_House_Collapse takes nothing returns nothing
    set gg_trg_House_Collapse=CreateTrigger()
    call TriggerRegisterEnterRectSimple(gg_trg_House_Collapse, gg_rct_Trigger_House_Collapse)
    call TriggerAddCondition(gg_trg_House_Collapse, Condition(function Trig_House_Collapse_Conditions))
    call TriggerAddAction(gg_trg_House_Collapse, function Trig_House_Collapse_Actions)
endfunction

//===========================================================================
// Trigger:   House Collapsed
//
// Create the inhabitants of the house (villagers) and make them flee to nearby buildings.
//===========================================================================
function Trig___House_Collapsed_Actions takes nothing returns nothing
    call DisableTrigger(GetTriggeringTrigger())
    // Create them
    call CreateNUnitsAtLoc(1, 'nvil', Player(2), GetRandomLocInRect(gg_rct_House_Inhabitants_Spawn), GetRandomDirectionDeg())
    set udg_HouseInhabitant01=GetLastCreatedUnit()
    call CreateNUnitsAtLoc(1, 'nvlw', Player(2), GetRandomLocInRect(gg_rct_House_Inhabitants_Spawn), GetRandomDirectionDeg())
    set udg_HouseInhabitant02=GetLastCreatedUnit()
    call CreateNUnitsAtLoc(1, 'nvil', Player(2), GetRandomLocInRect(gg_rct_House_Inhabitants_Spawn), GetRandomDirectionDeg())
    set udg_HouseInhabitant03=GetLastCreatedUnit()
    call CreateNUnitsAtLoc(1, 'nvil', Player(2), GetRandomLocInRect(gg_rct_House_Inhabitants_Spawn), GetRandomDirectionDeg())
    call KillUnit(GetLastCreatedUnit())
    call TriggerSleepAction(0.10)
    // Make them run
    call IssuePointOrderLocBJ(udg_HouseInhabitant01, "move", GetRectCenter(gg_rct_House_Inhabitant_Dest_01))
    call IssuePointOrderLocBJ(udg_HouseInhabitant02, "move", GetRectCenter(gg_rct_House_Inhabitant_Dest_02))
    call IssuePointOrderLocBJ(udg_HouseInhabitant03, "move", GetRectCenter(gg_rct_House_Inhabitant_Dest_03))
    call EnableTrigger(gg_trg___Inhabitant_01_Escapes)
    call EnableTrigger(gg_trg___Inhabitant_02_Escapes)
    call EnableTrigger(gg_trg___Inhabitant_03_Escapes)
endfunction

//===========================================================================
function InitTrig___House_Collapsed takes nothing returns nothing
    set gg_trg___House_Collapsed=CreateTrigger()
    call TriggerRegisterUnitEvent(gg_trg___House_Collapsed, gg_unit_ncba_0120, EVENT_UNIT_DEATH)
    call TriggerAddAction(gg_trg___House_Collapsed, function Trig___House_Collapsed_Actions)
endfunction

//===========================================================================
// Trigger:   Inhabitant 01 Escapes
//
// Inhabitant makes it to a house - let him enter and be removed.
//===========================================================================
function Trig___Inhabitant_01_Escapes_Conditions takes nothing returns boolean
    if ( not ( GetEnteringUnit() == udg_HouseInhabitant01 ) ) then
        return false
    endif
    return true
endfunction

function Trig___Inhabitant_01_Escapes_Func005001 takes nothing returns boolean
    return ( IsUnitDeadBJ(udg_HouseInhabitant01) == false )
endfunction

function Trig___Inhabitant_01_Escapes_Actions takes nothing returns nothing
    call DisableTrigger(GetTriggeringTrigger())
    call SetUnitPathing(udg_HouseInhabitant01, false)
    call IssuePointOrderLocBJ(udg_HouseInhabitant01, "move", GetRectCenter(gg_rct_House_Escape_01))
    call TriggerSleepAction(1.50)
    if ( Trig___Inhabitant_01_Escapes_Func005001() ) then
        call RemoveUnit(udg_HouseInhabitant01)
    else
        call DoNothing()
    endif
endfunction

//===========================================================================
function InitTrig___Inhabitant_01_Escapes takes nothing returns nothing
    set gg_trg___Inhabitant_01_Escapes=CreateTrigger()
    call DisableTrigger(gg_trg___Inhabitant_01_Escapes)
    call TriggerRegisterEnterRectSimple(gg_trg___Inhabitant_01_Escapes, gg_rct_House_Inhabitant_Dest_01)
    call TriggerAddCondition(gg_trg___Inhabitant_01_Escapes, Condition(function Trig___Inhabitant_01_Escapes_Conditions))
    call TriggerAddAction(gg_trg___Inhabitant_01_Escapes, function Trig___Inhabitant_01_Escapes_Actions)
endfunction

//===========================================================================
// Trigger:   Inhabitant 02 Escapes
//
// Inhabitant makes it to a house - let him enter and be removed.
//===========================================================================
function Trig___Inhabitant_02_Escapes_Conditions takes nothing returns boolean
    if ( not ( GetEnteringUnit() == udg_HouseInhabitant02 ) ) then
        return false
    endif
    return true
endfunction

function Trig___Inhabitant_02_Escapes_Func005001 takes nothing returns boolean
    return ( IsUnitDeadBJ(udg_HouseInhabitant02) == false )
endfunction

function Trig___Inhabitant_02_Escapes_Actions takes nothing returns nothing
    call DisableTrigger(GetTriggeringTrigger())
    call SetUnitPathing(udg_HouseInhabitant02, false)
    call IssuePointOrderLocBJ(udg_HouseInhabitant02, "move", GetRectCenter(gg_rct_House_Escape_02))
    call TriggerSleepAction(1.50)
    if ( Trig___Inhabitant_02_Escapes_Func005001() ) then
        call RemoveUnit(udg_HouseInhabitant02)
    else
        call DoNothing()
    endif
endfunction

//===========================================================================
function InitTrig___Inhabitant_02_Escapes takes nothing returns nothing
    set gg_trg___Inhabitant_02_Escapes=CreateTrigger()
    call DisableTrigger(gg_trg___Inhabitant_02_Escapes)
    call TriggerRegisterEnterRectSimple(gg_trg___Inhabitant_02_Escapes, gg_rct_House_Inhabitant_Dest_02)
    call TriggerAddCondition(gg_trg___Inhabitant_02_Escapes, Condition(function Trig___Inhabitant_02_Escapes_Conditions))
    call TriggerAddAction(gg_trg___Inhabitant_02_Escapes, function Trig___Inhabitant_02_Escapes_Actions)
endfunction

//===========================================================================
// Trigger:   Inhabitant 03 Escapes
//
// Inhabitant makes it to a house - let him enter and be removed.
//===========================================================================
function Trig___Inhabitant_03_Escapes_Conditions takes nothing returns boolean
    if ( not ( GetEnteringUnit() == udg_HouseInhabitant03 ) ) then
        return false
    endif
    return true
endfunction

function Trig___Inhabitant_03_Escapes_Func005001 takes nothing returns boolean
    return ( IsUnitDeadBJ(udg_HouseInhabitant03) == false )
endfunction

function Trig___Inhabitant_03_Escapes_Actions takes nothing returns nothing
    call DisableTrigger(GetTriggeringTrigger())
    call SetUnitPathing(udg_HouseInhabitant03, false)
    call IssuePointOrderLocBJ(udg_HouseInhabitant03, "move", GetRectCenter(gg_rct_House_Escape_03))
    call TriggerSleepAction(1.50)
    if ( Trig___Inhabitant_03_Escapes_Func005001() ) then
        call RemoveUnit(udg_HouseInhabitant03)
    else
        call DoNothing()
    endif
endfunction

//===========================================================================
function InitTrig___Inhabitant_03_Escapes takes nothing returns nothing
    set gg_trg___Inhabitant_03_Escapes=CreateTrigger()
    call DisableTrigger(gg_trg___Inhabitant_03_Escapes)
    call TriggerRegisterEnterRectSimple(gg_trg___Inhabitant_03_Escapes, gg_rct_House_Inhabitant_Dest_03)
    call TriggerAddCondition(gg_trg___Inhabitant_03_Escapes, Condition(function Trig___Inhabitant_03_Escapes_Conditions))
    call TriggerAddAction(gg_trg___Inhabitant_03_Escapes, function Trig___Inhabitant_03_Escapes_Actions)
endfunction

//===========================================================================
// Trigger: Pursuit Scene
//===========================================================================
function Trig_Pursuit_Scene_Conditions takes nothing returns boolean
    if ( not ( GetOwningPlayer(GetEnteringUnit()) == udg_AAAP_Arthas ) ) then
        return false
    endif
    if ( not ( udg_GAMEOVER == false ) ) then
        return false
    endif
    return true
endfunction

function Trig_Pursuit_Scene_Func011001 takes nothing returns boolean
    return ( udg_GAMEOVER == true )
endfunction

function Trig_Pursuit_Scene_Func012001 takes nothing returns boolean
    return ( udg_GAMEOVER == true )
endfunction

function Trig_Pursuit_Scene_Func013001 takes nothing returns boolean
    return ( IsTriggerQueueEmptyBJ() == true )
endfunction

function Trig_Pursuit_Scene_Func025001 takes nothing returns boolean
    return ( udg_GAMEOVER == true )
endfunction

function Trig_Pursuit_Scene_Func026001 takes nothing returns boolean
    return ( udg_GAMEOVER == true )
endfunction

function Trig_Pursuit_Scene_Func028001 takes nothing returns boolean
    return ( IsTriggerQueueEmptyBJ() == true )
endfunction

function Trig_Pursuit_Scene_Actions takes nothing returns nothing
    call DisableTrigger(GetTriggeringTrigger())
    call CreateFogModifierRadiusLocBJ(true, udg_AAAP_Arthas, FOG_OF_WAR_VISIBLE, GetRectCenter(gg_rct_Pursuit_Center), 512.00)
    set udg_PusuitVisibility=GetLastCreatedFogModifier()
    call SmartCameraPanBJ(udg_AAAP_Arthas, GetRectCenter(gg_rct_Pursuit_Center), 0.5)
    call CreateNUnitsAtLoc(1, 'nC15', Player(2), GetRectCenter(gg_rct_FleeingVillagerStart), 270.00)
    set udg_FleeingVillager01=GetLastCreatedUnit()
    call SetUnitLifeBJ(udg_FleeingVillager01, 1.00)
    call TriggerSleepAction(0.01)
    call IssuePointOrderLocBJ(udg_FleeingVillager01, "move", GetRectCenter(gg_rct_PursuitTarget))
    call TriggerSleepAction(0.10)
    if ( Trig_Pursuit_Scene_Func011001() ) then
        call TriggerExecute(gg_trg_AbortPursuit)
    else
        call DoNothing()
    endif
    if ( Trig_Pursuit_Scene_Func012001() ) then
        return
    else
        call DoNothing()
    endif
    if ( Trig_Pursuit_Scene_Func013001() ) then
        call QueuedTriggerAddBJ(gg_trg_Sound_Pursuit, true)
    else
        call DoNothing()
    endif
    call TriggerSleepAction(0.10)
    call CreateNUnitsAtLoc(1, 'ogru', udg_P_Orcs, GetRectCenter(gg_rct_Grunt01Start), 270.00)
    set udg_ChasingGrunt01=GetLastCreatedUnit()
    call RemoveGuardPosition(udg_ChasingGrunt01)
    call IssueTargetOrderBJ(udg_ChasingGrunt01, "attack", udg_FleeingVillager01)
    call TriggerSleepAction(0.10)
    call CreateNUnitsAtLoc(1, 'ogru', udg_P_Orcs, GetRectCenter(gg_rct_Grunt02Start), 270.00)
    set udg_ChasingGrunt02=GetLastCreatedUnit()
    call RemoveGuardPosition(udg_ChasingGrunt02)
    call IssueTargetOrderBJ(udg_ChasingGrunt02, "attack", udg_FleeingVillager01)
    call WaitForSoundBJ(gg_snd_H03VillagerM50, 1.00)
    if ( Trig_Pursuit_Scene_Func025001() ) then
        call TriggerExecute(gg_trg_AbortPursuit)
    else
        call DoNothing()
    endif
    if ( Trig_Pursuit_Scene_Func026001() ) then
        return
    else
        call DoNothing()
    endif
    call QueuedTriggerRemoveBJ(gg_trg_Sound_Pursuit)
    if ( Trig_Pursuit_Scene_Func028001() ) then
        call QueuedTriggerAddBJ(gg_trg_Sound_Pursuit2, true)
    else
        call TriggerSleepAction(GetSoundDurationBJ(gg_snd_H01Grunt17))
    endif
    call VolumeGroupResetBJ()
endfunction

//===========================================================================
function InitTrig_Pursuit_Scene takes nothing returns nothing
    set gg_trg_Pursuit_Scene=CreateTrigger()
    call TriggerRegisterEnterRectSimple(gg_trg_Pursuit_Scene, gg_rct_TriggerPursuit01)
    call TriggerAddCondition(gg_trg_Pursuit_Scene, Condition(function Trig_Pursuit_Scene_Conditions))
    call TriggerAddAction(gg_trg_Pursuit_Scene, function Trig_Pursuit_Scene_Actions)
endfunction

//===========================================================================
// Trigger: Sound Pursuit
//===========================================================================
function Trig_Sound_Pursuit_Actions takes nothing returns nothing
    call SetSpeechVolumeGroupsBJ()
    call TransmissionFromUnitWithNameBJ(udg_AAAPG_Arthas, udg_FleeingVillager01, "TRIGSTR_379", gg_snd_H03VillagerM50, "TRIGSTR_380", bj_TIMETYPE_ADD, 0.00, true)
    call QueuedTriggerRemoveBJ(GetTriggeringTrigger())
endfunction

//===========================================================================
function InitTrig_Sound_Pursuit takes nothing returns nothing
    set gg_trg_Sound_Pursuit=CreateTrigger()
    call TriggerAddAction(gg_trg_Sound_Pursuit, function Trig_Sound_Pursuit_Actions)
endfunction

//===========================================================================
// Trigger: Sound Pursuit2
//===========================================================================
function Trig_Sound_Pursuit2_Actions takes nothing returns nothing
    call SetSpeechVolumeGroupsBJ()
    call TransmissionFromUnitWithNameBJ(udg_AAAPG_Arthas, udg_ChasingGrunt01, "TRIGSTR_383", gg_snd_H01Grunt17, "TRIGSTR_384", bj_TIMETYPE_ADD, 0.00, true)
    call QueuedTriggerRemoveBJ(GetTriggeringTrigger())
endfunction

//===========================================================================
function InitTrig_Sound_Pursuit2 takes nothing returns nothing
    set gg_trg_Sound_Pursuit2=CreateTrigger()
    call TriggerAddAction(gg_trg_Sound_Pursuit2, function Trig_Sound_Pursuit2_Actions)
endfunction

//===========================================================================
// Trigger: AbortPursuit
//===========================================================================
function Trig_AbortPursuit_Actions takes nothing returns nothing
    call VolumeGroupResetBJ()
endfunction

//===========================================================================
function InitTrig_AbortPursuit takes nothing returns nothing
    set gg_trg_AbortPursuit=CreateTrigger()
    call TriggerAddAction(gg_trg_AbortPursuit, function Trig_AbortPursuit_Actions)
endfunction

//===========================================================================
// Trigger: VillagerDies
//===========================================================================
function Trig_VillagerDies_Conditions takes nothing returns boolean
    if ( not ( GetDyingUnit() == udg_FleeingVillager01 ) ) then
        return false
    endif
    if ( not ( udg_GAMEOVER == false ) ) then
        return false
    endif
    return true
endfunction

function Trig_VillagerDies_Actions takes nothing returns nothing
    call TriggerSleepAction(2.00)
    call SetSpeechVolumeGroupsBJ()
    call TransmissionFromUnitWithNameBJ(udg_AAAPG_Arthas, udg_Arthas, "TRIGSTR_104", gg_snd_H01Arthas18, "TRIGSTR_105", bj_TIMETYPE_ADD, 0.00, true)
    call VolumeGroupResetBJ()
    call TriggerSleepAction(0.25)
    call ResetToGameCameraForPlayer(udg_AAAP_Arthas, 2.00)
    call FogModifierStop(udg_PusuitVisibility)
endfunction

//===========================================================================
function InitTrig_VillagerDies takes nothing returns nothing
    set gg_trg_VillagerDies=CreateTrigger()
    call TriggerRegisterPlayerUnitEventSimple(gg_trg_VillagerDies, Player(2), EVENT_PLAYER_UNIT_DEATH)
    call TriggerAddCondition(gg_trg_VillagerDies, Condition(function Trig_VillagerDies_Conditions))
    call TriggerAddAction(gg_trg_VillagerDies, function Trig_VillagerDies_Actions)
endfunction

//===========================================================================
// Trigger: Rescue Footmen
//===========================================================================
function Trig_Rescue_Footmen_Conditions takes nothing returns boolean
    if ( not ( GetOwningPlayer(GetEnteringUnit()) == udg_AAAP_Arthas ) ) then
        return false
    endif
    if ( not ( udg_GAMEOVER == false ) ) then
        return false
    endif
    return true
endfunction

function Trig_Rescue_Footmen_Func005002 takes nothing returns nothing
    call RescueUnitBJ(GetEnumUnit(), udg_AAAP_Arthas, true)
endfunction

function Trig_Rescue_Footmen_Actions takes nothing returns nothing
    call DisableTrigger(GetTriggeringTrigger())
    call status_check_location(21)
    call CreateNUnitsAtLoc(1, 'ogru', udg_P_Orcs, GetRectCenter(gg_rct_Invader01), 270.00)
    call CreateNUnitsAtLoc(1, 'ogru', udg_P_Orcs, GetRectCenter(gg_rct_Invader02), 270.00)
    call ForGroupBJ(udg_RescuableFootmen, function Trig_Rescue_Footmen_Func005002)
    call TriggerSleepAction(1.00)
    call PingMinimapLocForForce(udg_AAAPG_Arthas, GetRectCenter(gg_rct_RescuableFootmen), 7.00)
    call SetCameraQuickPositionLocForPlayer(udg_AAAP_Arthas, GetRectCenter(gg_rct_RescuableFootmen))
    call AttachSoundToUnitBJ(gg_snd_FootmanYesAttack2, gg_unit_hfoo_0041)
    call PlaySoundBJ(gg_snd_FootmanYesAttack2)
endfunction

//===========================================================================
function InitTrig_Rescue_Footmen takes nothing returns nothing
    set gg_trg_Rescue_Footmen=CreateTrigger()
    call TriggerRegisterEnterRectSimple(gg_trg_Rescue_Footmen, gg_rct_RescueFootmen01)
    call TriggerAddCondition(gg_trg_Rescue_Footmen, Condition(function Trig_Rescue_Footmen_Conditions))
    call TriggerAddAction(gg_trg_Rescue_Footmen, function Trig_Rescue_Footmen_Actions)
endfunction

//===========================================================================
// Trigger: Remove Footmen Who Die
//===========================================================================
function Trig_Remove_Footmen_Who_Die_Conditions takes nothing returns boolean
    if ( not ( IsUnitInGroup(GetDyingUnit(), udg_RescuableFootmen) == true ) ) then
        return false
    endif
    return true
endfunction

function Trig_Remove_Footmen_Who_Die_Actions takes nothing returns nothing
    call GroupRemoveUnitSimple(GetDyingUnit(), udg_RescuableFootmen)
endfunction

//===========================================================================
function InitTrig_Remove_Footmen_Who_Die takes nothing returns nothing
    set gg_trg_Remove_Footmen_Who_Die=CreateTrigger()
    call TriggerRegisterPlayerUnitEventSimple(gg_trg_Remove_Footmen_Who_Die, Player(2), EVENT_PLAYER_UNIT_DEATH)
    call TriggerAddCondition(gg_trg_Remove_Footmen_Who_Die, Condition(function Trig_Remove_Footmen_Who_Die_Conditions))
    call TriggerAddAction(gg_trg_Remove_Footmen_Who_Die, function Trig_Remove_Footmen_Who_Die_Actions)
endfunction

//===========================================================================
// Trigger: Timmy Quest
//===========================================================================
function Trig_Timmy_Quest_Conditions takes nothing returns boolean
    if ( not ( GetOwningPlayer(GetEnteringUnit()) == udg_AAAP_Arthas ) ) then
        return false
    endif
    if ( not ( udg_IsTimmyFree == false ) ) then
        return false
    endif
    if ( not ( udg_IsTimmyDead == false ) ) then
        return false
    endif
    if ( not ( udg_IsLittleTimmyReturned == false ) ) then
        return false
    endif
    if ( not ( udg_TimmyQuestFailed == false ) ) then
        return false
    endif
    return true
endfunction

function Trig_Timmy_Quest_Actions takes nothing returns nothing
    call DisableTrigger(GetTriggeringTrigger())
    call ConditionalTriggerExecute(gg_trg_Villager_Speech_Array_Loop_OFF)
    call QueuedTriggerAddBJ(gg_trg_Timmy_Quest_Queue, true)
endfunction

//===========================================================================
function InitTrig_Timmy_Quest takes nothing returns nothing
    set gg_trg_Timmy_Quest=CreateTrigger()
    call TriggerRegisterEnterRectSimple(gg_trg_Timmy_Quest, gg_rct_Little_Timmys_Home)
    call TriggerAddCondition(gg_trg_Timmy_Quest, Condition(function Trig_Timmy_Quest_Conditions))
    call TriggerAddAction(gg_trg_Timmy_Quest, function Trig_Timmy_Quest_Actions)
endfunction

//===========================================================================
// Trigger: Timmy Quest Queue
//===========================================================================
function Trig_Timmy_Quest_Queue_Conditions takes nothing returns boolean
    if ( not ( udg_GAMEOVER == false ) ) then
        return false
    endif
    return true
endfunction

function Trig_Timmy_Quest_Queue_Func003001 takes nothing returns boolean
    return ( udg_TimmyQuestFailed == true )
endfunction

function Trig_Timmy_Quest_Queue_Func004001 takes nothing returns boolean
    return ( udg_TimmyQuestFailed == true )
endfunction

function Trig_Timmy_Quest_Queue_Func015001 takes nothing returns boolean
    return ( udg_TimmyQuestFailed == true )
endfunction

function Trig_Timmy_Quest_Queue_Func016001 takes nothing returns boolean
    return ( udg_TimmyQuestFailed == true )
endfunction

function Trig_Timmy_Quest_Queue_Actions takes nothing returns nothing
    call DisableTrigger(GetTriggeringTrigger())
    if ( Trig_Timmy_Quest_Queue_Func003001() ) then
        call QueuedTriggerRemoveBJ(GetTriggeringTrigger())
    else
        call DoNothing()
    endif
    if ( Trig_Timmy_Quest_Queue_Func004001() ) then
        return
    else
        call DoNothing()
    endif
    call CreateFogModifierRadiusLocBJ(true, udg_AAAP_Arthas, FOG_OF_WAR_VISIBLE, GetRectCenter(gg_rct_TimmyQuestRequiredUnits), 512)
    set udg_AliciaVisModifier=GetLastCreatedFogModifier()
    call DestroyEffectBJ(udg_TalkAlicia)
    call SmartCameraPanBJ(udg_AAAP_Arthas, GetRectCenter(gg_rct_Little_Timmys_Home), 0.5)
    call SetUnitFacingToFaceUnitTimed(udg_Alicia, GetEnteringUnit(), 0.15)
    call SetSpeechVolumeGroupsBJ()
    call TransmissionFromUnitWithNameBJ(udg_AAAPG_Arthas, udg_Alicia, "TRIGSTR_035", gg_snd_H01VillagerF27, "TRIGSTR_041", bj_TIMETYPE_ADD, 0.00, true)
    call VolumeGroupResetBJ()
    call TriggerSleepAction(0.50)
    call DestroyFogModifier(udg_AliciaVisModifier)
    if ( Trig_Timmy_Quest_Queue_Func015001() ) then
        call QueuedTriggerRemoveBJ(GetTriggeringTrigger())
    else
        call DoNothing()
    endif
    if ( Trig_Timmy_Quest_Queue_Func016001() ) then
        return
    else
        call DoNothing()
    endif
    call QuestMessageBJ(udg_AAAPG_Arthas, bj_QUESTMESSAGE_DISCOVERED, "TRIGSTR_042")
    call QuestSetDiscoveredBJ(udg_QuestTimmy, true)
    call FlashQuestDialogButtonBJ()
    call CreateFogModifierRadiusLocBJ(true, udg_AAAP_Arthas, FOG_OF_WAR_VISIBLE, GetRectCenter(gg_rct_Little_Timmys_Cage_Pan), 512.00)
    call DestroyFogModifier(GetLastCreatedFogModifier())
    call PingMinimapLocForForce(udg_AAAPG_Arthas, GetRectCenter(gg_rct_Little_Timmys_Cage_Pan), 7.00)
    call SetCameraQuickPositionLocForPlayer(udg_AAAP_Arthas, GetRectCenter(gg_rct_Little_Timmys_Cage_Pan))
    call TriggerSleepAction(bj_QUEUE_DELAY_QUEST)
    call QueuedTriggerRemoveBJ(gg_trg_Timmy_Quest_Queue)
endfunction

//===========================================================================
function InitTrig_Timmy_Quest_Queue takes nothing returns nothing
    set gg_trg_Timmy_Quest_Queue=CreateTrigger()
    call TriggerAddCondition(gg_trg_Timmy_Quest_Queue, Condition(function Trig_Timmy_Quest_Queue_Conditions))
    call TriggerAddAction(gg_trg_Timmy_Quest_Queue, function Trig_Timmy_Quest_Queue_Actions)
endfunction

//===========================================================================
// Trigger: Player Enters Camp
//===========================================================================
function Trig_Player_Enters_Camp_Conditions takes nothing returns boolean
    if ( not ( GetOwningPlayer(GetEnteringUnit()) == udg_AAAP_Arthas ) ) then
        return false
    endif
    if ( not ( udg_GAMEOVER == false ) ) then
        return false
    endif
    return true
endfunction

function Trig_Player_Enters_Camp_Actions takes nothing returns nothing
    call DisableTrigger(GetTriggeringTrigger())
    call CreateFogModifierRadiusLocBJ(true, udg_AAAP_Arthas, FOG_OF_WAR_VISIBLE, GetRectCenter(gg_rct_LittleTimmysSpawnPoint), 512.00)
    set udg_InitialVisibilityRegion=GetLastCreatedFogModifier()
    call SmartCameraPanBJ(udg_AAAP_Arthas, GetRectCenter(gg_rct_Little_Timmys_Cage_Pan), 0.5)
    call DestructableAddIndicatorBJ(udg_LittleTimmysCage, 0.00, 100.00, 0.00, 0.00)
    call SetSpeechVolumeGroupsBJ()
    call TransmissionFromUnitTypeWithNameBJ(udg_AAAPG_Arthas, Player(2), 'nvlk', "TRIGSTR_230", GetRectCenter(gg_rct_LittleTimmysSpawnPoint), gg_snd_H01VillagerC3501, "TRIGSTR_231", bj_TIMETYPE_ADD, 0, true)
    call VolumeGroupResetBJ()
    call SetCameraQuickPositionLocForPlayer(udg_AAAP_Arthas, GetRectCenter(gg_rct_Little_Timmys_Cage_Pan))
    call PingMinimapLocForForce(udg_AAAPG_Arthas, GetRectCenter(gg_rct_Little_Timmys_Cage_Pan), 2.00)
endfunction

//===========================================================================
function InitTrig_Player_Enters_Camp takes nothing returns nothing
    set gg_trg_Player_Enters_Camp=CreateTrigger()
    call TriggerRegisterEnterRectSimple(gg_trg_Player_Enters_Camp, gg_rct_TriggerGnollCamp01)
    call TriggerRegisterEnterRectSimple(gg_trg_Player_Enters_Camp, gg_rct_TriggerGnollCamp02)
    call TriggerAddCondition(gg_trg_Player_Enters_Camp, Condition(function Trig_Player_Enters_Camp_Conditions))
    call TriggerAddAction(gg_trg_Player_Enters_Camp, function Trig_Player_Enters_Camp_Actions)
endfunction

//===========================================================================
// Trigger: When A Gnoll Dies
//===========================================================================
function Trig_When_A_Gnoll_Dies_Conditions takes nothing returns boolean
    if ( not ( IsUnitInGroup(GetDyingUnit(), udg_GnollCamp) == true ) ) then
        return false
    endif
    return true
endfunction

function Trig_When_A_Gnoll_Dies_Actions takes nothing returns nothing
    call GroupRemoveUnitSimple(GetDyingUnit(), udg_GnollCamp)
endfunction

//===========================================================================
function InitTrig_When_A_Gnoll_Dies takes nothing returns nothing
    set gg_trg_When_A_Gnoll_Dies=CreateTrigger()
    call TriggerRegisterPlayerUnitEventSimple(gg_trg_When_A_Gnoll_Dies, Player(PLAYER_NEUTRAL_AGGRESSIVE), EVENT_PLAYER_UNIT_DEATH)
    call TriggerAddCondition(gg_trg_When_A_Gnoll_Dies, Condition(function Trig_When_A_Gnoll_Dies_Conditions))
    call TriggerAddAction(gg_trg_When_A_Gnoll_Dies, function Trig_When_A_Gnoll_Dies_Actions)
endfunction

//===========================================================================
// Trigger: Gnolls are defeated
//===========================================================================
function Trig_Gnolls_are_defeated_Conditions takes nothing returns boolean
    if ( not ( IsUnitGroupDeadBJ(udg_GnollCamp) == true ) ) then
        return false
    endif
    if ( not ( udg_IsTimmyFree == false ) ) then
        return false
    endif
    if ( not ( udg_TimmyQuestFailed == false ) ) then
        return false
    endif
    if ( not ( udg_GAMEOVER == false ) ) then
        return false
    endif
    return true
endfunction

function Trig_Gnolls_are_defeated_Func006001 takes nothing returns boolean
    return ( udg_TimmyQuestFailed == true )
endfunction

function Trig_Gnolls_are_defeated_Func007001 takes nothing returns boolean
    return ( udg_TimmyQuestFailed == true )
endfunction

function Trig_Gnolls_are_defeated_Func012001 takes nothing returns boolean
    return ( udg_TimmyQuestFailed == true )
endfunction

function Trig_Gnolls_are_defeated_Func013001 takes nothing returns boolean
    return ( udg_TimmyQuestFailed == true )
endfunction

function Trig_Gnolls_are_defeated_Func017001 takes nothing returns boolean
    return ( udg_TimmyQuestFailed == true )
endfunction

function Trig_Gnolls_are_defeated_Func018001 takes nothing returns boolean
    return ( udg_TimmyQuestFailed == true )
endfunction

function Trig_Gnolls_are_defeated_Func021001 takes nothing returns boolean
    return ( udg_TimmyQuestFailed == true )
endfunction

function Trig_Gnolls_are_defeated_Func022001 takes nothing returns boolean
    return ( udg_TimmyQuestFailed == true )
endfunction

function Trig_Gnolls_are_defeated_Func037001002 takes nothing returns boolean
    return ( IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) == false )
endfunction

function Trig_Gnolls_are_defeated_Func037002 takes nothing returns nothing
    call SetUnitPositionLoc(GetEnumUnit(), GetRectCenter(gg_rct_TimmyFreeCin_ArthasGuys))
endfunction

function Trig_Gnolls_are_defeated_Func046001 takes nothing returns boolean
    return ( udg_TimmyQuestFailed == false )
endfunction

function Trig_Gnolls_are_defeated_Func049001 takes nothing returns boolean
    return ( udg_TimmyQuestFailed == false )
endfunction

function Trig_Gnolls_are_defeated_Func050001 takes nothing returns boolean
    return ( udg_TimmyQuestFailed == false )
endfunction

function Trig_Gnolls_are_defeated_Func057001 takes nothing returns boolean
    return ( udg_TimmyQuestFailed == true )
endfunction

function Trig_Gnolls_are_defeated_Func061001 takes nothing returns boolean
    return ( udg_TimmyQuestFailed == true )
endfunction

function Trig_Gnolls_are_defeated_Actions takes nothing returns nothing
    call DisableTrigger(GetTriggeringTrigger())
    call DestroyFogModifier(udg_InitialVisibilityRegion)
    call SetDestructableInvulnerableBJ(gg_dest_LOcg_1482, false)
    set udg_SelectedUnits=GetUnitsSelectedAll(udg_AAAP_Arthas)
    call ClearSelection()
    if ( Trig_Gnolls_are_defeated_Func006001() ) then
        call TriggerExecute(gg_trg_Abort_Gnolls_defeated)
    else
        call DoNothing()
    endif
    if ( Trig_Gnolls_are_defeated_Func007001() ) then
        return
    else
        call DoNothing()
    endif
    call SetSpeechVolumeGroupsBJ()
    call DestructableAddIndicatorBJ(udg_LittleTimmysCage, 0.00, 100.00, 0.00, 0.00)
    call TransmissionFromUnitTypeWithNameBJ(udg_AAAPG_Arthas, Player(2), 'nvlk', "TRIGSTR_232", GetRectCenter(gg_rct_LittleTimmysSpawnPoint), gg_snd_H01VillagerC36, "TRIGSTR_233", bj_TIMETYPE_ADD, 0, true)
    call VolumeGroupResetBJ()
    if ( Trig_Gnolls_are_defeated_Func012001() ) then
        call TriggerExecute(gg_trg_Abort_Gnolls_defeated)
    else
        call DoNothing()
    endif
    if ( Trig_Gnolls_are_defeated_Func013001() ) then
        return
    else
        call DoNothing()
    endif
    call SetCameraQuickPositionLocForPlayer(udg_AAAP_Arthas, GetRectCenter(gg_rct_Little_Timmys_Cage_Pan))
    call PingMinimapLocForForce(udg_AAAPG_Arthas, GetRectCenter(gg_rct_Little_Timmys_Cage_Pan), 2.00)
    call TriggerSleepAction(1.00)
    if ( Trig_Gnolls_are_defeated_Func017001() ) then
        call TriggerExecute(gg_trg_Abort_Gnolls_defeated)
    else
        call DoNothing()
    endif
    if ( Trig_Gnolls_are_defeated_Func018001() ) then
        return
    else
        call DoNothing()
    endif
    call KillDestructable(gg_dest_LOcg_1482)
    call TriggerSleepAction(0.10)
    if ( Trig_Gnolls_are_defeated_Func021001() ) then
        call TriggerExecute(gg_trg_Abort_Gnolls_defeated)
    else
        call DoNothing()
    endif
    if ( Trig_Gnolls_are_defeated_Func022001() ) then
        return
    else
        call DoNothing()
    endif
    call CreateNUnitsAtLoc(1, 'nC00', Player(2), GetRectCenter(gg_rct_LittleTimmysSpawnPoint), 180.00)
    set udg_LittleTimmy=GetLastCreatedUnit()
    call SetUnitInvulnerable(udg_LittleTimmy, true)
    call QuestItemSetCompletedBJ(udg_RequirementTimmyRescue, true)
    call TriggerSleepAction(1.50)
    // CANNOT SKIP UNTIL RE-ENABLE USER CONTROL
    call SetUserControlForceOff(GetPlayersAll())
    call CinematicFadeBJ(bj_CINEFADETYPE_FADEOUT, 1.00, "ReplaceableTextures\\CameraMasks\\White_mask.blp", 0, 0, 0, 0)
    call TriggerSleepAction(1.00)
    set udg_IsLittleTimmyReturned=true
    set udg_IsTimmyFree=true
    // a
    call ResetToGameCameraForPlayer(udg_AAAP_Arthas, 0)
    call PanCameraToTimedLocForPlayer(udg_AAAP_Arthas, GetRectCenter(gg_rct_TimmyIsFreePan), 0)
    call ForGroupBJ(GetUnitsOfPlayerMatching(udg_AAAP_Arthas, Condition(function Trig_Gnolls_are_defeated_Func037001002)), function Trig_Gnolls_are_defeated_Func037002)
    call SetUnitPositionLoc(udg_Alicia, GetRectCenter(gg_rct_TimmyFreeCin_Alicia))
    call SetUnitPositionLoc(udg_Arthas, GetRectCenter(gg_rct_TimmyFreeCin_Arthas))
    call SetUnitFacingToFaceUnitTimed(udg_Alicia, udg_Arthas, 0)
    call SetUnitFacingToFaceUnitTimed(udg_Arthas, udg_Alicia, 0)
    call CinematicFadeBJ(bj_CINEFADETYPE_FADEIN, 1.00, "ReplaceableTextures\\CameraMasks\\White_mask.blp", 0, 0, 0, 0)
    call TriggerSleepAction(1.00)
    call IssuePointOrderLocBJ(udg_LittleTimmy, "move", GetRectCenter(gg_rct_TimmyFreeCin_Alicia))
    call SetSpeechVolumeGroupsBJ()
    if ( Trig_Gnolls_are_defeated_Func046001() ) then
        call TransmissionFromUnitWithNameBJ(GetPlayersAll(), udg_Alicia, "TRIGSTR_323", gg_snd_H01VillagerF42, "TRIGSTR_324", bj_TIMETYPE_ADD, 0, true)
    else
        call TriggerSleepAction(0.10)
    endif
    call VolumeGroupResetBJ()
    call TriggerSleepAction(0.25)
    if ( Trig_Gnolls_are_defeated_Func049001() ) then
        call status_check_location(22)
    else
        call DoNothing()
    endif
    if ( Trig_Gnolls_are_defeated_Func050001() ) then
        call PlaySoundBJ(gg_snd_PickUpItem)
    else
        call DoNothing()
    endif
    call SetUserControlForceOn(GetPlayersAll())
    call SelectGroupBJ(udg_SelectedUnits)
    call SetCameraQuickPositionLocForPlayer(udg_AAAP_Arthas, GetUnitLoc(udg_Arthas))
    call PingMinimapLocForForce(udg_AAAPG_Arthas, GetUnitLoc(udg_Arthas), 7.00)
    // CAN SKIP AGAIN
    call TriggerSleepAction(1.00)
    if ( Trig_Gnolls_are_defeated_Func057001() ) then
        return
    else
        call DoNothing()
    endif
    call IssuePointOrderLocBJ(udg_Alicia, "move", GetRectCenter(gg_rct_Alicia))
    call IssuePointOrderLocBJ(udg_LittleTimmy, "move", GetRectCenter(gg_rct_Timmy_Go_Home))
    call TriggerSleepAction(5.00)
    if ( Trig_Gnolls_are_defeated_Func061001() ) then
        return
    else
        call DoNothing()
    endif
    call QuestMessageBJ(udg_AAAPG_Arthas, bj_QUESTMESSAGE_COMPLETED, "TRIGSTR_060")
    call QuestSetCompletedBJ(udg_QuestTimmy, true)
endfunction

//===========================================================================
function InitTrig_Gnolls_are_defeated takes nothing returns nothing
    set gg_trg_Gnolls_are_defeated=CreateTrigger()
    call TriggerRegisterPlayerUnitEventSimple(gg_trg_Gnolls_are_defeated, Player(PLAYER_NEUTRAL_AGGRESSIVE), EVENT_PLAYER_UNIT_DEATH)
    call TriggerAddCondition(gg_trg_Gnolls_are_defeated, Condition(function Trig_Gnolls_are_defeated_Conditions))
    call TriggerAddAction(gg_trg_Gnolls_are_defeated, function Trig_Gnolls_are_defeated_Actions)
endfunction

//===========================================================================
// Trigger: Abort Gnolls defeated
//===========================================================================
function Trig_Abort_Gnolls_defeated_Actions takes nothing returns nothing
    call SelectGroupBJ(udg_SelectedUnits)
endfunction

//===========================================================================
function InitTrig_Abort_Gnolls_defeated takes nothing returns nothing
    set gg_trg_Abort_Gnolls_defeated=CreateTrigger()
    call TriggerAddAction(gg_trg_Abort_Gnolls_defeated, function Trig_Abort_Gnolls_defeated_Actions)
endfunction

//===========================================================================
// Trigger: If Timmy Dies
//===========================================================================
function Trig_If_Timmy_Dies_Conditions takes nothing returns boolean
    if ( not ( GetDyingUnit() == udg_LittleTimmy ) ) then
        return false
    endif
    if ( not ( udg_IsLittleTimmyReturned == false ) ) then
        return false
    endif
    if ( not ( udg_TimmyQuestFailed == false ) ) then
        return false
    endif
    if ( not ( udg_GAMEOVER == false ) ) then
        return false
    endif
    return true
endfunction

function Trig_If_Timmy_Dies_Actions takes nothing returns nothing
    call DestroyEffectBJ(udg_TalkAlicia)
    call DisableTrigger(GetTriggeringTrigger())
    call DisableTrigger(gg_trg_If_Alicia_or_Children_Die)
    call DisableTrigger(gg_trg_Player_Enters_Camp)
    call DisableTrigger(gg_trg_When_A_Gnoll_Dies)
    call DisableTrigger(gg_trg_Gnolls_are_defeated)
    set udg_TimmyQuestFailed=true
    set udg_IsTimmyDead=true
    call QueuedTriggerAddBJ(gg_trg_If_Timmy_Dies_Queue, true)
endfunction

//===========================================================================
function InitTrig_If_Timmy_Dies takes nothing returns nothing
    set gg_trg_If_Timmy_Dies=CreateTrigger()
    call TriggerRegisterPlayerUnitEventSimple(gg_trg_If_Timmy_Dies, Player(2), EVENT_PLAYER_UNIT_DEATH)
    call TriggerAddCondition(gg_trg_If_Timmy_Dies, Condition(function Trig_If_Timmy_Dies_Conditions))
    call TriggerAddAction(gg_trg_If_Timmy_Dies, function Trig_If_Timmy_Dies_Actions)
endfunction

//===========================================================================
// Trigger: If Timmy Dies Queue
//===========================================================================
function Trig_If_Timmy_Dies_Queue_Actions takes nothing returns nothing
    call SetCameraQuickPositionLocForPlayer(udg_AAAP_Arthas, GetUnitLoc(udg_LittleTimmy))
    call PingMinimapLocForForce(udg_AAAPG_Arthas, GetUnitLoc(udg_LittleTimmy), 1)
    call QuestSetDiscoveredBJ(udg_QuestTimmy, true)
    call QuestSetFailedBJ(udg_QuestTimmy, true)
    call QuestMessageBJ(udg_AAAPG_Arthas, bj_QUESTMESSAGE_FAILED, "TRIGSTR_372")
    call TriggerSleepAction(bj_QUEUE_DELAY_QUEST)
    call QueuedTriggerRemoveBJ(GetTriggeringTrigger())
endfunction

//===========================================================================
function InitTrig_If_Timmy_Dies_Queue takes nothing returns nothing
    set gg_trg_If_Timmy_Dies_Queue=CreateTrigger()
    call TriggerAddAction(gg_trg_If_Timmy_Dies_Queue, function Trig_If_Timmy_Dies_Queue_Actions)
endfunction

//===========================================================================
// Trigger: If Alicia or Children Die
//===========================================================================
function Trig_If_Alicia_or_Children_Die_Conditions takes nothing returns boolean
    if ( not ( IsUnitInGroup(GetDyingUnit(), udg_TimmyQuestRequiredUnits) == true ) ) then
        return false
    endif
    if ( not ( udg_IsLittleTimmyReturned == false ) ) then
        return false
    endif
    if ( not ( udg_TimmyQuestFailed == false ) ) then
        return false
    endif
    if ( not ( udg_GAMEOVER == false ) ) then
        return false
    endif
    return true
endfunction

function Trig_If_Alicia_or_Children_Die_Actions takes nothing returns nothing
    call DestroyEffectBJ(udg_TalkAlicia)
    call DisableTrigger(GetTriggeringTrigger())
    call DisableTrigger(gg_trg_If_Timmy_Dies)
    call DisableTrigger(gg_trg_Player_Enters_Camp)
    call DisableTrigger(gg_trg_When_A_Gnoll_Dies)
    call DisableTrigger(gg_trg_Gnolls_are_defeated)
    set udg_TimmyQuestFailed=true
    call FogModifierStop(udg_CageVisibility)
    call QueuedTriggerAddBJ(gg_trg_If_Alicia_or_Children_Die_Queue, true)
endfunction

//===========================================================================
function InitTrig_If_Alicia_or_Children_Die takes nothing returns nothing
    set gg_trg_If_Alicia_or_Children_Die=CreateTrigger()
    call TriggerRegisterPlayerUnitEventSimple(gg_trg_If_Alicia_or_Children_Die, Player(2), EVENT_PLAYER_UNIT_DEATH)
    call TriggerAddCondition(gg_trg_If_Alicia_or_Children_Die, Condition(function Trig_If_Alicia_or_Children_Die_Conditions))
    call TriggerAddAction(gg_trg_If_Alicia_or_Children_Die, function Trig_If_Alicia_or_Children_Die_Actions)
endfunction

//===========================================================================
// Trigger: If Alicia or Children Die Queue
//===========================================================================
function Trig_If_Alicia_or_Children_Die_Queue_Actions takes nothing returns nothing
    call SetCameraQuickPositionLocForPlayer(udg_AAAP_Arthas, GetRectCenter(gg_rct_Timmy_Go_Home))
    call PingMinimapLocForForce(udg_AAAPG_Arthas, GetRectCenter(gg_rct_Timmy_Go_Home), 1)
    call FlashQuestDialogButtonBJ()
    call QuestSetDiscoveredBJ(udg_QuestTimmy, true)
    call QuestSetFailedBJ(udg_QuestTimmy, true)
    call QuestMessageBJ(udg_AAAPG_Arthas, bj_QUESTMESSAGE_FAILED, "TRIGSTR_373")
    call TriggerSleepAction(bj_QUEUE_DELAY_QUEST)
    call QueuedTriggerRemoveBJ(GetTriggeringTrigger())
endfunction

//===========================================================================
function InitTrig_If_Alicia_or_Children_Die_Queue takes nothing returns nothing
    set gg_trg_If_Alicia_or_Children_Die_Queue=CreateTrigger()
    call TriggerAddAction(gg_trg_If_Alicia_or_Children_Die_Queue, function Trig_If_Alicia_or_Children_Die_Queue_Actions)
endfunction

//===========================================================================
// Trigger: Alicia Dies Stop Sound
//===========================================================================
function Trig_Alicia_Dies_Stop_Sound_Actions takes nothing returns nothing
    call StopSoundBJ(gg_snd_H01VillagerF27, false)
    call StopSoundBJ(gg_snd_H01VillagerF42, false)
endfunction

//===========================================================================
function InitTrig_Alicia_Dies_Stop_Sound takes nothing returns nothing
    set gg_trg_Alicia_Dies_Stop_Sound=CreateTrigger()
    call TriggerRegisterUnitEvent(gg_trg_Alicia_Dies_Stop_Sound, gg_unit_nC07_0093, EVENT_UNIT_DEATH)
    call TriggerAddAction(gg_trg_Alicia_Dies_Stop_Sound, function Trig_Alicia_Dies_Stop_Sound_Actions)
endfunction

//===========================================================================
// Trigger: Bandit Scene
//===========================================================================
function Trig_Bandit_Scene_Conditions takes nothing returns boolean
    if ( not ( GetOwningPlayer(GetEnteringUnit()) == udg_AAAP_Arthas ) ) then
        return false
    endif
    return true
endfunction

function Trig_Bandit_Scene_Actions takes nothing returns nothing
    call DisableTrigger(GetTriggeringTrigger())
    call SetUnitAnimation(udg_Bandit01, "stand defend")
    call SetUnitAnimation(udg_Bandit02, "stand defend")
    call SetUnitAnimation(udg_Bandit03, "stand defend")
    call SetUnitAnimation(udg_Bandit04, "attack")
    call SetUnitAnimation(udg_Menag, "stand - 2")
    call QueuedTriggerAddBJ(gg_trg_Bandit_Scene_Queue, true)
endfunction

//===========================================================================
function InitTrig_Bandit_Scene takes nothing returns nothing
    set gg_trg_Bandit_Scene=CreateTrigger()
    call TriggerRegisterEnterRectSimple(gg_trg_Bandit_Scene, gg_rct_LedgerTrigger01)
    call TriggerAddCondition(gg_trg_Bandit_Scene, Condition(function Trig_Bandit_Scene_Conditions))
    call TriggerAddAction(gg_trg_Bandit_Scene, function Trig_Bandit_Scene_Actions)
endfunction

//===========================================================================
// Trigger: Bandit Scene Queue
//===========================================================================
function Trig_Bandit_Scene_Queue_Conditions takes nothing returns boolean
    if ( not ( udg_GAMEOVER == false ) ) then
        return false
    endif
    return true
endfunction

function Trig_Bandit_Scene_Queue_Actions takes nothing returns nothing
    call DisableTrigger(GetTriggeringTrigger())
    call SetUnitAnimation(udg_Bandit01, "stand defend")
    call SetUnitAnimation(udg_Bandit02, "stand defend")
    call SetUnitAnimation(udg_Bandit03, "stand defend")
    call SetUnitAnimation(udg_Bandit04, "attack")
    call CreateFogModifierRadiusLocBJ(true, udg_AAAP_Arthas, FOG_OF_WAR_VISIBLE, GetRectCenter(gg_rct_LedgerCenter), 1024.00)
    set udg_EndVision=GetLastCreatedFogModifier()
    call SmartCameraPanBJ(udg_AAAP_Arthas, GetRectCenter(gg_rct_LedgerCenter), 0.5)
    call SetCameraQuickPositionLocForPlayer(udg_AAAP_Arthas, GetRectCenter(gg_rct_LedgerCenter))
    call PingMinimapLocForForce(udg_AAAPG_Arthas, GetRectCenter(gg_rct_LedgerCenter), 7.00)
    call SetSpeechVolumeGroupsBJ()
    call TransmissionFromUnitWithNameBJ(udg_AAAPG_Arthas, udg_Gerard, "TRIGSTR_110", gg_snd_H01VillagerM33, "TRIGSTR_111", bj_TIMETYPE_ADD, 0.00, true)
    call SetUnitAnimation(udg_Menag, "stand victory")
    call TransmissionFromUnitWithNameBJ(udg_AAAPG_Arthas, udg_Menag, "TRIGSTR_112", gg_snd_H01BanditB14, "TRIGSTR_113", bj_TIMETYPE_ADD, 0.00, true)
    call VolumeGroupResetBJ()
    call TriggerSleepAction(1.50)
    call IssuePointOrderLocBJ(udg_Bandit01, "move", GetRectCenter(gg_rct_Bandit01_End))
    call IssuePointOrderLocBJ(udg_Bandit02, "move", GetRectCenter(gg_rct_Bandit02_End))
    call IssuePointOrderLocBJ(udg_Bandit03, "move", GetRectCenter(gg_rct_Bandit03_End))
    call IssuePointOrderLocBJ(udg_Bandit04, "move", GetRectCenter(gg_rct_Bandit04_End))
    call IssuePointOrderLocBJ(udg_Menag, "move", GetRectCenter(gg_rct_Menag_End))
    call WaitForSoundBJ(gg_snd_H01BanditB14, 0)
    call DestroyFogModifier(udg_EndVision)
    call QueuedTriggerRemoveBJ(gg_trg_Bandit_Scene_Queue)
    call EnableTrigger(gg_trg_Menag_Region)
endfunction

//===========================================================================
function InitTrig_Bandit_Scene_Queue takes nothing returns nothing
    set gg_trg_Bandit_Scene_Queue=CreateTrigger()
    call TriggerAddCondition(gg_trg_Bandit_Scene_Queue, Condition(function Trig_Bandit_Scene_Queue_Conditions))
    call TriggerAddAction(gg_trg_Bandit_Scene_Queue, function Trig_Bandit_Scene_Queue_Actions)
endfunction

//===========================================================================
// Trigger: Ledger Quest
//===========================================================================
function Trig_Ledger_Quest_Conditions takes nothing returns boolean
    if ( not ( RectContainsUnit(gg_rct_LedgerQuest, udg_Arthas) == true ) ) then
        return false
    endif
    if ( not ( udg_BanditQuestFailed == false ) ) then
        return false
    endif
    if ( not ( IsTriggerQueueEmptyBJ() == true ) ) then
        return false
    endif
    return true
endfunction

function Trig_Ledger_Quest_Actions takes nothing returns nothing
    call DisableTrigger(GetTriggeringTrigger())
    call QueuedTriggerAddBJ(gg_trg_Ledger_Quest_Queue, true)
endfunction

//===========================================================================
function InitTrig_Ledger_Quest takes nothing returns nothing
    set gg_trg_Ledger_Quest=CreateTrigger()
    call TriggerRegisterTimerEventPeriodic(gg_trg_Ledger_Quest, 0.50)
    call TriggerAddCondition(gg_trg_Ledger_Quest, Condition(function Trig_Ledger_Quest_Conditions))
    call TriggerAddAction(gg_trg_Ledger_Quest, function Trig_Ledger_Quest_Actions)
endfunction

//===========================================================================
// Trigger: Ledger Quest Queue
//===========================================================================
function Trig_Ledger_Quest_Queue_Conditions takes nothing returns boolean
    if ( not ( udg_GAMEOVER == false ) ) then
        return false
    endif
    return true
endfunction

function Trig_Ledger_Quest_Queue_Func013001 takes nothing returns boolean
    return ( udg_BanditQuestFailed == true )
endfunction

function Trig_Ledger_Quest_Queue_Func014001 takes nothing returns boolean
    return ( udg_BanditQuestFailed == true )
endfunction

function Trig_Ledger_Quest_Queue_Func023001 takes nothing returns boolean
    return ( IsUnitDeadBJ(udg_Menag) == true )
endfunction

function Trig_Ledger_Quest_Queue_Actions takes nothing returns nothing
    call DisableTrigger(GetTriggeringTrigger())
    call DestroyEffectBJ(udg_TalkGerard)
    call CreateFogModifierRadiusLocBJ(true, udg_AAAP_Arthas, FOG_OF_WAR_VISIBLE, GetRectCenter(gg_rct_LedgerCenter), 1024.00)
    set udg_EndVision=GetLastCreatedFogModifier()
    call SmartCameraPanBJ(udg_AAAP_Arthas, GetRectCenter(gg_rct_LedgerCenter), 0.5)
    call PingMinimapLocForForce(udg_AAAPG_Arthas, GetRectCenter(gg_rct_LedgerCenter), 7.00)
    call SetCameraQuickPositionLocForPlayer(udg_AAAP_Arthas, GetRectCenter(gg_rct_LedgerCenter))
    call SetSpeechVolumeGroupsBJ()
    call TransmissionFromUnitWithNameBJ(udg_AAAPG_Arthas, udg_Gerard, "TRIGSTR_007", gg_snd_H01VillagerM28, "TRIGSTR_019", bj_TIMETYPE_ADD, 0.00, true)
    call VolumeGroupResetBJ()
    call TriggerSleepAction(1.00)
    if ( Trig_Ledger_Quest_Queue_Func013001() ) then
        call QueuedTriggerRemoveBJ(GetTriggeringTrigger())
    else
        call DoNothing()
    endif
    if ( Trig_Ledger_Quest_Queue_Func014001() ) then
        return
    else
        call DoNothing()
    endif
    call CreateFogModifierRadiusLocBJ(true, udg_AAAP_Arthas, FOG_OF_WAR_VISIBLE, GetRectCenter(gg_rct_Bandit03_End), 512.00)
    call DestroyFogModifier(GetLastCreatedFogModifier())
    call PingMinimapLocForForce(udg_AAAPG_Arthas, GetRectCenter(gg_rct_Menag_End), 7.00)
    call SetCameraQuickPositionLocForPlayer(udg_AAAP_Arthas, GetRectCenter(gg_rct_Menag_End))
    call DestroyFogModifier(udg_EndVision)
    call QuestMessageBJ(udg_AAAPG_Arthas, bj_QUESTMESSAGE_DISCOVERED, "TRIGSTR_031")
    call QuestSetDiscoveredBJ(udg_QuestLedger, true)
    call FlashQuestDialogButtonBJ()
    if ( Trig_Ledger_Quest_Queue_Func023001() ) then
        call QuestItemSetCompletedBJ(udg_RequirementLedgerSlay, true)
    else
        call DoNothing()
    endif
    set udg_LedgerQuestGiven=true
    call TriggerSleepAction(bj_QUEUE_DELAY_QUEST)
    call QueuedTriggerRemoveBJ(gg_trg_Ledger_Quest_Queue)
endfunction

//===========================================================================
function InitTrig_Ledger_Quest_Queue takes nothing returns nothing
    set gg_trg_Ledger_Quest_Queue=CreateTrigger()
    call TriggerAddCondition(gg_trg_Ledger_Quest_Queue, Condition(function Trig_Ledger_Quest_Queue_Conditions))
    call TriggerAddAction(gg_trg_Ledger_Quest_Queue, function Trig_Ledger_Quest_Queue_Actions)
endfunction

//===========================================================================
// Trigger: Bandit01 End
//===========================================================================
function Trig_Bandit01_End_Conditions takes nothing returns boolean
    if ( not ( GetEnteringUnit() == udg_Bandit01 ) ) then
        return false
    endif
    return true
endfunction

function Trig_Bandit01_End_Actions takes nothing returns nothing
    call DisableTrigger(GetTriggeringTrigger())
    call ResetUnitAnimation(udg_Bandit01)
    call SetUnitFacingToFaceLocTimed(udg_Bandit01, GetRectCenter(gg_rct_Bandit_Facing), 0.20)
endfunction

//===========================================================================
function InitTrig_Bandit01_End takes nothing returns nothing
    set gg_trg_Bandit01_End=CreateTrigger()
    call TriggerRegisterEnterRectSimple(gg_trg_Bandit01_End, gg_rct_Bandit01_End)
    call TriggerAddCondition(gg_trg_Bandit01_End, Condition(function Trig_Bandit01_End_Conditions))
    call TriggerAddAction(gg_trg_Bandit01_End, function Trig_Bandit01_End_Actions)
endfunction

//===========================================================================
// Trigger: Bandit02 End
//===========================================================================
function Trig_Bandit02_End_Conditions takes nothing returns boolean
    if ( not ( GetEnteringUnit() == udg_Bandit02 ) ) then
        return false
    endif
    return true
endfunction

function Trig_Bandit02_End_Actions takes nothing returns nothing
    call DisableTrigger(GetTriggeringTrigger())
    call ResetUnitAnimation(udg_Bandit02)
    call SetUnitFacingToFaceLocTimed(udg_Bandit02, GetRectCenter(gg_rct_Bandit_Facing), 0.20)
endfunction

//===========================================================================
function InitTrig_Bandit02_End takes nothing returns nothing
    set gg_trg_Bandit02_End=CreateTrigger()
    call TriggerRegisterEnterRectSimple(gg_trg_Bandit02_End, gg_rct_Bandit02_End)
    call TriggerAddCondition(gg_trg_Bandit02_End, Condition(function Trig_Bandit02_End_Conditions))
    call TriggerAddAction(gg_trg_Bandit02_End, function Trig_Bandit02_End_Actions)
endfunction

//===========================================================================
// Trigger: Bandit03 End
//===========================================================================
function Trig_Bandit03_End_Conditions takes nothing returns boolean
    if ( not ( GetEnteringUnit() == udg_Bandit03 ) ) then
        return false
    endif
    return true
endfunction

function Trig_Bandit03_End_Actions takes nothing returns nothing
    call DisableTrigger(GetTriggeringTrigger())
    call ResetUnitAnimation(udg_Bandit03)
    call SetUnitFacingToFaceLocTimed(udg_Bandit03, GetRectCenter(gg_rct_Bandit_Facing), 0.20)
endfunction

//===========================================================================
function InitTrig_Bandit03_End takes nothing returns nothing
    set gg_trg_Bandit03_End=CreateTrigger()
    call TriggerRegisterEnterRectSimple(gg_trg_Bandit03_End, gg_rct_Bandit03_End)
    call TriggerAddCondition(gg_trg_Bandit03_End, Condition(function Trig_Bandit03_End_Conditions))
    call TriggerAddAction(gg_trg_Bandit03_End, function Trig_Bandit03_End_Actions)
endfunction

//===========================================================================
// Trigger: Bandit04 End
//===========================================================================
function Trig_Bandit04_End_Conditions takes nothing returns boolean
    if ( not ( GetEnteringUnit() == udg_Bandit04 ) ) then
        return false
    endif
    return true
endfunction

function Trig_Bandit04_End_Actions takes nothing returns nothing
    call DisableTrigger(GetTriggeringTrigger())
    call ResetUnitAnimation(udg_Bandit04)
    call SetUnitFacingToFaceLocTimed(udg_Bandit04, GetRectCenter(gg_rct_Bandit_Facing), 0.20)
endfunction

//===========================================================================
function InitTrig_Bandit04_End takes nothing returns nothing
    set gg_trg_Bandit04_End=CreateTrigger()
    call TriggerRegisterEnterRectSimple(gg_trg_Bandit04_End, gg_rct_Bandit04_End)
    call TriggerAddCondition(gg_trg_Bandit04_End, Condition(function Trig_Bandit04_End_Conditions))
    call TriggerAddAction(gg_trg_Bandit04_End, function Trig_Bandit04_End_Actions)
endfunction

//===========================================================================
// Trigger: Menag End
//===========================================================================
function Trig_Menag_End_Conditions takes nothing returns boolean
    if ( not ( GetEnteringUnit() == udg_Menag ) ) then
        return false
    endif
    return true
endfunction

function Trig_Menag_End_Actions takes nothing returns nothing
    call DisableTrigger(GetTriggeringTrigger())
    call EnableTrigger(gg_trg_Camp_is_entered)
    call ResetUnitAnimation(udg_Menag)
    call SetUnitFacingToFaceLocTimed(udg_Menag, GetRectCenter(gg_rct_Bandit_Facing), 0.20)
endfunction

//===========================================================================
function InitTrig_Menag_End takes nothing returns nothing
    set gg_trg_Menag_End=CreateTrigger()
    call TriggerRegisterEnterRectSimple(gg_trg_Menag_End, gg_rct_Menag_End)
    call TriggerAddCondition(gg_trg_Menag_End, Condition(function Trig_Menag_End_Conditions))
    call TriggerAddAction(gg_trg_Menag_End, function Trig_Menag_End_Actions)
endfunction

//===========================================================================
// Trigger: Menag Region
//===========================================================================
function Trig_Menag_Region_Actions takes nothing returns nothing
    call MoveRectToLoc(gg_rct_Menag, GetUnitLoc(udg_Menag))
endfunction

//===========================================================================
function InitTrig_Menag_Region takes nothing returns nothing
    set gg_trg_Menag_Region=CreateTrigger()
    call DisableTrigger(gg_trg_Menag_Region)
    call TriggerRegisterTimerEventPeriodic(gg_trg_Menag_Region, 0.50)
    call TriggerAddAction(gg_trg_Menag_Region, function Trig_Menag_Region_Actions)
endfunction

//===========================================================================
// Trigger: Camp is entered
//===========================================================================
function Trig_Camp_is_entered_Conditions takes nothing returns boolean
    if ( not ( IsUnitInGroup(GetAttackedUnitBJ(), udg_MenagBanditsGroup) == true ) ) then
        return false
    endif
    if ( not ( GetOwningPlayer(GetAttacker()) == udg_AAAP_Arthas ) ) then
        return false
    endif
    return true
endfunction

function Trig_Camp_is_entered_Actions takes nothing returns nothing
    call DisableTrigger(GetTriggeringTrigger())
    call GroupPointOrderLocBJ(udg_MenagBanditsGroup, "attack", GetUnitLoc(GetAttacker()))
    call SetSpeechVolumeGroupsBJ()
    call TransmissionFromUnitWithNameBJ(udg_AAAPG_Arthas, udg_Menag, "TRIGSTR_070", gg_snd_BanditYesAttack2, "TRIGSTR_071", bj_TIMETYPE_ADD, 0, true)
    call VolumeGroupResetBJ()
endfunction

//===========================================================================
function InitTrig_Camp_is_entered takes nothing returns nothing
    set gg_trg_Camp_is_entered=CreateTrigger()
    call DisableTrigger(gg_trg_Camp_is_entered)
    call TriggerRegisterPlayerUnitEventSimple(gg_trg_Camp_is_entered, Player(8), EVENT_PLAYER_UNIT_ATTACKED)
    call TriggerAddCondition(gg_trg_Camp_is_entered, Condition(function Trig_Camp_is_entered_Conditions))
    call TriggerAddAction(gg_trg_Camp_is_entered, function Trig_Camp_is_entered_Actions)
endfunction

//===========================================================================
// Trigger: Menag Dies
//===========================================================================
function Trig_Menag_Dies_Conditions takes nothing returns boolean
    if ( not ( GetDyingUnit() == udg_Menag ) ) then
        return false
    endif
    if ( not ( udg_BanditQuestFailed == false ) ) then
        return false
    endif
    return true
endfunction

function Trig_Menag_Dies_Func004001 takes nothing returns boolean
    return ( udg_BanditQuestFailed == true )
endfunction

function Trig_Menag_Dies_Func007001 takes nothing returns boolean
    return ( udg_LedgerQuestGiven == false )
endfunction

function Trig_Menag_Dies_Actions takes nothing returns nothing
    call DisableTrigger(GetTriggeringTrigger())
    call DisableTrigger(gg_trg_Menag_Region)
    call TriggerSleepAction(0.50)
    if ( Trig_Menag_Dies_Func004001() ) then
        return
    else
        call DoNothing()
    endif
    call CreateItemLoc('I016', GetRectCenter(gg_rct_Menag))
    // Don't display quest information, if the quest wasn't given yet.
    if ( Trig_Menag_Dies_Func007001() ) then
        return
    else
        call DoNothing()
    endif
    call QueuedTriggerAddBJ(gg_trg_Menag_Dies_Queue, true)
endfunction

//===========================================================================
function InitTrig_Menag_Dies takes nothing returns nothing
    set gg_trg_Menag_Dies=CreateTrigger()
    call TriggerRegisterPlayerUnitEventSimple(gg_trg_Menag_Dies, Player(8), EVENT_PLAYER_UNIT_DEATH)
    call TriggerAddCondition(gg_trg_Menag_Dies, Condition(function Trig_Menag_Dies_Conditions))
    call TriggerAddAction(gg_trg_Menag_Dies, function Trig_Menag_Dies_Actions)
endfunction

//===========================================================================
// Trigger: Menag Dies Queue
//===========================================================================
function Trig_Menag_Dies_Queue_Conditions takes nothing returns boolean
    if ( not ( udg_GAMEOVER == false ) ) then
        return false
    endif
    return true
endfunction

function Trig_Menag_Dies_Queue_Actions takes nothing returns nothing
    call QuestItemSetCompletedBJ(udg_RequirementLedgerSlay, true)
    call QuestMessageBJ(udg_AAAPG_Arthas, bj_QUESTMESSAGE_UPDATED, "TRIGSTR_370")
    call SetCameraQuickPositionLocForPlayer(udg_AAAP_Arthas, GetRectCenter(gg_rct_Menag))
    call PingMinimapLocForForce(udg_AAAPG_Arthas, GetRectCenter(gg_rct_Menag), 7.00)
    call TriggerSleepAction(bj_QUEUE_DELAY_QUEST)
    call QueuedTriggerRemoveBJ(GetTriggeringTrigger())
endfunction

//===========================================================================
function InitTrig_Menag_Dies_Queue takes nothing returns nothing
    set gg_trg_Menag_Dies_Queue=CreateTrigger()
    call TriggerAddCondition(gg_trg_Menag_Dies_Queue, Condition(function Trig_Menag_Dies_Queue_Conditions))
    call TriggerAddAction(gg_trg_Menag_Dies_Queue, function Trig_Menag_Dies_Queue_Actions)
endfunction

//===========================================================================
// Trigger: Ledger Is Picked Up
//===========================================================================
function Trig_Ledger_Is_Picked_Up_Actions takes nothing returns nothing
    call DisableTrigger(GetTriggeringTrigger())
    call AddSpecialEffectTargetUnitBJ("overhead", udg_Gerard, "Abilities\\Spells\\Other\\TalkToMe\\TalkToMe.mdl")
    set udg_TalkGerard2=GetLastCreatedEffectBJ()
endfunction

//===========================================================================
function InitTrig_Ledger_Is_Picked_Up takes nothing returns nothing
    set gg_trg_Ledger_Is_Picked_Up=CreateTrigger()
    call TriggerAddAction(gg_trg_Ledger_Is_Picked_Up, function Trig_Ledger_Is_Picked_Up_Actions)
endfunction

//===========================================================================
// Trigger: Return Ledger
//===========================================================================
function Trig_Return_Ledger_Conditions takes nothing returns boolean
    if ( not ( udg_LedgerQuestGiven == true ) ) then
        return false
    endif
    if ( not ( GetTriggerUnit() == udg_Arthas ) ) then
        return false
    endif
    if ( not ( GetPlayerTechMaxAllowedSwap('ledg', udg_AAAP_Arthas) > 0 ) ) then
        return false
    endif
    if ( not ( udg_BanditQuestFailed == false ) ) then
        return false
    endif
    if ( not ( udg_GAMEOVER == false ) ) then
        return false
    endif
    return true
endfunction

function Trig_Return_Ledger_Actions takes nothing returns nothing
    call DisableTrigger(GetTriggeringTrigger())
    call QueuedTriggerAddBJ(gg_trg_Return_Ledger_Queue, true)
endfunction

//===========================================================================
function InitTrig_Return_Ledger takes nothing returns nothing
    set gg_trg_Return_Ledger=CreateTrigger()
    call TriggerRegisterUnitInRangeSimple(gg_trg_Return_Ledger, 512.00, gg_unit_nC06_0110)
    call TriggerAddCondition(gg_trg_Return_Ledger, Condition(function Trig_Return_Ledger_Conditions))
    call TriggerAddAction(gg_trg_Return_Ledger, function Trig_Return_Ledger_Actions)
endfunction

//===========================================================================
// Trigger: Return Ledger Queue
//===========================================================================
function Trig_Return_Ledger_Queue_Conditions takes nothing returns boolean
    if ( not ( udg_GAMEOVER == false ) ) then
        return false
    endif
    return true
endfunction

function Trig_Return_Ledger_Queue_Func008001 takes nothing returns boolean
    return ( udg_BanditQuestFailed == true )
endfunction

function Trig_Return_Ledger_Queue_Func009001 takes nothing returns boolean
    return ( udg_BanditQuestFailed == true )
endfunction

function Trig_Return_Ledger_Queue_Func011001 takes nothing returns boolean
    return ( udg_BanditQuestFailed == true )
endfunction

function Trig_Return_Ledger_Queue_Func012001 takes nothing returns boolean
    return ( udg_BanditQuestFailed == true )
endfunction

function Trig_Return_Ledger_Queue_Func015001 takes nothing returns boolean
    return ( udg_BanditQuestFailed == true )
endfunction

function Trig_Return_Ledger_Queue_Func016001 takes nothing returns boolean
    return ( udg_BanditQuestFailed == true )
endfunction

function Trig_Return_Ledger_Queue_Func018001 takes nothing returns boolean
    return ( udg_BanditQuestFailed == true )
endfunction

function Trig_Return_Ledger_Queue_Func019001 takes nothing returns boolean
    return ( udg_BanditQuestFailed == true )
endfunction

function Trig_Return_Ledger_Queue_Func022001 takes nothing returns boolean
    return ( udg_BanditQuestFailed == true )
endfunction

function Trig_Return_Ledger_Queue_Func023001 takes nothing returns boolean
    return ( udg_BanditQuestFailed == true )
endfunction

function Trig_Return_Ledger_Queue_Func029001 takes nothing returns boolean
    return ( udg_BanditQuestFailed == false )
endfunction

function Trig_Return_Ledger_Queue_Actions takes nothing returns nothing
    call DestroyEffectBJ(udg_TalkGerard)
    call DestroyEffectBJ(udg_TalkGerard2)
    call SmartCameraPanBJ(udg_AAAP_Arthas, GetRectCenter(gg_rct_LedgerCenter), 0.5)
    call PingMinimapLocForForce(udg_AAAPG_Arthas, GetRectCenter(gg_rct_LedgerCenter), 7.00)
    call SetCameraQuickPositionLocForPlayer(udg_AAAP_Arthas, GetRectCenter(gg_rct_LedgerCenter))
    call SetSpeechVolumeGroupsBJ()
    if ( Trig_Return_Ledger_Queue_Func008001() ) then
        call TriggerExecute(gg_trg_Abort_Return_Ledger)
    else
        call DoNothing()
    endif
    if ( Trig_Return_Ledger_Queue_Func009001() ) then
        return
    else
        call DoNothing()
    endif
    call TransmissionFromUnitWithNameBJ(udg_AAAPG_Arthas, udg_Gerard, "TRIGSTR_284", gg_snd_H03VillagerM44, "TRIGSTR_285", bj_TIMETYPE_ADD, 0.00, true)
    if ( Trig_Return_Ledger_Queue_Func011001() ) then
        call TriggerExecute(gg_trg_Abort_Return_Ledger)
    else
        call DoNothing()
    endif
    if ( Trig_Return_Ledger_Queue_Func012001() ) then
        return
    else
        call DoNothing()
    endif
    set udg_IsLedgerReturned=true
    call status_check_location(23)
    if ( Trig_Return_Ledger_Queue_Func015001() ) then
        call TriggerExecute(gg_trg_Abort_Return_Ledger)
    else
        call DoNothing()
    endif
    if ( Trig_Return_Ledger_Queue_Func016001() ) then
        return
    else
        call DoNothing()
    endif
    call TransmissionFromUnitWithNameBJ(udg_AAAPG_Arthas, udg_Gerard, "TRIGSTR_286", gg_snd_H03VillagerM43, "TRIGSTR_287", bj_TIMETYPE_ADD, 0.00, true)
    if ( Trig_Return_Ledger_Queue_Func018001() ) then
        call TriggerExecute(gg_trg_Abort_Return_Ledger)
    else
        call DoNothing()
    endif
    if ( Trig_Return_Ledger_Queue_Func019001() ) then
        return
    else
        call DoNothing()
    endif
    call VolumeGroupResetBJ()
    call TriggerSleepAction(1.00)
    if ( Trig_Return_Ledger_Queue_Func022001() ) then
        call TriggerExecute(gg_trg_Abort_Return_Ledger)
    else
        call DoNothing()
    endif
    if ( Trig_Return_Ledger_Queue_Func023001() ) then
        return
    else
        call DoNothing()
    endif
    call TriggerSleepAction(5.00)
    call QuestSetCompletedBJ(udg_QuestLedger, true)
    call QuestItemSetCompletedBJ(udg_RequirementLedgerReturn, true)
    call QuestMessageBJ(udg_AAAPG_Arthas, bj_QUESTMESSAGE_COMPLETED, "TRIGSTR_288")
    call TriggerSleepAction(bj_QUEUE_DELAY_QUEST)
    if ( Trig_Return_Ledger_Queue_Func029001() ) then
        call QuestMessageBJ(GetPlayersAll(), bj_QUESTMESSAGE_ITEMACQUIRED, "TRIGSTR_398")
    else
        call DoNothing()
    endif
    call QueuedTriggerRemoveBJ(gg_trg_Return_Ledger_Queue)
endfunction

//===========================================================================
function InitTrig_Return_Ledger_Queue takes nothing returns nothing
    set gg_trg_Return_Ledger_Queue=CreateTrigger()
    call TriggerAddCondition(gg_trg_Return_Ledger_Queue, Condition(function Trig_Return_Ledger_Queue_Conditions))
    call TriggerAddAction(gg_trg_Return_Ledger_Queue, function Trig_Return_Ledger_Queue_Actions)
endfunction

//===========================================================================
// Trigger: Abort Return Ledger
//===========================================================================
function Trig_Abort_Return_Ledger_Actions takes nothing returns nothing
    call VolumeGroupResetBJ()
    call QueuedTriggerRemoveBJ(gg_trg_Return_Ledger_Queue)
endfunction

//===========================================================================
function InitTrig_Abort_Return_Ledger takes nothing returns nothing
    set gg_trg_Abort_Return_Ledger=CreateTrigger()
    call TriggerAddAction(gg_trg_Abort_Return_Ledger, function Trig_Abort_Return_Ledger_Actions)
endfunction

//===========================================================================
// Trigger: Trigger Orc Cinematic
//===========================================================================
function Trig_Trigger_Orc_Cinematic_Conditions takes nothing returns boolean
    if ( not ( GetOwningPlayer(GetEnteringUnit()) == udg_AAAP_Arthas ) ) then
        return false
    endif
    return true
endfunction

function Trig_Trigger_Orc_Cinematic_Actions takes nothing returns nothing
    call DisableTrigger(GetTriggeringTrigger())
    set udg_LastCameraPosition=GetCameraTargetPositionLoc()
    call QueuedTriggerAddBJ(gg_trg_Orc_Cinematic_Queue, true)
endfunction

//===========================================================================
function InitTrig_Trigger_Orc_Cinematic takes nothing returns nothing
    set gg_trg_Trigger_Orc_Cinematic=CreateTrigger()
    call TriggerRegisterEnterRectSimple(gg_trg_Trigger_Orc_Cinematic, gg_rct_TriggerEndCinematic_02)
    call TriggerRegisterEnterRectSimple(gg_trg_Trigger_Orc_Cinematic, gg_rct_TriggerEndCinematic_01)
    call TriggerAddCondition(gg_trg_Trigger_Orc_Cinematic, Condition(function Trig_Trigger_Orc_Cinematic_Conditions))
    call TriggerAddAction(gg_trg_Trigger_Orc_Cinematic, function Trig_Trigger_Orc_Cinematic_Actions)
endfunction

//===========================================================================
// Trigger: Orc Cinematic Queue
//===========================================================================
function Trig_Orc_Cinematic_Queue_Conditions takes nothing returns boolean
    if ( not ( udg_GAMEOVER == false ) ) then
        return false
    endif
    return true
endfunction

function Trig_Orc_Cinematic_Queue_Func009002 takes nothing returns nothing
    call SetUnitInvulnerable(GetEnumUnit(), true)
endfunction

function Trig_Orc_Cinematic_Queue_Func010002 takes nothing returns nothing
    call ShowUnitHide(GetEnumUnit())
endfunction

function Trig_Orc_Cinematic_Queue_Func017001 takes nothing returns boolean
    return ( udg_EndSkipped == true )
endfunction

function Trig_Orc_Cinematic_Queue_Func039001 takes nothing returns boolean
    return ( udg_EndSkipped == true )
endfunction

function Trig_Orc_Cinematic_Queue_Func046001 takes nothing returns boolean
    return ( udg_EndSkipped == true )
endfunction

function Trig_Orc_Cinematic_Queue_Func048001 takes nothing returns boolean
    return ( udg_EndSkipped == true )
endfunction

function Trig_Orc_Cinematic_Queue_Func053001 takes nothing returns boolean
    return ( udg_EndSkipped == true )
endfunction

function Trig_Orc_Cinematic_Queue_Func057001 takes nothing returns boolean
    return ( udg_EndSkipped == true )
endfunction

function Trig_Orc_Cinematic_Queue_Func063001 takes nothing returns boolean
    return ( udg_EndSkipped == true )
endfunction

function Trig_Orc_Cinematic_Queue_Func066001 takes nothing returns boolean
    return ( udg_EndSkipped == true )
endfunction

function Trig_Orc_Cinematic_Queue_Func071001 takes nothing returns boolean
    return ( udg_EndSkipped == true )
endfunction

function Trig_Orc_Cinematic_Queue_Func076001 takes nothing returns boolean
    return ( udg_EndSkipped == true )
endfunction

function Trig_Orc_Cinematic_Queue_Func087001 takes nothing returns boolean
    return ( udg_EndSkipped == true )
endfunction

function Trig_Orc_Cinematic_Queue_Func091002 takes nothing returns nothing
    call ShowUnitShow(GetEnumUnit())
endfunction

function Trig_Orc_Cinematic_Queue_Func104002 takes nothing returns nothing
    call SetUnitInvulnerable(GetEnumUnit(), false)
endfunction

function Trig_Orc_Cinematic_Queue_Actions takes nothing returns nothing
    // SAFETY FADE OUT
    set udg_LastCameraPosition=GetCameraTargetPositionLoc()
    call CinematicFadeBJ(bj_CINEFADETYPE_FADEOUT, 1.00, "ReplaceableTextures\\CameraMasks\\White_mask.blp", 0, 0, 0, 0)
    call TriggerSleepAction(1.00)
    call CreateFogModifierRadiusLocBJ(true, udg_AAAP_Arthas, FOG_OF_WAR_VISIBLE, GetRectCenter(gg_rct_End_Pan), 1024.00)
    set udg_SelectedUnits=GetUnitsSelectedAll(udg_AAAP_Arthas)
    call ClearSelection()
    call ForGroupBJ(GetUnitsInRectAll(GetPlayableMapRect()), function Trig_Orc_Cinematic_Queue_Func009002)
    call ForGroupBJ(GetUnitsOfPlayerAll(udg_AAAP_Arthas), function Trig_Orc_Cinematic_Queue_Func010002)
    call UseTimeOfDayBJ(false)
    call TriggerSleepAction(0.01)
    call CinematicModeBJ(true, udg_AAAPG_Arthas)
    call SetUserControlForceOff(udg_AAAPG_Arthas)
    // NOW SKIPPABLE
    call EnableTrigger(gg_trg_Orc_Cinematic_Cancel)
    if ( Trig_Orc_Cinematic_Queue_Func017001() ) then
        return
    else
        call DoNothing()
    endif
    call PlayThematicMusicBJ("Sound\\Music\\mp3Music\\DarkAgents.mp3")
    call SetUnitPositionLocFacingBJ(gg_unit_oC16_0157, GetRectCenter(gg_rct_EndBoss), 340.00)
    // SAFETY FADE IN
    call PauseAllUnitsBJ(true)
    call PauseUnitBJ(false, udg_EndBoss)
    call PauseUnitBJ(false, udg_SlaveMaster)
    call PauseUnitBJ(false, udg_Kidnapped01)
    call PauseUnitBJ(false, udg_Kidnapped02)
    call PauseUnitBJ(false, udg_Kidnapped03)
    call PauseUnitBJ(false, udg_Kidnapped04)
    call PauseUnitBJ(false, udg_Kidnapped05)
    call PauseUnitBJ(false, udg_Kidnapped06)
    call PauseUnitBJ(false, udg_Escort01)
    call PauseUnitBJ(false, udg_Escort02)
    call SetSkyModel("Environment\\Sky\\DalaranSky\\DalaranSky.mdl")
    call SetTerrainFogExBJ(0, 500.00, 4200.00, 0, 0.00, 20.00, 50.00)
    call SmartCameraPanBJ(udg_AAAP_Arthas, GetRectCenter(gg_rct_End_Pan), 0.00)
    call CinematicFadeBJ(bj_CINEFADETYPE_FADEIN, 1.00, "ReplaceableTextures\\CameraMasks\\White_mask.blp", 0, 0, 0, 0)
    call CameraSetupApplyForPlayer(true, gg_cam_Final01, udg_AAAP_Arthas, 3.00)
    // CINEMATIC IS NOW SKIPPABLE
    call TriggerSleepAction(2.00)
    if ( Trig_Orc_Cinematic_Queue_Func039001() ) then
        return
    else
        call DoNothing()
    endif
    call SetUnitAnimation(udg_EndBoss, "stand victory")
    call TriggerExecute(gg_trg_Stop_EndBoss_Animation)
    call AttachSoundToUnitBJ(gg_snd_KnightNoRiderYesAttack1, udg_EndBoss)
    call SetSoundVolumeBJ(gg_snd_KnightNoRiderYesAttack1, 60.00)
    call PlaySoundBJ(gg_snd_KnightNoRiderYesAttack1)
    call TransmissionFromUnitWithNameBJ(udg_AAAPG_Arthas, udg_EndBoss, "TRIGSTR_096", gg_snd_H01WolfRider19, "TRIGSTR_097", bj_TIMETYPE_ADD, 0.00, true)
    if ( Trig_Orc_Cinematic_Queue_Func046001() ) then
        return
    else
        call DoNothing()
    endif
    call TriggerSleepAction(0.50)
    if ( Trig_Orc_Cinematic_Queue_Func048001() ) then
        return
    else
        call DoNothing()
    endif
    call SetTerrainFogExBJ(0, 2000.00, 6000.00, 0, 0.00, 20.00, 50.00)
    call CameraSetupApplyForPlayer(true, gg_cam_Final02, udg_AAAP_Arthas, 0.00)
    call CameraSetSmoothingFactorBJ(0.00)
    call TriggerSleepAction(0.20)
    if ( Trig_Orc_Cinematic_Queue_Func053001() ) then
        return
    else
        call DoNothing()
    endif
    call IssuePointOrderLocBJ(udg_SlaveMaster, "move", GetRectCenter(gg_rct_CaravanLeader02))
    call TriggerSleepAction(0.20)
    if ( Trig_Orc_Cinematic_Queue_Func057001() ) then
        return
    else
        call DoNothing()
    endif
    call SetUnitAnimation(udg_SlaveMaster, "stand victory")
    call TransmissionFromUnitWithNameBJ(udg_AAAPG_Arthas, udg_SlaveMaster, "TRIGSTR_098", gg_snd_H01Grunt21, "TRIGSTR_099", bj_TIMETYPE_ADD, 0.00, true)
    call AttachSoundToUnitBJ(gg_snd_KnightNoRiderWhat3, udg_EndBoss)
    call SetSoundVolumeBJ(gg_snd_KnightNoRiderWhat3, 60.00)
    call PlaySoundBJ(gg_snd_KnightNoRiderWhat3)
    if ( Trig_Orc_Cinematic_Queue_Func063001() ) then
        return
    else
        call DoNothing()
    endif
    call IssuePointOrderLocBJ(udg_Escort01, "move", GetRectCenter(gg_rct_RemoveCaravan))
    call TriggerSleepAction(0.60)
    if ( Trig_Orc_Cinematic_Queue_Func066001() ) then
        return
    else
        call DoNothing()
    endif
    call IssuePointOrderLocBJ(udg_Kidnapped01, "move", GetRectCenter(gg_rct_RemoveCaravan))
    call IssuePointOrderLocBJ(udg_Kidnapped02, "move", GetRectCenter(gg_rct_RemoveCaravan))
    call IssuePointOrderLocBJ(udg_Kidnapped03, "move", GetRectCenter(gg_rct_RemoveCaravan))
    call TriggerSleepAction(0.30)
    if ( Trig_Orc_Cinematic_Queue_Func071001() ) then
        return
    else
        call DoNothing()
    endif
    call IssuePointOrderLocBJ(udg_Kidnapped04, "move", GetRectCenter(gg_rct_RemoveCaravan))
    call IssuePointOrderLocBJ(udg_Kidnapped05, "move", GetRectCenter(gg_rct_RemoveCaravan))
    call IssuePointOrderLocBJ(udg_Kidnapped06, "move", GetRectCenter(gg_rct_RemoveCaravan))
    call TriggerSleepAction(2.50)
    if ( Trig_Orc_Cinematic_Queue_Func076001() ) then
        return
    else
        call DoNothing()
    endif
    call CinematicFadeBJ(bj_CINEFADETYPE_FADEOUT, 1.00, "ReplaceableTextures\\CameraMasks\\White_mask.blp", 0, 0, 0, 0)
    call TriggerSleepAction(0.50)
    call IssuePointOrderLocBJ(udg_Escort02, "move", GetRectCenter(gg_rct_RemoveCaravan))
    call TriggerSleepAction(0.50)
    call CinematicModeBJ(false, udg_AAAPG_Arthas)
    call ResetToGameCameraForPlayer(udg_AAAP_Arthas, 0.00)
    call SmartCameraPanBJ(udg_AAAP_Arthas, udg_LastCameraPosition, 1.00)
    call CameraResetSmoothingFactorBJ()
    call PauseAllUnitsBJ(false)
    call TriggerSleepAction(1.00)
    if ( Trig_Orc_Cinematic_Queue_Func087001() ) then
        return
    else
        call DoNothing()
    endif
    // NO LONGER SKIPPABLE
    call CinematicFadeBJ(bj_CINEFADETYPE_FADEIN, 1.00, "ReplaceableTextures\\CameraMasks\\White_mask.blp", 0, 0, 0, 0)
    call DisableTrigger(gg_trg_Orc_Cinematic_Cancel)
    call ForGroupBJ(GetUnitsOfPlayerAll(udg_AAAP_Arthas), function Trig_Orc_Cinematic_Queue_Func091002)
    call SelectGroupBJ(udg_SelectedUnits)
    call SetUserControlForceOn(udg_AAAPG_Arthas)
    call SetSkyModel(null)
    // FOG BACK TO NORMAL HERE
    call ResetTerrainFogBJ()
    call IssueImmediateOrderBJ(udg_EndBoss, "stop")
    call IssueImmediateOrderBJ(udg_SlaveMaster, "stop")
    call PauseAllUnitsBJ(false)
    call GroupImmediateOrderBJ(udg_WarlordAndCrewGroup, "stop")
    set udg_OrcQuestGiven=true
    call PingMinimapLocForForce(udg_AAAPG_Arthas, GetRectCenter(gg_rct_EndBoss), 4.00)
    call SetCameraQuickPositionLocForPlayer(udg_AAAP_Arthas, GetRectCenter(gg_rct_EndBoss))
    call ForGroupBJ(GetUnitsInRectAll(GetPlayableMapRect()), function Trig_Orc_Cinematic_Queue_Func104002)
    call SetUnitInvulnerable(gg_unit_ncb2_0137, true)
    call SetUnitInvulnerable(gg_unit_ncbb_0136, true)
    call SetUnitInvulnerable(gg_unit_ncb3_0138, true)
    call SetUnitInvulnerable(gg_unit_ncba_0135, true)
    call SetUnitInvulnerable(gg_unit_ncbb_0097, true)
    call SetUnitInvulnerable(gg_unit_ncb3_0113, true)
    call SetUnitInvulnerable(gg_unit_ncb3_0088, true)
    call SetUnitInvulnerable(gg_unit_ncba_0119, true)
    call SetUnitInvulnerable(gg_unit_ncb0_0139, true)
    call SetUnitInvulnerable(gg_unit_ncb5_0104, true)
    call SetUnitInvulnerable(gg_unit_ncb3_0140, true)
    call SetUnitInvulnerable(gg_unit_ncb5_0013, true)
    call SetUnitInvulnerable(gg_unit_ncb8_0105, true)
    call SetUnitInvulnerable(gg_unit_ncbb_0141, true)
    call SetUnitInvulnerable(gg_unit_ncb3_0020, true)
    call SetUnitInvulnerable(gg_unit_ncb3_0018, true)
    call SetUnitInvulnerable(gg_unit_ncba_0111, true)
    call SetUnitInvulnerable(gg_unit_ncba_0014, true)
    call SetUnitInvulnerable(gg_unit_ncb5_0019, true)
    call SetUnitInvulnerable(gg_unit_ncbb_0128, true)
    call SetUnitInvulnerable(gg_unit_ncb3_0123, true)
    call SetUnitInvulnerable(gg_unit_ncb5_0127, true)
    call SetUnitInvulnerable(gg_unit_ncb3_0126, true)
    call SetUnitInvulnerable(gg_unit_ncbb_0025, true)
    call SetUnitInvulnerable(gg_unit_ncba_0016, true)
    call SetUnitInvulnerable(gg_unit_ncb5_0027, true)
    call SetUnitInvulnerable(gg_unit_ncb3_0121, true)
    call SetUnitInvulnerable(gg_unit_ncb7_0122, true)
    call SetUnitInvulnerable(gg_unit_ncbb_0115, true)
    call SetUnitInvulnerable(gg_unit_ncba_0116, true)
    call SetUnitInvulnerable(gg_unit_ncb6_0117, true)
    call SetUnitInvulnerable(gg_unit_ncb7_0118, true)
    call SetUnitInvulnerable(gg_unit_ncb6_0114, true)
    call SetUnitInvulnerable(gg_unit_hhou_0059, true)
    call SetUnitInvulnerable(gg_unit_hhou_0058, true)
    call SetUnitInvulnerable(gg_unit_hhou_0044, true)
    call SetUnitInvulnerable(gg_unit_hhou_0055, true)
    call SetUnitInvulnerable(udg_Gerard, true)
    call SetUnitInvulnerable(udg_Matilda, true)
    call SetUnitInvulnerable(udg_Alicia, true)
    call UseTimeOfDayBJ(true)
    call QueuedTriggerRemoveBJ(gg_trg_Orc_Cinematic_Queue)
endfunction

//===========================================================================
function InitTrig_Orc_Cinematic_Queue takes nothing returns nothing
    set gg_trg_Orc_Cinematic_Queue=CreateTrigger()
    call TriggerAddCondition(gg_trg_Orc_Cinematic_Queue, Condition(function Trig_Orc_Cinematic_Queue_Conditions))
    call TriggerAddAction(gg_trg_Orc_Cinematic_Queue, function Trig_Orc_Cinematic_Queue_Actions)
endfunction

//===========================================================================
// Trigger: Orc Cinematic Cancel
//===========================================================================
function Trig_Orc_Cinematic_Cancel_Func002002 takes nothing returns nothing
    call ShowUnitShow(GetEnumUnit())
endfunction

function Trig_Orc_Cinematic_Cancel_Func011002 takes nothing returns nothing
    call ShowUnitShow(GetEnumUnit())
endfunction

function Trig_Orc_Cinematic_Cancel_Func016001 takes nothing returns boolean
    return ( udg_IsSlave01Removed == false )
endfunction

function Trig_Orc_Cinematic_Cancel_Func017001 takes nothing returns boolean
    return ( udg_IsSlave02Removed == false )
endfunction

function Trig_Orc_Cinematic_Cancel_Func018001 takes nothing returns boolean
    return ( udg_IsSlave03Removed == false )
endfunction

function Trig_Orc_Cinematic_Cancel_Func019001 takes nothing returns boolean
    return ( udg_IsSlave04Removed == false )
endfunction

function Trig_Orc_Cinematic_Cancel_Func020001 takes nothing returns boolean
    return ( udg_IsSlave05Removed == false )
endfunction

function Trig_Orc_Cinematic_Cancel_Func021001 takes nothing returns boolean
    return ( udg_IsSlave06Removed == false )
endfunction

function Trig_Orc_Cinematic_Cancel_Func022001 takes nothing returns boolean
    return ( udg_IsGrunt01Removed == false )
endfunction

function Trig_Orc_Cinematic_Cancel_Func023001 takes nothing returns boolean
    return ( udg_IsGrunt02Removed == false )
endfunction

function Trig_Orc_Cinematic_Cancel_Func030002 takes nothing returns nothing
    call SetUnitInvulnerable(GetEnumUnit(), false)
endfunction

function Trig_Orc_Cinematic_Cancel_Actions takes nothing returns nothing
    call DisableTrigger(GetTriggeringTrigger())
    call ForGroupBJ(GetUnitsOfPlayerAll(udg_AAAP_Arthas), function Trig_Orc_Cinematic_Cancel_Func002002)
    set udg_EndSkipped=true
    call UseTimeOfDayBJ(true)
    call ResetTerrainFogBJ()
    call SetUnitPositionLocFacingBJ(gg_unit_oC16_0157, GetRectCenter(gg_rct_EndBoss), 340.00)
    call PauseAllUnitsBJ(false)
    call SetUserControlForceOn(udg_AAAPG_Arthas)
    call CinematicModeBJ(false, udg_AAAPG_Arthas)
    call CinematicFadeBJ(bj_CINEFADETYPE_FADEIN, 1.00, "ReplaceableTextures\\CameraMasks\\White_mask.blp", 0, 0, 0, 0)
    call ForGroupBJ(GetUnitsOfPlayerAll(udg_AAAP_Arthas), function Trig_Orc_Cinematic_Cancel_Func011002)
    call GroupImmediateOrderBJ(udg_WarlordAndCrewGroup, "stop")
    call ResetToGameCameraForPlayer(udg_AAAP_Arthas, 0.00)
    call SmartCameraPanBJ(udg_AAAP_Arthas, udg_LastCameraPosition, 0.5)
    call SetSkyModel(null)
    if ( Trig_Orc_Cinematic_Cancel_Func016001() ) then
        call RemoveUnit(udg_Kidnapped01)
    else
        call DoNothing()
    endif
    if ( Trig_Orc_Cinematic_Cancel_Func017001() ) then
        call RemoveUnit(udg_Kidnapped02)
    else
        call DoNothing()
    endif
    if ( Trig_Orc_Cinematic_Cancel_Func018001() ) then
        call RemoveUnit(udg_Kidnapped03)
    else
        call DoNothing()
    endif
    if ( Trig_Orc_Cinematic_Cancel_Func019001() ) then
        call RemoveUnit(udg_Kidnapped04)
    else
        call DoNothing()
    endif
    if ( Trig_Orc_Cinematic_Cancel_Func020001() ) then
        call RemoveUnit(udg_Kidnapped05)
    else
        call DoNothing()
    endif
    if ( Trig_Orc_Cinematic_Cancel_Func021001() ) then
        call RemoveUnit(udg_Kidnapped06)
    else
        call DoNothing()
    endif
    if ( Trig_Orc_Cinematic_Cancel_Func022001() ) then
        call RemoveUnit(udg_Escort01)
    else
        call DoNothing()
    endif
    if ( Trig_Orc_Cinematic_Cancel_Func023001() ) then
        call RemoveUnit(udg_Escort02)
    else
        call DoNothing()
    endif
    call StopSoundBJ(GetLastPlayedSound(), true)
    call SelectGroupBJ(udg_SelectedUnits)
    call PingMinimapLocForForce(udg_AAAPG_Arthas, GetRectCenter(gg_rct_EndBoss), 4.00)
    call SetCameraQuickPositionLocForPlayer(udg_AAAP_Arthas, GetRectCenter(gg_rct_EndBoss))
    set udg_TownVisibility=GetLastCreatedFogModifier()
    call FogModifierStop(udg_TownVisibility)
    call ForGroupBJ(GetUnitsInRectAll(GetPlayableMapRect()), function Trig_Orc_Cinematic_Cancel_Func030002)
    call SetUnitInvulnerable(gg_unit_ncb2_0137, true)
    call SetUnitInvulnerable(gg_unit_ncbb_0136, true)
    call SetUnitInvulnerable(gg_unit_ncb3_0138, true)
    call SetUnitInvulnerable(gg_unit_ncba_0135, true)
    call SetUnitInvulnerable(gg_unit_ncbb_0097, true)
    call SetUnitInvulnerable(gg_unit_ncb3_0113, true)
    call SetUnitInvulnerable(gg_unit_ncb3_0088, true)
    call SetUnitInvulnerable(gg_unit_ncba_0119, true)
    call SetUnitInvulnerable(gg_unit_ncb0_0139, true)
    call SetUnitInvulnerable(gg_unit_ncb5_0104, true)
    call SetUnitInvulnerable(gg_unit_ncb3_0140, true)
    call SetUnitInvulnerable(gg_unit_ncb5_0013, true)
    call SetUnitInvulnerable(gg_unit_ncb8_0105, true)
    call SetUnitInvulnerable(gg_unit_ncbb_0141, true)
    call SetUnitInvulnerable(gg_unit_ncb3_0020, true)
    call SetUnitInvulnerable(gg_unit_ncb3_0018, true)
    call SetUnitInvulnerable(gg_unit_ncba_0111, true)
    call SetUnitInvulnerable(gg_unit_ncba_0014, true)
    call SetUnitInvulnerable(gg_unit_ncb5_0019, true)
    call SetUnitInvulnerable(gg_unit_ncbb_0128, true)
    call SetUnitInvulnerable(gg_unit_ncb3_0123, true)
    call SetUnitInvulnerable(gg_unit_ncb5_0127, true)
    call SetUnitInvulnerable(gg_unit_ncb3_0126, true)
    call SetUnitInvulnerable(gg_unit_ncbb_0025, true)
    call SetUnitInvulnerable(gg_unit_ncba_0016, true)
    call SetUnitInvulnerable(gg_unit_ncb5_0027, true)
    call SetUnitInvulnerable(gg_unit_ncb3_0121, true)
    call SetUnitInvulnerable(gg_unit_ncb7_0122, true)
    call SetUnitInvulnerable(gg_unit_ncbb_0115, true)
    call SetUnitInvulnerable(gg_unit_ncba_0116, true)
    call SetUnitInvulnerable(gg_unit_ncb6_0117, true)
    call SetUnitInvulnerable(gg_unit_ncb7_0118, true)
    call SetUnitInvulnerable(gg_unit_ncb6_0114, true)
    call SetUnitInvulnerable(gg_unit_hhou_0059, true)
    call SetUnitInvulnerable(gg_unit_hhou_0058, true)
    call SetUnitInvulnerable(gg_unit_hhou_0044, true)
    call SetUnitInvulnerable(gg_unit_hhou_0055, true)
    call SetUnitInvulnerable(udg_Gerard, true)
    call SetUnitInvulnerable(udg_Matilda, true)
    call SetUnitInvulnerable(udg_Alicia, true)
    call UnitShareVisionBJ(true, udg_SlaveMaster, udg_AAAP_Arthas)
    call DisableTrigger(gg_trg_DisableSlaveCollision)
    call DisableTrigger(gg_trg_DisableGruntCollision)
    call DisableTrigger(gg_trg_RemoveSlaves)
    call QueuedTriggerRemoveBJ(gg_trg_Orc_Cinematic_Queue)
endfunction

//===========================================================================
function InitTrig_Orc_Cinematic_Cancel takes nothing returns nothing
    set gg_trg_Orc_Cinematic_Cancel=CreateTrigger()
    call DisableTrigger(gg_trg_Orc_Cinematic_Cancel)
    call TriggerRegisterPlayerEventEndCinematic(gg_trg_Orc_Cinematic_Cancel, Player(1))
    call TriggerAddAction(gg_trg_Orc_Cinematic_Cancel, function Trig_Orc_Cinematic_Cancel_Actions)
endfunction

//===========================================================================
// Trigger: Stop EndBoss Animation
//===========================================================================
function Trig_Stop_EndBoss_Animation_Actions takes nothing returns nothing
    call DisableTrigger(GetTriggeringTrigger())
    call TriggerSleepAction(1.25)
    call SetUnitAnimation(udg_EndBoss, "stand")
    call ResetUnitAnimation(udg_EndBoss)
endfunction

//===========================================================================
function InitTrig_Stop_EndBoss_Animation takes nothing returns nothing
    set gg_trg_Stop_EndBoss_Animation=CreateTrigger()
    call TriggerAddAction(gg_trg_Stop_EndBoss_Animation, function Trig_Stop_EndBoss_Animation_Actions)
endfunction

//===========================================================================
// Trigger: DisableSlaveCollision
//===========================================================================
function Trig_DisableSlaveCollision_Conditions takes nothing returns boolean
    if ( not ( GetOwningPlayer(GetEnteringUnit()) == Player(PLAYER_NEUTRAL_PASSIVE) ) ) then
        return false
    endif
    return true
endfunction

function Trig_DisableSlaveCollision_Actions takes nothing returns nothing
    call SetUnitPathing(GetEnteringUnit(), false)
endfunction

//===========================================================================
function InitTrig_DisableSlaveCollision takes nothing returns nothing
    set gg_trg_DisableSlaveCollision=CreateTrigger()
    call TriggerRegisterEnterRectSimple(gg_trg_DisableSlaveCollision, gg_rct_Slave_Collisions)
    call TriggerAddCondition(gg_trg_DisableSlaveCollision, Condition(function Trig_DisableSlaveCollision_Conditions))
    call TriggerAddAction(gg_trg_DisableSlaveCollision, function Trig_DisableSlaveCollision_Actions)
endfunction

//===========================================================================
// Trigger: DisableGruntCollision
//===========================================================================
function Trig_DisableGruntCollision_Func001001 takes nothing returns boolean
    return ( GetEnteringUnit() == udg_Escort01 )
endfunction

function Trig_DisableGruntCollision_Func001002 takes nothing returns boolean
    return ( GetEnteringUnit() == udg_Escort02 )
endfunction

function Trig_DisableGruntCollision_Conditions takes nothing returns boolean
    if ( not GetBooleanOr(Trig_DisableGruntCollision_Func001001(), Trig_DisableGruntCollision_Func001002()) ) then
        return false
    endif
    return true
endfunction

function Trig_DisableGruntCollision_Actions takes nothing returns nothing
    call SetUnitPathing(GetEnteringUnit(), false)
endfunction

//===========================================================================
function InitTrig_DisableGruntCollision takes nothing returns nothing
    set gg_trg_DisableGruntCollision=CreateTrigger()
    call TriggerRegisterEnterRectSimple(gg_trg_DisableGruntCollision, gg_rct_Slave_Collisions)
    call TriggerAddCondition(gg_trg_DisableGruntCollision, Condition(function Trig_DisableGruntCollision_Conditions))
    call TriggerAddAction(gg_trg_DisableGruntCollision, function Trig_DisableGruntCollision_Actions)
endfunction

//===========================================================================
// Trigger: RemoveSlaves
//===========================================================================
function Trig_RemoveSlaves_Func001001 takes nothing returns boolean
    return ( GetEnteringUnit() == udg_Escort01 )
endfunction

function Trig_RemoveSlaves_Func002001 takes nothing returns boolean
    return ( GetEnteringUnit() == udg_Escort02 )
endfunction

function Trig_RemoveSlaves_Func003001 takes nothing returns boolean
    return ( GetEnteringUnit() == udg_Kidnapped01 )
endfunction

function Trig_RemoveSlaves_Func004001 takes nothing returns boolean
    return ( GetEnteringUnit() == udg_Kidnapped02 )
endfunction

function Trig_RemoveSlaves_Func005001 takes nothing returns boolean
    return ( GetEnteringUnit() == udg_Kidnapped03 )
endfunction

function Trig_RemoveSlaves_Func006001 takes nothing returns boolean
    return ( GetEnteringUnit() == udg_Kidnapped04 )
endfunction

function Trig_RemoveSlaves_Func007001 takes nothing returns boolean
    return ( GetEnteringUnit() == udg_Kidnapped05 )
endfunction

function Trig_RemoveSlaves_Func008001 takes nothing returns boolean
    return ( GetEnteringUnit() == udg_Kidnapped06 )
endfunction

function Trig_RemoveSlaves_Actions takes nothing returns nothing
    if ( Trig_RemoveSlaves_Func001001() ) then
        set udg_IsGrunt01Removed=true
    else
        call DoNothing()
    endif
    if ( Trig_RemoveSlaves_Func002001() ) then
        set udg_IsGrunt02Removed=true
    else
        call DoNothing()
    endif
    if ( Trig_RemoveSlaves_Func003001() ) then
        set udg_IsSlave01Removed=true
    else
        call DoNothing()
    endif
    if ( Trig_RemoveSlaves_Func004001() ) then
        set udg_IsSlave02Removed=true
    else
        call DoNothing()
    endif
    if ( Trig_RemoveSlaves_Func005001() ) then
        set udg_IsSlave03Removed=true
    else
        call DoNothing()
    endif
    if ( Trig_RemoveSlaves_Func006001() ) then
        set udg_IsSlave04Removed=true
    else
        call DoNothing()
    endif
    if ( Trig_RemoveSlaves_Func007001() ) then
        set udg_IsSlave05Removed=true
    else
        call DoNothing()
    endif
    if ( Trig_RemoveSlaves_Func008001() ) then
        set udg_IsSlave06Removed=true
    else
        call DoNothing()
    endif
    call RemoveUnit(GetEnteringUnit())
endfunction

//===========================================================================
function InitTrig_RemoveSlaves takes nothing returns nothing
    set gg_trg_RemoveSlaves=CreateTrigger()
    call TriggerRegisterEnterRectSimple(gg_trg_RemoveSlaves, gg_rct_RemoveCaravan)
    call TriggerAddAction(gg_trg_RemoveSlaves, function Trig_RemoveSlaves_Actions)
endfunction

//===========================================================================
// Trigger: Show Orc Cinematic Units
//===========================================================================
function Trig_Show_Orc_Cinematic_Units_Func001002 takes nothing returns nothing
    call ShowUnitShow(GetEnumUnit())
endfunction

function Trig_Show_Orc_Cinematic_Units_Func002002 takes nothing returns nothing
    call ShowUnitShow(GetEnumUnit())
endfunction

function Trig_Show_Orc_Cinematic_Units_Actions takes nothing returns nothing
    call ForGroupBJ(udg_Slavers, function Trig_Show_Orc_Cinematic_Units_Func001002)
    call ForGroupBJ(udg_KidnappedVillagers, function Trig_Show_Orc_Cinematic_Units_Func002002)
endfunction

//===========================================================================
function InitTrig_Show_Orc_Cinematic_Units takes nothing returns nothing
    set gg_trg_Show_Orc_Cinematic_Units=CreateTrigger()
    call TriggerAddAction(gg_trg_Show_Orc_Cinematic_Units, function Trig_Show_Orc_Cinematic_Units_Actions)
endfunction

//===========================================================================
// Trigger: Burn the Buildings
//===========================================================================
function Trig_Burn_the_Buildings_Actions takes nothing returns nothing
    call SetUnitLifePercentBJ(gg_unit_ncba_0016, 20.00)
    call SetUnitLifePercentBJ(gg_unit_ncbb_0025, 18.00)
    call SetUnitLifePercentBJ(gg_unit_ncb3_0126, 47.00)
    call SetUnitLifePercentBJ(gg_unit_ncb5_0127, 65.00)
    call SetUnitLifePercentBJ(gg_unit_ncbb_0128, 11.00)
    call SetUnitLifePercentBJ(gg_unit_ncb3_0123, 37.00)
    call SetUnitLifePercentBJ(gg_unit_ncba_0111, 75.00)
    call SetUnitLifePercentBJ(gg_unit_ncb8_0105, 21.00)
    call SetUnitLifePercentBJ(gg_unit_ncb5_0104, 48.00)
    call SetUnitLifePercentBJ(gg_unit_ncbb_0141, 21.00)
    call SetUnitLifePercentBJ(gg_unit_ncb3_0140, 57.00)
    call SetUnitLifePercentBJ(gg_unit_ncba_0120, 39.00)
    call SetUnitLifePercentBJ(gg_unit_ncb0_0139, 7.00)
    call SetUnitLifePercentBJ(gg_unit_ncba_0119, 26.00)
    call SetUnitLifePercentBJ(gg_unit_ncb3_0088, 13.00)
    call SetUnitLifePercentBJ(gg_unit_ncb3_0113, 62.00)
    call SetUnitLifePercentBJ(gg_unit_ncbb_0097, 56.00)
    call SetUnitLifePercentBJ(gg_unit_ncba_0135, 35.00)
    call SetUnitLifePercentBJ(gg_unit_ncbb_0136, 27.00)
    call SetUnitLifePercentBJ(gg_unit_ncb3_0138, 63.00)
    call SetUnitLifePercentBJ(gg_unit_ncb2_0137, 23.00)
    call SetUnitLifePercentBJ(gg_unit_ncb7_0118, 51.00)
    call SetUnitLifePercentBJ(gg_unit_ncb6_0117, 9.00)
    call SetUnitLifePercentBJ(gg_unit_ncba_0116, 12.00)
    call SetUnitLifePercentBJ(gg_unit_ncbb_0115, 61.00)
    call SetUnitLifePercentBJ(gg_unit_ncb7_0122, 12.00)
    call SetUnitLifePercentBJ(gg_unit_ncb3_0121, 43.00)
    call SetUnitLifePercentBJ(gg_unit_ncb5_0027, 27.00)
endfunction

//===========================================================================
function InitTrig_Burn_the_Buildings takes nothing returns nothing
    set gg_trg_Burn_the_Buildings=CreateTrigger()
    call TriggerAddAction(gg_trg_Burn_the_Buildings, function Trig_Burn_the_Buildings_Actions)
endfunction

//===========================================================================
// Trigger: Tag1
//===========================================================================
function Trig_Tag1_Actions takes nothing returns nothing
    call IssuePointOrderLocBJ(gg_unit_nC18_0163, "move", GetRectCenter(gg_rct_Blake01))
    call TriggerSleepAction(0.50)
    call IssuePointOrderLocBJ(gg_unit_nC17_0155, "move", GetRectCenter(gg_rct_Ryan01))
endfunction

//===========================================================================
function InitTrig_Tag1 takes nothing returns nothing
    set gg_trg_Tag1=CreateTrigger()
    call TriggerAddAction(gg_trg_Tag1, function Trig_Tag1_Actions)
endfunction

//===========================================================================
// Trigger: Tag2
//===========================================================================
function Trig_Tag2_Conditions takes nothing returns boolean
    if ( not ( GetUnitTypeId(GetEnteringUnit()) == 'nC18' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Tag2_Actions takes nothing returns nothing
    call IssueImmediateOrderBJ(gg_unit_nC18_0163, "stop")
    call SetUnitFacingToFaceUnitTimed(gg_unit_nC18_0163, gg_unit_nC17_0155, 0.20)
endfunction

//===========================================================================
function InitTrig_Tag2 takes nothing returns nothing
    set gg_trg_Tag2=CreateTrigger()
    call TriggerRegisterEnterRectSimple(gg_trg_Tag2, gg_rct_Blake01)
    call TriggerAddCondition(gg_trg_Tag2, Condition(function Trig_Tag2_Conditions))
    call TriggerAddAction(gg_trg_Tag2, function Trig_Tag2_Actions)
endfunction

//===========================================================================
// Trigger: Tag3
//===========================================================================
function Trig_Tag3_Conditions takes nothing returns boolean
    if ( not ( GetEnteringUnit() == gg_unit_nC17_0155 ) ) then
        return false
    endif
    return true
endfunction

function Trig_Tag3_Actions takes nothing returns nothing
    call IssuePointOrderLocBJ(gg_unit_nC17_0155, "move", GetRectCenter(gg_rct_Ryan02))
    call TriggerSleepAction(0.50)
    call IssuePointOrderLocBJ(gg_unit_nC18_0163, "move", GetRectCenter(gg_rct_Blake02))
endfunction

//===========================================================================
function InitTrig_Tag3 takes nothing returns nothing
    set gg_trg_Tag3=CreateTrigger()
    call TriggerRegisterEnterRectSimple(gg_trg_Tag3, gg_rct_Ryan01)
    call TriggerAddCondition(gg_trg_Tag3, Condition(function Trig_Tag3_Conditions))
    call TriggerAddAction(gg_trg_Tag3, function Trig_Tag3_Actions)
endfunction

//===========================================================================
// Trigger: Tag4
//===========================================================================
function Trig_Tag4_Conditions takes nothing returns boolean
    if ( not ( GetEnteringUnit() == gg_unit_nC17_0155 ) ) then
        return false
    endif
    return true
endfunction

function Trig_Tag4_Actions takes nothing returns nothing
    call IssueImmediateOrderBJ(gg_unit_nC17_0155, "stop")
    call SetUnitFacingToFaceUnitTimed(gg_unit_nC17_0155, gg_unit_nC18_0163, 0.20)
endfunction

//===========================================================================
function InitTrig_Tag4 takes nothing returns nothing
    set gg_trg_Tag4=CreateTrigger()
    call TriggerRegisterEnterRectSimple(gg_trg_Tag4, gg_rct_Ryan02)
    call TriggerAddCondition(gg_trg_Tag4, Condition(function Trig_Tag4_Conditions))
    call TriggerAddAction(gg_trg_Tag4, function Trig_Tag4_Actions)
endfunction

//===========================================================================
// Trigger: Tag5
//===========================================================================
function Trig_Tag5_Conditions takes nothing returns boolean
    if ( not ( GetEnteringUnit() == gg_unit_nC18_0163 ) ) then
        return false
    endif
    return true
endfunction

function Trig_Tag5_Actions takes nothing returns nothing
    call IssuePointOrderLocBJ(gg_unit_nC18_0163, "move", GetRectCenter(gg_rct_Blake01))
    call TriggerSleepAction(0.50)
    call IssuePointOrderLocBJ(gg_unit_nC17_0155, "move", GetRectCenter(gg_rct_Ryan01))
endfunction

//===========================================================================
function InitTrig_Tag5 takes nothing returns nothing
    set gg_trg_Tag5=CreateTrigger()
    call TriggerRegisterEnterRectSimple(gg_trg_Tag5, gg_rct_Blake02)
    call TriggerAddCondition(gg_trg_Tag5, Condition(function Trig_Tag5_Conditions))
    call TriggerAddAction(gg_trg_Tag5, function Trig_Tag5_Actions)
endfunction

//===========================================================================
// Trigger: RyanKilledRunBlakeRun
//===========================================================================
function Trig_RyanKilledRunBlakeRun_Actions takes nothing returns nothing
    call IssuePointOrderLocBJ(gg_unit_nC18_0163, "move", GetRectCenter(gg_rct_ChildFlee))
    set udg_RyanDies=true
endfunction

//===========================================================================
function InitTrig_RyanKilledRunBlakeRun takes nothing returns nothing
    set gg_trg_RyanKilledRunBlakeRun=CreateTrigger()
    call TriggerRegisterUnitEvent(gg_trg_RyanKilledRunBlakeRun, gg_unit_nC17_0155, EVENT_UNIT_DEATH)
    call TriggerAddAction(gg_trg_RyanKilledRunBlakeRun, function Trig_RyanKilledRunBlakeRun_Actions)
endfunction

//===========================================================================
// Trigger: BlakeKilledRunRyanRun
//===========================================================================
function Trig_BlakeKilledRunRyanRun_Actions takes nothing returns nothing
    call IssuePointOrderLocBJ(gg_unit_nC17_0155, "move", GetRectCenter(gg_rct_ChildFlee))
    set udg_BlakeDies=true
endfunction

//===========================================================================
function InitTrig_BlakeKilledRunRyanRun takes nothing returns nothing
    set gg_trg_BlakeKilledRunRyanRun=CreateTrigger()
    call TriggerRegisterUnitEvent(gg_trg_BlakeKilledRunRyanRun, gg_unit_nC18_0163, EVENT_UNIT_DEATH)
    call TriggerAddAction(gg_trg_BlakeKilledRunRyanRun, function Trig_BlakeKilledRunRyanRun_Actions)
endfunction

//===========================================================================
// Trigger: Remove Running Child
//===========================================================================
function Trig_Remove_Running_Child_Func001001 takes nothing returns boolean
    return ( GetEnteringUnit() == gg_unit_nC17_0155 )
endfunction

function Trig_Remove_Running_Child_Func001002 takes nothing returns boolean
    return ( GetEnteringUnit() == gg_unit_nC18_0163 )
endfunction

function Trig_Remove_Running_Child_Conditions takes nothing returns boolean
    if ( not GetBooleanOr(Trig_Remove_Running_Child_Func001001(), Trig_Remove_Running_Child_Func001002()) ) then
        return false
    endif
    return true
endfunction

function Trig_Remove_Running_Child_Actions takes nothing returns nothing
    call TriggerSleepAction(0.30)
    call SetSoundPositionLocBJ(gg_snd_DoorSlam1, GetRectCenter(gg_rct_ChildFlee), 0)
    call PlaySoundBJ(gg_snd_DoorSlam1)
    call RemoveUnit(GetEnteringUnit())
endfunction

//===========================================================================
function InitTrig_Remove_Running_Child takes nothing returns nothing
    set gg_trg_Remove_Running_Child=CreateTrigger()
    call TriggerRegisterEnterRectSimple(gg_trg_Remove_Running_Child, gg_rct_ChildFlee)
    call TriggerAddCondition(gg_trg_Remove_Running_Child, Condition(function Trig_Remove_Running_Child_Conditions))
    call TriggerAddAction(gg_trg_Remove_Running_Child, function Trig_Remove_Running_Child_Actions)
endfunction

//===========================================================================
// Trigger: Initialize Array
//===========================================================================
function Trig_Initialize_Array_Actions takes nothing returns nothing
    set udg_VillagersArray[1]='hmtt'
    set udg_VillagersArray[2]='hmtt'
    set udg_VillagersArray[3]='hmtt'
    set udg_VillagersArray[4]='hmtt'
    set udg_VillagersArray[5]='hmtt'
    set udg_VillagersArray[6]='hmtt'
    set udg_VillagersArray[7]='hmtt'
    set udg_GhostArray[1]=null
    set udg_GhostArray[2]=null
    set udg_GhostArray[3]=null
    set udg_GhostArray[4]=null
    set udg_GhostArray[5]=null
    set udg_GhostArray[6]=null
    set udg_GhostArray[7]=null
    set udg_GhostRegionArray[1]=gg_rct_Ghost01
    set udg_GhostRegionArray[2]=gg_rct_Ghost02
    set udg_GhostRegionArray[3]=gg_rct_Ghost03
    set udg_GhostRegionArray[4]=gg_rct_Ghost04
    set udg_GhostRegionArray[5]=gg_rct_Ghost05
    set udg_GhostRegionArray[6]=gg_rct_Ghost06
    set udg_GhostRegionArray[7]=gg_rct_Ghost07
endfunction

//===========================================================================
function InitTrig_Initialize_Array takes nothing returns nothing
    set gg_trg_Initialize_Array=CreateTrigger()
    call TriggerAddAction(gg_trg_Initialize_Array, function Trig_Initialize_Array_Actions)
endfunction

//===========================================================================
// Trigger: Kill Villager Put In Array
//===========================================================================
function Trig_Kill_Villager_Put_In_Array_Conditions takes nothing returns boolean
    if ( not ( GetUnitTypeId(GetDyingUnit()) != 'hfoo' ) ) then
        return false
    endif
    if ( not ( IsUnitType(GetDyingUnit(), UNIT_TYPE_STRUCTURE) == false ) ) then
        return false
    endif
    return true
endfunction

function Trig_Kill_Villager_Put_In_Array_Func003001 takes nothing returns boolean
    return ( udg_VillagersArray[1] == 'hmtt' )
endfunction

function Trig_Kill_Villager_Put_In_Array_Func004001 takes nothing returns boolean
    return ( udg_VillagersArray[1] == GetUnitTypeId(GetDyingUnit()) )
endfunction

function Trig_Kill_Villager_Put_In_Array_Func005001 takes nothing returns boolean
    return ( udg_VillagersArray[2] == 'hmtt' )
endfunction

function Trig_Kill_Villager_Put_In_Array_Func006001 takes nothing returns boolean
    return ( udg_VillagersArray[2] == GetUnitTypeId(GetDyingUnit()) )
endfunction

function Trig_Kill_Villager_Put_In_Array_Func007001 takes nothing returns boolean
    return ( udg_VillagersArray[3] == 'hmtt' )
endfunction

function Trig_Kill_Villager_Put_In_Array_Func008001 takes nothing returns boolean
    return ( udg_VillagersArray[3] == GetUnitTypeId(GetDyingUnit()) )
endfunction

function Trig_Kill_Villager_Put_In_Array_Func009001 takes nothing returns boolean
    return ( udg_VillagersArray[4] == 'hmtt' )
endfunction

function Trig_Kill_Villager_Put_In_Array_Func010001 takes nothing returns boolean
    return ( udg_VillagersArray[4] == GetUnitTypeId(GetDyingUnit()) )
endfunction

function Trig_Kill_Villager_Put_In_Array_Func011001 takes nothing returns boolean
    return ( udg_VillagersArray[5] == 'hmtt' )
endfunction

function Trig_Kill_Villager_Put_In_Array_Func012001 takes nothing returns boolean
    return ( udg_VillagersArray[5] == GetUnitTypeId(GetDyingUnit()) )
endfunction

function Trig_Kill_Villager_Put_In_Array_Func013001 takes nothing returns boolean
    return ( udg_VillagersArray[6] == 'hmtt' )
endfunction

function Trig_Kill_Villager_Put_In_Array_Func014001 takes nothing returns boolean
    return ( udg_VillagersArray[6] == GetUnitTypeId(GetDyingUnit()) )
endfunction

function Trig_Kill_Villager_Put_In_Array_Func015001 takes nothing returns boolean
    return ( udg_VillagersArray[7] == 'hmtt' )
endfunction

function Trig_Kill_Villager_Put_In_Array_Func016001 takes nothing returns boolean
    return ( udg_VillagersArray[7] == GetUnitTypeId(GetDyingUnit()) )
endfunction

function Trig_Kill_Villager_Put_In_Array_Actions takes nothing returns nothing
    if ( Trig_Kill_Villager_Put_In_Array_Func003001() ) then
        set udg_VillagersArray[1]=GetUnitTypeId(GetDyingUnit())
    else
        call DoNothing()
    endif
    if ( Trig_Kill_Villager_Put_In_Array_Func004001() ) then
        return
    else
        call DoNothing()
    endif
    if ( Trig_Kill_Villager_Put_In_Array_Func005001() ) then
        set udg_VillagersArray[2]=GetUnitTypeId(GetDyingUnit())
    else
        call DoNothing()
    endif
    if ( Trig_Kill_Villager_Put_In_Array_Func006001() ) then
        return
    else
        call DoNothing()
    endif
    if ( Trig_Kill_Villager_Put_In_Array_Func007001() ) then
        set udg_VillagersArray[3]=GetUnitTypeId(GetDyingUnit())
    else
        call DoNothing()
    endif
    if ( Trig_Kill_Villager_Put_In_Array_Func008001() ) then
        return
    else
        call DoNothing()
    endif
    if ( Trig_Kill_Villager_Put_In_Array_Func009001() ) then
        set udg_VillagersArray[4]=GetUnitTypeId(GetDyingUnit())
    else
        call DoNothing()
    endif
    if ( Trig_Kill_Villager_Put_In_Array_Func010001() ) then
        return
    else
        call DoNothing()
    endif
    if ( Trig_Kill_Villager_Put_In_Array_Func011001() ) then
        set udg_VillagersArray[5]=GetUnitTypeId(GetDyingUnit())
    else
        call DoNothing()
    endif
    if ( Trig_Kill_Villager_Put_In_Array_Func012001() ) then
        return
    else
        call DoNothing()
    endif
    if ( Trig_Kill_Villager_Put_In_Array_Func013001() ) then
        set udg_VillagersArray[6]=GetUnitTypeId(GetDyingUnit())
    else
        call DoNothing()
    endif
    if ( Trig_Kill_Villager_Put_In_Array_Func014001() ) then
        return
    else
        call DoNothing()
    endif
    if ( Trig_Kill_Villager_Put_In_Array_Func015001() ) then
        set udg_VillagersArray[7]=GetUnitTypeId(GetDyingUnit())
    else
        call DoNothing()
    endif
    if ( Trig_Kill_Villager_Put_In_Array_Func016001() ) then
        return
    else
        call DoNothing()
    endif
endfunction

//===========================================================================
function InitTrig_Kill_Villager_Put_In_Array takes nothing returns nothing
    set gg_trg_Kill_Villager_Put_In_Array=CreateTrigger()
    call TriggerRegisterPlayerUnitEventSimple(gg_trg_Kill_Villager_Put_In_Array, Player(2), EVENT_PLAYER_UNIT_DEATH)
    call TriggerRegisterPlayerUnitEventSimple(gg_trg_Kill_Villager_Put_In_Array, Player(PLAYER_NEUTRAL_PASSIVE), EVENT_PLAYER_UNIT_DEATH)
    call TriggerAddCondition(gg_trg_Kill_Villager_Put_In_Array, Condition(function Trig_Kill_Villager_Put_In_Array_Conditions))
    call TriggerAddAction(gg_trg_Kill_Villager_Put_In_Array, function Trig_Kill_Villager_Put_In_Array_Actions)
endfunction

//===========================================================================
// Trigger: Remove Villagers During Day
//===========================================================================
function Trig_Remove_Villagers_During_Day_Actions takes nothing returns nothing
    call EnableTrigger(gg_trg_Ghosts_At_Night)
    set bj_forLoopAIndex=1
    set bj_forLoopAIndexEnd=7
    loop
        exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
        call ConditionalTriggerExecute(gg_trg_Remove_Villagers_During_Day_Cycle_Type)
        set bj_forLoopAIndex=bj_forLoopAIndex + 1
    endloop
    set bj_forLoopAIndex=1
    set bj_forLoopAIndexEnd=7
    loop
        exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
        call ConditionalTriggerExecute(gg_trg_Remove_Villagers_During_Day_Cycle_Unit)
        set bj_forLoopAIndex=bj_forLoopAIndex + 1
    endloop
endfunction

//===========================================================================
function InitTrig_Remove_Villagers_During_Day takes nothing returns nothing
    set gg_trg_Remove_Villagers_During_Day=CreateTrigger()
    call TriggerRegisterGameStateEventTimeOfDay(gg_trg_Remove_Villagers_During_Day, EQUAL, 6.00)
    call TriggerAddAction(gg_trg_Remove_Villagers_During_Day, function Trig_Remove_Villagers_During_Day_Actions)
endfunction

//===========================================================================
// Trigger: Remove Villagers During Day Cycle Unit
//===========================================================================
function Trig_Remove_Villagers_During_Day_Cycle_Unit_Conditions takes nothing returns boolean
    if ( not ( udg_GhostArray[GetForLoopIndexA()] != null ) ) then
        return false
    endif
    return true
endfunction

function Trig_Remove_Villagers_During_Day_Cycle_Unit_Actions takes nothing returns nothing
    call RemoveUnit(udg_GhostArray[GetForLoopIndexA()])
    set udg_GhostArray[GetForLoopIndexA()]=null
endfunction

//===========================================================================
function InitTrig_Remove_Villagers_During_Day_Cycle_Unit takes nothing returns nothing
    set gg_trg_Remove_Villagers_During_Day_Cycle_Unit=CreateTrigger()
    call TriggerAddCondition(gg_trg_Remove_Villagers_During_Day_Cycle_Unit, Condition(function Trig_Remove_Villagers_During_Day_Cycle_Unit_Conditions))
    call TriggerAddAction(gg_trg_Remove_Villagers_During_Day_Cycle_Unit, function Trig_Remove_Villagers_During_Day_Cycle_Unit_Actions)
endfunction

//===========================================================================
// Trigger: Remove Villagers During Day Cycle Type
//===========================================================================
function Trig_Remove_Villagers_During_Day_Cycle_Type_Conditions takes nothing returns boolean
    if ( not ( udg_VillagersArray[GetForLoopIndexA()] != 'hmtt' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Remove_Villagers_During_Day_Cycle_Type_Actions takes nothing returns nothing
    set udg_VillagersArray[GetForLoopIndexA()]='hmtt'
endfunction

//===========================================================================
function InitTrig_Remove_Villagers_During_Day_Cycle_Type takes nothing returns nothing
    set gg_trg_Remove_Villagers_During_Day_Cycle_Type=CreateTrigger()
    call TriggerAddCondition(gg_trg_Remove_Villagers_During_Day_Cycle_Type, Condition(function Trig_Remove_Villagers_During_Day_Cycle_Type_Conditions))
    call TriggerAddAction(gg_trg_Remove_Villagers_During_Day_Cycle_Type, function Trig_Remove_Villagers_During_Day_Cycle_Type_Actions)
endfunction

//===========================================================================
// Trigger: Ghosts At Night
//===========================================================================
function Trig_Ghosts_At_Night_Actions takes nothing returns nothing
    call DisableTrigger(GetTriggeringTrigger())
    set bj_forLoopAIndex=1
    set bj_forLoopAIndexEnd=7
    loop
        exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
        call ConditionalTriggerExecute(gg_trg_Ghosts_At_Night_Cycle)
        set bj_forLoopAIndex=bj_forLoopAIndex + 1
    endloop
endfunction

//===========================================================================
function InitTrig_Ghosts_At_Night takes nothing returns nothing
    set gg_trg_Ghosts_At_Night=CreateTrigger()
    call TriggerRegisterGameStateEventTimeOfDay(gg_trg_Ghosts_At_Night, EQUAL, 0.01)
    call TriggerAddAction(gg_trg_Ghosts_At_Night, function Trig_Ghosts_At_Night_Actions)
endfunction

//===========================================================================
// Trigger: Ghosts At Night Cycle
//===========================================================================
function Trig_Ghosts_At_Night_Cycle_Conditions takes nothing returns boolean
    if ( not ( udg_VillagersArray[GetForLoopIndexA()] != 'hmtt' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Ghosts_At_Night_Cycle_Actions takes nothing returns nothing
    call CreateNUnitsAtLocFacingLocBJ(1, udg_VillagersArray[GetForLoopIndexA()], Player(2), GetRectCenter(udg_GhostRegionArray[GetForLoopIndexA()]), GetRectCenter(gg_rct_Ghost_Facing))
    set udg_GhostArray[GetForLoopIndexA()]=GetLastCreatedUnit()
    call SetUnitInvulnerable(udg_GhostArray[GetForLoopIndexA()], true)
    call SetUnitVertexColorBJ(udg_GhostArray[GetForLoopIndexA()], 100, 100, 100, 85.00)
    call PauseUnitBJ(true, udg_GhostArray[GetForLoopIndexA()])
endfunction

//===========================================================================
function InitTrig_Ghosts_At_Night_Cycle takes nothing returns nothing
    set gg_trg_Ghosts_At_Night_Cycle=CreateTrigger()
    call TriggerAddCondition(gg_trg_Ghosts_At_Night_Cycle, Condition(function Trig_Ghosts_At_Night_Cycle_Conditions))
    call TriggerAddAction(gg_trg_Ghosts_At_Night_Cycle, function Trig_Ghosts_At_Night_Cycle_Actions)
endfunction

//===========================================================================
// Trigger: AP Graveyard Location
//===========================================================================
function Trig_AP_Graveyard_Location_Conditions takes nothing returns boolean
    if ( not ( GetOwningPlayer(GetTriggerUnit()) == udg_AAAP_Arthas ) ) then
        return false
    endif
    return true
endfunction

function Trig_AP_Graveyard_Location_Actions takes nothing returns nothing
    call DisableTrigger(GetTriggeringTrigger())
    call status_check_location(24)
endfunction

//===========================================================================
function InitTrig_AP_Graveyard_Location takes nothing returns nothing
    set gg_trg_AP_Graveyard_Location=CreateTrigger()
    call TriggerRegisterEnterRectSimple(gg_trg_AP_Graveyard_Location, gg_rct_Ghost_Facing)
    call TriggerAddCondition(gg_trg_AP_Graveyard_Location, Condition(function Trig_AP_Graveyard_Location_Conditions))
    call TriggerAddAction(gg_trg_AP_Graveyard_Location, function Trig_AP_Graveyard_Location_Actions)
endfunction

//===========================================================================
// Trigger: Waterfall Sight
//===========================================================================
function Trig_Waterfall_Sight_Conditions takes nothing returns boolean
    if ( not ( GetOwningPlayer(GetEnteringUnit()) == udg_AAAP_Arthas ) ) then
        return false
    endif
    if ( not ( udg_WaterfallBoolean == false ) ) then
        return false
    endif
    return true
endfunction

function Trig_Waterfall_Sight_Actions takes nothing returns nothing
    set udg_WaterfallBoolean=true
    call CreateFogModifierRadiusLocBJ(true, udg_AAAP_Arthas, FOG_OF_WAR_VISIBLE, GetRectCenter(gg_rct_WaterfallVis), 756.00)
    set udg_WaterfallVis=GetLastCreatedFogModifier()
endfunction

//===========================================================================
function InitTrig_Waterfall_Sight takes nothing returns nothing
    set gg_trg_Waterfall_Sight=CreateTrigger()
    call TriggerRegisterEnterRectSimple(gg_trg_Waterfall_Sight, gg_rct_Waterfall)
    call TriggerAddCondition(gg_trg_Waterfall_Sight, Condition(function Trig_Waterfall_Sight_Conditions))
    call TriggerAddAction(gg_trg_Waterfall_Sight, function Trig_Waterfall_Sight_Actions)
endfunction

//===========================================================================
// Trigger: Waterfall Sight Go ByeBye
//===========================================================================
function Trig_Waterfall_Sight_Go_ByeBye_Func004001001002001 takes nothing returns boolean
    return ( IsUnitAliveBJ(GetFilterUnit()) == true )
endfunction

function Trig_Waterfall_Sight_Go_ByeBye_Func004001001002002 takes nothing returns boolean
    return ( GetOwningPlayer(GetFilterUnit()) == udg_AAAP_Arthas )
endfunction

function Trig_Waterfall_Sight_Go_ByeBye_Func004001001002 takes nothing returns boolean
    return GetBooleanAnd(Trig_Waterfall_Sight_Go_ByeBye_Func004001001002001(), Trig_Waterfall_Sight_Go_ByeBye_Func004001001002002())
endfunction

function Trig_Waterfall_Sight_Go_ByeBye_Conditions takes nothing returns boolean
    if ( not ( udg_WaterfallBoolean == true ) ) then
        return false
    endif
    if ( not ( CountUnitsInGroup(GetUnitsInRectMatching(gg_rct_Waterfall, Condition(function Trig_Waterfall_Sight_Go_ByeBye_Func004001001002))) <= 0 ) ) then
        return false
    endif
    return true
endfunction

function Trig_Waterfall_Sight_Go_ByeBye_Actions takes nothing returns nothing
    set udg_WaterfallBoolean=false
    call DestroyFogModifier(udg_WaterfallVis)
endfunction

//===========================================================================
function InitTrig_Waterfall_Sight_Go_ByeBye takes nothing returns nothing
    set gg_trg_Waterfall_Sight_Go_ByeBye=CreateTrigger()
    call TriggerRegisterLeaveRectSimple(gg_trg_Waterfall_Sight_Go_ByeBye, gg_rct_Waterfall)
    call TriggerRegisterPlayerUnitEventSimple(gg_trg_Waterfall_Sight_Go_ByeBye, Player(1), EVENT_PLAYER_UNIT_DEATH)
    call TriggerAddCondition(gg_trg_Waterfall_Sight_Go_ByeBye, Condition(function Trig_Waterfall_Sight_Go_ByeBye_Conditions))
    call TriggerAddAction(gg_trg_Waterfall_Sight_Go_ByeBye, function Trig_Waterfall_Sight_Go_ByeBye_Actions)
endfunction

//===========================================================================
// Trigger: Warlord Driveby
//===========================================================================
function Trig_Warlord_Driveby_Conditions takes nothing returns boolean
    if ( not ( GetOwningPlayer(GetEnteringUnit()) == udg_AAAP_Arthas ) ) then
        return false
    endif
    return true
endfunction

function Trig_Warlord_Driveby_Actions takes nothing returns nothing
    call DisableTrigger(GetTriggeringTrigger())
    call SetUnitPositionLoc(gg_unit_oC16_0157, GetRectCenter(gg_rct_Warlord_1))
    call IssuePointOrderLocBJ(gg_unit_oC16_0157, "move", GetRectCenter(gg_rct_Warlord_2_Kill_Villager))
endfunction

//===========================================================================
function InitTrig_Warlord_Driveby takes nothing returns nothing
    set gg_trg_Warlord_Driveby=CreateTrigger()
    call TriggerRegisterEnterRectSimple(gg_trg_Warlord_Driveby, gg_rct_TriggerAmbush)
    call TriggerAddCondition(gg_trg_Warlord_Driveby, Condition(function Trig_Warlord_Driveby_Conditions))
    call TriggerAddAction(gg_trg_Warlord_Driveby, function Trig_Warlord_Driveby_Actions)
endfunction

//===========================================================================
// Trigger: Warlord Driveby2
//===========================================================================
function Trig_Warlord_Driveby2_Conditions takes nothing returns boolean
    if ( not ( GetEnteringUnit() == gg_unit_oC16_0157 ) ) then
        return false
    endif
    return true
endfunction

function Trig_Warlord_Driveby2_Actions takes nothing returns nothing
    call DisableTrigger(GetTriggeringTrigger())
    call ExplodeUnitBJ(gg_unit_nC25_0164)
    call IssuePointOrderLocBJ(gg_unit_oC16_0157, "move", GetRectCenter(gg_rct_Warlord_3_Kill_Villager))
endfunction

//===========================================================================
function InitTrig_Warlord_Driveby2 takes nothing returns nothing
    set gg_trg_Warlord_Driveby2=CreateTrigger()
    call TriggerRegisterEnterRectSimple(gg_trg_Warlord_Driveby2, gg_rct_Warlord_2_Kill_Villager)
    call TriggerAddCondition(gg_trg_Warlord_Driveby2, Condition(function Trig_Warlord_Driveby2_Conditions))
    call TriggerAddAction(gg_trg_Warlord_Driveby2, function Trig_Warlord_Driveby2_Actions)
endfunction

//===========================================================================
// Trigger: Warlord Driveby3
//===========================================================================
function Trig_Warlord_Driveby3_Conditions takes nothing returns boolean
    if ( not ( GetEnteringUnit() == gg_unit_oC16_0157 ) ) then
        return false
    endif
    return true
endfunction

function Trig_Warlord_Driveby3_Actions takes nothing returns nothing
    call DisableTrigger(GetTriggeringTrigger())
    call ExplodeUnitBJ(gg_unit_nC27_0165)
    call IssuePointOrderLocBJ(gg_unit_oC16_0157, "move", GetRectCenter(gg_rct_Warlord_4_Kill_Villager))
endfunction

//===========================================================================
function InitTrig_Warlord_Driveby3 takes nothing returns nothing
    set gg_trg_Warlord_Driveby3=CreateTrigger()
    call TriggerRegisterEnterRectSimple(gg_trg_Warlord_Driveby3, gg_rct_Warlord_3_Kill_Villager)
    call TriggerAddCondition(gg_trg_Warlord_Driveby3, Condition(function Trig_Warlord_Driveby3_Conditions))
    call TriggerAddAction(gg_trg_Warlord_Driveby3, function Trig_Warlord_Driveby3_Actions)
endfunction

//===========================================================================
// Trigger: Warlord Driveby4
//===========================================================================
function Trig_Warlord_Driveby4_Conditions takes nothing returns boolean
    if ( not ( GetEnteringUnit() == gg_unit_oC16_0157 ) ) then
        return false
    endif
    return true
endfunction

function Trig_Warlord_Driveby4_Actions takes nothing returns nothing
    call DisableTrigger(GetTriggeringTrigger())
    call ExplodeUnitBJ(gg_unit_nC26_0166)
    call IssuePointOrderLocBJ(gg_unit_oC16_0157, "move", GetRectCenter(gg_rct_Warlord_5_Run_Here))
endfunction

//===========================================================================
function InitTrig_Warlord_Driveby4 takes nothing returns nothing
    set gg_trg_Warlord_Driveby4=CreateTrigger()
    call TriggerRegisterEnterRectSimple(gg_trg_Warlord_Driveby4, gg_rct_Warlord_4_Kill_Villager)
    call TriggerAddCondition(gg_trg_Warlord_Driveby4, Condition(function Trig_Warlord_Driveby4_Conditions))
    call TriggerAddAction(gg_trg_Warlord_Driveby4, function Trig_Warlord_Driveby4_Actions)
endfunction

//===========================================================================
// Trigger: Warlord Driveby5 Go Home
//===========================================================================
function Trig_Warlord_Driveby5_Go_Home_Conditions takes nothing returns boolean
    if ( not ( GetEnteringUnit() == gg_unit_oC16_0157 ) ) then
        return false
    endif
    if ( not ( udg_GAMEOVER == false ) ) then
        return false
    endif
    return true
endfunction

function Trig_Warlord_Driveby5_Go_Home_Actions takes nothing returns nothing
    call DisableTrigger(GetTriggeringTrigger())
    call IssuePointOrderLocBJ(gg_unit_oC16_0157, "move", GetRectCenter(gg_rct_EndBoss))
    call QueuedTriggerAddBJ(gg_trg_Warlord_Quest_Queue, true)
endfunction

//===========================================================================
function InitTrig_Warlord_Driveby5_Go_Home takes nothing returns nothing
    set gg_trg_Warlord_Driveby5_Go_Home=CreateTrigger()
    call TriggerRegisterEnterRectSimple(gg_trg_Warlord_Driveby5_Go_Home, gg_rct_Warlord_5_Run_Here)
    call TriggerAddCondition(gg_trg_Warlord_Driveby5_Go_Home, Condition(function Trig_Warlord_Driveby5_Go_Home_Conditions))
    call TriggerAddAction(gg_trg_Warlord_Driveby5_Go_Home, function Trig_Warlord_Driveby5_Go_Home_Actions)
endfunction

//===========================================================================
// Trigger: Warlord Quest Queue
//===========================================================================
function Trig_Warlord_Quest_Queue_Conditions takes nothing returns boolean
    if ( not ( udg_GAMEOVER == false ) ) then
        return false
    endif
    return true
endfunction

function Trig_Warlord_Quest_Queue_Actions takes nothing returns nothing
    call QuestItemSetCompletedBJ(udg_RequirementVillageTravel, true)
    call CreateQuestItemBJ(udg_QuestVillage, "TRIGSTR_368")
    set udg_RequirementVillageSlay=GetLastCreatedQuestItemBJ()
    call QuestMessageBJ(udg_AAAPG_Arthas, bj_QUESTMESSAGE_UPDATED, "TRIGSTR_369")
    call TriggerSleepAction(bj_QUEUE_DELAY_QUEST)
    call QueuedTriggerRemoveBJ(GetTriggeringTrigger())
endfunction

//===========================================================================
function InitTrig_Warlord_Quest_Queue takes nothing returns nothing
    set gg_trg_Warlord_Quest_Queue=CreateTrigger()
    call TriggerAddCondition(gg_trg_Warlord_Quest_Queue, Condition(function Trig_Warlord_Quest_Queue_Conditions))
    call TriggerAddAction(gg_trg_Warlord_Quest_Queue, function Trig_Warlord_Quest_Queue_Actions)
endfunction

//===========================================================================
// Trigger: Warlord Goes Home
//===========================================================================
function Trig_Warlord_Goes_Home_Conditions takes nothing returns boolean
    if ( not ( GetEnteringUnit() == gg_unit_oC16_0157 ) ) then
        return false
    endif
    return true
endfunction

function Trig_Warlord_Goes_Home_Actions takes nothing returns nothing
    call DisableTrigger(GetTriggeringTrigger())
    call IssueImmediateOrderBJ(gg_unit_oC16_0157, "stop")
    call SetUnitFacingTimed(gg_unit_oC16_0157, 315.00, 0)
endfunction

//===========================================================================
function InitTrig_Warlord_Goes_Home takes nothing returns nothing
    set gg_trg_Warlord_Goes_Home=CreateTrigger()
    call TriggerRegisterEnterRectSimple(gg_trg_Warlord_Goes_Home, gg_rct_EndBoss)
    call TriggerAddCondition(gg_trg_Warlord_Goes_Home, Condition(function Trig_Warlord_Goes_Home_Conditions))
    call TriggerAddAction(gg_trg_Warlord_Goes_Home, function Trig_Warlord_Goes_Home_Actions)
endfunction

//===========================================================================
// Trigger: Trigger Victory
//===========================================================================
function Trig_Trigger_Victory_Conditions takes nothing returns boolean
    if ( not ( IsUnitGroupDeadBJ(udg_WarlordAndCrewGroup) == true ) ) then
        return false
    endif
    if ( not ( udg_GAMEOVER == false ) ) then
        return false
    endif
    return true
endfunction

function Trig_Trigger_Victory_Actions takes nothing returns nothing
    set udg_GAMEOVER=true
    call status_check_location(0)
    call DisableTrigger(GetTriggeringTrigger())
    call DisableTrigger(gg_trg_Defeat)
    call SetUnitInvulnerable(udg_Arthas, true)
    call TriggerExecute(gg_trg_Turn_off_quests)
    call TriggerSleepAction(1.00)
    call FlashQuestDialogButtonBJ()
    call QuestSetCompletedBJ(udg_QuestOrcs, true)
    call QuestItemSetCompletedBJ(udg_RequirementVillageSlay, true)
    call QuestItemSetCompletedBJ(udg_RequirementVillageArthas, true)
    call QuestMessageBJ(udg_AAAPG_Arthas, bj_QUESTMESSAGE_COMPLETED, "TRIGSTR_088")
    call TriggerSleepAction(bj_QUEUE_DELAY_QUEST)
    call QueuedTriggerAddBJ(gg_trg_Victory, false)
endfunction

//===========================================================================
function InitTrig_Trigger_Victory takes nothing returns nothing
    set gg_trg_Trigger_Victory=CreateTrigger()
    call TriggerRegisterPlayerUnitEventSimple(gg_trg_Trigger_Victory, Player(0), EVENT_PLAYER_UNIT_DEATH)
    call TriggerAddCondition(gg_trg_Trigger_Victory, Condition(function Trig_Trigger_Victory_Conditions))
    call TriggerAddAction(gg_trg_Trigger_Victory, function Trig_Trigger_Victory_Actions)
endfunction

//===========================================================================
// Trigger: Turn off quests
//===========================================================================
function Trig_Turn_off_quests_Actions takes nothing returns nothing
    set udg_BanditQuestFailed=true
    set udg_BlakeDies=true
    set udg_TimmyQuestFailed=true
endfunction

//===========================================================================
function InitTrig_Turn_off_quests takes nothing returns nothing
    set gg_trg_Turn_off_quests=CreateTrigger()
    call TriggerAddAction(gg_trg_Turn_off_quests, function Trig_Turn_off_quests_Actions)
endfunction

//===========================================================================
// Trigger: Victory
//===========================================================================
function Trig_Victory_Func008002 takes nothing returns nothing
    call UnitRemoveBuffsBJ(bj_REMOVEBUFFS_ALL, GetEnumUnit())
endfunction

function Trig_Victory_Func009002 takes nothing returns nothing
    call SetUnitInvulnerable(GetEnumUnit(), true)
endfunction

function Trig_Victory_Func010002 takes nothing returns nothing
    call IssueImmediateOrderBJ(GetEnumUnit(), "stop")
endfunction

function Trig_Victory_Func012002 takes nothing returns nothing
    call ShowUnitHide(GetEnumUnit())
endfunction

function Trig_Victory_Func042001 takes nothing returns boolean
    return ( udg_VictorySkipped == true )
endfunction

function Trig_Victory_Func044001 takes nothing returns boolean
    return ( udg_VictorySkipped == true )
endfunction

function Trig_Victory_Func046001 takes nothing returns boolean
    return ( udg_VictorySkipped == true )
endfunction

function Trig_Victory_Func051001 takes nothing returns boolean
    return ( udg_VictorySkipped == true )
endfunction

function Trig_Victory_Func059001 takes nothing returns boolean
    return ( udg_VictorySkipped == true )
endfunction

function Trig_Victory_Func061001 takes nothing returns boolean
    return ( udg_VictorySkipped == true )
endfunction

function Trig_Victory_Func068001 takes nothing returns boolean
    return ( udg_VictorySkipped == true )
endfunction

function Trig_Victory_Func070001 takes nothing returns boolean
    return ( udg_VictorySkipped == true )
endfunction

function Trig_Victory_Func072001 takes nothing returns boolean
    return ( udg_VictorySkipped == true )
endfunction

function Trig_Victory_Func074001 takes nothing returns boolean
    return ( udg_VictorySkipped == true )
endfunction

function Trig_Victory_Func076001 takes nothing returns boolean
    return ( udg_VictorySkipped == true )
endfunction

function Trig_Victory_Func083001 takes nothing returns boolean
    return ( udg_VictorySkipped == true )
endfunction

function Trig_Victory_Actions takes nothing returns nothing
    call DisableTrigger(GetTriggeringTrigger())
    call DisableTrigger(gg_trg_Defeat)
    call UnitRemoveBuffsBJ(bj_REMOVEBUFFS_ALL, udg_Arthas)
    call CinematicFadeBJ(bj_CINEFADETYPE_FADEOUT, 1.00, "ReplaceableTextures\\CameraMasks\\White_mask.blp", 0, 0, 0, 0)
    call TriggerSleepAction(1.00)
    call ClearSelection()
    call UseTimeOfDayBJ(false)
    call ForGroupBJ(GetUnitsInRectAll(GetPlayableMapRect()), function Trig_Victory_Func008002)
    call ForGroupBJ(GetUnitsInRectAll(GetPlayableMapRect()), function Trig_Victory_Func009002)
    call ForGroupBJ(GetUnitsInRectAll(GetPlayableMapRect()), function Trig_Victory_Func010002)
    call PauseAllUnitsBJ(true)
    call ForGroupBJ(GetUnitsInRectAll(GetPlayableMapRect()), function Trig_Victory_Func012002)
    call PauseUnitBJ(false, udg_Arthas)
    call DisableTrigger(gg_trg_AproachesJerrett)
    call DisableTrigger(gg_trg_AproachesMaria)
    call DisableTrigger(gg_trg_AproachesStephanie)
    call DisableTrigger(gg_trg_AproachesTed)
    call DisableTrigger(gg_trg_Ledger_Quest)
    call DisableTrigger(gg_trg_Timmy_Quest)
    call SetSkyModel("Environment\\Sky\\DalaranSky\\DalaranSky.mdl")
    call SetTerrainFogExBJ(0, 400.00, 4000.00, 0, 0.00, 20.00, 50.00)
    call CinematicModeBJ(true, udg_AAAPG_Arthas)
    call PlayThematicMusicBJ("Sound\\Music\\mp3Music\\HeroicVictory.mp3")
    call SetUnitPositionLoc(udg_Arthas, GetRectCenter(gg_rct_EndArthas))
    call ShowUnitShow(udg_Arthas)
    call CreateNUnitsAtLoc(1, 'nvlk', Player(2), GetRectCenter(gg_rct_EndChild), 0.00)
    set udg_EndChild=GetLastCreatedUnit()
    call CreateNUnitsAtLoc(1, 'nvlw', Player(2), GetRectCenter(gg_rct_EndWoman), 0.00)
    call SetUnitFacingToFaceUnitTimed(udg_EndChild, udg_Arthas, 0)
    set udg_EndWoman=GetLastCreatedUnit()
    call SetUnitFacingToFaceUnitTimed(udg_EndWoman, udg_Arthas, 0)
    call CreateNUnitsAtLoc(1, 'nvil', Player(2), GetRectCenter(gg_rct_EndMan), 0.00)
    set udg_EndMan=GetLastCreatedUnit()
    call SetUnitFacingToFaceUnitTimed(udg_EndMan, udg_Arthas, 0)
    call SetUnitFacingToFaceUnitTimed(udg_Arthas, udg_EndMan, 0)
    call CameraSetupApplyForPlayer(true, gg_cam_Victory01, udg_AAAP_Arthas, 0.00)
    call CameraSetupApplyForPlayer(true, gg_cam_Victory02, udg_AAAP_Arthas, 5.00)
    call CinematicFadeBJ(bj_CINEFADETYPE_FADEIN, 1.00, "ReplaceableTextures\\CameraMasks\\Black_mask.blp", 0, 0, 0, 0)
    // NOW SKIPPABLE
    call EnableTrigger(gg_trg_Victory_Cancel)
    call TriggerSleepAction(3.00)
    if ( Trig_Victory_Func042001() ) then
        return
    else
        call DoNothing()
    endif
    call TransmissionFromUnitWithNameBJ(udg_AAAPG_Arthas, udg_EndWoman, "TRIGSTR_120", gg_snd_H01VillagerF22, "TRIGSTR_121", bj_TIMETYPE_ADD, 0.00, true)
    if ( Trig_Victory_Func044001() ) then
        return
    else
        call DoNothing()
    endif
    call TransmissionFromUnitWithNameBJ(udg_AAAPG_Arthas, udg_EndChild, "TRIGSTR_122", gg_snd_H01VillagerC23, "TRIGSTR_123", bj_TIMETYPE_ADD, 0.00, true)
    if ( Trig_Victory_Func046001() ) then
        return
    else
        call DoNothing()
    endif
    call CameraSetSmoothingFactorBJ(0.01)
    call SetTerrainFogExBJ(0, 2000.00, 6000.00, 0, 0.00, 20.00, 50.00)
    call CameraSetupApplyForPlayer(true, gg_cam_CamEndCounterAngle, udg_AAAP_Arthas, 0.00)
    call TransmissionFromUnitWithNameBJ(udg_AAAPG_Arthas, udg_Arthas, "TRIGSTR_124", gg_snd_H01Arthas24, "TRIGSTR_125", bj_TIMETYPE_ADD, 0.00, true)
    if ( Trig_Victory_Func051001() ) then
        return
    else
        call DoNothing()
    endif
    call CreateNUnitsAtLoc(1, 'hkni', udg_P_Uther, GetRectCenter(gg_rct_CreateKnight), 0.00)
    call TriggerSleepAction(0.10)
    set udg_EndKnight=GetLastCreatedUnit()
    call IssuePointOrderLocBJ(udg_EndKnight, "move", GetRectCenter(gg_rct_Knight_Destination))
    call SetSoundPositionLocBJ(gg_snd_HorseLoop1, GetRectCenter(gg_rct_Knight_Destination), 0)
    call SetSoundVolumeBJ(gg_snd_HorseLoop1, 70.00)
    call PlaySoundBJ(gg_snd_HorseLoop1)
    if ( Trig_Victory_Func059001() ) then
        return
    else
        call DoNothing()
    endif
    call TriggerSleepAction(2.00)
    if ( Trig_Victory_Func061001() ) then
        return
    else
        call DoNothing()
    endif
    call SetUnitFacingToFaceUnitTimed(udg_EndChild, udg_EndKnight, 0.25)
    call SetUnitFacingToFaceUnitTimed(udg_EndWoman, udg_EndKnight, 0.25)
    call SetUnitFacingToFaceUnitTimed(udg_EndMan, udg_EndKnight, 0.25)
    call SetUnitFacingToFaceUnitTimed(udg_Arthas, udg_EndKnight, 0.25)
    call SetUnitFacingToFaceUnitTimed(udg_EndKnight, udg_Arthas, 0.25)
    call TriggerSleepAction(1.00)
    if ( Trig_Victory_Func068001() ) then
        return
    else
        call DoNothing()
    endif
    call TransmissionFromUnitWithNameBJ(udg_AAAPG_Arthas, udg_EndKnight, "TRIGSTR_128", gg_snd_H01Knight25, "TRIGSTR_129", bj_TIMETYPE_ADD, 0.00, true)
    if ( Trig_Victory_Func070001() ) then
        return
    else
        call DoNothing()
    endif
    call TriggerSleepAction(0.50)
    if ( Trig_Victory_Func072001() ) then
        return
    else
        call DoNothing()
    endif
    call TransmissionFromUnitWithNameBJ(udg_AAAPG_Arthas, udg_Arthas, "TRIGSTR_126", gg_snd_H01Arthas26, "TRIGSTR_127", bj_TIMETYPE_ADD, 0.00, true)
    if ( Trig_Victory_Func074001() ) then
        return
    else
        call DoNothing()
    endif
    call TriggerSleepAction(0.50)
    if ( Trig_Victory_Func076001() ) then
        return
    else
        call DoNothing()
    endif
    call ClearSelection()
    call IssuePointOrderLocBJ(udg_EndKnight, "move", GetRectCenter(gg_rct_LedgerCenter))
    call AttachSoundToUnitBJ(gg_snd_HorseLoop2, udg_EndKnight)
    call PlaySoundBJ(gg_snd_HorseLoop2)
    call IssuePointOrderLocBJ(udg_Arthas, "move", GetRectCenter(gg_rct_LedgerCenter))
    call TriggerSleepAction(1.00)
    if ( Trig_Victory_Func083001() ) then
        return
    else
        call DoNothing()
    endif
    // NO LONGER SKIPPABLE
    call DisableTrigger(gg_trg_Victory_Cancel)
    call CinematicFadeBJ(bj_CINEFADETYPE_FADEOUT, 2, "ReplaceableTextures\\CameraMasks\\White_mask.blp", 0, 0, 0, 0)
    call TriggerSleepAction(2.00)
    call CameraSetupApplyForPlayer(true, gg_cam_CamEndCounterAngle, udg_AAAP_Arthas, 0.00)
    call CameraResetSmoothingFactorBJ()
    // Change Mission
    call TriggerExecute(gg_trg_Next_Level_Run)
endfunction

//===========================================================================
function InitTrig_Victory takes nothing returns nothing
    set gg_trg_Victory=CreateTrigger()
    call TriggerAddAction(gg_trg_Victory, function Trig_Victory_Actions)
endfunction

//===========================================================================
// Trigger: Victory Cancel
//===========================================================================
function Trig_Victory_Cancel_Actions takes nothing returns nothing
    call DisableTrigger(GetTriggeringTrigger())
    call DisableTrigger(gg_trg_Victory)
    call DisableTrigger(gg_trg_Defeat)
    set udg_VictorySkipped=true
    call PauseAllUnitsBJ(true)
    call StopSoundBJ(GetLastPlayedSound(), true)
    call CinematicFadeBJ(bj_CINEFADETYPE_FADEOUT, 2, "ReplaceableTextures\\CameraMasks\\White_mask.blp", 0, 0, 0, 0)
    // Change Mission
    call TriggerSleepAction(2)
    call TriggerExecute(gg_trg_Next_Level_Run)
endfunction

//===========================================================================
function InitTrig_Victory_Cancel takes nothing returns nothing
    set gg_trg_Victory_Cancel=CreateTrigger()
    call DisableTrigger(gg_trg_Victory_Cancel)
    call TriggerRegisterPlayerEventEndCinematic(gg_trg_Victory_Cancel, Player(1))
    call TriggerAddAction(gg_trg_Victory_Cancel, function Trig_Victory_Cancel_Actions)
endfunction

//===========================================================================
// Trigger: Defeat
//===========================================================================
function Trig_Defeat_Conditions takes nothing returns boolean
    if ( not ( GetTriggerUnit() == udg_Arthas ) ) then
        return false
    endif
    return true
endfunction

function Trig_Defeat_Actions takes nothing returns nothing
    set udg_GAMEOVER=true
    call DisableTrigger(GetTriggeringTrigger())
    call DisableTrigger(gg_trg_Victory)
    call DisableTrigger(gg_trg_Victory_Cancel)
    call DisableTrigger(gg_trg_Trigger_Victory)
    call TriggerExecute(gg_trg_Turn_off_quests)
    call QuestMessageBJ(udg_AAAPG_Arthas, bj_QUESTMESSAGE_FAILED, "TRIGSTR_072")
    call UseTimeOfDayBJ(false)
    call TriggerSleepAction(2.00)
    call TriggerExecute(gg_trg_Defeat_Cheat)
endfunction

//===========================================================================
function InitTrig_Defeat takes nothing returns nothing
    set gg_trg_Defeat=CreateTrigger()
    call TriggerRegisterPlayerUnitEventSimple(gg_trg_Defeat, Player(1), EVENT_PLAYER_UNIT_DEATH)
    call TriggerAddCondition(gg_trg_Defeat, Condition(function Trig_Defeat_Conditions))
    call TriggerAddAction(gg_trg_Defeat, function Trig_Defeat_Actions)
endfunction

//===========================================================================
// Trigger: Next Level Run
//===========================================================================
function Trig_Next_Level_Run_Actions takes nothing returns nothing
    // Run next level
    call SetNextLevelBJ("Maps\\AP_Campaign\\Human02.w3x")
    call CustomVictoryBJ(udg_AAAP_Arthas, true, true)
endfunction

//===========================================================================
function InitTrig_Next_Level_Run takes nothing returns nothing
    set gg_trg_Next_Level_Run=CreateTrigger()
    call TriggerAddAction(gg_trg_Next_Level_Run, function Trig_Next_Level_Run_Actions)
endfunction

//===========================================================================
// Trigger: Victory Cheat
//===========================================================================
function Trig_Victory_Cheat_Actions takes nothing returns nothing
    call ConditionalTriggerExecute(gg_trg_Next_Level_Run)
endfunction

//===========================================================================
function InitTrig_Victory_Cheat takes nothing returns nothing
    set gg_trg_Victory_Cheat=CreateTrigger()
    call TriggerRegisterPlayerEventVictory(gg_trg_Victory_Cheat, Player(1))
    call TriggerAddAction(gg_trg_Victory_Cheat, function Trig_Victory_Cheat_Actions)
endfunction

//===========================================================================
// Trigger: Defeat Cheat
//===========================================================================
function Trig_Defeat_Cheat_Actions takes nothing returns nothing
    call CustomDefeatBJ(udg_AAAP_Arthas, "TRIGSTR_326")
endfunction

//===========================================================================
function InitTrig_Defeat_Cheat takes nothing returns nothing
    set gg_trg_Defeat_Cheat=CreateTrigger()
    call TriggerRegisterPlayerEventDefeat(gg_trg_Defeat_Cheat, Player(1))
    call TriggerAddAction(gg_trg_Defeat_Cheat, function Trig_Defeat_Cheat_Actions)
endfunction

//===========================================================================
function InitCustomTriggers takes nothing returns nothing
    call InitTrig_fileio()
    call InitTrig_map_config()
    call InitTrig_status()
    call InitTrig_heroes()
    call InitTrig_item_locations()
    call InitTrig_debug()
    call InitTrig_zoom()
    call InitTrig_AP_Load_Arthas()
    call InitTrig_Map_Initialization()
    call InitTrig_Not_Hard_Difficulty()
    call InitTrig_Handicap()
    call InitTrig_Setup_Scorescreen()
    call InitTrig_Intro_Cancel()
    call InitTrig_Intro_Cinematic()
    call InitTrig_Holy_Light_Hint_Queue()
    call InitTrig_Footman_Acquired()
    call InitTrig___Defend()
    call InitTrig___Footman01_End_Movement()
    call InitTrig___Footman02_End_Movement()
    call InitTrig___Villagers()
    call InitTrig_Delete_Uther()
    call InitTrig_Call_for_help()
    call InitTrig_Call_for_help_Queue()
    call InitTrig_Surprise_Attack()
    call InitTrig_Surprise_Attack_Queue()
    call InitTrig_Recruit()
    call InitTrig_Recruit_Queue()
    call InitTrig_Abort_Recruit_Queue()
    call InitTrig_GarthDies()
    call InitTrig_ThornbyDies()
    call InitTrig_Destroy_TalkThornby()
    call InitTrig_Crate01()
    call InitTrig_Crate02()
    call InitTrig_Crate03()
    call InitTrig_FarmerJerrett()
    call InitTrig_AproachesJerrett()
    call InitTrig_FarmerTed()
    call InitTrig_AproachesTed()
    call InitTrig_Maria()
    call InitTrig_AproachesMaria()
    call InitTrig_Stephanie()
    call InitTrig_AproachesStephanie()
    call InitTrig_Amy_Diane()
    call InitTrig_AproachesAmy_Diane()
    call InitTrig_AproachesBlake()
    call InitTrig_AproachesRyan()
    call InitTrig_Villager_Speech_Array()
    call InitTrig_Villager_Speech_Array_Loop_OFF()
    call InitTrig_Coward_Scene()
    call InitTrig___Coward_Turns_Corner()
    call InitTrig___Coward_Meets_Grunt()
    call InitTrig___GruntSurprise_Attacked()
    call InitTrig___Ensnaree_Runs()
    call InitTrig___Ensnaree_Escapes()
    call InitTrig___Ensnarer_Attacked()
    call InitTrig_House_Collapse()
    call InitTrig___House_Collapsed()
    call InitTrig___Inhabitant_01_Escapes()
    call InitTrig___Inhabitant_02_Escapes()
    call InitTrig___Inhabitant_03_Escapes()
    call InitTrig_Pursuit_Scene()
    call InitTrig_Sound_Pursuit()
    call InitTrig_Sound_Pursuit2()
    call InitTrig_AbortPursuit()
    call InitTrig_VillagerDies()
    call InitTrig_Rescue_Footmen()
    call InitTrig_Remove_Footmen_Who_Die()
    call InitTrig_Timmy_Quest()
    call InitTrig_Timmy_Quest_Queue()
    call InitTrig_Player_Enters_Camp()
    call InitTrig_When_A_Gnoll_Dies()
    call InitTrig_Gnolls_are_defeated()
    call InitTrig_Abort_Gnolls_defeated()
    call InitTrig_If_Timmy_Dies()
    call InitTrig_If_Timmy_Dies_Queue()
    call InitTrig_If_Alicia_or_Children_Die()
    call InitTrig_If_Alicia_or_Children_Die_Queue()
    call InitTrig_Alicia_Dies_Stop_Sound()
    call InitTrig_Bandit_Scene()
    call InitTrig_Bandit_Scene_Queue()
    call InitTrig_Ledger_Quest()
    call InitTrig_Ledger_Quest_Queue()
    call InitTrig_Bandit01_End()
    call InitTrig_Bandit02_End()
    call InitTrig_Bandit03_End()
    call InitTrig_Bandit04_End()
    call InitTrig_Menag_End()
    call InitTrig_Menag_Region()
    call InitTrig_Camp_is_entered()
    call InitTrig_Menag_Dies()
    call InitTrig_Menag_Dies_Queue()
    call InitTrig_Ledger_Is_Picked_Up()
    call InitTrig_Return_Ledger()
    call InitTrig_Return_Ledger_Queue()
    call InitTrig_Abort_Return_Ledger()
    call InitTrig_Trigger_Orc_Cinematic()
    call InitTrig_Orc_Cinematic_Queue()
    call InitTrig_Orc_Cinematic_Cancel()
    call InitTrig_Stop_EndBoss_Animation()
    call InitTrig_DisableSlaveCollision()
    call InitTrig_DisableGruntCollision()
    call InitTrig_RemoveSlaves()
    call InitTrig_Show_Orc_Cinematic_Units()
    call InitTrig_Burn_the_Buildings()
    call InitTrig_Tag1()
    call InitTrig_Tag2()
    call InitTrig_Tag3()
    call InitTrig_Tag4()
    call InitTrig_Tag5()
    call InitTrig_RyanKilledRunBlakeRun()
    call InitTrig_BlakeKilledRunRyanRun()
    call InitTrig_Remove_Running_Child()
    call InitTrig_Initialize_Array()
    call InitTrig_Kill_Villager_Put_In_Array()
    call InitTrig_Remove_Villagers_During_Day()
    call InitTrig_Remove_Villagers_During_Day_Cycle_Unit()
    call InitTrig_Remove_Villagers_During_Day_Cycle_Type()
    call InitTrig_Ghosts_At_Night()
    call InitTrig_Ghosts_At_Night_Cycle()
    call InitTrig_AP_Graveyard_Location()
    call InitTrig_Waterfall_Sight()
    call InitTrig_Waterfall_Sight_Go_ByeBye()
    call InitTrig_Warlord_Driveby()
    call InitTrig_Warlord_Driveby2()
    call InitTrig_Warlord_Driveby3()
    call InitTrig_Warlord_Driveby4()
    call InitTrig_Warlord_Driveby5_Go_Home()
    call InitTrig_Warlord_Quest_Queue()
    call InitTrig_Warlord_Goes_Home()
    call InitTrig_Trigger_Victory()
    call InitTrig_Turn_off_quests()
    call InitTrig_Victory()
    call InitTrig_Victory_Cancel()
    call InitTrig_Defeat()
    call InitTrig_Next_Level_Run()
    call InitTrig_Victory_Cheat()
    call InitTrig_Defeat_Cheat()
endfunction

//===========================================================================
function RunInitializationTriggers takes nothing returns nothing
    call ConditionalTriggerExecute(gg_trg_Map_Initialization)
    call ConditionalTriggerExecute(gg_trg_Tag1)
    call ConditionalTriggerExecute(gg_trg_Initialize_Array)
endfunction

//***************************************************************************
//*
//*  Upgrades
//*
//***************************************************************************

function InitUpgrades_Player0 takes nothing returns nothing
    call SetPlayerTechMaxAllowed(Player(0), 'Rhme', 0)
    call SetPlayerTechMaxAllowed(Player(0), 'Rhra', 0)
    call SetPlayerTechMaxAllowed(Player(0), 'Rhaa', 0)
    call SetPlayerTechMaxAllowed(Player(0), 'Rhar', 0)
    call SetPlayerTechMaxAllowed(Player(0), 'Rhmi', 0)
    call SetPlayerTechMaxAllowed(Player(0), 'Rhac', 0)
    call SetPlayerTechMaxAllowed(Player(0), 'Rhss', 0)
    call SetPlayerTechMaxAllowed(Player(0), 'Rhde', 0)
    call SetPlayerTechMaxAllowed(Player(0), 'Rhan', 0)
    call SetPlayerTechMaxAllowed(Player(0), 'Rhpt', 0)
    call SetPlayerTechMaxAllowed(Player(0), 'Rhst', 0)
    call SetPlayerTechMaxAllowed(Player(0), 'Rhla', 0)
    call SetPlayerTechMaxAllowed(Player(0), 'Rhri', 0)
    call SetPlayerTechMaxAllowed(Player(0), 'Rhlh', 0)
    call SetPlayerTechMaxAllowed(Player(0), 'Rhse', 0)
    call SetPlayerTechMaxAllowed(Player(0), 'Rhsr', 0)
    call SetPlayerTechMaxAllowed(Player(0), 'Rome', 0)
    call SetPlayerTechMaxAllowed(Player(0), 'Rora', 0)
    call SetPlayerTechMaxAllowed(Player(0), 'Roaa', 0)
    call SetPlayerTechMaxAllowed(Player(0), 'Roar', 0)
    call SetPlayerTechMaxAllowed(Player(0), 'Romi', 0)
    call SetPlayerTechMaxAllowed(Player(0), 'Roac', 0)
    call SetPlayerTechMaxAllowed(Player(0), 'Ross', 0)
    call SetPlayerTechMaxAllowed(Player(0), 'Rows', 0)
    call SetPlayerTechMaxAllowed(Player(0), 'Rowt', 0)
    call SetPlayerTechMaxAllowed(Player(0), 'Rovs', 0)
    call SetPlayerTechMaxAllowed(Player(0), 'Rowd', 0)
    call SetPlayerTechMaxAllowed(Player(0), 'Rost', 0)
    call SetPlayerTechMaxAllowed(Player(0), 'Rolh', 0)
    call SetPlayerTechMaxAllowed(Player(0), 'Ronv', 0)
    call SetPlayerTechMaxAllowed(Player(0), 'Rosp', 0)
    call SetPlayerTechMaxAllowed(Player(0), 'Rhgb', 0)
    call SetPlayerTechMaxAllowed(Player(0), 'Rhfs', 0)
    call SetPlayerTechMaxAllowed(Player(0), 'Rwdm', 0)
    call SetPlayerTechMaxAllowed(Player(0), 'Ropg', 0)
    call SetPlayerTechMaxAllowed(Player(0), 'Robs', 0)
    call SetPlayerTechResearched(Player(0), 'Roen', 1)
    call SetPlayerTechMaxAllowed(Player(0), 'Rotr', 0)
endfunction

function InitUpgrades takes nothing returns nothing
    call InitUpgrades_Player0()
endfunction

//***************************************************************************
//*
//*  TechTree
//*
//***************************************************************************

function InitTechTree_Player0 takes nothing returns nothing
    call SetPlayerTechMaxAllowed(Player(0), 'opeo', 0)
    call SetPlayerTechMaxAllowed(Player(0), 'ogru', 0)
    call SetPlayerTechMaxAllowed(Player(0), 'orai', 0)
    call SetPlayerTechMaxAllowed(Player(0), 'otau', 0)
    call SetPlayerTechMaxAllowed(Player(0), 'ohun', 0)
    call SetPlayerTechMaxAllowed(Player(0), 'ocat', 0)
    call SetPlayerTechMaxAllowed(Player(0), 'okod', 0)
    call SetPlayerTechMaxAllowed(Player(0), 'owyv', 0)
    call SetPlayerTechMaxAllowed(Player(0), 'odoc', 0)
    call SetPlayerTechMaxAllowed(Player(0), 'oshm', 0)
    call SetPlayerTechMaxAllowed(Player(0), 'oeye', 0)
    call SetPlayerTechMaxAllowed(Player(0), 'otot', 0)
    call SetPlayerTechMaxAllowed(Player(0), 'oang', 0)
    call SetPlayerTechMaxAllowed(Player(0), 'Obla', 0)
    call SetPlayerTechMaxAllowed(Player(0), 'Ofar', 0)
    call SetPlayerTechMaxAllowed(Player(0), 'Otch', 0)
    call SetPlayerTechMaxAllowed(Player(0), 'ogre', 0)
    call SetPlayerTechMaxAllowed(Player(0), 'ostr', 0)
    call SetPlayerTechMaxAllowed(Player(0), 'ofrt', 0)
    call SetPlayerTechMaxAllowed(Player(0), 'oalt', 0)
    call SetPlayerTechMaxAllowed(Player(0), 'obar', 0)
    call SetPlayerTechMaxAllowed(Player(0), 'ofor', 0)
    call SetPlayerTechMaxAllowed(Player(0), 'otto', 0)
    call SetPlayerTechMaxAllowed(Player(0), 'osld', 0)
    call SetPlayerTechMaxAllowed(Player(0), 'obea', 0)
    call SetPlayerTechMaxAllowed(Player(0), 'otrb', 0)
    call SetPlayerTechMaxAllowed(Player(0), 'ohut', 0)
    call SetPlayerTechMaxAllowed(Player(0), 'olum', 0)
    call SetPlayerTechMaxAllowed(Player(0), 'Hblm', 0)
    call SetPlayerTechMaxAllowed(Player(0), 'Oshd', 0)
    call SetPlayerTechMaxAllowed(Player(0), 'Ucrl', 0)
    call SetPlayerTechMaxAllowed(Player(0), 'Ewar', 0)
endfunction

function InitTechTree_Player1 takes nothing returns nothing
    call SetPlayerTechMaxAllowed(Player(1), 'Hblm', 0)
    call SetPlayerTechMaxAllowed(Player(1), 'Oshd', 0)
    call SetPlayerTechMaxAllowed(Player(1), 'Ucrl', 0)
    call SetPlayerTechMaxAllowed(Player(1), 'Ewar', 0)
endfunction

function InitTechTree_Player2 takes nothing returns nothing
    call SetPlayerTechMaxAllowed(Player(2), 'Hblm', 0)
    call SetPlayerTechMaxAllowed(Player(2), 'Oshd', 0)
    call SetPlayerTechMaxAllowed(Player(2), 'Ucrl', 0)
    call SetPlayerTechMaxAllowed(Player(2), 'Ewar', 0)
endfunction

function InitTechTree takes nothing returns nothing
    call InitTechTree_Player0()
    call InitTechTree_Player1()
    call InitTechTree_Player2()
endfunction

//***************************************************************************
//*
//*  Players
//*
//***************************************************************************

function InitCustomPlayerSlots takes nothing returns nothing

    // Player 0
    call SetPlayerStartLocation(Player(0), 0)
    call ForcePlayerStartLocation(Player(0), 0)
    call SetPlayerColor(Player(0), ConvertPlayerColor(0))
    call SetPlayerRacePreference(Player(0), RACE_PREF_ORC)
    call SetPlayerRaceSelectable(Player(0), false)
    call SetPlayerController(Player(0), MAP_CONTROL_NEUTRAL)

    // Player 1
    call SetPlayerStartLocation(Player(1), 1)
    call ForcePlayerStartLocation(Player(1), 1)
    call SetPlayerColor(Player(1), ConvertPlayerColor(1))
    call SetPlayerRacePreference(Player(1), RACE_PREF_HUMAN)
    call SetPlayerRaceSelectable(Player(1), false)
    call SetPlayerController(Player(1), MAP_CONTROL_USER)

    // Player 2
    call SetPlayerStartLocation(Player(2), 2)
    call ForcePlayerStartLocation(Player(2), 2)
    call SetPlayerColor(Player(2), ConvertPlayerColor(2))
    call SetPlayerRacePreference(Player(2), RACE_PREF_HUMAN)
    call SetPlayerRaceSelectable(Player(2), false)
    call SetPlayerController(Player(2), MAP_CONTROL_NEUTRAL)

    // Player 8
    call SetPlayerStartLocation(Player(8), 3)
    call ForcePlayerStartLocation(Player(8), 3)
    call SetPlayerColor(Player(8), ConvertPlayerColor(8))
    call SetPlayerRacePreference(Player(8), RACE_PREF_HUMAN)
    call SetPlayerRaceSelectable(Player(8), false)
    call SetPlayerController(Player(8), MAP_CONTROL_NEUTRAL)

    // Player 9
    call SetPlayerStartLocation(Player(9), 4)
    call ForcePlayerStartLocation(Player(9), 4)
    call SetPlayerColor(Player(9), ConvertPlayerColor(9))
    call SetPlayerRacePreference(Player(9), RACE_PREF_HUMAN)
    call SetPlayerRaceSelectable(Player(9), false)
    call SetPlayerController(Player(9), MAP_CONTROL_NEUTRAL)

endfunction

function InitCustomTeams takes nothing returns nothing
    // Force: TRIGSTR_328
    call SetPlayerTeam(Player(1), 0)
    call SetPlayerTeam(Player(9), 0)

    // Force: TRIGSTR_051
    call SetPlayerTeam(Player(8), 1)

    // Force: TRIGSTR_032
    call SetPlayerTeam(Player(0), 2)

    // Force: TRIGSTR_049
    call SetPlayerTeam(Player(2), 3)

endfunction

function InitAllyPriorities takes nothing returns nothing

    call SetStartLocPrioCount(0, 2)
    call SetStartLocPrio(0, 0, 4, MAP_LOC_PRIO_HIGH)

    call SetStartLocPrioCount(2, 3)
    call SetStartLocPrio(2, 0, 0, MAP_LOC_PRIO_LOW)
    call SetStartLocPrio(2, 1, 4, MAP_LOC_PRIO_LOW)
endfunction

//***************************************************************************
//*
//*  Main Initialization
//*
//***************************************************************************

//===========================================================================
function main takes nothing returns nothing
    call SetCameraBounds(- 5120.0 + GetCameraMargin(CAMERA_MARGIN_LEFT), - 4992.0 + GetCameraMargin(CAMERA_MARGIN_BOTTOM), 4352.0 - GetCameraMargin(CAMERA_MARGIN_RIGHT), 4736.0 - GetCameraMargin(CAMERA_MARGIN_TOP), - 5120.0 + GetCameraMargin(CAMERA_MARGIN_LEFT), 4736.0 - GetCameraMargin(CAMERA_MARGIN_TOP), 4352.0 - GetCameraMargin(CAMERA_MARGIN_RIGHT), - 4992.0 + GetCameraMargin(CAMERA_MARGIN_BOTTOM))
    call SetDayNightModels("Environment\\DNC\\DNCLordaeron\\DNCLordaeronTerrain\\DNCLordaeronTerrain.mdl", "Environment\\DNC\\DNCLordaeron\\DNCLordaeronUnit\\DNCLordaeronUnit.mdl")
    call NewSoundEnvironment("Default")
    call SetAmbientDaySound("LordaeronSummerDay")
    call SetAmbientNightSound("LordaeronSummerNight")
    call SetMapMusic("Music", true, 0)
    call InitSounds()
    call CreateRegions()
    call CreateCameras()
    call InitUpgrades()
    call InitTechTree()
    call CreateAllDestructables()
    call CreateAllUnits()
    call InitBlizzard()


    call InitGlobals()
    call InitCustomTriggers()
    call RunInitializationTriggers()

endfunction

//***************************************************************************
//*
//*  Map Configuration
//*
//***************************************************************************

function config takes nothing returns nothing
    call SetMapName("TRIGSTR_043")
    call SetMapDescription("TRIGSTR_073")
    call SetPlayers(5)
    call SetTeams(5)
    call SetGamePlacement(MAP_PLACEMENT_USE_MAP_SETTINGS)

    call DefineStartLocation(0, 4864.0, - 4672.0)
    call DefineStartLocation(1, - 2880.0, 1984.0)
    call DefineStartLocation(2, 4864.0, - 4672.0)
    call DefineStartLocation(3, - 3712.0, - 192.0)
    call DefineStartLocation(4, 4864.0, - 4544.0)

    // Player setup
    call InitCustomPlayerSlots()
    call InitCustomTeams()
    call InitAllyPriorities()
endfunction




//Struct method generated initializers/callers:

